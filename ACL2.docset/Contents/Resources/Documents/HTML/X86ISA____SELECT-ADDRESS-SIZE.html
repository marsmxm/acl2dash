<html>
<head>
<meta charset="UTF-8">
<title>Select-address-size</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=X86ISA____SELECT-ADDRESS-SIZE">Click for Select-address-size in the Full Manual</a></h3>

<p>Address size of an instruction, in bytes.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(select-address-size proc-mode p4? x86) → address-size</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">p4?</span> — <font color="#606060">Guard <span class="v">(<a href="ACL2____BOOLEANP.html">booleanp</a> p4?)</span>.</font>
</dd> 
  <dd>
<span class="tt">x86</span> — <font color="#606060">Guard <span class="v">(x86p x86)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">address-size</span> — <font color="#606060">Type <span class="v">(<a href="ACL2____MEMBER-EQUAL.html">member-equal</a> address-size '(2 4 8))</span>.</font>
</dd> 
 
</dl></div> 
<p> 
   This is based on AMD manual, Dec'17, Volume 3, Table 1-3, 
   and AMD manual, Dec'17, Volume 2, Sections 4.7 and 4.8. 
   </p> 
   <p> 
   In 64-bit mode, the address size is 
   64 bits if there is no address override prefix, 
   32 bits if there is an address override prefix. 
   In 32-bit mode, the address size is 
   32 bits if either 
   (i) the default address size is 32 bits 
   and there is no address override prefix, or 
   (ii) the default address size is 16 bits 
   and there is an eddress override prefix; 
   otherwise, the address size is 16 bits. 
   In 32-bit mode, 
   the default address size is determined by the CS.D bit of the code segment: 
   32 bits if CS.D is 1, 16 bits if CS.D is 0. 
   </p> 
   <p> 
   The boolean argument of this function 
   indicates whether there is an override prefix or not. 
   </p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>select-address-size$inline</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 select-address-size$inline
 (proc-mode p4? x86)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :stobjs (x86)))
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____TYPE.html">type</a> (integer 0 4) proc-mode))
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____BOOLEANP.html">booleanp</a> p4?) (x86p x86))))
 (<a href="COMMON-LISP____CASE.html">case</a>
  proc-mode (0 (<a href="COMMON-LISP____IF.html">if</a> p4? 4 8))
  (otherwise
    (<a href="ACL2____B_A2.html">b*</a> (((<a href="COMMON-LISP____THE.html">the</a> (unsigned-byte 16) cs-attr)
          (seg-hidden-attri 1 x86))
         (cs.d (<a href="X86ISA____CODE-SEGMENT-DESCRIPTOR-ATTRIBUTESBITS-_E3D.html">code-segment-descriptor-attributesbits-&gt;d</a> cs-attr)))
        (<a href="COMMON-LISP____IF.html">if</a> (<a href="COMMON-LISP_____D3.html">=</a> cs.d 1)
            (<a href="COMMON-LISP____IF.html">if</a> p4? 2 4)
            (<a href="COMMON-LISP____IF.html">if</a> p4? 4 2))))))</pre> 
<p><b>Theorem: </b>return-type-of-select-address-size</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 return-type-of-select-address-size
 (<a href="ACL2____B_A2.html">b*</a> ((address-size (select-address-size$inline proc-mode p4? x86)))
     (<a href="ACL2____MEMBER-EQUAL.html">member-equal</a> address-size '(2 4 8)))
 :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>select-address-size-not-2-when-64-bit-modep</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> select-address-size-not-2-when-64-bit-modep
        (<a href="COMMON-LISP____NOT.html">not</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> 2 (<a href="X86ISA____SELECT-ADDRESS-SIZE.html">select-address-size</a> 0 p4? x86))))</pre> 

</body>
</html>
