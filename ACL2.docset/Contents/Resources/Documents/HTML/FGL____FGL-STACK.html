<html>
<head>
<meta charset="UTF-8">
<title>Fgl-stack</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=FGL____FGL-STACK">Click for Fgl-stack in the Full Manual</a></h3>

<p>Representation of the FGL interpreter stack.</p> 
 
<p>FGL stores the stack of its interpreter as a nested stobj <span class="v">stack</span> inside 
its <span class="v">interp-st</span> stobj.  But the stack may also be extracted as an ordinary 
ACL2 object of type <a href="FGL____MAJOR-STACK.html">major-stack</a>.  This topic offers an overview of how 
these work; specifics of each datatype are in their respective topics.</p> 
 
<p>A <a href="FGL____MAJOR-STACK.html">major-stack</a> is a nonempty list of <a href="FGL____MAJOR-FRAME.html">major-frame</a> objects.  Each 
such frame represents an entirely new scope for variables such as a function 
definition or rewrite rule application.  Each major-frame contains some 
debugging info, a variable bindings alist, and a <a href="FGL____MINOR-STACK.html">minor-stack</a>, which is a 
nonempty list of <a href="FGL____MINOR-FRAME.html">minor-frame</a> objects.  Each minor frame represents a 
lambda body within the larger context of the major frame.  It has its own 
bindings and debugging info, as well as a list of scratch objects representing 
arguments to be passed to subsequent function calls.</p> 
 
<p>The distinction between major and minor stack frames is subtle, especially 
given ACL2's insistence that lambdas bind all the variables found in their 
bodies.  The difference is that in FGL, when we encounter a lambda nesting, we 
preprocess it so as to ignore variables that are re-bound to themselves, 
instead keeping the current bindings and only adding to them.  On the other 
hand, when we apply a rewrite rule we enter a completely new namespace where 
initially only the variables of the unifying substitution are bound.  This lazy 
binding of lambdas allows us to support <a href="FGL____SYNTAX-BIND.html">syntax-bind</a> by allowing us to 
leave variables unbound until they are used in a nontrivial way: that is, 
passed into a function or bound to a different variable in a lambda.</p> 
 

</body>
</html>
