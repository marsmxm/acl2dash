<html>
<head>
<meta charset="UTF-8">
<title>Atj-tutorial-ACL2-values</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=JAVA____ATJ-TUTORIAL-ACL2-VALUES">Click for Atj-tutorial-ACL2-values in the Full Manual</a></h3>

<p>ATJ tutorial: Java Representation of the ACL2 Values.</p><p>In order to translate from ACL2 to Java, 
    there must be a Java representation of the ACL2 values. <a href="JAVA____ATJ-TUTORIAL-AIJ.html">AIJ</a> provides a default representation, 
    described in this tutorial page. 
    More advanced representations are discussed later.</p><h5>ACL2 Values</h5><p>The set of values of the ACL2 evaluation semantics 
    is the union of the sets depicted below: 
    (i) integers, recognized by <span class="tt"><a href="COMMON-LISP____INTEGERP.html">integerp</a></span>; 
    (ii) ratios, i.e. rationals that are not integers, 
    with no built-in recognizer 
    (the term `ratio' is used in <a href="https://www.cs.cmu.edu/Groups/AI/html/cltl/clm/node18.html" target="_blank"><nobr>Section 2.1.2 of the Common Lisp specification<img src="../Icon_External_Link.png" title="External link to https://www.cs.cmu.edu/Groups/AI/html/cltl/clm/node18.html"></nobr></a>); 
    (iii) complex rationals, recognized by <span class="tt"><a href="ACL2____COMPLEX-RATIONALP.html">complex-rationalp</a></span>; 
    (iv) characters, recognized by <span class="tt"><a href="COMMON-LISP____CHARACTERP.html">characterp</a></span>; 
    (v) strings, recognized by <span class="tt"><a href="COMMON-LISP____STRINGP.html">stringp</a></span>; 
    (vi) symbols, recognized by <span class="tt"><a href="COMMON-LISP____SYMBOLP.html">symbolp</a></span>; and 
    (vii) <span class="tt"><a href="COMMON-LISP____CONS.html">cons</a></span> pairs, recognized by <span class="tt"><a href="COMMON-LISP____CONSP.html">consp</a></span>. 
    Integers and ratios form the rationals, recognized by <span class="tt"><a href="COMMON-LISP____RATIONALP.html">rationalp</a></span>. 
    Rationals and complex rationals form the Gaussian rationals, 
    which are all the numbers in ACL2, 
    recognized by <span class="tt"><a href="ACL2____ACL2-NUMBERP.html">ACL2-numberp</a></span> 
    (this discussion does not apply to <a href="COMMON-LISP____REAL.html">ACL2(r)</a>). 
    The logical semantics of ACL2 allows additional values called `bad atoms', 
    and consequently <span class="tt"><a href="COMMON-LISP____CONS.html">cons</a></span> pairs 
    that may contain them directly or indirectly; 
    however, such values cannot be constructed in evaluation.</p><div class="ximg"><img src="../res/kestrel-java-atj-images/values.png"></div><h5>Java Classes</h5><p>AIJ represents ACL2 values 
    as immutable objects of class <span class="v">Acl2Value</span> and its subclasses 
    in the <a href="JAVA____ATJ-TUTORIAL-SIMPLIFIED-UML.html">simplified UML class diagram</a> below. 
    Each class in the diagram, except <span class="v">Acl2PackageName</span>, 
    corresponds to a set 
    in the picture of ACL2 values above. 
    The subset relationships in that picture 
    match the inheritance relationships in the UML diagram below. 
    The sets of values that are unions of other sets of values 
    correspond to abstract classes; 
    the other sets correspond to concrete classes. 
    All these classes are public, 
    except for the package-private ones for ratios and complex rationals: 
    ratios and complex rationals are built indirectly via AIJ's API, 
    by building 
    rationals that are not integers and numbers that are not rationals.</p><div class="ximg"><img src="../res/kestrel-java-atj-images/value-classes.png"></div><p>The information about the represented ACL2 values 
    is stored in fields of the non-abstract classes. 
    <span class="v">Acl2Integer</span> stores 
    the numeric value as a <span class="v">java.math.BigInteger</span>. 
    <span class="v">Acl2Ratio</span> stores 
    the numerator and denominator as <span class="v">Acl2Integer</span>s, 
    in reduced form 
    (i.e. their greatest common divisor is 1 
    and the denominator is greater than 1). 
    <span class="v">Acl2ComplexRational</span> stores 
    the real and imaginary parts as <span class="v">Acl2Rational</span>s. 
    <span class="v">Acl2Character</span> stores 
    the 8-bit code of the character as a <span class="v">char</span> below 256. 
    <span class="v">Acl2String</span> stores 
    the codes and order of the characters as a <span class="v">java.lang.String</span> 
    whose <span class="v">char</span>s are all below 256. 
    <span class="v">Acl2Symbol</span> stores 
    the symbol's package name as a <span class="v">Acl2PackageName</span> 
    (a wrapper of <span class="v">java.lang.String</span> 
    that enforces the ACL2 constraints on package names) 
    and the symbol's name as a <span class="v">Acl2String</span>. 
    <span class="v">Acl2ConsPair</span> stores the component <span class="v">Acl2Value</span>s. 
    All these fields are private, 
    thus encapsulating the internal representation choices 
    and enabling their localized modification. 
    ACL2 numbers, strings, and symbols have no preset limits, 
    but the underlying Lisp runtime may run out of memory. 
    Their Java representations (e.g. <span class="v">java.math.BigInteger</span>) 
    have very large limits, 
    whose exceedance could be regarded as running out of memory. 
    If needed, the Java representations could be changed 
    to overcome the current limits 
    (e.g. by using lists of <span class="v">java.math.BigInteger</span>s).</p><h5>Java Factory and Getter Methods</h5><p>The public classes for ACL2 values and package names 
    in the UML diagram above 
    provide public static factory methods to build objects of these classes. 
    For example, <span class="v">Acl2Character.make(<a href="COMMON-LISP____CHAR.html">char</a>)</span> 
    returns a <span class="v">Acl2Character</span> with the supplied argument as code, 
    throwing an exception if the argument is above 255. 
    As another example, <span class="v">Acl2ConsPair.make(Acl2Value,Acl2Value)</span> 
    returns a <span class="v">Acl2ConsPair</span> with the supplied arguments as components. 
    Some classes provide overloaded variants, 
    e.g. <span class="v">Acl2Integer.make(int)</span> 
    and <span class="v">Acl2Integer.make(java.math.BigInteger)</span>. 
    All these classes provide no public Java constructors, 
    thus encapsulating the details of object creation and re-use, 
    which is essentially transparent to external code 
    because these objects are immutable.</p><p>The public classes for ACL2 values in the UML diagram above 
    provide public instance getter methods 
    to unbuild (i.e. extract information from) instances of these classes. 
    For example, <span class="v">Acl2Character.getJavaChar()</span> 
    returns the code of the character 
    as a <span class="v">char</span> that is always below 256. 
    As another example, 
    <span class="v">Acl2ConsPair.getCar()</span> and <span class="v">Acl2ConsPair.getCdr()</span> 
    return the component <span class="v">Acl2Value</span>s of the <span class="tt"><a href="COMMON-LISP____CONS.html">cons</a></span> pair. 
    Some classes provide variants, 
    e.g. <span class="v">Acl2Integer.getJavaInt()</span> 
    (which throws an exception if the integer does not fit in an <span class="v">int</span>) 
    and <span class="v">Acl2Integer.getJavaBigInteger()</span>.</p><p>Thus, AIJ provides a public API to 
    build and unbuild Java representations of ACL2 values: 
    the API consists of the factory and getter methods described above. 
    When talking about AIJ, 
    this tutorial calls `build' and `unbuild' 
    what is often called `construct' and `destruct' in functional programming, 
    because in object-oriented programming the latter terms 
    may imply object allocation and deallocation, 
    which is not necessarily what the AIJ API does.</p><h5>More Information</h5><p>For more details on AIJ's implementation and API of ACL2 values, 
    see the Javadoc in AIJ's Java code.</p><div class="box"></div><p><b>Previous:</b> <a href="JAVA____ATJ-TUTORIAL-SIMPLIFIED-UML.html">About the Simplified UML Class Diagrams</a></p><p><b>Next:</b> <a href="JAVA____ATJ-TUTORIAL-DEEP-SHALLOW.html">Deep and Shallow Embedding Approaches</a></p>
</body>
</html>
