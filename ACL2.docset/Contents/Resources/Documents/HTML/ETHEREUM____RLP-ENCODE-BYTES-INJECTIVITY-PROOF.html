<html>
<head>
<meta charset="UTF-8">
<title>Rlp-encode-bytes-injectivity-proof</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ETHEREUM____RLP-ENCODE-BYTES-INJECTIVITY-PROOF">Click for Rlp-encode-bytes-injectivity-proof in the Full Manual</a></h3>

<p>Injectivity of <span class="tt"><a href="ETHEREUM____RLP-ENCODE-BYTES.html">rlp-encode-bytes</a></span>, 
          over the encodable byte arrays.</p><p>We prove, as a preliminary lemma, that 
     if two byte arrays are encodable 
     (i.e. the error result of <span class="tt"><a href="ETHEREUM____RLP-ENCODE-BYTES.html">rlp-encode-bytes</a></span> is <span class="v">nil</span> for both), 
     and their encodings are the same 
     (i.e. the bytes results of <span class="tt"><a href="ETHEREUM____RLP-ENCODE-BYTES.html">rlp-encode-bytes</a></span> are identical), 
     then the two byte arrays are identical. 
     Then we use the lemma to prove the theorem in a form that 
     omits the <span class="tt"><a href="ACL2____BYTE-LISTP.html">byte-listp</a></span> hypotheses 
     and weakens the equality to <span class="tt"><a href="ACL2____BYTE-LIST-EQUIV.html">byte-list-equiv</a></span> 
     (i.e. equality of <span class="tt"><a href="ACL2____BYTE-LIST-FIX.html">byte-list-fix</a></span> applied to both). 
     The theorem readily subsumes the lemma 
     because of the fixing theorems for <span class="tt"><a href="ACL2____BYTE-LIST.html">byte-list</a></span>, 
     but attempting to prove the theorem directly 
     (instead of via the lemma first) fails.</p><p>The lemma is proved automatically, 
     by unfolding <span class="tt"><a href="ETHEREUM____RLP-ENCODE-BYTES.html">rlp-encode-bytes</a></span> 
     and letting ACL2 handle all the combinations of the encoding cases. 
     Critically, the proof for 
     the case in which both byte arrays are encoded with a big endian length 
     uses the rule <span class="v">equal-of-appends-decompose</span> 
     to reduce the equality of the two encodings 
     to the equality of the parts of the encodings after the lengths 
     (these parts are the byte arrays being encoded); 
     the hypothesis of this rule, 
     namely that the lengths of the two big endian lengths are the same, 
     is relieved from the equality 
     between the first byte of the two encodings.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Theorem: </b>rlp-encode-bytes-injective</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> rlp-encode-bytes-injective
        (<a href="ACL2____IMPLIES.html">implies</a> (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP____NOT.html">not</a> (<a href="ACL2____MV-NTH.html">mv-nth</a> 0 (<a href="ETHEREUM____RLP-ENCODE-BYTES.html">rlp-encode-bytes</a> x)))
                      (<a href="COMMON-LISP____NOT.html">not</a> (<a href="ACL2____MV-NTH.html">mv-nth</a> 0 (<a href="ETHEREUM____RLP-ENCODE-BYTES.html">rlp-encode-bytes</a> y))))
                 (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="ACL2____MV-NTH.html">mv-nth</a> 1 (<a href="ETHEREUM____RLP-ENCODE-BYTES.html">rlp-encode-bytes</a> x))
                               (<a href="ACL2____MV-NTH.html">mv-nth</a> 1 (<a href="ETHEREUM____RLP-ENCODE-BYTES.html">rlp-encode-bytes</a> y)))
                        (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="ACL2____BYTE-LIST-FIX.html">byte-list-fix</a> x)
                               (<a href="ACL2____BYTE-LIST-FIX.html">byte-list-fix</a> y)))))</pre> 

</body>
</html>
