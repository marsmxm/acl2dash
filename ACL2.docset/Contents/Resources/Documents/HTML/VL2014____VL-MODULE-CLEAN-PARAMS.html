<html>
<head>
<meta charset="UTF-8">
<title>Vl-module-clean-params</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=VL2014____VL-MODULE-CLEAN-PARAMS">Click for Vl-module-clean-params in the Full Manual</a></h3>

<p>Identify and remove useless parameters from a module.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(vl-module-clean-params x) → (mv new-x useless)</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">x</span> — <font color="#606060">Guard <span class="v">(<a href="VL2014____VL-MODULE-P.html">vl-module-p</a> x)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">new-x</span> — Updated module, with useless parameter declarations removed.<br>    <font color="#606060">Type <span class="v">(<a href="VL2014____VL-MODULE-P.html">vl-module-p</a> new-x)</span>, given the <a href="ACL2____GUARD.html">guard</a>.</font>
</dd> 
<dd>
<span class="tt">useless</span> — Structure recording which parameters were useless, if applicable.<br>    <font color="#606060">Type <span class="v">(<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="VL2014____VL-USELESS-PARAMS-P.html">vl-useless-params-p</a> useless) (<a href="COMMON-LISP____IF.html">if</a> useless t nil))</span>, given the <a href="ACL2____GUARD.html">guard</a>.</font>
</dd> 
 
</dl></div> 
<p>This is only one part of parameter cleaning.  To safely remove the 
parameters, we must not only delete them from the module itself, but also 
eliminate the appropriate parameters from all instances of the module 
throughout the module list.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>vl-module-clean-params</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 vl-module-clean-params (x)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="VL2014____VL-MODULE-P.html">vl-module-p</a> x)))
 (<a href="COMMON-LISP____LET.html">let</a>
  ((__function__ 'vl-module-clean-params))
  (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
  (<a href="ACL2____B_A2.html">b*</a> (((when (<a href="VL2014____VL-MODULE-_E3HANDS-OFFP.html">vl-module-&gt;hands-offp</a> x))
        (<a href="ACL2____MV.html">mv</a> x nil))
       (paramdecls (<a href="VL2014____VL-MODULE-_E3PARAMDECLS.html">vl-module-&gt;paramdecls</a> x))
       ((when (<a href="COMMON-LISP____NOT.html">not</a> paramdecls)) (<a href="ACL2____MV.html">mv</a> x nil))
       (param-names (<a href="VL2014____VL-PARAMDECLLIST-_E3NAMES.html">vl-paramdecllist-&gt;names</a> paramdecls))
       (all-used-names (<a href="VL2014____VL-EXPRLIST-NAMES.html">vl-exprlist-names</a> (<a href="VL2014____VL-MODULE-ALLEXPRS.html">vl-module-allexprs</a> x)))
       (useful-param-names
            (<a href="ACL2____INTERSECTION-EQUAL.html">intersection-equal</a> all-used-names param-names))
       (useless-param-names
            (<a href="ACL2____SET-DIFFERENCE-EQUAL.html">set-difference-equal</a> param-names useful-param-names))
       ((unless useless-param-names)
        (<a href="ACL2____MV.html">mv</a> x nil))
       (useless-param-pos
            (<a href="VL2014____VL-POSITIONS-OF-PARAMS.html">vl-positions-of-params</a> useless-param-names paramdecls))
       (useless-struct
            (<a href="VL2014____MAKE-VL-USELESS-PARAMS.html">make-vl-useless-params</a> :positions useless-param-pos
                                    :names useless-param-names))
       (new-paramdecls
            (<a href="VL2014____VL-DELETE-PARAMDECLS.html">vl-delete-paramdecls</a> useless-param-names paramdecls))
       (x-prime (<a href="VL2014____CHANGE-VL-MODULE.html">change-vl-module</a> x
                                  :paramdecls new-paramdecls)))
      (<a href="ACL2____MV.html">mv</a> x-prime useless-struct))))</pre> 
<p><b>Theorem: </b>vl-module-p-of-vl-module-clean-params.new-x</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> vl-module-p-of-vl-module-clean-params.new-x
        (<a href="ACL2____IMPLIES.html">implies</a> (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____FORCE.html">force</a> (<a href="VL2014____VL-MODULE-P.html">vl-module-p</a> x)))
                 (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> ?new-x ?useless)
                       (<a href="VL2014____VL-MODULE-CLEAN-PARAMS.html">vl-module-clean-params</a> x)))
                     (<a href="VL2014____VL-MODULE-P.html">vl-module-p</a> new-x)))
        :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>return-type-of-vl-module-clean-params.useless</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> return-type-of-vl-module-clean-params.useless
        (<a href="ACL2____IMPLIES.html">implies</a> (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____FORCE.html">force</a> (<a href="VL2014____VL-MODULE-P.html">vl-module-p</a> x)))
                 (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> ?new-x ?useless)
                       (<a href="VL2014____VL-MODULE-CLEAN-PARAMS.html">vl-module-clean-params</a> x)))
                     (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="VL2014____VL-USELESS-PARAMS-P.html">vl-useless-params-p</a> useless)
                            (<a href="COMMON-LISP____IF.html">if</a> useless t nil))))
        :rule-classes :rewrite)</pre> 

</body>
</html>
