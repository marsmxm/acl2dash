<html>
<head>
<meta charset="UTF-8">
<title>Parallelism-at-the-top-level</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____PARALLELISM-AT-THE-TOP-LEVEL">Click for Parallelism-at-the-top-level in the Full Manual</a></h3>

<p>Parallel execution in the ACL2 top-level loop</p><p>This <a href="COMMON-LISP____DOCUMENTATION.html">documentation</a> topic relates to the experimental 
 extension of ACL2 supporting parallel execution and proof; see <a href="ACL2____PARALLELISM.html">parallelism</a>.</p> 
 
 <p>Calls of parallelism primitives made explicitly in the ACL2 top-level loop, 
 as opposed to inside function bodies, will never cause parallel execution. 
 Such calls will either execute with serial execution or will cause an error; 
 see <a href="ACL2____SET-PARALLEL-EXECUTION.html">set-parallel-execution</a>.  For a way around this restriction, see 
 <a href="ACL2____TOP-LEVEL.html">top-level</a>.</p> 
 
 <p>Consider for example the following call of <span class="tt"><a href="ACL2____PARGS.html">pargs</a></span> in the ACL2 
 top-level loop.  Instead of executing <span class="v">pargs</span>, ACL2 macroexpands away this 
 call, leaving us with serial execution of the arguments to the <span class="tt"><a href="COMMON-LISP____CONS.html">cons</a></span> 
 call, or else causes an error (see <a href="ACL2____SET-PARALLEL-EXECUTION.html">set-parallel-execution</a>).  If there 
 is no error, then</p> 
 
 <pre class="code">(<a href="ACL2____PARGS.html">pargs</a> (<a href="COMMON-LISP____CONS.html">cons</a> (expensive-fn-1 4) (expensive-fn-2 5)))</pre> 
 
 <p>expands into:</p> 
 
 <pre class="code">(<a href="COMMON-LISP____CONS.html">cons</a> (expensive-fn-1 4) (expensive-fn-2 5))</pre> 
 
 <p>One trivial way to enable parallel execution of a form is to surround it 
 with a call to macro <a href="ACL2____TOP-LEVEL.html">top-level</a>.  Consider the following example.</p> 
 
 <pre class="code">(<a href="ACL2____TOP-LEVEL.html">top-level</a> (<a href="ACL2____PARGS.html">pargs</a> (<a href="COMMON-LISP____CONS.html">cons</a> (expensive-fn-1 4) (expensive-fn-2 5))))</pre> 
 
 <p>Then in an executable image that supports parallel execution  see 
 <a href="ACL2____COMPILING-ACL2P.html">compiling-ACL2p</a> for instructions on how to build such an executable 
  <span class="v">(expensive-fn-1 4)</span> and <span class="v">(expensive-fn-2 5)</span> can evaluate in 
 parallel.</p> 
 
 <p>A second way to enable parallel execution of a form is to place it inside a 
 function body.  For example, consider the following definition.</p> 
 
 <pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a> foo (x y)
  (<a href="ACL2____PARGS.html">pargs</a> (<a href="COMMON-LISP____CONS.html">cons</a> (expensive-fn-1 x) (expensive-fn-2 y))))</pre> 
 
 <p>Then in an executable image that supports parallel execution, submission of 
 the form <span class="v">(foo 4 5)</span> can cause parallel execution of <span class="v">(expensive-fn-1
 4)</span> and <span class="v">(expensive-fn-2 5)</span>.</p> 
 
 <p>Note that <a href="ACL2____GUARD.html">guard</a>s need not be verified in order to obtain <a href="ACL2____PARALLEL.html">parallel</a> execution.  The only restrictions on parallel execution are to use 
 an ACL2 executable supporting it, to avoid calling parallelism primitives 
 directly in the top-level loop, to have sufficient resources (especially, 
 threads) available, and to avoid explicitly disabling parallel execution (see 
 <a href="ACL2____SET-PARALLEL-EXECUTION.html">set-parallel-execution</a>).</p>
</body>
</html>
