<html>
<head>
<meta charset="UTF-8">
<title>Define-pc-macro</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____DEFINE-PC-MACRO">Click for Define-pc-macro in the Full Manual</a></h3>

<p>Define a proof-builder macro command</p><p>A call of <span class="v">define-pc-macro</span> defines a sort of macro, which is a 
 tactic that generates <a href="ACL2____PROOF-BUILDER.html">proof-builder</a> instructions.  This topic contains 
 basic information about how to use this utility.  For somewhat sophisticated, 
 but commented, examples, see the <a href="ACL2____COMMUNITY-BOOK.html">community-book</a> 
 <span class="v">books/kestrel/utilities/proof-builder-macros.lisp</span> and associated tests in 
 the same directory, <span class="v">proof-builder-macros-tests.lisp</span>.</p> 
 
 <p>We begin with the following example.</p> 
 
 <pre class="code">(<a href="ACL2____DEFINE-PC-MACRO.html">define-pc-macro</a> ib (<a href="COMMON-LISP_____62OPTIONAL.html">&amp;optional</a> term)
  (<a href="ACL2____VALUE.html">value</a>
   (<a href="COMMON-LISP____IF.html">if</a> term
       `(then (<a href="ACL2____INDUCT.html">induct</a> ,term) bash)
     `(then induct bash))))</pre> 
 
 <p>The example above captures a common paradigm: one attempts to prove the 
 current goal by inducting and then simplifying the resulting goals.  (See 
 <a href="ACL2____PROOF-BUILDER-COMMANDS.html">proof-builder-commands</a> for documentation of the command <span class="v">then</span>, 
 which is itself a pc-macro command, and commands <span class="v">induct</span> and <span class="v">bash</span>.) 
 Rather than issuing <span class="v">(then induct bash)</span>, or worse yet issuing <span class="v">induct</span> 
 and then issuing <span class="v">bash</span> for each resulting goal, the above definition of 
 <span class="v">ib</span> would let you issue <span class="v">ib</span> and get the same effect.</p> 
 
 <pre class="code">General Form:
(<a href="ACL2____DEFINE-PC-MACRO.html">define-pc-macro</a> cmd args doc-string dcl ... dcl body)</pre> 
 
 <p>where <span class="v">cmd</span> is the name of the pc-macro than you want to define, 
 <span class="v">args</span> is its list of formal parameters.  <span class="v">Args</span> may include lambda-list 
 keywords <span class="v">&amp;optional</span> and <span class="v">&amp;rest</span>; see <a href="ACL2____MACRO-ARGS.html">macro-args</a>, but note that 
 here, <span class="v">args</span> may not include <span class="v">&amp;key</span> or <span class="v">&amp;whole</span>.</p> 
 
 <p>The value of <span class="v">body</span> should be an <a href="ACL2____ERROR-TRIPLE.html">error-triple</a>, of the form <span class="v">(<a href="ACL2____MV.html">mv</a>
 erp xxx state)</span> for some <span class="v">erp</span> and <span class="v">xxx</span>.  If <span class="v">erp</span> is <span class="v">nil</span>, 
 then <span class="v">xxx</span> is handed off to the interactive proof-builder's instruction 
 interpreter.  Otherwise, evaluation typically halts.</p>
</body>
</html>
