<html>
<head>
<meta charset="UTF-8">
<title>Mmx-registers-reads-and-writes</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=X86ISA____MMX-REGISTERS-READS-AND-WRITES">Click for Mmx-registers-reads-and-writes in the Full Manual</a></h3>

<p>Functions to read/write into the MMX registers</p><p>From Section 12.2, Intel Manual, Volume 3 (System 
  Programming):</p> 
 
  <p>The MMX state consists of eight 64-bit registers (MM0 
through MM7). These registers are aliased to the low 64-bits (bits 0 
through 63) of floating-point registers R0 through R7 (see Figure 
12-1). Note that the MMX registers are mapped to the physical 
locations of the floating-point registers (R0 through R7), not to 
the relative locations of the registers in the floating-point register 
stack (ST0 through ST7). As a result, the MMX register mapping is 
fixed and is not affected by value in the Top Of Stack (TOS) field 
in the floating-point status word (bits 11 through 13).</p> 
 
<p>From Section 12.2, Intel Manual, Volume 3 (System Programming)</p>: 
 
<p>When a value is written into an MMX register using an MMX 
instruction, the value also appears in the corresponding 
floating-point register in bits 0 through 63. Likewise, when a 
floating-point value written into a floating-point register by a x87 
FPU, the low 64 bits of that value also appears in a the corresponding 
MMX register.</p> 
 
<p>The execution of MMX instructions have several side effects on 
the x87 FPU state contained in the floating-point registers, the x87 
FPU tag word, and the x87 FPU status word. These side effects are as 
follows:</p> 
 
<p>* When an MMX instruction writes a value into an MMX register, 
at the same time, bits 64 through 79 of the corresponding 
floating-point register are set to all 1s.</p> 
 
<p>* When an MMX instruction (other than the EMMS instruction) is 
executed, each of the tag fields in the x87 FPU tag word is set to 00B 
(valid). (See also Section 12.2.1, Effect of MMX, x87 FPU, FXSAVE, 
and FXRSTOR Instructions on the x87 FPU Tag Word.)</p> 
 
<p>* When the EMMS instruction is executed, each tag field in the 
x87 FPU tag word is set to 11B (empty).</p> 
 
<p>* Each time an MMX instruction is executed, the TOS value is 
set to 000B.  Execution of MMX instructions does not affect the other 
bits in the x87 FPU status word (bits 0 through 10 and bits 14 and 
15) or the contents of the other x87 FPU registers that comprise the 
x87 FPU state (the x87 FPU control word, instruction pointer, data 
pointer, or opcode registers).</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>mmx$inline</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a> mmx$inline (i x86)
       (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :stobjs (x86)))
       (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____TYPE.html">type</a> (integer 0 7) i))
       (<a href="COMMON-LISP____LET.html">let</a> ((reg80 (<a href="COMMON-LISP____THE.html">the</a> (unsigned-byte 80)
                         (fp-datai i x86))))
            (<a href="ACL2____MBE.html">mbe</a> :logic (<a href="ACL2____PART-SELECT.html">part-select</a> reg80 :low 0 :width 64)
                 :exec (<a href="COMMON-LISP____LOGAND.html">logand</a> 18446744073709551615 reg80))))</pre> 
<p><b>Theorem: </b>n64p-mmx</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 n64p-mmx
 (<a href="ACL2____UNSIGNED-BYTE-P.html">unsigned-byte-p</a> 64 (<a href="X86ISA____MMX.html">mmx</a> i x86))
 :rule-classes
 (:rewrite
  (:type-prescription
      :corollary (<a href="ACL2____NATP.html">natp</a> (<a href="X86ISA____MMX.html">mmx</a> i x86))
      :hints
      (("Goal" :in-theory '(<a href="ACL2____UNSIGNED-BYTE-P.html">unsigned-byte-p</a> integer-range-p natp))))
  (:linear
   :corollary (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP_____C3_D3.html">&lt;=</a> 0 (<a href="X86ISA____MMX.html">mmx</a> i x86))
                   (<a href="COMMON-LISP_____C3.html">&lt;</a> (<a href="X86ISA____MMX.html">mmx</a> i x86) 18446744073709551616))
   :hints
   (("Goal"
        :in-theory '(<a href="ACL2____UNSIGNED-BYTE-P.html">unsigned-byte-p</a> integer-range-p (:e expt)))))))</pre> 
<p><b>Function: </b>!mmx$inline</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 !mmx$inline (i v x86)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :stobjs (x86)))
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____TYPE.html">type</a> (integer 0 7) i)
          (<a href="COMMON-LISP____TYPE.html">type</a> (unsigned-byte 64) v))
 (<a href="COMMON-LISP____LET.html">let</a>
    ((val80 (<a href="ACL2____MBE.html">mbe</a> :logic (<a href="ACL2____PART-INSTALL.html">part-install</a> 65535 v :low 64 :high 79)
                 :exec (<a href="COMMON-LISP____THE.html">the</a> (unsigned-byte 80)
                            (<a href="COMMON-LISP____LOGIOR.html">logior</a> 1208907372870555465154560 v)))))
    (!fp-datai i val80 x86)))</pre> 
<p><b>Theorem: </b>x86p-!mmx</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> x86p-!mmx
        (<a href="ACL2____IMPLIES.html">implies</a> (x86p x86)
                 (x86p (<a href="X86ISA_____12MMX.html">!mmx</a> i v x86))))</pre> 
<p><b>Function: </b>mmx-instruction-updates$inline</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a> mmx-instruction-updates$inline (x86)
       (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :stobjs (x86)))
       (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard t))
       (<a href="ACL2____B_A2.html">b*</a> ((x86 (!fp-tag 0 x86))
            (fp-status (fp-status x86))
            (x86 (!fp-status (<a href="X86ISA_____12FP-STATUSBITS-_E3TOP.html">!fp-statusbits-&gt;top</a> 0 fp-status)
                             x86)))
           x86))</pre> 
<p><b>Theorem: </b>x86p-mmx-instruction-updates</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> x86p-mmx-instruction-updates
        (<a href="ACL2____IMPLIES.html">implies</a> (x86p x86)
                 (x86p (<a href="X86ISA____MMX-INSTRUCTION-UPDATES.html">mmx-instruction-updates</a> x86))))</pre> 

</body>
</html>
