<html>
<head>
<meta charset="UTF-8">
<title>With-live-state</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____WITH-LIVE-STATE">Click for With-live-state in the Full Manual</a></h3>

<p>Allow a reference to <span class="v">state</span> in raw Lisp</p><p>The macro <span class="v">with-live-state</span> is an advanced feature that very few 
 users will need (basically, only system hackers).  Indeed, it is essentially 
 <a href="ACL2____UNTOUCHABLE.html">untouchable</a>, defined with <span class="tt"><a href="ACL2____DEFMACRO-UNTOUCHABLE.html">defmacro-untouchable</a></span>; <a href="ACL2____REMOVE-UNTOUCHABLE.html">remove-untouchable</a> for how to enable calling <span class="v">with-live-state</span> in the ACL2 
 loop.</p> 
 
 <pre class="code">Example Form:
(<a href="ACL2____WITH-LIVE-STATE.html">with-live-state</a> (<a href="ACL2____ASSIGN.html">assign</a> y 3))

General form:
(<a href="ACL2____WITH-LIVE-STATE.html">with-live-state</a> form)</pre> 
 
 <p>where form is an arbitrary form with a free reference to the variable 
 <span class="tt"><a href="ACL2____STATE.html">state</a></span>.</p> 
 
 <p>Logically, <span class="v">(<a href="ACL2____WITH-LIVE-STATE.html">with-live-state</a> FORM)</span> macroexpands to <span class="v">FORM</span>.  However, 
 in raw Lisp it expands to:</p> 
 
 <pre class="code">(<a href="COMMON-LISP____LET.html">let</a> ((<a href="ACL2____STATE.html">state</a> *the-live-state*))
  FORM)</pre> 
 
 <p>If a form that mentions the variable <span class="tt"><a href="ACL2____STATE.html">state</a></span> might be executed in raw 
 Lisp  that is, either outside the ACL2 loop or in raw mode (see <a href="ACL2____SET-RAW-MODE.html">set-raw-mode</a>)  then the surrounding the form with <span class="v">with-live-state</span> 
 as shown above can avoid potential warnings or (much less likely) errors. 
 Note however that if <span class="v">state</span> is lexically bound to a state other than the 
 usual ``live'' state, surprising behavior may occur when evaluating a call of 
 <span class="v">with-live-state</span> in raw Lisp or raw mode (either directly by evaluation or 
 at compile time), because <span class="v">with-live-state</span> will override that lexical 
 binding of <span class="tt"><a href="ACL2____STATE.html">state</a></span> by a lexical binding of <span class="v">state</span> to the usual 
 ``live'' state.</p>
</body>
</html>
