<html>
<head>
<meta charset="UTF-8">
<title>Note-8-2</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____NOTE-8-2">Click for Note-8-2 in the Full Manual</a></h3>

<p>ACL2 Version  8.2 (May, 2019) Notes</p><p>NOTE!  New users can ignore these release notes, because the <a href="COMMON-LISP____DOCUMENTATION.html">documentation</a> has been updated to reflect all changes that are recorded 
 here.</p> 
 
 <p>Below we roughly organize the changes to ACL2 since Version 8.1 into the 
 following categories of changes: existing features, new features, heuristic 
 and efficiency improvements, bug fixes, changes at the system level, Emacs 
 support, and experimental versions.  Each change is described in just one 
 category, though of course many changes could be placed in more than one 
 category.</p> 
 
 <p>Note that only ACL2 system changes are listed below.  See also <a href="ACL2____NOTE-8-2-BOOKS.html">note-8-2-books</a> for a summary of changes made to the ACL2 Community Books 
 since ACL2 8.1, including the build system.  Also note that with each release, 
 it is typical that the value of constant <span class="tt"><a href="ACL2_____A2ACL2-EXPORTS_A2.html">*ACL2-exports*</a></span> has been 
 extended, and that some built-in functions that were formerly in <span class="v">:</span><span class="tt"><a href="ACL2____PROGRAM.html">program</a></span> mode are now <a href="ACL2____GUARD.html">guard</a>-verified <span class="v">:</span><span class="tt"><a href="ACL2____LOGIC.html">logic</a></span> mode 
 functions.</p> 
 
 <h3>Changes to Existing Features</h3> 
 
 <p>The built-in function <span class="tt"><a href="ACL2____FIX-TRUE-LIST.html">fix-true-list</a></span> is now a macro that expands to 
 a new built-in function, <span class="tt"><a href="ACL2____TRUE-LIST-FIX.html">true-list-fix</a></span>, whose definition follows the 
 efficient definition of <a href="ACL2____LIST-FIX.html">list-fix</a> that was in <a href="ACL2____COMMUNITY-BOOK.html">community-book</a> 
 <span class="v">books/std/lists/list-fix.lisp</span>.  In that book, <a href="ACL2____LIST-FIX.html">list-fix</a> is now a 
 macro that expands to <span class="v">true-list-fix</span>.  The use of macro-aliases (see <a href="ACL2____ADD-MACRO-ALIAS.html">add-macro-alias</a>) should generally make this change backward compatible for 
 users of <span class="tt"><a href="ACL2____LIST-FIX.html">list-fix</a></span>.  Thanks to Mihir Mehta for taking the lead on 
 implementing these changes and to Jared Davis for permission to integrate 
 definitions and documentation from his Kookamara books into the ACL2 
 sources.</p> 
 
 <p>Made some improvements pertaining to <span class="tt"><a href="ACL2____APPLY_42.html">apply$</a></span>:</p> 
 
 <ul> 
 
 <li>A quoted lambda object that may ultimately be passed as the ``function'' 
 for a call of <span class="tt"><a href="ACL2____APPLY_42.html">apply$</a></span> may now have a <span class="tt"><a href="COMMON-LISP____DECLARE.html">declare</a></span> form.  See also 
 the discussion of <span class="v">lambda$</span> below.</li> 
 
 <li>The macro <span class="tt"><a href="ACL2____WARRANT.html">warrant</a></span> no longer causes an error for the 800+ ACL2 
 primitives that are built into the definition of <span class="tt"><a href="ACL2____APPLY_42.html">apply$</a></span>.  Instead, it 
 simply avoids generating (needless) conjuncts for those primitives.</li> 
 
 <li>The rewriter can now evaluate ground terms that involve calls of <span class="tt"><a href="ACL2____APPLY_42.html">apply$</a></span> or <span class="tt"><a href="ACL2____BADGE.html">badge</a></span> on user-defined function symbols.  Note that 
 correctness of such an evaluation depends on the truth of corresponding 
 warrants, which will be <a href="ACL2____FORCE.html">force</a>d if not known.</li> 
 
 <li>The event formerly named <span class="v">def-warrant</span> is now <span class="tt"><a href="ACL2____DEFWARRANT.html">defwarrant</a></span>.  This 
 event may now be <a href="ACL2____REDUNDANT.html">redundant</a>; hence <span class="tt"><a href="ACL2____DEFUN_42.html">defun$</a></span> may also be 
 redundant.</li> 
 
 <li>The <span class="v">:</span><span class="tt"><a href="ACL2____ARGS.html">args</a></span> command now prints the <a href="ACL2____BADGE.html">badge</a> and <a href="ACL2____WARRANT.html">warrant</a> for a function, and it avoids printing a package prefix in the case 
 of <a href="ACL2____UNKNOWN-CONSTRAINTS.html">unknown-constraints</a>.</li> 
 
 <li>The optimization for caching ``tame compliant'' lambdas, introduced in the 
 preceding release (see <a href="ACL2____NOTE-8-1.html">note-8-1</a>), has been improved.</li> 
 
 </ul> 
 
 <p>It is no longer illegal to supply an abstract stobj as the so-called 
 ``foundational'' (formerly ``concrete'') stobj in a <span class="tt"><a href="ACL2____DEFABSSTOBJ.html">defabsstobj</a></span> event. 
 Thanks to Sol Swords for initiating a discussion leading to this 
 enhancement.</p> 
 
 <p>Calls of the function <span class="v">synp</span> were formerly required to result from 
 macroexpansion of <span class="tt"><a href="ACL2____SYNTAXP.html">syntaxp</a></span> or <span class="tt"><a href="ACL2____BIND-FREE.html">bind-free</a></span> calls, or at least 
 nearly so.  That restriction has been lifted, although the restrictions on 
 calls of <span class="v">synp</span>, <span class="v">syntaxp</span>, and <span class="v">bind-free</span> remain for hypotheses of 
 rules of class <span class="v">:</span><span class="tt"><a href="ACL2____REWRITE.html">rewrite</a></span>, <span class="v">:</span><span class="tt"><a href="ACL2____DEFINITION.html">definition</a></span>, and 
 <span class="v">:</span><span class="tt"><a href="ACL2____LINEAR.html">linear</a></span>, or resulting from evaluation of hypotheses of 
 <span class="v">:</span><span class="tt"><a href="ACL2____META.html">meta</a></span> rules.  Thanks to Sol Swords for requesting this change, so 
 that <span class="tt"><a href="ACL2____DEFEVALUATOR.html">defevaluator</a></span> forms can include <span class="v">synp</span>.</p> 
 
 <p>For calls of <span class="v">:</span><span class="tt"><a href="ACL2____PSO.html">pso</a></span> and related utilities (<span class="v">:</span><span class="tt"><a href="ACL2____PSO_12.html">pso!</a></span>, 
 <span class="v">:</span><span class="tt"><a href="ACL2____PSOF.html">psof</a></span>, and <span class="v">:</span><span class="tt"><a href="ACL2____PSOG.html">psog</a></span>), the Time reported in the summary 
 is now the original time, not time related to running <span class="v">:</span><span class="tt"><a href="ACL2____PSO.html">pso</a></span>.</p> 
 
 <p>The macro <span class="v">delete-assoc</span> has been renamed <span class="tt"><a href="ACL2____REMOVE1-ASSOC.html">remove1-assoc</a></span>, to 
 reflect more clearly that at most one pair is removed, and also for 
 consistency with Common Lisp nomenclature (where ``delete'' operations are 
 generally destructive and ``remove'' operations are not).  Moreover, other 
 functions and macros whose name has prefix <span class="v">"DELETE-ASSOC"</span> have been 
 similarly renamed to have prefix <span class="v">"REMOVE1-ASSOC"</span>; for example, 
 <span class="v">delete-assoc-eq</span> has been renamed <span class="v">remove1-assoc-eq</span>.  (The old 
 <span class="v">"DELETE-ASSOC"</span>-based names still exist as macros — indeed, as 
 macro-aliases for their renamed versions (see <a href="ACL2____ADD-MACRO-ALIAS.html">add-macro-alias</a>) — 
 but those may be deleted in the future.)  Analogous functions and macros have 
 been introduced that remove all pairs with a given key, rather than only one; 
 see <a href="ACL2____REMOVE-ASSOC.html">remove-assoc</a>.  (These and related theorems formerly appeared in the 
 <a href="ACL2____COMMUNITY-BOOK.html">community-book</a>, <span class="v">books/centaur/misc/remove-assoc.lisp</span>.)  Thanks to 
 Alessandro Coglio for a query and subsequent discussion leading to these 
 changes.</p> 
 
 <p>The <a href="ACL2____SYSTEM-UTILITIES.html">system-utilities</a> <span class="v">all-ffn-symbs</span> and <span class="v">all-ffn-symbs-lst</span> 
 are now defined just as macro abbreviations for calls of system utility 
 <span class="v">all-fnnames1</span>, thus eliminating some source code duplication.  We may 
 deprecate <span class="v">all-ffn-symbs</span> and <span class="v">all-ffn-symbs-lst</span> in the future.</p> 
 
 <p>The implementation of <span class="tt"><a href="ACL2____VERIFY-TERMINATION.html">verify-termination</a></span> has been improved so that 
 it no longer can generate (expand to) the form <span class="v">(<a href="ACL2____VALUE-TRIPLE.html">value-triple</a> :redundant)</span>. 
 Redundancy is now handled for <span class="v">verify-termination</span> by checking redundancy 
 of the generated <span class="tt"><a href="COMMON-LISP____DEFUN.html">defun</a></span> form.  For an example that failed before this 
 change, see <a href="ACL2____COMMUNITY-BOOK.html">community-book</a> 
 <span class="v">books/system/tests/verify-termination/top.lisp</span>.</p> 
 
 <p>Improvements have been made to the <a href="ACL2____SUMMARY.html">summary</a> printed on conclusion of 
 an event.  It had been possible to have duplicates in the <span class="v">"Hint-events"</span> 
 field of the summary; that has been fixed.  Also, the handling of <span class="v">:</span><span class="tt"><a href="ACL2____INSTRUCTIONS.html">instructions</a></span> within <a href="ACL2____HINTS.html">hints</a> has changed in the following two ways, to be 
 consistent with the use of <span class="v">:instructions</span> at the top level (rather than 
 within <span class="v">:hints</span>).  The <span class="v">"Rules"</span> and <span class="v">"Hint-events"</span> fields of 
 the summaries incorporate information from calls of the <a href="ACL2____PROOF-BUILDER.html">proof-builder</a>. 
 Also, the <span class="v">"Hint-events"</span> field no longer contains <span class="v">(:CLAUSE-PROCESSOR
 PROOF-BUILDER-CL-PROC)</span>.</p> 
 
 <p>A new variable, <span class="v">TRACE-LEVEL</span>, may be used in calls of <span class="v">trace$</span>; see 
 <a href="ACL2____TRACE_42.html">trace$</a>.  This replaces the use of the state global variable of the same 
 name, which has been eliminated, thus avoiding an error involving 
 <span class="v">TRACE-LEVEL</span> that is mentioned below.</p> 
 
 <p><span class="tt"><a href="ACL2____DEFUN-SK.html">Defun-sk</a></span> is now sensitive to the <a href="ACL2____DEFAULT-VERIFY-GUARDS-EAGERNESS.html">default-verify-guards-eagerness</a>, and guard verification is always delayed to 
 near the end of the generated event to avoid failures due to the small theory 
 present at <span class="v">defun</span> time.  Thanks to Alessandro Coglio for emails on leading 
 to these improvements.  Some additional small tweaks have been made to 
 <span class="v">defun-sk</span>, in particular to check that there are not two or more distinct 
 values associated with <span class="tt"><a href="ACL2____XARGS.html">xargs</a></span> keywords <span class="v">:verify-guards</span>, 
 <span class="v">:non-executable</span>, or (even if not distinct) <span class="v">:guard-hints</span>.</p> 
 
 <p>The function <span class="tt"><a href="ACL2____INTEGER-RANGE-P.html">integer-range-p</a></span> now uses a <span class="tt"><a href="COMMON-LISP____TYPE.html">type</a></span> <a href="COMMON-LISP____DECLARATION.html">declaration</a> in place of the <span class="v">:</span><span class="tt"><a href="ACL2____GUARD.html">guard</a></span>, which may slightly improve 
 efficiency.  Thanks to Eric Smith for suggesting this possibility.</p> 
 
 <p>The macro, <span class="tt"><a href="ACL2____THM.html">thm</a></span>, may now be used in event contexts, in particular in 
 calls of <span class="tt"><a href="ACL2____ENCAPSULATE.html">encapsulate</a></span> and <span class="tt"><a href="COMMON-LISP____PROGN.html">progn</a></span> and in <a href="ACL2____BOOKS.html">books</a>.  (See 
 <a href="ACL2____EMBEDDED-EVENT-FORM.html">embedded-event-form</a>.)  Thanks to Ruben Gamboa for an email that led to 
 this change.</p> 
 
 <p>The <span class="v">:</span><span class="tt"><a href="ACL2____PF.html">pf</a></span> command now does a more complete job of showing 
 induction schemes for induction rules.  (Some corresponding code cleanup has 
 also been done.)</p> 
 
 <p><a href="ACL2____WARNINGS.html">Warnings</a> about using <a href="ACL2____ENABLE.html">enable</a>d rules have been improved.  Now, 
 when using an <a href="ACL2____EXECUTABLE-COUNTERPART.html">executable-counterpart</a> rule (which, admittedly, is 
 unusual; it is equivalent to using the corresponding <a href="ACL2____DEFINITION.html">definition</a> rule), 
 the warning will correctly recommend disabling the definition rule instead of 
 the executable-counterpart rule.</p> 
 
 <p>The logical definition of <span class="v">read-file-into-string2</span> (in support of <span class="tt"><a href="ACL2____READ-FILE-INTO-STRING.html">read-file-into-string</a></span>) has been simplified, and no longer involves <a href="ACL2____UNTOUCHABLE.html">untouchable</a> functions symbols.  Thanks to Mihir Mehta for a query that led to 
 this enhancement.</p> 
 
 <p>The built-in function <span class="tt"><a href="ACL2____TAKE.html">take</a></span> now has a recursive definition, exactly 
 along the lines of the old theorem <span class="v">take-redefinition</span> from the community 
 book <span class="v">books/std/lists/take.lisp</span> (written by Jared Davis); this theorem has 
 now been removed.  The definition of <span class="v">take</span> uses <span class="tt"><a href="ACL2____MBE.html">mbe</a></span>, where the 
 <span class="v">:exec</span> component calls <span class="v">first-n-ac</span> as before for execution efficiency. 
 We thank Mihir Mehta for providing this enhancement, including updates to the 
 books.</p> 
 
 <h3>New Features</h3> 
 
 <p>A new macro, <span class="tt"><a href="ACL2____LOOP_42.html">loop$</a></span>, is an ACL2 version of the Common Lisp <span class="v">loop</span> 
 macro.</p> 
 
 <p>A new construct, <span class="v">lambda$</span>, may be used in place of <span class="v">lambda</span> to be 
 passed as the ``function'' for a call of <span class="tt"><a href="ACL2____APPLY_42.html">apply$</a></span>.  The syntactic 
 requirements for such uses of <span class="v">lambda$</span> are much less strict than for 
 quoted <span class="v">lambda</span> objects; in particular, the body need not be in translated 
 form (see <a href="ACL2____TERM.html">term</a>).</p> 
 
 <p>A new macro, <span class="tt"><a href="ACL2____PARTIAL-ENCAPSULATE.html">partial-encapsulate</a></span>, allows one to introduce 
 constrained functions without specifying all of the <a href="ACL2____CONSTRAINT.html">constraint</a>s.  This 
 functionality was already available using a trust tag, by way of a rather 
 convoluted application of <span class="tt"><a href="ACL2____DEFINE-TRUSTED-CLAUSE-PROCESSOR.html">define-trusted-clause-processor</a></span>; however, 
 <span class="tt"><a href="ACL2____PARTIAL-ENCAPSULATE.html">partial-encapsulate</a></span> may be used without a trust tag.  See <a href="ACL2____PARTIAL-ENCAPSULATE.html">partial-encapsulate</a>, which in particular points to an example of typical 
 usage, in <span class="v">books/demos/partial-encapsulate.lisp</span>.  Thanks to Sol Swords for 
 requesting such a capability.</p> 
 
 <p>There is now, by default, a limit of 9 on the nesting depth of inductions; 
 see <a href="ACL2____INDUCTION-DEPTH-LIMIT.html">induction-depth-limit</a> and to modify this default, see <a href="ACL2____SET-INDUCTION-DEPTH-LIMIT.html">set-induction-depth-limit</a>.</p> 
 
 <p>A new <a href="ACL2____EVISC-TUPLE.html">evisc-tuple</a>, the <span class="tt"><a href="ACL2____BRR-EVISC-TUPLE.html">brr-evisc-tuple</a></span>, controls printing 
 inside the break-rewrite loop.  See <a href="ACL2____BRR-EVISC-TUPLE.html">brr-evisc-tuple</a> and <a href="ACL2____SET-EVISC-TUPLE.html">set-evisc-tuple</a>.</p> 
 
 <p>Many of the <a href="ACL2____BRR-COMMANDS.html">brr-commands</a> now abbreviate (``eviscerate'') by default 
 using the new <span class="tt"><a href="ACL2____BRR-EVISC-TUPLE.html">brr-evisc-tuple</a></span> (see above), and for each for those a 
 corresponding command with suffix ``+'' print in full.  For example, such 
 commands include <span class="v">:path</span> and <span class="v">:path+</span>; see <a href="ACL2____BRR-COMMANDS.html">brr-commands</a> for the 
 full list of commands.  Thanks to Stephen Westfold and others at the 2018 
 Developer's Workshop for discussing this issue.</p> 
 
 <p>A new signature is legal for <span class="tt"><a href="ACL2____CLAUSE-PROCESSOR.html">clause-processor</a></span>s, to support the 
 return of rules and event names to be printed in the summary.  See <a href="ACL2____MAKE-SUMMARY-DATA.html">make-summary-data</a>.</p> 
 
 <p><span class="tt"><a href="ACL2____APPLY_42.html">Apply$</a></span> now handles functions that return multiple values.  This has 
 widespread ramifications.  The structure of badges has changed.  There is no 
 longer an ``authorization-flag'' and there is now an ``out-arity'' slot in the 
 badge.  See <a href="ACL2____BADGE.html">badge</a>.  Every badged non-primitive function symbol now has 
 a warrant.  If <span class="v">fn</span> is a warranted function symbol and returns more than 
 one result then <span class="v">(<a href="ACL2____APPLY_42.html">apply$</a> 'fn ...)</span> returns a list of the results, just as 
 <span class="v">fn</span> does in the logic.  See <span class="tt"><a href="ACL2____APPLY_42.html">apply$</a></span>.  The warrant of a multi-valued 
 function is just like that for a single-valued function except that <span class="tt"><a href="ACL2____MV-LIST.html">mv-list</a></span> is used to coerce the output of the multi-valued function to a list. 
 See <span class="tt"><a href="ACL2____WARRANT.html">warrant</a></span>.  All <span class="v">LAMBDA</span> objects and <span class="tt"><a href="ACL2____LAMBDA_42.html">lambda$</a></span> expressions 
 must be single-valued, but can use multi-valued functions to compute that 
 value.</p> 
 
 <h3>Heuristic and Efficiency Improvements</h3> 
 
 <p><span class="tt"><a href="ACL2____MAKE-EVENT.html">Make-event</a></span> expansions have often been reduced in size.  (Technical 
 note: <span class="v">record-expansion</span> has been inserted only on expansions done directly 
 under <span class="tt"><a href="ACL2____ENCAPSULATE.html">encapsulate</a></span> events, and some changes have also been made in how 
 and when <a href="ACL2____LOCAL.html">local</a> events are elided from expansions.)  The reduction in 
 total sizes of <span class="v">.cert</span> files for a complete (``everything'') regression was 
 8.8%, though in some cases the reduction was substantially larger: for 
 example, the size of <span class="v">books/centaur/fty/tests/deftranssum.cert</span> was reduced 
 from 22,474,113 bytes to 16,910,530 bytes, a reduction of nearly 25%.</p> 
 
 <p>A tweak to the rewriter can significantly speed up the use of 
 hypothesis-free <a href="ACL2____META.html">meta</a> rules on large terms.  Thanks to Mertcan Temel for 
 sending an example that motivated this change, whose time was cut from 67 
 seconds to 19 seconds.</p> 
 
 <p>Some small optimizations have been made for the generation of 
 executable-counterpart (so-called ``*1*'') code (see <a href="ACL2____EVALUATION.html">evaluation</a>).</p> 
 
 <p>It has long been the case that certain prover routines, including handling 
 of output from <a href="ACL2____META.html">meta</a> functions, transformed results into so-called 
 ``quote-normal form'', where for example the <a href="ACL2____TERM.html">term</a> <span class="v">(<a href="COMMON-LISP____CONS.html">cons</a> '3 '4)</span> is 
 replaced by <span class="v">(<a href="COMMON-LISP____QUOTE.html">quote</a> (3 . 4))</span>.  Now, that transformation avoids recurring 
 inside calls of <span class="tt"><a href="ACL2____HIDE.html">hide</a></span>.  We thank Mertcan Temel, who had a class of 
 examples that motivated this change.  One such example took 856.27 seconds of 
 `prove' time before this change, but only 270.14 seconds after this change, 
 thus eliminating 68.5% of the time.</p> 
 
 <p>Proofs involving very large terms could be slowed down by checking those 
 terms for calls of <span class="tt"><a href="COMMON-LISP____IF.html">if</a></span>, in support of reporting <a href="ACL2____SPLITTER.html">splitter</a>s of 
 type if-intro.  That check is now limited by avoiding subterms that are calls 
 of <span class="tt"><a href="ACL2____HIDE.html">hide</a></span>.  Thanks to Mertcan Temel for supplying examples, one of which 
 exhibited a proof time of 302.06 seconds that was reduced to 123.57 seconds 
 with this change, and thanks to Sol Swords and Alessandro Coglio for helpful 
 comments on possible enhancements.</p> 
 
 <h3>Bug Fixes</h3> 
 
 <p>Fixed a bug, probably a soundness bug (though we haven't tried to prove 
 <span class="v">nil</span> by exploiting it).  The bug is in the computation of the 
 ``immediate-canonical-ancestors'' of a function symbol, which is used in the 
 implementations of <a href="ACL2____MEMOIZATION.html">memoization</a> and <span class="tt"><a href="ACL2____DEFATTACH.html">defattach</a></span>, as well as in 
 interactions between attachments and both <span class="tt"><a href="ACL2____DEFAXIOM.html">defaxiom</a></span> events and 
 <span class="v">:</span><span class="tt"><a href="ACL2____META.html">meta</a></span> rules.  Thanks to Sol Swords for pointing out this bug and 
 presenting a helpful example.</p> 
 
 <p>Fixed three <a href="ACL2____PROOF-BUILDER.html">proof-builder</a> bugs:</p> 
 
 <ul> 
 
 <li>Fixed the proof-builder command, <span class="v">dv</span> (see <a href="ACL2-PC____DV.html">ACL2-pc::dv</a>), 
 for diving into calls of <span class="tt"><a href="COMMON-LISP____LIST.html">list</a></span> and <span class="tt"><a href="COMMON-LISP____LIST_A2.html">list*</a></span>.</li> 
 
 <li>Fixed a bug in the proof-builder command, <span class="v">geneqv</span>.  Thanks to Shilpi 
 Goel for reporting this bug with an example.</li> 
 
 <li>The proof-builder numeric ``diving'' commands <span class="v">1</span>, <span class="v">2</span>, <span class="v">3</span>, 
 etc. — and more generally, the <span class="v">dv</span> command — were broken when 
 the current subterm is of the form <span class="v">(<a href="COMMON-LISP____IF.html">if</a> 't .. ..)</span>.  This has been fixed. 
 Thanks to Keonho Lee for reporting this bug.</li> 
 
 </ul> 
 
 <p>Eliminated a hard error labeled as ``Implementation error'' that could 
 occur when submitting a <span class="v">:</span><span class="tt"><a href="ACL2____CONGRUENCE.html">congruence</a></span> rule during the second pass 
 of <span class="tt"><a href="ACL2____ENCAPSULATE.html">encapsulate</a></span> or the local incompatibility check in Step 3 of <span class="tt"><a href="ACL2____CERTIFY-BOOK.html">certify-book</a></span>.  The error occurred when the equivalence relation of the rule 
 had been defined locally, hence was missing during that second pass or local 
 incompatibility check.  Now, a useful ordinary (``soft'') error occurs, with a 
 useful message.  Thanks to Nathan Guermond for reporting this bug with a 
 helpful example.</p> 
 
 <p>It had been possible to enter an infinite loop after certain errors 
 involving <a href="ACL2____WORMHOLE.html">wormhole</a>s and state global variables; now, a clean error 
 occurs instead.  The specific error motivating this change involved the 
 combination of both tracing certain system functions (for example, 
 <span class="v">pop-accp-fn</span>) and calling <span class="tt"><a href="ACL2____ACCUMULATED-PERSISTENCE.html">accumulated-persistence</a></span>.  That specific 
 error has been eliminated by the change to <span class="tt"><a href="ACL2____TRACE_42.html">trace$</a></span> involving variable 
 <span class="v">TRACE-LEVEL</span> that is mentioned in an item above.</p> 
 
 <p>Fixed a bogus error produced by <span class="v">defchoose</span> forms containing unused 
 variables with <span class="v">ignorable</span> declarations.  Also eliminated an extra warning 
 in the case of more than one bound variable with at least one of them unused, 
 which could occur after <span class="v">(<a href="ACL2____SET-IGNORE-OK.html">set-ignore-ok</a> :warn)</span> has been evaluated.  Thanks 
 to Sol Swords for finding these bugs and for supplying code that we installed 
 to fix them.</p> 
 
 <p>Fixed an inefficiency in book certification due to calling <span class="tt"><a href="ACL2____FAST-ALIST-FREE-ON-EXIT.html">fast-alist-free-on-exit</a></span> on the wrong objects.  Thanks to Sol Swords for 
 pointing out this problem.</p> 
 
 <p>The <span class="v">make TAGS</span> command could fail to do a proper check that the 
 <span class="v">etags</span> program is installed, resulting in a failure when attempting to 
 build an ACL2 executable.  This has been fixed.  Thanks to Johannes 
 Altmanninger for reporting this problem in GitHub Issue #955.</p> 
 
 <p>When a function that calls <span class="tt"><a href="ACL2____APPLY_42.html">apply$</a></span> (or <span class="tt"><a href="ACL2____APPLY_42-USERFN.html">apply$-userfn</a></span>, <span class="tt"><a href="ACL2____BADGE.html">badge</a></span>, or <span class="tt"><a href="ACL2____BADGE-USERFN.html">badge-userfn</a></span>) has been <a href="ACL2____MEMOIZE.html">memoize</a>d with a non-<span class="v">nil</span> 
 value for argument <span class="v">:aokp</span>, its memo table may need to be flushed when 
 removing a <a href="ACL2____BADGE.html">badge</a>.  (Such removal typically occurs by undoing a call of 
 <span class="tt"><a href="ACL2____DEFUN_42.html">defun$</a></span> or <span class="tt"><a href="ACL2____DEFWARRANT.html">defwarrant</a></span>, perhaps because they are <a href="ACL2____LOCAL.html">local</a> to 
 an <span class="tt"><a href="ACL2____ENCAPSULATE.html">encapsulate</a></span> event or to a book.)  However, such flushing was not 
 being done.  That has been fixed.  See new <a href="ACL2____COMMUNITY-BOOK.html">community-book</a> 
 <span class="v">books/system/tests/apply-with-memoization.lisp</span> for examples.  Among the 
 changes made to the source files that are related to this fix: the ``Essay on 
 Memoization with Attachments'' has been enhanced to discuss the implementation 
 of such flushing; and functions <span class="v">doppelganger-apply$-userfn</span> and 
 <span class="v">doppelganger-badge$-userfn</span> (formerly called <span class="v">concrete-apply$-userfn</span> 
 and <span class="v">concrete-badge$-userfn</span>), which are still not advertised, are now 
 introduced with <span class="tt"><a href="ACL2____PARTIAL-ENCAPSULATE.html">partial-encapsulate</a></span> (hence have unknown constraints) 
 and are now <a href="ACL2____UNTOUCHABLE.html">untouchable</a>.</p> 
 
 <h3>Changes at the System Level</h3> 
 
 <p>The <a href="COMMON-LISP____DOCUMENTATION.html">documentation</a> topic, <a href="ACL2____SYSTEM-UTILITIES.html">system-utilities</a>, is now about only 
 utilities that pertain to the ACL2 system implementation, rather than 
 arbitrary built-in utilities.  Thus, each of the following now has its own 
 topic, rather than being described in <a href="ACL2____SYSTEM-UTILITIES.html">system-utilities</a>.  (Thanks to 
 Alessandro Coglio for suggesting this reorganization.)</p> 
 
 <ul> 
 <li><span class="tt"><a href="ACL2____ALIST-KEYS-SUBSETP.html">alist-keys-subsetp</a></span></li> 
 <li><span class="tt"><a href="ACL2____ALIST-TO-DOUBLETS.html">alist-to-doublets</a></span></li> 
 <li><span class="tt"><a href="ACL2____CONS-COUNT-BOUNDED.html">cons-count-bounded</a></span></li> 
 <li><span class="tt"><a href="ACL2____EVENS.html">evens</a></span></li> 
 <li><span class="tt"><a href="ACL2____KEYWORD-LISTP.html">keyword-listp</a></span></li> 
 <li><span class="tt"><a href="ACL2____MERGE-SORT-LEXORDER.html">merge-sort-lexorder</a></span></li> 
 <li><span class="tt"><a href="ACL2____ODDS.html">odds</a></span></li> 
 <li><span class="tt"><a href="ACL2____PACKN.html">packn</a></span></li> 
 <li><span class="tt"><a href="ACL2____PACKN-POS.html">packn-pos</a></span></li> 
 <li><span class="tt"><a href="ACL2____PAIRLIS-X2.html">pairlis-x2</a></span></li> 
 <li><span class="tt"><a href="ACL2____PAIRLIS-X1.html">pairlis-x1</a></span></li> 
 </ul> 
 
 <p>Documentation pertaining to <span class="tt"><a href="ACL2____APPLY_42.html">apply$</a></span> and related topics has been 
 extended significantly.</p> 
 
 <p>(GCL only) Eliminated compiler output (by setting GCL raw Lisp variables 
 <span class="v">*compile-verbose*</span> and <span class="v">*load-verbose*</span> to <span class="v">nil</span>).</p> 
 
 <p>A new documentation topic, <a href="ACL2____EFFICIENCY.html">efficiency</a>, suggests some ways to speed 
 up proofs and evaluation.  The ACL2 community is encouraged to extend (and 
 more generally, improve) this topic!</p> 
 
 <p>(LispWorks only) Bytes allocated are now reported in LispWorks (formerly, 
 only in CCL and SBCL) by <span class="tt"><a href="ACL2____TIME_42.html">time$</a></span> and <span class="tt"><a href="ACL2____MEMSUM.html">memsum</a></span>.</p> 
 
 <p>A new documentation topic, <a href="ACL2____MAKE-EVENT-EXAMPLE-3.html">make-event-example-3</a>, explains the new 
 implementation of <span class="tt"><a href="ACL2____THM.html">thm</a></span>, thus providing insight into several common 
 implementation techniques used with <span class="tt"><a href="ACL2____MAKE-EVENT.html">make-event</a></span>.</p> 
 
 <p>A new documentation topic, <a href="ACL2____RULE-CLASSES-INTRODUCTION.html">rule-classes-introduction</a>, provides a 
 basic guide to which sorts of rules to create from your theorems.  Thanks to 
 Mihir Mehta for encouraging the development of this topic.</p> 
 
 <p>Fixed ``<span class="v">make STATS</span>'' (which is invoked by ``<span class="v">make DOC</span>'') to 
 generate a result file <span class="v">doc/acl2-code-size.txt</span> that gives accurate 
 statistics on code size on Linux.  (The relevant <span class="v">grep</span> commands in file 
 <span class="v">doc/create-acl2-code-size</span> needed the <span class="v">-a</span> option on Linux.)</p> 
 
 <p>Updated the CCL installation instructions formerly at :DOC ccl-updates. 
 The topic is now <a href="ACL2____CCL-INSTALLATION.html">ccl-installation</a>.  This now replaces the installation 
 instructions file <span class="v">installation/ccl.html</span>; thus, the ACL2 community is now 
 welcome to improve these instructions.  Thanks to Eric Smith for discussion 
 that led to this change and to Keshav Kini and Alessandro Coglio for helpful 
 feedback.</p> 
 
 <p>The makefile target <span class="v">certify-books</span> has been deprecated in both 
 <span class="v">GNUmakefile</span> and <span class="v">books/GNUmakefile</span>.  Thanks to the acl2-books email 
 list (in particular we got feedback from Alessandro Coglio, Shilpi Goel, David 
 Rager, Eric Smith, and Sol Swords, all helpful) for working through this 
 issue.</p> 
 
 <p>A message is now printed at when loading file <span class="v">~/acl2-init.lsp</span> at 
 startup.</p> 
 
 <h3>EMACS Support</h3> 
 
 <p>Fixed the <a href="ACL2____ACL2-DOC.html">ACL2-doc</a> browser so that it can handle topic names with 
 the single-quote (<span class="v">'</span>) and comma (<span class="v">,</span>) characters, by escaping them.</p> 
 
 <p>Fixed Emacs support for the the <a href="ACL2____PROOF-BUILDER.html">proof-builder</a> dive command (see 
 <a href="ACL2-PC____DIVE.html">ACL2-pc::dive</a>), <span class="v">control-t control-d</span>, to eliminate trailing zeros, 
 since those are (and have been) disallowed by that command.</p> 
 
 <p>A new <span class="tt"><a href="ACL2____ACL2-DOC.html">ACL2-doc</a></span> command is the question-mark character (<span class="v">?</span>), 
 which goes to a page with one-line command summaries.  Thanks to Warren Hunt 
 for a request leading to this enhancement.</p> 
 
 <h3>Experimental Versions</h3> 
 
 
</body>
</html>
