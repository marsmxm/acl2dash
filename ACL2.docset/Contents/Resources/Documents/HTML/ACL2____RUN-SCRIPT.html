<html>
<head>
<meta charset="UTF-8">
<title>Run-script</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____RUN-SCRIPT">Click for Run-script in the Full Manual</a></h3>

<p>Run a script.</p><p><span class="v">Run-script</span> is a utility for testing evaluation of the forms in 
 a given file, to check that the output is as expected.  The forms need not be 
 embedded event forms (see <a href="ACL2____EVENTS.html">events</a>), and they need not all evaluate 
 successfully; for example, a <span class="tt"><a href="ACL2____THM.html">thm</a></span> form may produce a failed proof 
 attempt.</p> 
 
 <p>General form:</p> 
 
 <pre class="code">(<a href="ACL2____RUN-SCRIPT.html">run-script</a> NAME
            :inhibited-summary-types i-s-t  ; default '(time steps)
            :inhibit-output-lst      i-o-l  ; default '(<a href="ACL2____PROOF-TREE.html">proof-tree</a>)
            :ld-error-action         action ; default ':continue
            )</pre> 
 
 <p>where the keyword arguments are evaluated. 
 For information on the keyword arguments, see <span class="tt"><a href="ACL2____SET-INHIBITED-SUMMARY-TYPES.html">set-inhibited-summary-types</a></span>, 
 <span class="tt"><a href="ACL2____SET-INHIBIT-OUTPUT-LST.html">set-inhibit-output-lst</a></span>, and <span class="tt"><a href="ACL2____LD-ERROR-ACTION.html">ld-error-action</a></span>.</p> 
 
 <p>Example form:</p> 
 
 <pre class="code">(<a href="ACL2____RUN-SCRIPT.html">run-script</a> "mini-proveall")</pre> 
 
 <p>When you call <span class="v">(<a href="ACL2____RUN-SCRIPT.html">run-script</a> NAME)</span>, the forms in <span class="v">NAME-input.lsp</span> 
 are evaluated and a transcript is written to <span class="v">NAME-log.out</span>. 
 Forms that are <a href="ACL2____COMMAND.html">command</a>s change the logical world.</p> 
 
 <p>To use <span class="v">run-script</span> for regression testing, you will need 
 to create three files in addition to the input file, as described below. 
 For an example, see the files <span class="v">books/demos/mini-proveall-*.*</span> in 
 the <a href="ACL2____COMMUNITY-BOOKS.html">community-books</a>; there, <span class="v">NAME</span> is <span class="v">mini-proveall</span>.</p> 
 
 <ul> 
 
 <li>
<span class="v">NAME-input.lsp</span> — the file of forms to be evaluated</li> 
 
 <li>
<span class="v">NAME-book.acl2</span> — a file containing the following, where the 
 indicated zero or more <span class="tt"><a href="ACL2____INCLUDE-BOOK.html">include-book</a></span> forms are exactly those that are 
 in <span class="v">NAME-input.lsp</span> (note that the form <span class="v">(<a href="ACL2____UBU.html">ubu</a> 1)</span> can perhaps be omitted 
 but is needed in some cases, e.g., see 
 <span class="v">books/projects/paco/books/proveall-book.acl2</span>) 
 
 <pre class="code">(<a href="ACL2____INCLUDE-BOOK.html">include-book</a> "tools/run-script" :dir :system)
(<a href="ACL2____RUN-SCRIPT.html">run-script</a> "NAME") ; optionally add keyword arguments
(<a href="ACL2____UBU.html">ubu</a> 1)

; Help dependency scanner.
#||
(depends-on "NAME-log.txt")
(depends-on "NAME-input.lsp")
(<a href="ACL2____INCLUDE-BOOK.html">include-book</a> ...)
(<a href="ACL2____INCLUDE-BOOK.html">include-book</a> ...)
...
||#</pre>
</li> 
 
 <li>
<span class="v">NAME-book.lisp</span> — a small file containing only these two forms: 
 
 <pre class="code">(<a href="COMMON-LISP____IN-PACKAGE.html">in-package</a> "ACL2")
(<a href="ACL2____ASSERT-EVENT.html">assert-event</a>
 (identical-files-p "NAME-log.txt" "NAME-log.out"))</pre>
</li> 
 
 <li>
<span class="v">NAME-log.txt</span> — the expected result from evaluating the forms in 
 <span class="v">NAME-input.lsp</span>
</li> 
 
 </ul> 
 
 <p>To create <span class="v">NAME-log.txt</span>, initially create it as the empty file (or, 
 actually, create any file with that name).  Then run the test, for example 
 using <span class="v">cert.pl</span> (see <a href="BUILD____CERT.PL.html">build::cert.pl</a>) as follows.</p> 
 
 <pre class="code">&lt;PATH_TO_books/build&gt;/cert.pl -j 8 NAME-book</pre> 
 
 <p>Now inspect the generated file <span class="v">NAME-log.out</span>.  When you are satisfied 
 that it is as expected, move it to <span class="v">NAME-log.txt</span>.  The <span class="v">cert.pl</span> 
 command displayed above should now succeed.</p> 
 
 <p>NOTE: If you fail to create file <span class="v">NAME-log.txt</span>, you will likely see an 
 error message of the following form when you run <span class="v">cert.pl</span>.</p> 
 
 <pre class="code">make: *** No rule to make target `NAME-log.txt', needed by `NAME-book.cert'.</pre> 
 
 <p>The solution is to create the missing file <span class="v">NAME-log.txt</span>, for example 
 with the following shell command.</p> 
 
 <pre class="code">touch NAME-log.txt</pre> 
 
 <p>NOTE for ACL2(r) users: The prompt is set by <span class="v">run-script</span> so that the 
 usual "(r)" is not printed.</p>
</body>
</html>
