<html>
<head>
<meta charset="UTF-8">
<title>Note-2-5</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____NOTE-2-5">Click for Note-2-5 in the Full Manual</a></h3>

<p>ACL2 Version  2.5 (June, 2000) Notes</p><p>Important Changes:</p> 
 
 <p>Concurrent with the release of ACL2 Version 2.5 is the publication of two 
 books about ACL2.  See the ``Books and Papers about ACL2 and Its 
 Applications'' on the ACL2 Home Page.</p> 
 
 <p>The <span class="v">books</span> subdirectory now contains many new certifiable books, 
 including solutions to the exercises in the two published books and full 
 scripts for the case studies.  See <span class="v">books/README.html</span>.</p> 
 
 <p>Improved Unix <span class="v">Makefile</span> support for book certification has also been 
 written.  See <span class="v">books/README.html</span>.</p> 
 
 <p>The list of symbols in <span class="v">*acl2-exports*</span> has been considerably expanded. 
 If you have packages built by importing <span class="v">*acl2-exports*</span> you might want to 
 look carefully at the new value of that constant.  The new value includes all 
 <span class="v">:logic</span> mode functions as of Version 2.5, as well as all documented macros 
 and all built-in theorem names.</p> 
 
 <p><span class="tt"><a href="ACL2____INCLUDE-BOOK.html">Include-book</a></span> and <span class="tt"><a href="ACL2____CERTIFY-BOOK.html">certify-book</a></span> were modified to have some 
 additional keyword arguments.  It is possible to certify a book containing 
 <span class="tt"><a href="ACL2____DEFAXIOM.html">defaxiom</a></span> and/or <span class="tt"><a href="ACL2____SKIP-PROOFS.html">skip-proofs</a></span> events and get warning messages or 
 errors signaled, according to the settings of these new flags.  In addition, 
 it is possible to specify in <span class="v">include-book</span> whether the book must be 
 certified (under penalty of error if not).  The default values of these new 
 arguments cause warnings to be printed rather than errors signaled.</p> 
 
 <p>The above change involved altering the form of certificate files.  When 
 books certified under previous versions are included, more warnings will be 
 generated because these books are considered possibly to contain <span class="v">defaxiom</span> 
 and/or <span class="v">skip-proofs</span> events.</p> 
 
 <p>We anticipate further changes to this aspect of books and consider the 
 current mechanisms (for controlling whether warnings or errors are signaled) 
 just a prototype.  See also the discussion below of ``soundness related'' 
 warnings.  Your suggestions are welcome.</p> 
 
 <p>A discrepancy between ACL2 and Common Lisp was fixed, having to do with 
 <span class="v">declare ignore</span>.  In past versions of ACL2, a formal parameter of a 
 <span class="v">defun</span> was considered ignored if it was not used in the body, the guard or 
 the measure of the <span class="v">defun</span>.  That meant that a variable used only in the 
 guard could not be declared ignored in ACL2; but some Common Lisp compilers 
 would complain because the variable was not used in the body.  Now, ACL2 
 considers a variable ignored if it is not used in the body.</p> 
 
 <p>ACL2 can now be built in releases 5.0 and later of Allegro Common Lisp. 
 (Other releases of Allegro Common Lisp and of other lisps continue to be 
 supported as well.)  This includes Allegro Common Lisp running on Windows 98 
 platforms.  John Cowles helped us do some testing and answered questions for 
 us.  Thanks John!</p> 
 
 <p>We incorporated Ruben Gamboa's changes to allow the building of a variant, 
 ACL2(r), of ACL2, in which the user can reason about the real numbers using 
 non-standard analysis.  See <a href="COMMON-LISP____REAL.html">real</a>.  Note that ACL2(r) and ACL2 have 
 different underlying theories, and books certified in one system may not be 
 included in the other.  For backward compatibility and to ensure a smooth 
 transition, ACL2 is built by default, not ACL2(r).  This is a compile-time 
 switch; see the makefile for instructions.  There should be no changes to ACL2 
 resulting from the capability of building ACL2(r) from the same sources.  Also 
 see <a href="ACL2____ACKNOWLEDGMENTS.html">acknowledgments</a> for more on the history of ACL2(r).</p> 
 
 <p>A large number of bugs (some affecting soundness) were fixed, and many 
 small new features were added.  See below.</p> 
 
 <p>Less Important Changes:</p> 
 
 <p>Some warnings are now considered ``soundness related,'' namely, those that 
 advise you that an uncertified book has been included or that a book 
 containing <span class="v">DEFAXIOM</span> or <span class="v">SKIP-PROOFS</span> events.  (Technically, 
 <span class="v">DEFAXIOM</span>s do not imperil soundness in the proof- theoretic sense, though 
 they may imperil the validity of theorems.  But you should know when a book has 
 added an axiom to your logic!)  In previous versions of ACL2, all warnings 
 were inhibited if the token <span class="v">warning</span> was included in the argument to 
 <span class="tt"><a href="ACL2____SET-INHIBIT-OUTPUT-LST.html">set-inhibit-output-lst</a></span>.  Now, soundness related warnings are printed 
 even if <span class="v">warning</span>s have been inhibited.  To inhibit all warnings, supply 
 the token <span class="v">warning!</span> to <span class="v">set-inhibit-output-lst</span>.</p> 
 
 <p>Several bugs in <span class="tt"><a href="ACL2____DEFSTOBJ.html">defstobj</a></span> were fixed, relating to the possibility 
 that some of the subfunctions introduced by the <span class="v">defstobj</span> were already 
 defined.</p> 
 
 <p><span class="v">:</span><span class="tt"><a href="ACL2____PUFF.html">Puff</a></span> no longer tries to expand <span class="tt"><a href="ACL2____DEFSTOBJ.html">defstobj</a></span> events. 
 Previously, the attempt would cause a hard error.</p> 
 
 <p>A soundness bug was fixed.  The bug might have been exercised if you had an 
 alternative definition (implies hyps (equiv (fn ...) body)) in which equiv is 
 an equivalence relation other than EQUAL.  In this case, calls of fn might 
 have been expanded to body in places that were not equiv-hittable.</p> 
 
 <p>An obscure soundness bug was fixed.  The bug was exercised only if you had 
 a metafunction with a computed hypothesis (i.e., a ``meta hypothesis 
 function''), the hypothesis contained a free variable, i.e., a variable not 
 involved in the term being rewritten, and the free variable occurred in the 
 output of the metafunction.  The possibility of this bug was brought to our 
 attention by Robert Krug.</p> 
 
 <p>We fixed a bug in the handling of <span class="v">hide</span> related to the question of 
 whether a variable symbol occurs in a term.  The old code did not find the 
 variable and could cause the system to throw away a hypothesis about it on the 
 grounds that it was never mentioned.  Rob Sumners helped discover this 
 problem.</p> 
 
 <p>The handling of <span class="v">:</span><span class="tt"><a href="ACL2____ELIM.html">elim</a></span> rules was generalized, permitting 
 arbitrary known equivalence relations instead of merely <span class="v">equal</span> in the 
 concluding equality.</p> 
 
 <p>The printing of runes (rule names; see <a href="ACL2____RUNE.html">rune</a>) used has been made 
 "deterministic," both in proof output and in proof attempt summaries, by 
 sorting the runes before printing.</p> 
 
 <p>The handling of free variables has been improved for hypotheses such as 
 <span class="v">(<a href="COMMON-LISP_____C3.html">&lt;</a> 0 X)</span>, and more generally, any hypotheses involving a comparison with 
 <span class="v">0</span> (even for example <span class="v">(<a href="COMMON-LISP_____C3.html">&lt;</a> X 1)</span> where <span class="v">X</span> is known to be an integer, 
 which is handled as <span class="v">(<a href="COMMON-LISP_____C3_D3.html">&lt;=</a> X 0)</span>).  Thanks to Robert Krug for bringing 
 relevant examples to our attention.</p> 
 
 <p>A new value, <span class="v">:comp</span>, has been implemented for the 
 <span class="v">:load-compiled-file</span> keyword of <span class="tt"><a href="ACL2____INCLUDE-BOOK.html">include-book</a></span>.  If this value is 
 supplied, then a compiled file will always be loaded, even if that requires 
 creating the compiled file first.</p> 
 
 <p>The event <span class="v">include-book</span> now generates a warning when a compiled file is 
 expected but not found (see <a href="ACL2____INCLUDE-BOOK.html">include-book</a>).  Formerly, it only did so 
 when executed at the top level; it failed to generate the warning when 
 executed on behalf of a surrounding <span class="v">include-book</span> command.</p> 
 
 <p>Certain redefinition warnings generated by Allegro Common Lisp have been 
 eliminated.</p> 
 
 <p>A new key has been implemented for the <span class="tt"><a href="ACL2____ACL2-DEFAULTS-TABLE.html">ACL2-defaults-table</a></span>, 
 <span class="v">:bogus-mutual-recursion-ok</span>, set with <span class="v">:</span><span class="tt"><a href="ACL2____SET-BOGUS-MUTUAL-RECURSION-OK.html">set-bogus-mutual-recursion-ok</a></span>.  Thanks to David Russinoff for pointing out 
 the utility of such a key.</p> 
 
 <p>A bug was fixed in <span class="tt"><a href="ACL2____DEFUN-SK.html">defun-sk</a></span> that prevented its generated events 
 from being accepted when guard verification is being performed.  Thanks to 
 Bill Young for bringing this problem to our attention.  A second bug was 
 brought to our attention by Pete Manolios, which was causing certain <span class="tt"><a href="ACL2____DEFUN-SK.html">defun-sk</a></span> events to be rejected.  That problem has been fixed, and an 
 "Infected" warning has also been eliminated.</p> 
 
 <p>The command <span class="tt"><a href="ACL2____GOOD-BYE.html">good-bye</a></span> now works with Allegro Common Lisp.</p> 
 
 <p>A low-level bug was fixed that could, for example, cause an error such as 
 "Error: Expected 5 args but received 4 args" when interrupting a <span class="v">local</span> 
 event.</p> 
 
 <p>A bug has been fixed in the <a href="ACL2____PROOF-BUILDER.html">proof-builder</a> related to definition 
 expansion.  Thanks to Pete Manolios for bringing this to our attention with a 
 simple example.</p> 
 
 <p>A bug has been fixed related to the <span class="v">:</span><a href="ACL2____BDD.html">bdd</a> hint in the presence 
 of <a href="ACL2____EQUIVALENCE.html">equivalence</a> relations.  Thanks to Pete Manolios for bringing this to 
 our attention with a simple example.</p> 
 
 <p>The functions <span class="tt"><a href="COMMON-LISP____POSITION.html">position</a></span> and <span class="tt"><a href="ACL2____POSITION-EQUAL.html">position-equal</a></span> formerly required 
 the second argument to be a true list.  In accordance with Common Lisp, we now 
 also allow the second argument to be a string.  This could cause earlier 
 proofs about these functions to fail unless <span class="tt"><a href="ACL2____TRUE-LISTP.html">true-listp</a></span> is known to 
 hold where necessary.</p> 
 
 <p>Robert Krug wrote a patch, which has been incorporated, to prevent certain 
 infinite loops that can arise in linear arithmetic.  Thanks, Robert!</p> 
 
 <p>The macro <span class="tt"><a href="COMMON-LISP____LET_A2.html">let*</a></span> no longer requires the bound variables to be 
 distinct.</p> 
 
 <p>An obscure bug was fixed related to congruence rules.  The bug would 
 sometimes cause ACL2 to behave as though no rules (other than equality) were 
 available for some argument positions.  Thanks to Pete Manolios for bringing 
 this bug to our attention.</p> 
 
 <p>Documentation topics have been added for <span class="tt"><a href="ACL2____HARD-ERROR.html">hard-error</a></span> and <span class="tt"><a href="ACL2____PROG2_42.html">prog2$</a></span>, and the documentation for <span class="tt"><a href="ACL2____ILLEGAL.html">illegal</a></span> has been improved.  Thanks 
 to Rob Sumners for a useful suggestion in the examples in documentation for 
 <span class="v">prog2$</span> and a fix in documentation for <span class="tt"><a href="COMMON-LISP____SUBLIS.html">sublis</a></span>.</p> 
 
 <p>The event form <span class="tt"><a href="ACL2____CERTIFY-BOOK.html">certify-book</a></span> was made more secure, in that it can 
 now catch attempts to write a book to disk during its certification.  Thanks 
 to Rob Sumners for pointing out the insecurity of the existing mechanism.</p> 
 
 <p>A Y2K problem was fixed with our applicative handling of dates.</p> 
 
 <p>Accessors and updaters for <span class="tt"><a href="ACL2____STOBJ.html">stobj</a></span>s have been made more efficient 
 when the underlying lisp is Allegro Common Lisp, by the use of appropriate 
 simple array declarations.</p> 
 
 <p>A raw Lisp break had been possible when a certified book that had no guard 
 verification was included in a session after <span class="v">(</span><span class="tt"><a href="ACL2____SET-VERIFY-GUARDS-EAGERNESS.html">set-verify-guards-eagerness</a></span><span class="v"> 2)</span>.  This has been fixed.</p> 
 
 <p>The keyword command <span class="v">:</span><span class="tt"><a href="ACL2____COMP.html">comp</a></span> can now be used to compile only raw 
 Lisp functions, excluding executable counterparts, by supplying the argument 
 <span class="v">:raw</span>.</p> 
 
 <p>Rewrite rule <span class="v">nth-of-character-listp</span> was removed from source file 
 axioms.lisp since it is essentially subsumed by <span class="v">characterp-nth</span>.</p> 
 
 <p>Printing has been sped up.  In one example the improvement was over 50% in 
 both Allegro and GCL.</p> 
 
 <p>We now allow printing in a "downcase" mode, where symbols are printed in 
 lower case.  All printing functions except <span class="v">print-object$</span> now print 
 characters in lower case for a symbol when the ACL2 state global variable 
 <span class="v">print-case</span> has value <span class="v">:downcase</span> and vertical bars are not necessary 
 for printing that symbol.  See <a href="ACL2____IO.html">io</a> for a discussion of the macros 
 <span class="v">acl2-print-case</span> and <span class="v">set-acl2-print-case</span>.  The default printing 
 remains unchanged, i.e., symbols are printed in upper case when vertical bars 
 are not required.</p> 
 
 <p>A low-level printing function (<span class="v">prin1$</span>) was modified so that it is not 
 sensitive to various Common Lisp globals related to printing.  So for example, 
 the function <span class="tt"><a href="ACL2____FMT.html">fmt</a></span> is no longer sensitive to the value of Common Lisp 
 global <span class="v">*print-case*</span>.  (The preceding paragraph explains how to control 
 the case for printing in ACL2.)</p> 
 
 <p>The definition of <span class="tt"><a href="ACL2____ARRAY1P.html">array1p</a></span> was fixed so that the 
 <span class="v">:maximum-length</span> of an array must be strictly greater than the number 
 specified in the <span class="v">:dimensions</span> field; they may no longer be equal.  This 
 was always the intention; the documentation (see <a href="ACL2____ARRAYS.html">arrays</a>) has remained 
 unchanged.  The corresponding change was also made to <span class="tt"><a href="ACL2____ARRAY2P.html">array2p</a></span>. 
 Allegro Common Lisp formerly caused an error when <span class="tt"><a href="ACL2____COMPRESS1.html">compress1</a></span> was called 
 on an array where the numbers above were equal; now, we get a guard violation 
 instead, which is appropriate.</p> 
 
 <p>In the context of theories, a name now represents not just the 
 corresponding <span class="v">:definition</span> <a href="ACL2____RUNE.html">rune</a>, as it has done in earlier versions 
 of ACL2, but also the corresponding <span class="v">:</span><span class="tt"><a href="ACL2____INDUCTION.html">induction</a></span> rune.  See <a href="ACL2____THEORIES.html">theories</a> for a discussion of runic designators.  Most users will rarely, if 
 ever, notice this change.  One situation where this change will make a 
 difference is after executing <span class="v">(<a href="ACL2____IN-THEORY.html">in-theory</a> (<a href="ACL2____CURRENT-THEORY.html">current-theory</a> 'foo))</span> followed 
 by <span class="v">(<a href="ACL2____IN-THEORY.html">in-theory</a> (<a href="ACL2____ENABLE.html">enable</a> bar))</span>, where function <span class="v">bar</span> is introduced after 
 event <span class="v">foo</span>, and <span class="v">bar</span> is recursively defined.  The latter <span class="tt"><a href="ACL2____IN-THEORY.html">in-theory</a></span> form now enables the rune <span class="v">(:induction bar)</span>, which implies that 
 the prover can use the induction scheme stored at definition time for 
 <span class="v">bar</span>.  Formerly, the rune <span class="v">(:induction bar)</span> was not enabled by 
 <span class="v">(<a href="ACL2____IN-THEORY.html">in-theory</a> (<a href="ACL2____ENABLE.html">enable</a> bar))</span>, and hence the induction scheme for <span class="v">bar</span> was 
 ignored even when explicit <span class="v">:induct</span> hints were supplied.</p> 
 
 <p>You may now supply <span class="tt"><a href="ACL2____XARGS.html">xargs</a></span> keyword pair <span class="v">:normalize nil</span> in order 
 to prevent certain definitions from ``hanging'' when there are many 
 <span class="v">if</span>-subexpressions.  see <a href="COMMON-LISP____DEFUN.html">defun</a>.</p> 
 
 <p>We now translate type declarations of <span class="v">real</span> into guards, as we have 
 already done for other types such as <span class="v">rational</span>.  For example, <span class="v">(<a href="COMMON-LISP____DECLARE.html">declare</a>
 (<a href="COMMON-LISP____TYPE.html">type</a> real x))</span> generates the <a href="ACL2____GUARD.html">guard</a> <span class="v">(<a href="COMMON-LISP____RATIONALP.html">rationalp</a> x)</span>.  See <a href="ACL2____TYPE-SPEC.html">type-spec</a>.</p> 
 
 <p>The theorem prover now behaves reasonably under the combination of 
 specifying a value of <span class="v">t</span> both for <span class="v">:</span><span class="tt"><a href="ACL2____OTF-FLG.html">otf-flg</a></span> and for a hint 
 <span class="v">:do-not-induct</span>.  Previously, it aborted the first time it would have 
 otherwise pushed a goal for induction, but now, it will continue and wait 
 until all induction subgoals have been pushed before it aborts.</p> 
 
 <p>We changed slightly the definition of <span class="tt"><a href="COMMON-LISP____ROUND.html">round</a></span>.  However, we believe 
 that the new definition is equivalent to the old.</p> 
 
 <p>The definition of Common Lisp function <span class="tt"><a href="COMMON-LISP____SUBSTITUTE.html">substitute</a></span> has been 
 added.</p> 
 
 <p>The following changes have been made in the use of file names within ACL2. 
 We thank Warren Hunt and John Cowles for running some tests of these changes 
 on Macintosh and Windows 98 platforms (respectively).</p> 
 
 <blockquote> 
 
 <p>(1) Names of directories and files now use a syntax like that used for Unix 
 (trademark of AT&amp;T), where directories are separated using the ``<span class="v">/</span>'' 
 character even when the operating system is not Unix or Linux.  See <a href="COMMON-LISP____PATHNAME.html">pathname</a>.  ACL2 also continues to support its notion of <i>structured 
 pathnames</i> from Version 2.4 and before, but might not do so in future 
 releases and hence no longer documents such syntax.</p> 
 
 <p>(2) The command <span class="v">:</span><span class="tt"><a href="ACL2____SET-CBD.html">set-cbd</a></span> may now take a relative pathname as 
 an argument.</p> 
 
 <p>(3) When the macro <span class="tt"><a href="ACL2____LD.html">ld</a></span> is given a file name as a value for <span class="tt"><a href="ACL2____STANDARD-OI.html">standard-oi</a></span>, then if that file name is a relative pathname it refers to the 
 result of prepending the connected book directory (see <a href="COMMON-LISP____PATHNAME.html">pathname</a>, see 
 <a href="ACL2____CBD.html">cbd</a>, and see <a href="ACL2____SET-CBD.html">set-cbd</a>) in order to obtain an absolute pathname. 
 Similarly for the <span class="v">ld</span> specials <span class="tt"><a href="ACL2____STANDARD-CO.html">standard-co</a></span> and <span class="tt"><a href="ACL2____PROOFS-CO.html">proofs-co</a></span>.</p> 
 
 </blockquote> 
 
 <p>It is no longer necessary to issue <span class="v">:</span><span class="tt"><a href="ACL2____SET-STATE-OK.html">set-state-ok</a></span><span class="v"> t</span> if you 
 include a <a href="ACL2____STOBJ.html">stobj</a> declaration for <span class="tt"><a href="ACL2____STATE.html">state</a></span>, for example:</p> 
 
 <pre class="code">(<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :stobjs state))</pre> 
 
 <p>See <a href="ACL2____DECLARE-STOBJS.html">declare-stobjs</a>.</p> 
 
 <p>The <a href="ACL2____PROOF-BUILDER.html">proof-builder</a> has been cleaned up a bit, including the 
 documentation and the capability (once again) to define pc-macro commands (see 
 <a href="ACL2____DEFINE-PC-MACRO.html">define-pc-macro</a>) and proof-builder meta commands (see <a href="ACL2____DEFINE-PC-META.html">define-pc-meta</a>).</p> 
 
 <p>Recall that events generate summaries that include a line beginning with 
 ``<span class="v">Warnings:</span>'', which is followed (on the same line) by zero or more brief 
 strings that summarize the warnings generated by that event.  Formerly, this 
 warnings summary for an <span class="tt"><a href="ACL2____ENCAPSULATE.html">encapsulate</a></span> or <span class="tt"><a href="ACL2____INCLUDE-BOOK.html">include-book</a></span> event did 
 not include the summary strings for warnings generated by subsidiary events. 
 This has been fixed.</p> 
 
 <p>Macro <span class="tt"><a href="ACL2____CW.html">cw</a></span> has been documented and now expands to a call of a 
 <span class="v">;</span><span class="tt"><a href="ACL2____LOGIC.html">logic</a></span> mode function.  See <a href="ACL2____CW.html">cw</a> for a way to print to the 
 screen without having to involve the ACL2 <span class="tt"><a href="ACL2____STATE.html">state</a></span>.  Thanks to Rob 
 Sumners for suggesting that we document this useful utility.</p> 
 
 <p>Functions <span class="v">duplicates</span>, <span class="v">add-to-set-equal</span>, <span class="v">intersection-eq</span>, 
 <span class="v">evens</span>, and <span class="v">odds</span> are now <span class="v">:</span><span class="tt"><a href="ACL2____LOGIC.html">logic</a></span> mode functions.</p>
</body>
</html>
