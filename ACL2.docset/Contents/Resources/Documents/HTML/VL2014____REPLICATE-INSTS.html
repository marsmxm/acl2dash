<html>
<head>
<meta charset="UTF-8">
<title>Replicate-insts</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=VL2014____REPLICATE-INSTS">Click for Replicate-insts in the Full Manual</a></h3>

<p>Eliminate arrays of gate and module instances.</p><p>We now introduce a transformation which eliminates "ranges" from 
gate and module instances.  The basic idea is to transform things like this:</p> 
 
<pre class="code">type instname [N:0] (arg1, arg2, ..., argM) ;</pre> 
 
<p>Into things like this:</p> 
 
<pre class="code">type instname_0 (arg1-0, arg2-0, ..., argM-0);
type instname_1 (arg1-1, arg2-1, ..., argM-1);
...
type instname_N (arg1-N, arg2-N, ..., argM-N);</pre> 
 
<p>Here, <span class="v">type</span> might be a gate type (e.g., <span class="v">not</span>, <span class="v">xor</span>, etc.) or a 
module name, <span class="v">instname</span> is the name of this instance array, and the 
arguments are expressions which represent the inputs and outputs.</p> 
 
<p><b>Ordering Notes</b>.  We require that (1) <a href="VL2014____ARGRESOLVE.html">argresolve</a> has been 
applied so there are only plain argument lists to deal with, that (2) all 
expressions have been sized so we can determine the sizes of arguments and 
ports, and (3) that <a href="VL2014____DROP-BLANKPORTS.html">drop-blankports</a> has been run so that there are no 
blank ports.  We expect that all of the actuals are <a href="VL2014____EXPR-SLICING.html">sliceable</a> expressions.  However, this transformation 
should be run before <a href="VL2014____BLANKARGS.html">blankargs</a>, so there may be blank arguments (but not 
blank ports.)</p> 
 
<p>The semantics of instance arrays are covered in Section 7.1.5 and 7.1.6, and 
per Section 12.1.2 they hold for both gate instances and module instances.</p> 
 
<p>One minor issue to address is that the names of all instances throughout a 
module need to be unique, and so we need to take care that the instance names 
we are generating (i.e., instname_0, etc.) do not clash with other names in the 
module; we discuss this further in <a href="VL2014____VL-REPLICATED-INSTNAMES.html">vl-replicated-instnames</a>.</p> 
 
<p>But the most complicated thing about splitting instances is how to come up 
with the new arguments for each new instance we are generating.  This is 
addressed in <a href="VL2014____ARGUMENT-PARTITIONING.html">argument-partitioning</a>.</p>
</body>
</html>
