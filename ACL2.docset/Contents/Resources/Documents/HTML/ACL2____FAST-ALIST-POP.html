<html>
<head>
<meta charset="UTF-8">
<title>Fast-alist-pop</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____FAST-ALIST-POP">Click for Fast-alist-pop in the Full Manual</a></h3>

<p><span class="v">fast-alist-pop</span> removes the first key-value pair from a fast 
alist, provided that the key is not bound in the remainder of the alist.</p><p>This is a user extension to the ACL2 (in particular, ACL2H) system. 
It may eventually be added to acl2h proper, but until then it requires a trust 
tag since it hasn't been thoroughly vetted for soundness.</p> 
 
<p>Logically, fast-alist-pop is just <span class="v">CDR</span>.  However, it has a special 
side-effect when called on a fast alist (see <a href="ACL2____HONS-ACONS.html">hons-acons</a>).  A fast alist 
has a backing hash table mapping its keys to their corresponding (unshadowed) 
pairs, which supports constant-time alist lookup.  <a href="ACL2____HONS-ACONS.html">Hons-acons</a> adds 
key/value pairs to the alist and its backing hash table, and <a href="ACL2____HONS-GET.html">hons-get</a> 
performs constant-time lookup by finding the backing hash table and looking up 
the key in the table.  However, logically, hons-get is just <a href="ACL2____HONS-ASSOC-EQUAL.html">hons-assoc-equal</a>, a more traditional alist lookup function that traverses the 
alist until it finds the matching key.  Correspondingly, fast-alist-pop is 
logically just CDR, but it removes the key/value pair corresponding to the CAR 
of the alist from its backing hash table.</p> 
 
<p>To maintain both the consistency of the alist with the backing hash table 
and constant-time performance, fast-alist-pop has a guard requiring that the 
key of that first pair not be bound in the cdr of the alist.  Otherwise, simply 
removing that pair from the hash table would not be correct, since the key 
would remain in the alist bound to some value, which could only be discovered 
by linearly traversing the alist.</p> 
 
<p>Note this is just a special case of <a href="ACL2____FAST-ALIST-POP_A2.html">fast-alist-pop*</a>.</p>
</body>
</html>
