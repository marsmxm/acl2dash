<html>
<head>
<meta charset="UTF-8">
<title>Note-4-0-wormhole-changes</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____NOTE-4-0-WORMHOLE-CHANGES">Click for Note-4-0-wormhole-changes in the Full Manual</a></h3>

<p>How to convert calls of wormhole for Version  4.0</p><p>Here we describe how to convert an ``old-style'' call of <span class="tt"><a href="ACL2____WORMHOLE.html">wormhole</a></span> — that is, a call suitable for ACL2 versions preceding 4.0 
 — in which the <span class="v">pseudo-flag</span> was <span class="v">t</span>.  In order to convert such a 
 call</p> 
 
 <pre class="code">(<a href="ACL2____WORMHOLE.html">wormhole</a> t 'name input form ...)</pre> 
 
 <p>to a new-style call, the following steps must be carried out.  Note that 
 the wormhole name must always be quoted now.</p> 
 
 <p>First, eliminate the first argument, <span class="v">t</span>, and add a new second argument 
 that is the quoted lambda expression</p> 
 
 <pre class="code">'(<a href="COMMON-LISP____LAMBDA.html">lambda</a> (whs) (<a href="ACL2____SET-WORMHOLE-ENTRY-CODE.html">set-wormhole-entry-code</a> whs :ENTER))</pre> 
 
 <p>Setting the entry code to <span class="v">:ENTER</span> is not necessary if you maintain the 
 invariant (after initialization) that it is always <span class="v">:ENTER</span>.  In that case, 
 the simpler quoted lambda will suffice:</p> 
 
 <pre class="code">'(<a href="COMMON-LISP____LAMBDA.html">lambda</a> (whs) whs)</pre> 
 
 <p>Second, change the <span class="v">form</span> argument so that instead of talking about the 
 state-global variable <span class="v">wormhole-output</span> it talks about the state-global 
 variable <span class="v">wormhole-status</span>.  Look for <span class="v">(<a href="ACL2_____04.html">@</a> wormhole-output)</span>, <span class="v">(<a href="ACL2____ASSIGN.html">assign</a>
 wormhole-output ...)</span>, <span class="v">(<a href="ACL2____F-GET-GLOBAL.html">f-get-global</a> 'wormhole-output ...)</span> and 
 <span class="v">(<a href="ACL2____F-PUT-GLOBAL.html">f-put-global</a> 'wormhole-output ...)</span> in <span class="v">form</span> and replace them with 
 expressions involving <span class="v">wormhole-status</span>.</p> 
 
 <p>However, remember that the old data stored in <span class="v">wormhole-output</span> is now 
 in the <span class="v">wormhole-data</span> component of the <span class="v">wormhole-status</span>.  Thus, for 
 example, an old use of <span class="v">(<a href="ACL2_____04.html">@</a> wormhole-output)</span> will typically be replaced by 
 <span class="v">(<a href="ACL2____WORMHOLE-DATA.html">wormhole-data</a> (<a href="ACL2_____04.html">@</a> wormhole-status))</span> and an old use of <span class="v">(<a href="ACL2____ASSIGN.html">assign</a>
 wormhole-output ...)</span> will typically be replaced by</p> 
 
 <pre class="code">(<a href="ACL2____ASSIGN.html">assign</a> wormhole-status (<a href="ACL2____SET-WORMHOLE-DATA.html">set-wormhole-data</a> (<a href="ACL2_____04.html">@</a> wormhole-status) ...))</pre> 
 
 <p>In summary, an old-style call like</p> 
 
 <pre class="code">(<a href="ACL2____WORMHOLE.html">wormhole</a> t 'name
          input
          '(...1 (<a href="ACL2_____04.html">@</a> wormhole-output) ...2
            ...3 (<a href="ACL2____ASSIGN.html">assign</a> wormhole-output ...4) ...5)
          ...6)</pre> 
 
 <p>can become</p> 
 
 <pre class="code">(<a href="ACL2____WORMHOLE.html">wormhole</a> 'name
          '(<a href="COMMON-LISP____LAMBDA.html">lambda</a> (whs) (<a href="ACL2____SET-WORMHOLE-ENTRY-CODE.html">set-wormhole-entry-code</a> whs :ENTER))
          input
          '(...1 (<a href="ACL2____WORMHOLE-DATA.html">wormhole-data</a> (<a href="ACL2_____04.html">@</a> wormhole-status)) ...2
            ...3 (<a href="ACL2____ASSIGN.html">assign</a> wormhole-status
                        (<a href="ACL2____SET-WORMHOLE-DATA.html">set-wormhole-data</a> (<a href="ACL2_____04.html">@</a> wormhole-status)
                                           ...4) ...5)
          ...6)</pre> 
 
 <p>In any case, and especially if your <span class="v">wormhole</span> call had a 
 <span class="v">pseudo-flag</span> other than <span class="v">t</span>, we recommend that you see <a href="ACL2____WORMHOLE.html">wormhole</a>.</p>
</body>
</html>
