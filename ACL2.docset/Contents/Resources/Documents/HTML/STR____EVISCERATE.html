<html>
<head>
<meta charset="UTF-8">
<title>Eviscerate</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=STR____EVISCERATE">Click for Eviscerate in the Full Manual</a></h3>

<p>Elide portions of a term, for use with <a href="STR____PRETTY.html">pretty</a>.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(eviscerate x config) → eviscerated-x</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">x</span> — The term to eviscerate.</dd> 
  <dd>
<span class="tt">config</span> — <font color="#606060">Guard <span class="v">(<a href="STR____EVISCCONFIG-P.html">eviscconfig-p</a> config)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">eviscerated-x</span> — A new version of <span class="v">x</span>, perhaps with some subterms 
                           replaced.</dd> 
 
</dl></div> 
<p>Sometimes terms are too big to practically print.  Much like 
ACL2's built-in pretty-printer, our <a href="STR____PRETTY-PRINTING.html">pretty-printing</a> functions have 
special support for printing ``eviscerated'' terms where, e.g., some particular 
subterms are elided in certain ways.</p> 
 
<p>The pretty-printer itself does not do any elision.  Instead, <span class="v">eviscerate</span> 
is a separate function that can be used, ahead of time, to elide certain 
sub-terms.  Typically the result of <span class="v">eviscerate</span> is then given to, e.g., 
<a href="STR____PRETTY.html">pretty</a>, along with a special <span class="v">:eviscp</span> flag) to indicate that 
elisions have been made.</p> 
 
<p>ACL2 has its own, built-in evisceration functions that support fancy 
features such as <a href="ACL2____IPRINTING.html">ACL2::iprinting</a>.  However, much like ACL2's pretty printer 
itself, these functions are in program mode and take <a href="ACL2____STATE.html">state</a>, which is 
sometimes inconvenient.  So, here, we (re)implement a simple evisceration 
function that provides fewer features but avoids state.</p> 
 
<p>Our function is very much styled after ACL2's and should be familiar if you 
know about ACL2's <a href="ACL2____EVISC-TUPLE.html">evisc-tuple</a>s, except that instead of evisc-tuples we 
use <a href="STR____EVISCCONFIG.html">eviscconfig</a> structures.</p> 
 
<h3>Examples</h3> 
 
<p>Suppose we want to pretty-print the following constant:</p> 
 
<pre class="code">ACL2 !&gt; (<a href="ACL2____DEFCONST.html">defconst</a> *demo* '(foo (bar aaa bbb ccc (baz 1 2 3))
                               1 2 3 4 5 6
                               (baz 3 2 1)))</pre> 
 
<p>To print without evisceration we can just use <a href="STR____PRETTY.html">pretty</a> 
directly (with its default <a href="STR____PRINTCONFIG.html">printconfig</a>:</p> 
 
<pre class="code">ACL2 !&gt; (<a href="STR____PRETTY.html">str::pretty</a> *demo*)
"(FOO (BAR AAA BBB CCC (BAZ 1 2 3))
     1 2 3 4 5 6 (BAZ 3 2 1))"</pre> 
 
<p>To print with evisceration, we (1) eviscerate the term and then (2) tell 
<a href="STR____PRETTY.html">pretty</a> to print it with evisceration enabled.  For example:</p> 
 
<pre class="code">ACL2 !&gt; (<a href="COMMON-LISP____LET_A2.html">let*</a> ((econfig (<a href="STR____MAKE-EVISCCONFIG.html">str::make-eviscconfig</a>
                         :print-level 100
                         :print-length 2)))
          (<a href="STR____PRETTY.html">str::pretty</a> (<a href="STR____EVISCERATE.html">str::eviscerate</a> *demo* econfig)
                       :eviscp t))
"(FOO (BAR AAA ...) ...)"</pre> 
 
<p>Above the use of <span class="v">print-length</span> truncates the printing after two items in 
each list.  Extending the print-length lets us see more of the term:</p> 
 
<pre class="code">ACL2 !&gt; (<a href="COMMON-LISP____LET_A2.html">let*</a> ((econfig (<a href="STR____MAKE-EVISCCONFIG.html">str::make-eviscconfig</a>
                         :print-level 100
                         :print-length 4)))
          (<a href="STR____PRETTY.html">str::pretty</a> (<a href="STR____EVISCERATE.html">str::eviscerate</a> *demo* econfig)
                       :eviscp t))
"(FOO (BAR AAA BBB CCC ...) 1 2 ...)"</pre> 
 
<p>There are also other options for hiding all subterms with a certain car, and 
for making particular replacements of particular subterms; see <a href="STR____EVISCCONFIG.html">eviscconfig</a> 
for details.</p> 
 
 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>eviscerate</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a> eviscerate (x config)
       (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="STR____EVISCCONFIG-P.html">eviscconfig-p</a> config)))
       (<a href="COMMON-LISP____LET.html">let</a> ((acl2::__function__ 'eviscerate))
            (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> acl2::__function__))
            (<a href="ACL2____B_A2.html">b*</a> (((<a href="STR____EVISCCONFIG.html">eviscconfig</a> config))
                 ((when (<a href="COMMON-LISP____OR.html">or</a> config.print-level config.print-length
                            (<a href="STR____EVISCERATE1P.html">eviscerate1p</a> x config)))
                  (<a href="STR____EVISCERATE1.html">eviscerate1</a> x 0 config)))
                x)))</pre> 

</body>
</html>
