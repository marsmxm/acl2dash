<html>
<head>
<meta charset="UTF-8">
<title>Atj-main-function-type-fn</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=JAVA____ATJ-MAIN-FUNCTION-TYPE-FN">Click for Atj-main-function-type-fn in the Full Manual</a></h3>

<p>Top-level event generated by <span class="tt"><a href="JAVA____ATJ-MAIN-FUNCTION-TYPE.html">atj-main-function-type</a></span>.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(atj-main-function-type-fn fn in-type-specs 
                           out-type-spec/specs hints wrld) 
 
  → 
event</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">hints</span> — <font color="#606060">Guard <span class="v">(<a href="ACL2____TRUE-LISTP.html">true-listp</a> hints)</span>.</font>
</dd> 
  <dd>
<span class="tt">wrld</span> — <font color="#606060">Guard <span class="v">(<a href="ACL2____PLIST-WORLDP.html">plist-worldp</a> wrld)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">event</span> — A <span class="tt"><a href="ACL2____MAYBE-PSEUDO-EVENT-FORMP.html">ACL2::maybe-pseudo-event-formp</a></span>.</dd> 
 
</dl></div> 
<p>This includes the theorems for the function inputs and outputs 
     (if the function is in logic mode), 
     as well as an event to record the function type in the table.</p><p>If the table already includes an entry for the function, 
     the proposed function type is compared with the existing one. 
     If they are the same, the call is considered redundant 
     and no further action is taken. 
     If they differ, it is an error.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>atj-main-function-type-fn</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 atj-main-function-type-fn
 (fn in-type-specs
     out-type-spec/specs hints wrld)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____TRUE-LISTP.html">true-listp</a> hints)
                             (<a href="ACL2____PLIST-WORLDP.html">plist-worldp</a> wrld))))
 (<a href="COMMON-LISP____LET.html">let</a>
  ((__function__ 'atj-main-function-type-fn))
  (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
  (<a href="ACL2____B_A2.html">b*</a>
   (((unless (<a href="ACL2____FUNCTION-NAMEP.html">function-namep</a> fn wrld))
     (<a href="ACL2____RAISE.html">raise</a> "The first input, ~x0, must be the name of a function."
            fn))
    (<a href="ACL2____FORMALS.html">formals</a> (<a href="ACL2____FORMALS.html">formals</a> fn wrld))
    ((unless (<a href="ACL2____KEYWORD-LISTP.html">keyword-listp</a> in-type-specs))
     (<a href="ACL2____RAISE.html">raise</a>
      "The second input, ~x0, ~
                must be a list of ATJ type keywords."
      in-type-specs))
    (in-types (<a href="JAVA____ATJ-TYPE-LIST-FROM-KEYWORD-LIST.html">atj-type-list-from-keyword-list</a> in-type-specs))
    ((unless (<a href="COMMON-LISP_____D3.html">=</a> (<a href="ACL2____LEN.html">len</a> in-types) (<a href="ACL2____LEN.html">len</a> formals)))
     (<a href="ACL2____RAISE.html">raise</a>
      "The number of input types ~x0 must match ~
                the arity ~x1 of the function ~x2."
      in-type-specs (<a href="ACL2____LEN.html">len</a> formals)
      fn))
    (nresults (<a href="JAVA____ATJ-NUMBER-OF-RESULTS.html">atj-number-of-results</a> fn wrld))
    ((<a href="ACL2____MV.html">mv</a> out-types arrays)
     (<a href="COMMON-LISP____IF.html">if</a>
      (<a href="COMMON-LISP_____D3.html">=</a> nresults 1)
      (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> out-type array)
            (<a href="JAVA____ATJ-PROCESS-OUTPUT-TYPE-SPEC.html">atj-process-output-type-spec</a>
                 out-type-spec/specs formals in-types)))
          (<a href="ACL2____MV.html">mv</a> (<a href="COMMON-LISP____LIST.html">list</a> out-type) (<a href="COMMON-LISP____LIST.html">list</a> array)))
      (<a href="COMMON-LISP____IF.html">if</a>
       (<a href="ACL2____TUPLEP.html">tuplep</a> nresults out-type-spec/specs)
       (<a href="JAVA____ATJ-PROCESS-OUTPUT-TYPE-SPECS.html">atj-process-output-type-specs</a>
            out-type-spec/specs formals in-types)
       (<a href="ACL2____PROG2_42.html">prog2$</a>
        (<a href="ACL2____RAISE.html">raise</a>
         "The third input, ~x0, ~
                            must be a list of length ~x1 ~
                            of output type specifications."
         out-type-spec/specs nresults)
        (<a href="ACL2____MV.html">mv</a> nil nil)))))
    ((unless (<a href="ACL2____NO-DUPLICATESP-EQ.html">no-duplicatesp-eq</a> (<a href="ACL2____REMOVE-EQ.html">remove-eq</a> nil arrays)))
     (<a href="ACL2____RAISE.html">raise</a>
      "The list of output array names, ~x0, ~
                contains non-NIL duplicates."
      arrays))
    (fn-info? (<a href="JAVA____ATJ-GET-FUNCTION-TYPE-INFO-FROM-TABLE.html">atj-get-function-type-info-from-table</a> fn wrld))
    ((when fn-info?)
     (<a href="ACL2____B_A2.html">b*</a>
      ((main (<a href="JAVA____ATJ-FUNCTION-TYPE-INFO-_E3MAIN.html">atj-function-type-info-&gt;main</a> fn-info?)))
      (<a href="COMMON-LISP____IF.html">if</a>
       (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="JAVA____ATJ-FUNCTION-TYPE-_E3INPUTS.html">atj-function-type-&gt;inputs</a> main)
                   in-types)
            (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="JAVA____ATJ-FUNCTION-TYPE-_E3OUTPUTS.html">atj-function-type-&gt;outputs</a> main)
                   out-types))
       '(<a href="ACL2____VALUE-TRIPLE.html">value-triple</a> :redundant)
       (<a href="ACL2____RAISE.html">raise</a>
        "The proposed ATJ main function type [~x0 -&gt; ~x1] for ~x2 ~
                    differs from the already recorded [~x3 -&gt; ~x4]."
        in-type-specs out-type-spec/specs fn
        (<a href="JAVA____ATJ-TYPE-LIST-TO-KEYWORD-LIST.html">atj-type-list-to-keyword-list</a>
             (<a href="JAVA____ATJ-FUNCTION-TYPE-_E3INPUTS.html">atj-function-type-&gt;inputs</a> main))
        (<a href="JAVA____ATJ-TYPE-LIST-TO-KEYWORD-LIST.html">atj-type-list-to-keyword-list</a>
             (<a href="JAVA____ATJ-FUNCTION-TYPE-_E3OUTPUTS.html">atj-function-type-&gt;outputs</a> main))))))
    (<a href="ACL2____GUARD.html">guard</a> (<a href="ACL2____GUARD.html">guard</a> fn nil wrld))
    (input-thms (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____LOGICP.html">logicp</a> fn wrld)
                     (<a href="JAVA____ATJ-MAIN-FUNCTION-TYPE-INPUT-THEOREMS.html">atj-main-function-type-input-theorems</a>
                          fn guard formals in-types hints wrld)))
    (output-thms
         (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____LOGICP.html">logicp</a> fn wrld)
              (<a href="COMMON-LISP____IF.html">if</a> (<a href="COMMON-LISP_____D3.html">=</a> nresults 1)
                  (<a href="COMMON-LISP____LIST.html">list</a> (<a href="JAVA____ATJ-MAIN-FUNCTION-TYPE-OUTPUT-THEOREM.html">atj-main-function-type-output-theorem</a>
                             fn guard formals nil (<a href="COMMON-LISP____CAR.html">car</a> out-types)
                             hints wrld))
                  (<a href="JAVA____ATJ-MAIN-FUNCTION-TYPE-OUTPUT-THEOREMS.html">atj-main-function-type-output-theorems</a>
                       fn
                       guard formals nresults (<a href="ACL2____REV.html">rev</a> out-types)
                       hints wrld))))
    (fn-ty (<a href="JAVA____MAKE-ATJ-FUNCTION-TYPE.html">make-atj-function-type</a> :inputs in-types
                                   :outputs out-types
                                   :arrays arrays))
    (fn-info (<a href="JAVA____MAKE-ATJ-FUNCTION-TYPE-INFO.html">make-atj-function-type-info</a> :main fn-ty
                                          :others nil)))
   (<a href="COMMON-LISP____CONS.html">cons</a>
    'encapsulate
    (<a href="COMMON-LISP____CONS.html">cons</a>
     'nil
     (<a href="COMMON-LISP____CONS.html">cons</a>
      '(<a href="ACL2____SET-IGNORE-OK.html">set-ignore-ok</a> t)
      (<a href="COMMON-LISP____APPEND.html">append</a>
       input-thms
       (<a href="COMMON-LISP____APPEND.html">append</a>
        output-thms
        (<a href="COMMON-LISP____CONS.html">cons</a>
           (<a href="COMMON-LISP____CONS.html">cons</a> 'table
                 (<a href="COMMON-LISP____CONS.html">cons</a> *atj-function-type-info-table-name*
                       (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> 'quote (<a href="COMMON-LISP____CONS.html">cons</a> fn 'nil))
                             (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> 'quote (<a href="COMMON-LISP____CONS.html">cons</a> fn-info 'nil))
                                   'nil))))
           'nil)))))))))</pre> 

</body>
</html>
