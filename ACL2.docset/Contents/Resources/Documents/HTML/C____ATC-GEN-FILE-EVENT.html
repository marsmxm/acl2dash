<html>
<head>
<meta charset="UTF-8">
<title>Atc-gen-file-event</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=C____ATC-GEN-FILE-EVENT">Click for Atc-gen-file-event in the Full Manual</a></h3>

<p>Event to pretty-print the generated C code to the output file.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(atc-gen-file-event tunit output-file print state) 
  → 
(mv erp event state)</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">tunit</span> — <font color="#606060">Guard <span class="v">(<a href="C____TRANSUNITP.html">transunitp</a> tunit)</span>.</font>
</dd> 
  <dd>
<span class="tt">output-file</span> — <font color="#606060">Guard <span class="v">(<a href="COMMON-LISP____STRINGP.html">stringp</a> output-file)</span>.</font>
</dd> 
  <dd>
<span class="tt">print</span> — <font color="#606060">Guard <span class="v">(<a href="ACL2____EVMAC-INPUT-PRINT-P.html">evmac-input-print-p</a> print)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">event</span> — A <span class="tt"><a href="ACL2____PSEUDO-EVENT-FORMP.html">pseudo-event-formp</a></span>.</dd> 
 
</dl></div> 
<p>This serves to run <span class="tt"><a href="C____ATC-GEN-FILE.html">atc-gen-file</a></span> 
     after the constant and theorem events have been submitted. 
     This function generates an event form 
     that is put (by <span class="tt"><a href="C____ATC-GEN-EVERYTHING.html">atc-gen-everything</a></span>) 
     after the constant and theorem events. 
     When the events are submitted to and processed by ACL2, 
     we get to this file generation event 
     only if the previous events are successful. 
     This is a sort of safety/security constraint: 
     do not even generate the file, unless it is correct.</p><p>If <span class="v">:print</span> is at <span class="v">:info</span> or <span class="v">:all</span>, 
     we also generate events to print progress messages, 
     as done with the constant and theorem events.</p><p>In order to generate an embedded event form for file generation, 
     we generate a <span class="tt"><a href="ACL2____MAKE-EVENT.html">make-event</a></span> whose argument generates the file. 
     The argument must also return an embedded event form, 
     so we use <span class="tt"><a href="ACL2____VALUE-TRIPLE.html">value-triple</a></span> with <span class="v">:invisible</span>, 
     so there is no extra screen output. 
     This is a ``dummy'' event, it is not supposed to do anything: 
     it is the execution of the <span class="tt"><a href="ACL2____MAKE-EVENT.html">make-event</a></span> argument 
     that matters, because it generates the file. 
     In essence, we use <span class="tt"><a href="ACL2____MAKE-EVENT.html">make-event</a></span> to turn a computation 
     (the one that generates the file) 
     into an event. 
     But we cannot use just <span class="tt"><a href="ACL2____VALUE-TRIPLE.html">value-triple</a></span> 
     because our computation returns an error triple.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>atc-gen-file-event</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 atc-gen-file-event
 (tunit output-file print state)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :stobjs (<a href="ACL2____STATE.html">state</a>)))
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="C____TRANSUNITP.html">transunitp</a> tunit)
                             (<a href="COMMON-LISP____STRINGP.html">stringp</a> output-file)
                             (<a href="ACL2____EVMAC-INPUT-PRINT-P.html">evmac-input-print-p</a> print))))
 (<a href="COMMON-LISP____LET.html">let</a>
  ((__function__ 'atc-gen-file-event))
  (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
  (<a href="ACL2____B_A2.html">b*</a>
   ((progress-start?
     (<a href="COMMON-LISP____AND.html">and</a>
       (<a href="ACL2____EVMAC-INPUT-PRINT-_E3_D3.html">evmac-input-print-&gt;=</a> print :info)
       (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> 'cw-event
                   (<a href="COMMON-LISP____CONS.html">cons</a> '"~%Generating the file..."
                         (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> 'quote (<a href="COMMON-LISP____CONS.html">cons</a> output-file 'nil))
                               'nil)))
             'nil)))
    (progress-end?
         (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____EVMAC-INPUT-PRINT-_E3_D3.html">evmac-input-print-&gt;=</a> print :info)
              (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> 'cw-event (<a href="COMMON-LISP____CONS.html">cons</a> '" done.~%" 'nil))
                    'nil)))
    (file-gen-event
     (<a href="COMMON-LISP____CONS.html">cons</a>
      'make-event
      (<a href="COMMON-LISP____CONS.html">cons</a>
       (<a href="COMMON-LISP____CONS.html">cons</a>
        'b*
        (<a href="COMMON-LISP____CONS.html">cons</a>
         (<a href="COMMON-LISP____CONS.html">cons</a>
          (<a href="COMMON-LISP____CONS.html">cons</a>
           (<a href="COMMON-LISP____CONS.html">cons</a> 'er (<a href="COMMON-LISP____CONS.html">cons</a> '&amp; 'nil))
           (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> 'atc-gen-file
                       (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> 'quote (<a href="COMMON-LISP____CONS.html">cons</a> tunit 'nil))
                             (<a href="COMMON-LISP____CONS.html">cons</a> output-file (<a href="COMMON-LISP____CONS.html">cons</a> 'state 'nil))))
                 'nil))
          'nil)
         (<a href="COMMON-LISP____CONS.html">cons</a>
              (<a href="COMMON-LISP____CONS.html">cons</a> 'acl2::value
                    (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> 'quote
                                (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> 'value-triple
                                            (<a href="COMMON-LISP____CONS.html">cons</a> ':invisible 'nil))
                                      'nil))
                          'nil))
              'nil)))
       'nil))))
   (<a href="ACL2____VALUE.html">acl2::value</a>
        (<a href="COMMON-LISP____CONS.html">cons</a> 'progn
              (<a href="COMMON-LISP____APPEND.html">append</a> progress-start?
                      (<a href="COMMON-LISP____CONS.html">cons</a> file-gen-event progress-end?)))))))</pre> 

</body>
</html>
