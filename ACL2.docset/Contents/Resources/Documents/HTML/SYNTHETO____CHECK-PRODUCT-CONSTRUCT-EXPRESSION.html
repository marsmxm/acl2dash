<html>
<head>
<meta charset="UTF-8">
<title>Check-product-construct-expression</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=SYNTHETO____CHECK-PRODUCT-CONSTRUCT-EXPRESSION">Click for Check-product-construct-expression in the Full Manual</a></h3>

<p>Check if a product construction expression is statically well-formed.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(check-product-construct-expression 
     type inits inits-result expr ctxt) 
 
  → 
result</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">type</span> — <font color="#606060">Guard <span class="v">(<a href="SYNTHETO____IDENTIFIERP.html">identifierp</a> type)</span>.</font>
</dd> 
  <dd>
<span class="tt">inits</span> — <font color="#606060">Guard <span class="v">(<a href="SYNTHETO____INITIALIZER-LISTP.html">initializer-listp</a> inits)</span>.</font>
</dd> 
  <dd>
<span class="tt">inits-result</span> — <font color="#606060">Guard <span class="v">(<a href="SYNTHETO____TYPE-RESULTP.html">type-resultp</a> inits-result)</span>.</font>
</dd> 
  <dd>
<span class="tt">expr</span> — <font color="#606060">Guard <span class="v">(<a href="SYNTHETO____EXPRESSIONP.html">expressionp</a> expr)</span>.</font>
</dd> 
  <dd>
<span class="tt">ctxt</span> — <font color="#606060">Guard <span class="v">(<a href="SYNTHETO____CONTEXTP.html">contextp</a> ctxt)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">result</span> — <font color="#606060">Type <span class="v">(<a href="SYNTHETO____TYPE-RESULTP.html">type-resultp</a> result)</span>.</font>
</dd> 
 
</dl></div> 
<p>The identifier must be the name of a product type in the context. 
     We match the field types calculated for the initializers 
     with the field types of the product type. 
     If the product type has an invariant, 
     we also generate a proof obligation saying that 
     the initializers satisfy the invariant. 
     The type of the expression is the product type.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>check-product-construct-expression</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 check-product-construct-expression
 (<a href="SYNTHETO____TYPE.html">type</a> inits inits-result expr ctxt)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="SYNTHETO____IDENTIFIERP.html">identifierp</a> type)
                             (<a href="SYNTHETO____INITIALIZER-LISTP.html">initializer-listp</a> inits)
                             (<a href="SYNTHETO____TYPE-RESULTP.html">type-resultp</a> inits-result)
                             (<a href="SYNTHETO____EXPRESSIONP.html">expressionp</a> expr)
                             (<a href="SYNTHETO____CONTEXTP.html">contextp</a> ctxt))))
 (<a href="COMMON-LISP____DECLARE.html">declare</a>
     (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="SYNTHETO____TYPE-RESULT-CASE.html">type-result-case</a> inits-result
                                     :err t
                                     :ok (<a href="COMMON-LISP_____D3.html">=</a> (<a href="ACL2____LEN.html">len</a> inits-result.types)
                                            (<a href="ACL2____LEN.html">len</a> inits)))))
 (<a href="COMMON-LISP____LET.html">let</a>
  ((__function__ 'check-product-construct-expression))
  (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
  (<a href="SYNTHETO____TYPE-RESULT-CASE.html">type-result-case</a>
   inits-result
   :err (<a href="SYNTHETO____TYPE-RESULT-ERR.html">type-result-err</a> inits-result.info)
   :ok
   (<a href="ACL2____B_A2.html">b*</a>
    ((product (<a href="SYNTHETO____GET-TYPE-PRODUCT.html">get-type-product</a> (<a href="SYNTHETO____TYPE-DEFINED.html">type-defined</a> type)
                                (<a href="SYNTHETO____CONTEXT-_E3TOPS.html">context-&gt;tops</a> ctxt)))
     ((when (<a href="COMMON-LISP____NOT.html">not</a> product))
      (<a href="SYNTHETO____TYPE-RESULT-ERR.html">type-result-err</a>
       (<a href="COMMON-LISP____LIST.html">list</a>
           :product-construct-type-mismatch (<a href="SYNTHETO____IDENTIFIER-FIX.html">identifier-fix</a> type))))
     (fields (<a href="SYNTHETO____TYPE-PRODUCT-_E3FIELDS.html">type-product-&gt;fields</a> product))
     ((<a href="ACL2____MV.html">mv</a> okp obligs unmatched-fields)
      (<a href="SYNTHETO____MATCH-FIELD-LIST.html">match-field-list</a> inits inits-result.types fields ctxt))
     ((when (<a href="COMMON-LISP____NOT.html">not</a> okp))
      (<a href="SYNTHETO____TYPE-RESULT-ERR.html">type-result-err</a> (<a href="COMMON-LISP____LIST.html">list</a> :field-type-mismatch
                             (<a href="SYNTHETO____IDENTIFIER-FIX.html">identifier-fix</a> type)
                             (<a href="SYNTHETO____INITIALIZER-LIST-FIX.html">initializer-list-fix</a> inits)
                             fields)))
     ((when (<a href="COMMON-LISP____CONSP.html">consp</a> unmatched-fields))
      (<a href="SYNTHETO____TYPE-RESULT-ERR.html">type-result-err</a> (<a href="COMMON-LISP____LIST.html">list</a> :unmatched-fields (<a href="SYNTHETO____IDENTIFIER-FIX.html">identifier-fix</a> type)
                             (<a href="SYNTHETO____INITIALIZER-LIST-FIX.html">initializer-list-fix</a> inits)
                             fields)))
     (inv (<a href="SYNTHETO____TYPE-PRODUCT-_E3INVARIANT.html">type-product-&gt;invariant</a> product))
     (inv-oblig?
      (<a href="COMMON-LISP____IF.html">if</a>
         inv
         (<a href="ACL2____B_A2.html">b*</a> ((<a href="COMMON-LISP____SUBST.html">subst</a> (<a href="SYNTHETO____INITIALIZERS-TO-VARIABLE-SUBSTITUTION.html">initializers-to-variable-substitution</a> inits)))
             (<a href="SYNTHETO____NON-TRIVIAL-PROOF-OBLIGATION.html">non-trivial-proof-obligation</a>
                  (<a href="SYNTHETO____CONTEXT-_E3OBLIGATION-VARS.html">context-&gt;obligation-vars</a> ctxt)
                  (<a href="SYNTHETO____CONTEXT-_E3OBLIGATION-HYPS.html">context-&gt;obligation-hyps</a> ctxt)
                  (<a href="SYNTHETO____SUBST-EXPRESSION.html">subst-expression</a> subst inv)
                  expr))
         nil)))
    (<a href="SYNTHETO____MAKE-TYPE-RESULT-OK.html">make-type-result-ok</a>
         :types (<a href="COMMON-LISP____LIST.html">list</a> (<a href="SYNTHETO____TYPE-DEFINED.html">type-defined</a> type))
         :obligations (<a href="COMMON-LISP____APPEND.html">append</a> inits-result.obligations
                              obligs inv-oblig?))))))</pre> 
<p><b>Theorem: </b>type-resultp-of-check-product-construct-expression</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> type-resultp-of-check-product-construct-expression
        (<a href="ACL2____B_A2.html">b*</a> ((result (<a href="SYNTHETO____CHECK-PRODUCT-CONSTRUCT-EXPRESSION.html">check-product-construct-expression</a>
                          type inits inits-result expr ctxt)))
            (<a href="SYNTHETO____TYPE-RESULTP.html">type-resultp</a> result))
        :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>check-product-construct-expression-of-identifier-fix-type</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 check-product-construct-expression-of-identifier-fix-type
 (<a href="COMMON-LISP____EQUAL.html">equal</a>
   (<a href="SYNTHETO____CHECK-PRODUCT-CONSTRUCT-EXPRESSION.html">check-product-construct-expression</a> (<a href="SYNTHETO____IDENTIFIER-FIX.html">identifier-fix</a> type)
                                       inits inits-result expr ctxt)
   (<a href="SYNTHETO____CHECK-PRODUCT-CONSTRUCT-EXPRESSION.html">check-product-construct-expression</a>
        type inits inits-result expr ctxt)))</pre> 
<p><b>Theorem: </b>check-product-construct-expression-identifier-equiv-congruence-on-type</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 check-product-construct-expression-identifier-equiv-congruence-on-type
 (<a href="ACL2____IMPLIES.html">implies</a> (<a href="SYNTHETO____IDENTIFIER-EQUIV.html">identifier-equiv</a> type type-equiv)
          (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="SYNTHETO____CHECK-PRODUCT-CONSTRUCT-EXPRESSION.html">check-product-construct-expression</a>
                      type inits inits-result expr ctxt)
                 (<a href="SYNTHETO____CHECK-PRODUCT-CONSTRUCT-EXPRESSION.html">check-product-construct-expression</a>
                      type-equiv
                      inits inits-result expr ctxt)))
 :rule-classes :congruence)</pre> 
<p><b>Theorem: </b>check-product-construct-expression-of-initializer-list-fix-inits</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
    check-product-construct-expression-of-initializer-list-fix-inits
    (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="SYNTHETO____CHECK-PRODUCT-CONSTRUCT-EXPRESSION.html">check-product-construct-expression</a>
                type (<a href="SYNTHETO____INITIALIZER-LIST-FIX.html">initializer-list-fix</a> inits)
                inits-result expr ctxt)
           (<a href="SYNTHETO____CHECK-PRODUCT-CONSTRUCT-EXPRESSION.html">check-product-construct-expression</a>
                type inits inits-result expr ctxt)))</pre> 
<p><b>Theorem: </b>check-product-construct-expression-initializer-list-equiv-congruence-on-inits</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 check-product-construct-expression-initializer-list-equiv-congruence-on-inits
 (<a href="ACL2____IMPLIES.html">implies</a> (<a href="SYNTHETO____INITIALIZER-LIST-EQUIV.html">initializer-list-equiv</a> inits inits-equiv)
          (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="SYNTHETO____CHECK-PRODUCT-CONSTRUCT-EXPRESSION.html">check-product-construct-expression</a>
                      type inits inits-result expr ctxt)
                 (<a href="SYNTHETO____CHECK-PRODUCT-CONSTRUCT-EXPRESSION.html">check-product-construct-expression</a>
                      type
                      inits-equiv inits-result expr ctxt)))
 :rule-classes :congruence)</pre> 
<p><b>Theorem: </b>check-product-construct-expression-of-type-result-fix-inits-result</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
  check-product-construct-expression-of-type-result-fix-inits-result
  (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="SYNTHETO____CHECK-PRODUCT-CONSTRUCT-EXPRESSION.html">check-product-construct-expression</a>
              type
              inits (<a href="SYNTHETO____TYPE-RESULT-FIX.html">type-result-fix</a> inits-result)
              expr ctxt)
         (<a href="SYNTHETO____CHECK-PRODUCT-CONSTRUCT-EXPRESSION.html">check-product-construct-expression</a>
              type inits inits-result expr ctxt)))</pre> 
<p><b>Theorem: </b>check-product-construct-expression-type-result-equiv-congruence-on-inits-result</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 check-product-construct-expression-type-result-equiv-congruence-on-inits-result
 (<a href="ACL2____IMPLIES.html">implies</a> (<a href="SYNTHETO____TYPE-RESULT-EQUIV.html">type-result-equiv</a> inits-result inits-result-equiv)
          (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="SYNTHETO____CHECK-PRODUCT-CONSTRUCT-EXPRESSION.html">check-product-construct-expression</a>
                      type inits inits-result expr ctxt)
                 (<a href="SYNTHETO____CHECK-PRODUCT-CONSTRUCT-EXPRESSION.html">check-product-construct-expression</a>
                      type
                      inits inits-result-equiv expr ctxt)))
 :rule-classes :congruence)</pre> 
<p><b>Theorem: </b>check-product-construct-expression-of-expression-fix-expr</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> check-product-construct-expression-of-expression-fix-expr
        (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="SYNTHETO____CHECK-PRODUCT-CONSTRUCT-EXPRESSION.html">check-product-construct-expression</a>
                    type
                    inits inits-result (<a href="SYNTHETO____EXPRESSION-FIX.html">expression-fix</a> expr)
                    ctxt)
               (<a href="SYNTHETO____CHECK-PRODUCT-CONSTRUCT-EXPRESSION.html">check-product-construct-expression</a>
                    type inits inits-result expr ctxt)))</pre> 
<p><b>Theorem: </b>check-product-construct-expression-expression-equiv-congruence-on-expr</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 check-product-construct-expression-expression-equiv-congruence-on-expr
 (<a href="ACL2____IMPLIES.html">implies</a> (<a href="SYNTHETO____EXPRESSION-EQUIV.html">expression-equiv</a> expr expr-equiv)
          (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="SYNTHETO____CHECK-PRODUCT-CONSTRUCT-EXPRESSION.html">check-product-construct-expression</a>
                      type inits inits-result expr ctxt)
                 (<a href="SYNTHETO____CHECK-PRODUCT-CONSTRUCT-EXPRESSION.html">check-product-construct-expression</a>
                      type
                      inits inits-result expr-equiv ctxt)))
 :rule-classes :congruence)</pre> 
<p><b>Theorem: </b>check-product-construct-expression-of-context-fix-ctxt</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> check-product-construct-expression-of-context-fix-ctxt
        (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="SYNTHETO____CHECK-PRODUCT-CONSTRUCT-EXPRESSION.html">check-product-construct-expression</a>
                    type inits
                    inits-result expr (<a href="SYNTHETO____CONTEXT-FIX.html">context-fix</a> ctxt))
               (<a href="SYNTHETO____CHECK-PRODUCT-CONSTRUCT-EXPRESSION.html">check-product-construct-expression</a>
                    type inits inits-result expr ctxt)))</pre> 
<p><b>Theorem: </b>check-product-construct-expression-context-equiv-congruence-on-ctxt</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 check-product-construct-expression-context-equiv-congruence-on-ctxt
 (<a href="ACL2____IMPLIES.html">implies</a> (<a href="SYNTHETO____CONTEXT-EQUIV.html">context-equiv</a> ctxt ctxt-equiv)
          (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="SYNTHETO____CHECK-PRODUCT-CONSTRUCT-EXPRESSION.html">check-product-construct-expression</a>
                      type inits inits-result expr ctxt)
                 (<a href="SYNTHETO____CHECK-PRODUCT-CONSTRUCT-EXPRESSION.html">check-product-construct-expression</a>
                      type
                      inits inits-result expr ctxt-equiv)))
 :rule-classes :congruence)</pre> 

</body>
</html>
