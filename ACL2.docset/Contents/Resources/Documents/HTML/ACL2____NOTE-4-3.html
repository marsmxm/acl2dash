<html>
<head>
<meta charset="UTF-8">
<title>Note-4-3</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____NOTE-4-3">Click for Note-4-3 in the Full Manual</a></h3>

<p>ACL2 Version  4.3 (July, 2011) Notes</p><p>NOTE!  New users can ignore these release notes, because the <a href="COMMON-LISP____DOCUMENTATION.html">documentation</a> has been updated to reflect all changes that are recorded 
 here.</p> 
 
 <p>Below we roughly organize the changes since Version 4.2 into the following 
 categories of changes: existing features, new features, heuristic 
 improvements, bug fixes, changes at the system level and to distributed books, 
 Emacs support, and experimental versions.  Each change is described in just 
 one category, though of course many changes could be placed in more than one 
 category.</p> 
 
 <p><b>CHANGES TO EXISTING FEATURES</b></p> 
 
 <p>Significant changes have been made for list-processing primitives such as 
 <span class="tt"><a href="COMMON-LISP____MEMBER.html">member</a></span> and <span class="tt"><a href="COMMON-LISP____ASSOC.html">assoc</a></span>; see <a href="ACL2____EQUALITY-VARIANTS.html">equality-variants</a>.  In summary: 
 instead of separate functions based on <span class="tt"><a href="COMMON-LISP____EQ.html">eq</a></span>, <span class="tt"><a href="COMMON-LISP____EQL.html">eql</a></span>, and <span class="tt"><a href="COMMON-LISP____EQUAL.html">equal</a></span>, there is essentially just one function, which is based on <span class="tt"><a href="COMMON-LISP____EQUAL.html">equal</a></span>; the <span class="tt"><a href="COMMON-LISP____EQ.html">eq</a></span> and <span class="tt"><a href="COMMON-LISP____EQL.html">eql</a></span> variants are logically just the <span class="tt"><a href="COMMON-LISP____EQUAL.html">equal</a></span> variant.  For example, <span class="tt"><a href="ACL2____MEMBER-EQ.html">member-eq</a></span> and <span class="tt"><a href="COMMON-LISP____MEMBER.html">member</a></span> are macros 
 that generate corresponding calls of <span class="tt"><a href="ACL2____MEMBER-EQUAL.html">member-equal</a></span> in the logic, 
 although in raw Lisp they will execute using tests <span class="tt"><a href="COMMON-LISP____EQ.html">eq</a></span> and <span class="tt"><a href="COMMON-LISP____EQL.html">eql</a></span>, 
 respectively.  References to any of these in logical contexts such as <a href="ACL2____THEORIES.html">theories</a> are now references to the function based on <span class="tt"><a href="COMMON-LISP____EQUAL.html">equal</a></span>; for 
 example, the hint <span class="v">:in-theory (<a href="ACL2____DISABLE.html">disable</a> member)</span> is completely equivalent to 
 the hint <span class="v">:in-theory (<a href="ACL2____DISABLE.html">disable</a> member-equal)</span>.  Distributed books have been 
 modified as necessary to accommodate this change.  While the need for such 
 changes was relatively infrequent, changes were for example needed in contexts 
 where terms are manipulated directly; for example, <span class="tt"><a href="ACL2____DEFEVALUATOR.html">defevaluator</a></span> needs 
 to mention <span class="tt"><a href="ACL2____MEMBER-EQUAL.html">member-equal</a></span> rather than <span class="tt"><a href="COMMON-LISP____MEMBER.html">member</a></span>, just as it was 
 already the case to mention, say, <span class="tt"><a href="ACL2____BINARY-APPEND.html">binary-append</a></span> rather than <span class="tt"><a href="COMMON-LISP____APPEND.html">append</a></span>.  Again, see <a href="ACL2____EQUALITY-VARIANTS.html">equality-variants</a> for more information about 
 equality variants.</p> 
 
 <p>A few improvements were made in support of the modified treatment of 
 equality variants discussed above.  The changes include the following.</p> 
 
 <blockquote> 
 
 <p>o We now allow the use of macro aliases (see <a href="ACL2____MACRO-ALIASES-TABLE.html">macro-aliases-table</a> in 
 <span class="v">:trigger-fns</span> of rules (see <a href="ACL2____RULE-CLASSES.html">rule-classes</a>).</p> 
 
 <p>o We now remove so-called ``guard holders'' (including calls of <span class="tt"><a href="ACL2____RETURN-LAST.html">return-last</a></span>, hence of <span class="tt"><a href="ACL2____MBE.html">mbe</a></span>) in <span class="v">:trigger-terms</span> of rules.</p> 
 
 <p>o We also remove guard holders in formulas of <span class="v">:</span><span class="tt"><a href="ACL2____CONGRUENCE.html">congruence</a></span> and 
 <span class="tt"><a href="ACL2____TYPE-PRESCRIPTION.html">type-prescription</a></span> rules.</p> 
 
 <p>o Macros <span class="v">union-eq</span> and <span class="v">intersection-eq</span> can now take any positive 
 number of arguments, and <span class="tt"><a href="ACL2____UNION-EQ.html">union-eq</a></span> can take zero arguments.  (Thanks to 
 Jared Davis for requesting this enhancement.)  The same can be said for new 
 macros <span class="tt"><a href="ACL2____UNION_42.html">union$</a></span> and <span class="tt"><a href="ACL2____INTERSECTION_42.html">intersection$</a></span>, respectively.</p> 
 
 <p>o A few changes were made to built-in theorems from source file 
 <span class="v">axioms.lisp</span>, in particular disabling <span class="v">:</span><span class="tt"><a href="ACL2____TYPE-PRESCRIPTION.html">type-prescription</a></span> rule 
 <span class="v">consp-assoc-equal</span> (formerly two enabled rules, <span class="v">consp-assoc-eq</span> and 
 <span class="v">consp-assoc</span>) but adding this theorem as a <span class="v">:forward-chaining</span> rule, 
 and similarly for <span class="v">true-list-listp-forward-to-true-listp-assoc-equal</span> (and 
 eliminating rule <span class="v">true-list-listp-forward-to-true-listp-assoc-eq</span>; and 
 disabling rule <span class="v">true-listp-cadr-assoc-eq-for-open-channels-p</span>.  Also, 
 theorem <span class="v">all-boundp-preserves-assoc</span> has been renamed to 
 <span class="v">all-boundp-preserves-assoc-equal</span> and also strengthened.</p> 
 
 <p>o Some <a href="ACL2____GUARD.html">guard</a>s were slightly improved (logically weaker or the 
 same).</p>
</blockquote> 
 
 <p>Improved <span class="v">get-output-stream-string$</span> to allow for a context and to do 
 genuine error printing instead of using <span class="tt"><a href="ACL2____CW.html">cw</a></span>.  See <a href="ACL2____IO.html">io</a>.</p> 
 
 <p>Added the symbols <span class="tt"><a href="COMMON-LISP____FLET.html">flet</a></span> and <span class="tt"><a href="ACL2____WITH-LOCAL-STOBJ.html">with-local-stobj</a></span> to 
 <span class="v">*acl2-exports*</span>.</p> 
 
 <p>A small change was made to the processing of more than one <span class="v">:</span><span class="tt"><a href="ACL2____GUARD.html">guard</a></span> declaration for the same function.  In particular, a guard of <span class="v">t</span> is 
 essentially ignored.</p> 
 
 <p>Attachments are now allowed during evaluation of the first argument of 
 <span class="tt"><a href="ACL2____PROG2_42.html">prog2$</a></span> even in contexts (such as proofs) during which the use of 
 attachments is normally prohibited.  More generally, the second of the three 
 arguments of <span class="tt"><a href="ACL2____RETURN-LAST.html">return-last</a></span> has this property, except in the case of 
 <span class="tt"><a href="ACL2____MBE.html">mbe</a></span> (or related macros like <span class="tt"><a href="ACL2____MBE1.html">mbe1</a></span>), where the <span class="v">exec</span> 
 argument may provide the value.  Thanks to Sol Swords for useful discussions 
 leading us to implement this enhancement.</p> 
 
 <p>The restriction has been removed that prohibited the use of <span class="tt"><a href="ACL2____MBE.html">mbe</a></span> 
 inside <span class="tt"><a href="ACL2____ENCAPSULATE.html">encapsulate</a></span> <a href="ACL2____EVENTS.html">events</a> with a non-empty <a href="ACL2____SIGNATURE.html">signature</a>. 
 This restriction was introduced in Version 3.4, but has not been necessary 
 since Version 4.0, when we first started disallowing <a href="ACL2____GUARD.html">guard</a> verification 
 for functions introduced non-<a href="ACL2____LOCAL.html">local</a>ly inside such <span class="tt"><a href="ACL2____ENCAPSULATE.html">encapsulate</a></span> 
 events.</p> 
 
 <p>We weakened the checks involving common ancestors for evaluator and <a href="ACL2____META.html">meta</a> (and <a href="ACL2____CLAUSE-PROCESSOR.html">clause-processor</a>) functions (see <a href="ACL2____EVALUATOR-RESTRICTIONS.html">evaluator-restrictions</a>) so that except in the <span class="tt"><a href="ACL2____MBE.html">mbe</a></span> case, the 
 next-to-last argument of <span class="tt"><a href="ACL2____RETURN-LAST.html">return-last</a></span> is not considered.  Thanks to Sol 
 Swords for bringing this issue to our attention.</p> 
 
 <p>The macro <span class="tt"><a href="COMMON-LISP____APPEND.html">append</a></span> no longer requires at least two arguments.  Thanks 
 to Dave Greve for requesting this enhancement.</p> 
 
 <p>(Mostly for system hackers) Now, <span class="tt"><a href="ACL2____BREAK-ON-ERROR.html">break-on-error</a></span> breaks at a more 
 appropriate (earlier) time for certain system functions that do not return 
 state, such as <span class="v">translate11</span>.  Thanks to David Rager for requesting this 
 improvement.</p> 
 
 <p><span class="tt"><a href="ACL2____SHOW-ACCUMULATED-PERSISTENCE.html">Show-accumulated-persistence</a></span> may take a new argument, <span class="v">:runes</span>, 
 which simply causes an alphabetical list of <a href="ACL2____RUNE.html">rune</a>s to be printed 
 out.</p> 
 
 <p>Improved <span class="tt"><a href="ACL2____TRACE_42.html">trace$</a></span> so that <span class="v">:entry</span>, <span class="v">:exit</span>, and <span class="v">:cond</span> 
 forms may reference <span class="v">state</span> even if the function being traced does not 
 include <span class="v">state</span> as a formal.</p> 
 
 <p>The system function <span class="v">acl2x-expansion-alist</span> now takes a second argument, 
 namely <span class="tt"><a href="ACL2____STATE.html">state</a></span>.  This change allows for more flexibility in the sorts of 
 attachments that can be made to this function (see <a href="ACL2____DEFATTACH.html">defattach</a>).  Thanks 
 to Jared Davis and Sol Swords for requesting this enhancement and providing a 
 preliminary implementation.</p> 
 
 <p>An obscure <a href="ACL2____PROOF-BUILDER.html">proof-builder</a> change, unlikely to affect users, replaces 
 the state global variables <span class="v">erp</span>, <span class="v">val</span>, <span class="v">print-macroexpansion-flg</span>, 
 and <span class="v">print-prompt-and-instr-flg</span> by <span class="v">pc-erp</span>, <span class="v">pc-val</span>, 
 <span class="v">pc-print-macroexpansion-flg</span>, and <span class="v">pc-print-prompt-and-instr-flg</span>, 
 respectively.</p> 
 
 <p><a href="ACL2____STATE.html">State</a> globals <span class="v">fmt-hard-right-margin</span> and 
 <span class="v">fmt-soft-right-margin</span> are now untouchable (see <a href="ACL2____SET-FMT-HARD-RIGHT-MARGIN.html">set-fmt-hard-right-margin</a> and see <a href="ACL2____PUSH-UNTOUCHABLE.html">push-untouchable</a>).  If you bind 
 these <span class="v">state</span> globals with <span class="tt"><a href="ACL2____STATE-GLOBAL-LET_A2.html">state-global-let*</a></span>, then you will need to 
 do so with appropriate setters to restore their values, for example as 
 follows.</p> 
 
 <pre class="code">(<a href="ACL2____STATE-GLOBAL-LET_A2.html">state-global-let*</a>
 ((<a href="ACL2____FMT-HARD-RIGHT-MARGIN.html">fmt-hard-right-margin</a> 500 set-fmt-hard-right-margin)
  (<a href="ACL2____FMT-SOFT-RIGHT-MARGIN.html">fmt-soft-right-margin</a> 480 set-fmt-soft-right-margin))
 ...)</pre> 
 
 <p>The error message has been improved for the case of evaluating an undefined 
 function that has an attachment (see <a href="ACL2____DEFATTACH.html">defattach</a>).  Thanks to Jared Davis 
 for sending the following example, which illustrates the additional part of 
 the message.</p> 
 
 <pre class="code">ACL2 !&gt;(<a href="ACL2____DEFSTUB.html">defstub</a> foo (x) t)
[[... output omitted ...]]
ACL2 !&gt;(<a href="ACL2____DEFATTACH.html">defattach</a> foo identity)
[[... output omitted ...]]
ACL2 !&gt;(<a href="ACL2____DEFCONST.html">defconst</a> *x* (foo 3))

ACL2 Error in ( DEFCONST *X* ...):  ACL2 cannot ev the call of undefined
function FOO on argument list:

(3)

Note that because of logical considerations, attachments (including
IDENTITY) must not be called in this context.

[[... additional output omitted ...]]</pre> 
 
 <p>The directory string supplied to <span class="tt"><a href="ACL2____ADD-INCLUDE-BOOK-DIR.html">add-include-book-dir</a></span> no longer 
 must terminate with the `<span class="v">/</span>' character, as had been required in some Lisp 
 implementations.  Thanks to Sol Swords for bringing this issue to our 
 attention.</p> 
 
 <p>We no longer print induction schemes with <a href="ACL2____GAG-MODE.html">gag-mode</a>; use <span class="v">:</span><span class="tt"><a href="ACL2____PSO.html">pso</a></span> if you want to see them.  Thanks to Dave Greve for this suggestion.</p> 
 
 <p>It is now legal to supply a constant for a <a href="ACL2____STOBJ.html">stobj</a> array dimension. 
 See <a href="ACL2____DEFSTOBJ.html">defstobj</a>.  Thanks to Warren Hunt for requesting this 
 enhancement.</p> 
 
 <p>We cleaned up a few issues with <span class="tt"><a href="ACL2____DEFPKG.html">defpkg</a></span>.</p> 
 
 <blockquote> 
 
 <p>o It is no longer illegal to submit a <span class="tt"><a href="ACL2____DEFPKG.html">defpkg</a></span> form in raw-mode (see 
 <a href="ACL2____SET-RAW-MODE.html">set-raw-mode</a>).  Thanks to Jun Sawada for reporting an example in which 
 an <span class="tt"><a href="ACL2____INCLUDE-BOOK.html">include-book</a></span> form submitted in raw-mode caused an error because of 
 a `hidden' <span class="tt"><a href="ACL2____DEFPKG.html">defpkg</a></span> form (see <a href="ACL2____HIDDEN-DEFPKG.html">hidden-defpkg</a>).  There will no 
 longer be an error in such cases.</p> 
 
 <p>o It had been the case that <a href="ACL2____LOCAL.html">local</a>ly including a book could make it 
 possible to use a package defined by that book.  Consider for example the 
 following book, <span class="v">foo.lisp</span>.</p> 
 
 <pre class="code">(<a href="COMMON-LISP____IN-PACKAGE.html">in-package</a> "ACL2")
(<a href="ACL2____LOCAL.html">local</a> (<a href="ACL2____INCLUDE-BOOK.html">include-book</a> "arithmetic/top" :dir :system))</pre> 
 
 <p>After certifying this book, it had been possible to admit the following 
 events in a new session.</p> 
 
 <pre class="code">(<a href="ACL2____INCLUDE-BOOK.html">include-book</a> "foo")
(<a href="ACL2____DEFCONST.html">defconst</a> acl2-asg::*foo* 3)
(<a href="ACL2____DEFCONST.html">defconst</a> *c* 'acl2-asg::xyz)</pre> 
 
 <p>In Version_4.3, neither of these <span class="tt"><a href="ACL2____DEFCONST.html">defconst</a></span> events is admitted.</p> 
 
 <p>o A hard Lisp error is now avoided that had been possible in rare cases 
 when including books with hidden packages (see <a href="ACL2____HIDDEN-DEFPKG.html">hidden-defpkg</a>). An 
 example may be found in a comment in the <span class="tt"><a href="ACL2____DEFLABEL.html">deflabel</a></span> for <span class="v">note-4-3</span> 
 (in ACL2 source file <span class="v">ld.lisp</span>).</p>
</blockquote> 
 
 <p>The undocumented (but sometimes useful) functions <span class="v">packn1</span> and 
 <span class="v">packn</span> are now <a href="ACL2____GUARD.html">guard</a>-verified <span class="v">:</span><span class="tt"><a href="ACL2____LOGIC.html">logic</a></span> mode functions. 
 Thanks to Sandip Ray for requesting this enhancement.</p> 
 
 <p>It had been the case that when including a book, functions defined in the 
 book's certification <a href="ACL2____WORLD.html">world</a> (that is, in its <a href="ACL2____PORTCULLIS.html">portcullis</a> <a href="ACL2____COMMAND.html">command</a>s) were typically not given compiled code.  That has been fixed.</p> 
 
 <p>The commands <span class="v">:</span><span class="tt"><a href="ACL2____PL.html">pl</a></span> and <span class="v">:</span><span class="tt"><a href="ACL2____PL2.html">pl2</a></span> have been improved, 
 primarily by printing information for more rule classes.  See <a href="ACL2____PL.html">pl</a> and 
 see <a href="ACL2____PL2.html">pl2</a>.  See also the item below about the new <a href="ACL2____PROOF-BUILDER.html">proof-builder</a> 
 command, <span class="v">show-type-prescriptions</span>.</p> 
 
 <p><b>NEW FEATURES</b></p> 
 
 <p>New macros <span class="tt"><a href="ACL2____MV_F3-LET.html">mv?-let</a></span> and <span class="tt"><a href="ACL2____MV_F3.html">mv?</a></span> extend the functionality of 
 <span class="tt"><a href="ACL2____MV-LET.html">mv-let</a></span> and <span class="tt"><a href="ACL2____MV.html">mv</a></span> (respectively) to the case of a single 
 value.</p> 
 
 <p>Macro <a href="ACL2____WITH-LOCAL-STATE.html">with-local-state</a> is available for system programmers who wish 
 bind <span class="tt"><a href="ACL2____STATE.html">state</a></span> locally, essentially using <a href="ACL2____WITH-LOCAL-STOBJ.html">with-local-stobj</a>.  But 
 this should only be done with extreme care, and it requires an active trust 
 tag; see <a href="ACL2____WITH-LOCAL-STATE.html">with-local-state</a>.</p> 
 
 <p>Formatted printing functions now have analogues that print to strings and 
 do not take an output channel or <span class="tt"><a href="ACL2____STATE.html">state</a></span> as arguments.  See <a href="ACL2____PRINTING-TO-STRINGS.html">printing-to-strings</a>.</p> 
 
 <p>The system function <span class="v">ancestors-check</span> is now available for verified 
 modification by users, i.e., attachment using <span class="v">(<a href="ACL2____DEFATTACH.html">defattach</a> ancestors-check
 &lt;your_function&gt;)</span>.  Thanks to Robert Krug for providing the necessary proof 
 support, which we modified only in small ways.</p> 
 
 <p>New macros, <span class="v">observation-cw</span> and <span class="v">warning$-cw</span>, provide formatted 
 printing of <span class="tt"><a href="ACL2____OBSERVATION.html">observation</a></span>s and warnings (respectively) without <span class="tt"><a href="ACL2____STATE.html">state</a></span>.  Thanks to Harsh Raju Chamarthi and David Rager for requests leading 
 to these utilities.  <span class="v">Observation-cw</span> is now used in some of the 
 distributed books (thanks to Robert Krug for useful interaction for that).</p> 
 
 <p>The <a href="ACL2____PROOF-BUILDER.html">proof-builder</a> command <span class="v">type-alist</span> (see <a href="ACL2____PROOF-BUILDER-COMMANDS.html">proof-builder-commands</a>) now takes an optional third argument that causes the 
 production of forward-chaining reports (see <a href="ACL2____FORWARD-CHAINING-REPORTS.html">forward-chaining-reports</a>). 
 Thanks to Dave Greve for requesting such an enhancement.</p> 
 
 <p>The reports generated by forward-chaining, <a href="ACL2____FORWARD-CHAINING-REPORTS.html">forward-chaining-reports</a>, 
 have been changed to indicate when a conclusion reached by forward chaining is 
 <span class="v">REDUNDANT</span> with respect to the type information already known.  Thanks to 
 Dave Greve for suggesting this enhancement.</p> 
 
 <p>The utility <span class="tt"><a href="ACL2____WITH-PROVER-TIME-LIMIT.html">with-prover-time-limit</a></span> is now legal for <a href="ACL2____EVENTS.html">events</a> 
 (see <a href="ACL2____EMBEDDED-EVENT-FORM.html">embedded-event-form</a>).  For example, the following is now 
 legal.</p> 
 
 <pre class="code">(<a href="ACL2____ENCAPSULATE.html">encapsulate</a>
 ()
 (<a href="ACL2____WITH-PROVER-TIME-LIMIT.html">with-prover-time-limit</a>
  2
  (<a href="ACL2____DEFTHM.html">defthm</a> append-assoc
    (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="COMMON-LISP____APPEND.html">append</a> (<a href="COMMON-LISP____APPEND.html">append</a> x y) z)
           (<a href="COMMON-LISP____APPEND.html">append</a> x (<a href="COMMON-LISP____APPEND.html">append</a> y z))))))</pre> 
 
 <p>The new utility <span class="tt"><a href="ACL2____WITH-PROVER-STEP-LIMIT.html">with-prover-step-limit</a></span> is analogous to the utility 
 <span class="tt"><a href="ACL2____WITH-PROVER-TIME-LIMIT.html">with-prover-time-limit</a></span>, but counts ``prover steps'' rather than 
 checking for time elapsed.  See <a href="ACL2____WITH-PROVER-STEP-LIMIT.html">with-prover-step-limit</a>.  Also see <a href="ACL2____SET-PROVER-STEP-LIMIT.html">set-prover-step-limit</a> to provide a default step-limit.  Note that just as 
 <span class="tt"><a href="ACL2____WITH-PROVER-TIME-LIMIT.html">with-prover-time-limit</a></span> may now be used to create <a href="ACL2____EVENTS.html">events</a>, as 
 discussed just above, <span class="tt"><a href="ACL2____WITH-PROVER-STEP-LIMIT.html">with-prover-step-limit</a></span> may also be used to 
 create <a href="ACL2____EVENTS.html">events</a>.  Thanks to Carl Eastlund for requesting support for 
 step-limits.</p> 
 
 <p>The macro <span class="tt"><a href="ACL2____PROGN_42.html">progn$</a></span> is analogous to <span class="tt"><a href="ACL2____PROG2_42.html">prog2$</a></span>, but allows an 
 arbitrary number of arguments.  For example:</p> 
 
 <pre class="code">ACL2 !&gt;:trans1 (<a href="ACL2____PROGN_42.html">progn$</a> (f1 x) (f2 x) (f3 x))
 (<a href="ACL2____PROG2_42.html">PROG2$</a> (F1 X) (<a href="ACL2____PROG2_42.html">PROG2$</a> (F2 X) (F3 X)))
ACL2 !&gt;</pre> 
 
 <p>Thanks to David Rager for contributing this macro.</p> 
 
 <p>The macro <span class="tt"><a href="ACL2____DEFATTACH.html">defattach</a></span> may now be supplied the argument 
 <span class="v">:skip-checks :cycles</span>.  In this case, as with argument <span class="v">:skip-checks
 t</span>, a trust tag is required (see <a href="ACL2____DEFTTAG.html">defttag</a>), and no logical claims are 
 made.  The effect is to avoid the usual check that the extended ancestor 
 relation has no cycles (see <a href="ACL2____DEFATTACH.html">defattach</a>).  Thanks to Dave Greve for 
 requesting this feature.</p> 
 
 <p>You can now limit the printing of subgoal names when using <span class="v">:</span><span class="tt"><a href="ACL2____SET-GAG-MODE.html">set-gag-mode</a></span><span class="v"> :goals</span>.  See <a href="ACL2____SET-PRINT-CLAUSE-IDS.html">set-print-clause-ids</a>.  Thanks to Karl 
 Hoech for a suggestion leading to this enhancement.</p> 
 
 <p>A new <a href="ACL2____PROOF-BUILDER.html">proof-builder</a> command, <span class="v">show-type-prescriptions</span>, or 
 <span class="v">st</span> for short, provides information about <span class="v">:</span><span class="tt"><a href="ACL2____TYPE-PRESCRIPTION.html">type-prescription</a></span> 
 rules that match a given term.  Thanks to Dave Greve for requesting this 
 enhancement.  See also the item above about related improvements to commands 
 <span class="v">:</span><span class="tt"><a href="ACL2____PL.html">pl</a></span> and <span class="v">:</span><span class="tt"><a href="ACL2____PL2.html">pl2</a></span>.</p> 
 
 <p><b>HEURISTIC IMPROVEMENTS</b></p> 
 
 <p>ACL2 now avoids some repeated attempts to rewrite hypotheses of rewrite 
 rules.  See <a href="ACL2____SET-RW-CACHE-STATE.html">set-rw-cache-state</a> for a discussion of this behavior and 
 how to avoid it.  The default behavior has been observed to reduce by 11% the 
 overall time required to complete a regression.  Here are the directories that 
 had the top three time decreases and top three time increases, shown in 
 seconds.</p> 
 
 <pre class="code">-368 coi/gacc (1064 down to 696: decrease of 35%)
-220 workshops/1999/ste (664 down to 444: decrease of 33%)
-148 unicode (331 down to 183: decrease of 45%)
....
  +7 workshops/2002/cowles-flat/support (229 up to 236: increase of 3%)
  +8 workshops/1999/ivy/ivy-v2/ivy-sources (508 up to 516: increase of 2%)
 +12 workshops/2009/hardin/deque-stobj (78 up to 91: increase of 17%)</pre> 
 
 <p>The so-called ``ancestors check,'' which is used to limit backchaining, has 
 been strengthened so that two calls of <span class="tt"><a href="COMMON-LISP____EQUAL.html">equal</a></span> are considered the same 
 even if their arguments appear in the opposite order.  Thanks to Robert Krug 
 for providing an implementation and a useful discussion.</p> 
 
 <p>The check for <a href="ACL2____IRRELEVANT-FORMALS.html">irrelevant-formals</a> in processing of <span class="tt"><a href="COMMON-LISP____DEFUN.html">defun</a></span>s has 
 been made more efficient.  Thanks to Eric Smith for reporting this issue in 
 2001 (!) and thanks to Warren Hunt for recently sending an example.  For that 
 example, we have seen the time for the <a href="ACL2____IRRELEVANT-FORMALS.html">irrelevant-formals</a> check reduced 
 from about 10 seconds to about 0.04 seconds.</p> 
 
 <p>(GCL only) The macro <span class="tt"><a href="ACL2____MV.html">mv</a></span> has been modified so that certain fixnum 
 boxing can be avoided.</p> 
 
 <p>(Allegro CL only) We have set to <span class="v">nil</span> four Allegro CL variables that 
 otherwise enable storing of certain source information (for details, see the 
 discussion of ``cross-referencing'' in ACL2 source file <span class="v">acl2-init.lisp</span>). 
 As a result of this change we have about a 6% speedup on the regression suite, 
 but a 27% time reduction on an example that includes a lot of books.</p> 
 
 <p>Exhaustive matching for the case of <a href="ACL2____FREE-VARIABLES.html">free-variables</a> has been extended 
 to <a href="ACL2____TYPE-PRESCRIPTION.html">type-prescription</a> rules, in analogy to the default setting 
 <span class="v">:match-free :all</span> already in place for <a href="ACL2____REWRITE.html">rewrite</a>, <a href="ACL2____LINEAR.html">linear</a>, and 
 <a href="ACL2____FORWARD-CHAINING.html">forward-chaining</a> rules.  See <a href="ACL2____FREE-VARIABLES-TYPE-PRESCRIPTION.html">free-variables-type-prescription</a>. 
 Thanks to Dave Greve for requesting this enhancement.</p> 
 
 <p><b>BUG FIXES</b></p> 
 
 <p>A soundness bug was fixed in some raw-Lisp code implementing the function, 
 <span class="tt"><a href="ACL2____TAKE.html">take</a></span>.  Thanks to Sol Swords for pointing out this bug with 
 (essentially) the following proof of <span class="v">nil</span>.</p> 
 
 <pre class="code">(<a href="ACL2____DEFTHMD.html">defthmd</a> take-1-nil-logic
  (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="ACL2____TAKE.html">take</a> 1 nil) '(nil))
  :hints(("Goal" :in-theory (<a href="ACL2____DISABLE.html">disable</a> (<a href="ACL2____TAKE.html">take</a>)))))
(<a href="ACL2____THM.html">thm</a> nil :hints (("Goal" :use take-1-nil-logic)))</pre> 
 
 <p>Calls of <span class="tt"><a href="ACL2____MBE.html">mbe</a></span> in ``safe-mode'' situations — i.e., during 
 evaluation of <span class="tt"><a href="ACL2____DEFCONST.html">defconst</a></span>, <span class="tt"><a href="ACL2____VALUE-TRIPLE.html">value-triple</a></span>, and <span class="tt"><a href="ACL2____DEFPKG.html">defpkg</a></span> 
 forms, and during macroexpansion — are now guard-checked.  Thus, in 
 these situations both the <span class="v">:logic</span> and <span class="v">:exec</span> forms will be evaluated, 
 with an error if the results are not equal.  Formerly, only the <span class="v">:logic</span> 
 form was evaluated, which was a soundness bug that could be exploited to prove 
 <span class="v">nil</span>.  For a such a proof and a bit of further explanation, see the 
 example at the top of the comments for <span class="v">(<a href="ACL2____DEFLABEL.html">deflabel</a> note-4-3 ..)</span> in ACL2 
 source file <span class="v">ld.lisp</span>.</p> 
 
 <p>It had been possible to prove <span class="v">nil</span> by proving the following theorem 
 using ACL2 built on CCL and then proving its negation using ACL2 built on a 
 different host Lisp.</p> 
 
 <pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> host-lisp-is-ccl
  (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="COMMON-LISP____CDR.html">cdr</a> (<a href="COMMON-LISP____ASSOC.html">assoc</a> 'host-lisp *initial-global-table*))
         :ccl)
  :rule-classes nil)</pre> 
 
 <p>This hole has been plugged by moving the setting of <span class="v">'host-lisp</span> out of 
 the constant <span class="v">*initial-global-table*</span>.</p> 
 
 <p>Fixed <span class="tt"><a href="ACL2____TRACE_42.html">trace$</a></span> for arguments that are <a href="ACL2____STOBJ.html">stobj</a> accessors or 
 updaters.  It also gives an informative error in this case when the accessor 
 or updater is a macro (because the introducing <span class="tt"><a href="ACL2____DEFSTOBJ.html">defstobj</a></span> event 
 specified <span class="v">:inline t</span>).</p> 
 
 <p>Avoided a potential error that could occur when no user home directory is 
 located.  Our previous solution for Windows simply avoided looking for ACL2 
 customization files (see <a href="ACL2____ACL2-CUSTOMIZATION.html">ACL2-customization</a>) and <span class="v">acl2-init.lsp</span> 
 files in a user's home directory.  With this change, we handle such files the 
 same for Windows as for non-Windows systems: we always look for ACL2 
 customization files (see <a href="ACL2____ACL2-CUSTOMIZATION.html">ACL2-customization</a>) and <span class="v">acl2-init.lsp</span> 
 files in a user's home directory, but only if such a directory exists.  Thanks 
 to Hanbing Liu for reporting this issue.</p> 
 
 <p>(GCL only) Fixed a bug that prevented the use of <span class="tt"><a href="ACL2____GET-OUTPUT-STREAM-STRING_42.html">get-output-stream-string$</a></span> when the host Lisp is GCL.</p> 
 
 <p>Fixed <span class="tt"><a href="ACL2____WITH-LIVE-STATE.html">with-live-state</a></span> to work properly for executable counterparts 
 (so-called ``*1*'' functions).</p> 
 
 <p>Fixed a bug in the error message caused by violating the <a href="ACL2____GUARD.html">guard</a> of a 
 macro call.</p> 
 
 <p>Fixed a bug in an error message that one could get when calling <span class="tt"><a href="ACL2____DEFATTACH.html">defattach</a></span> with argument <span class="v">:skip-checks t</span> to attach to a <span class="v">:</span><span class="tt"><a href="ACL2____PROGRAM.html">program</a></span> mode function symbol that was introduced with <span class="tt"><a href="COMMON-LISP____DEFUN.html">defun</a></span>.  (This 
 is indeed an error, but the message was confusing.)  Thanks to Robert Krug for 
 bringing this bug to our attention.</p> 
 
 <p>Fixed a bug in the loop-checking done on behalf of <span class="tt"><a href="ACL2____DEFATTACH.html">defattach</a></span>, which 
 could miss a loop.  For an example, see the comment about loop-checking in the 
 comments for <span class="v">(<a href="ACL2____DEFLABEL.html">deflabel</a> note-4-3 ..)</span> in ACL2 source file <span class="v">ld.lisp</span>.</p> 
 
 <p>Terms of the form <span class="v">(<a href="ACL2____HIDE.html">hide</a> &lt;term&gt;)</span> without free variables could be 
 simplified, contrary to the purpose of <span class="tt"><a href="ACL2____HIDE.html">hide</a></span>.  This is no longer the 
 case, Thanks to Dave Greve for reporting this issue.</p> 
 
 <p>An infinite loop could occur when an error was encountered in a call of 
 <span class="tt"><a href="ACL2____WORMHOLE-EVAL.html">wormhole-eval</a></span>, for example with the following form, and this has been 
 fixed.</p> 
 
 <pre class="code">(<a href="ACL2____WORMHOLE-EVAL.html">wormhole-eval</a> 'demo
               '(<a href="COMMON-LISP____LAMBDA.html">lambda</a> ()
                  (<a href="ACL2____ER.html">er</a> hard 'my-top "Got an error!"))
               nil)</pre> 
 
 <p>Fixed a bug in detection of package redefinition.  While we have no example 
 demonstrating this as a soundness bug, we cannot rule it out.</p> 
 
 <p>Fixed a bug in the message produced by an erroneous call of <span class="tt"><a href="COMMON-LISP____FLET.html">flet</a></span>. 
 Thanks to Jared Davis for reporting this bug and sending a helpful 
 example.</p> 
 
 <p>For a failed <span class="tt"><a href="ACL2____DEFAXIOM.html">defaxiom</a></span> or <span class="tt"><a href="ACL2____DEFTHM.html">defthm</a></span> event, we now avoid 
 printing <a href="ACL2____RUNE.html">rune</a>s that are used only in processing proposed rules to be 
 stored, but not in the proof itself.  Thanks to Dave Greve for sending us an 
 example that led us to make this fix.</p> 
 
 <p>ACL2 did not reliably enforce the restriction against non-<span class="tt"><a href="ACL2____LOCAL.html">local</a></span> 
 <span class="tt"><a href="ACL2____INCLUDE-BOOK.html">include-book</a></span> <a href="ACL2____EVENTS.html">events</a> inside <span class="tt"><a href="ACL2____ENCAPSULATE.html">encapsulate</a></span> events, as 
 illustrated by the following examples.</p> 
 
 <pre class="code">; not permitted (as expected)
(<a href="ACL2____ENCAPSULATE.html">encapsulate</a> () (<a href="ACL2____INCLUDE-BOOK.html">include-book</a> "foo"))

; permitted (as expected)
(<a href="ACL2____ENCAPSULATE.html">encapsulate</a> () (<a href="ACL2____LOCAL.html">local</a> (<a href="ACL2____INCLUDE-BOOK.html">include-book</a> "foo")))

; formerly permitted (surprisingly); now, not permitted
(<a href="ACL2____LOCAL.html">local</a> (<a href="ACL2____ENCAPSULATE.html">encapsulate</a> () (<a href="ACL2____INCLUDE-BOOK.html">include-book</a> "foo")))</pre> 
 
 <p>Moreover, the corresponding error message has been fixed.  Thanks to Jared 
 Davis and Sandip Ray for relevant discussions.</p> 
 
 <p>When <span class="tt"><a href="ACL2____INCLUDE-BOOK.html">include-book</a></span> is given a first argument that is not a string, a 
 more graceful error now occurs, where previously an ugly raw Lisp error had 
 occurred.  Thanks to Eric Smith for bringing this bug to our attention.</p> 
 
 <p>Fixed a bug in an error message that was printed when an unexpected 
 expression has occurred where a <span class="tt"><a href="COMMON-LISP____DECLARE.html">declare</a></span> form is expected.</p> 
 
 <p>(Since all functions are compiled when the host Lisp is CCL or SBCL, the 
 following bug fix did not occur for those host Lisps.)  After evaluation of 
 <span class="v">(</span><span class="tt"><a href="ACL2____SET-COMPILE-FNS.html">set-compile-fns</a></span><span class="v"> t)</span>, all defined functions are expected to 
 run with compiled code; but this was not the case for functions exported from 
 an <span class="tt"><a href="ACL2____ENCAPSULATE.html">encapsulate</a></span> event.  This has been fixed.</p> 
 
 <p>It had been the case that the <span class="v">:</span><span class="tt"><a href="ACL2____PUFF.html">puff</a></span> command was broken for 
 <span class="tt"><a href="ACL2____INCLUDE-BOOK.html">include-book</a></span> form whose book had been certified in a world with an 
 <span class="tt"><a href="ACL2____ADD-INCLUDE-BOOK-DIR.html">add-include-book-dir</a></span> event.  This has been fixed.</p> 
 
 <p>Evaluation of <a href="ACL2____STOBJ.html">stobj</a> updaters (see <a href="ACL2____DEFSTOBJ.html">defstobj</a>) may no longer use 
 attachments (see <a href="ACL2____DEFATTACH.html">defattach</a>).  This is a subtle point that will likely 
 not affect many users.  Thanks to Jared Davis for bringing this issue to our 
 attention; a slight variant of his example appears in a comment in ACL2 source 
 function <span class="v">oneify-cltl-code</span>.</p> 
 
 <p>It had been the case that even when a <a href="ACL2____STOBJ.html">stobj</a> creator function was 
 declared to be untouchable (see <a href="ACL2____PUSH-UNTOUCHABLE.html">push-untouchable</a>), a <span class="tt"><a href="ACL2____WITH-LOCAL-STOBJ.html">with-local-stobj</a></span> form based on that same stobj was permitted.  Now, such 
 forms are not admitted.  Thanks to Jared Davis for a query leading to this 
 fix.</p> 
 
 <p>Fixed a buggy message upon <a href="ACL2____GUARD.html">guard</a> violations, which was suggesting 
 the use of <span class="v">(<a href="ACL2____SET-GUARD-CHECKING.html">set-guard-checking</a> :none)</span> in some cases when guard-checking 
 was already set to <span class="v">:none</span>.</p> 
 
 <p>It had been possible to get a hard Lisp error when computing with <span class="tt"><a href="ACL2____EC-CALL.html">ec-call</a></span> in <a href="ACL2____BOOKS.html">books</a>.  The following is an example of such a book, whose 
 certification no longer causes an error.</p> 
 
 <pre class="code">(<a href="COMMON-LISP____IN-PACKAGE.html">in-package</a> "ACL2")
(<a href="COMMON-LISP____DEFUN.html">defun</a> f (x) x)
(<a href="ACL2____DEFCONST.html">defconst</a> *c* (<a href="ACL2____EC-CALL.html">ec-call</a> (f 3)))
(<a href="COMMON-LISP____DEFUN.html">defun</a> g (x) (<a href="COMMON-LISP____CONS.html">cons</a> x x))</pre> 
 
 <p>The command <span class="v">:</span><span class="tt"><a href="ACL2____PL2.html">pl2</a></span>, and also the <a href="ACL2____PROOF-BUILDER.html">proof-builder</a> commands 
 <span class="v">rewrite</span> and <span class="v">show-rewrites</span> (and hence their respective aliases <span class="v">r</span> 
 and <span class="v">sr</span>), now take rule-id arguments that can be <span class="v">:</span><span class="tt"><a href="ACL2____DEFINITION.html">definition</a></span> 
 <a href="ACL2____RUNE.html">rune</a>s.  These commands dealt with definition rules already, e.g.</p> 
 
 <pre class="code">:pl2 (<a href="COMMON-LISP____APPEND.html">append</a> x y) binary-append</pre> 
 
 <p>but they did not allow explicit specification of <span class="v">:definition</span> runes, 
 e.g.:</p> 
 
 <pre class="code">:pl2 (<a href="COMMON-LISP____APPEND.html">append</a> x y) (:definition binary-append)</pre> 
 
 <p>The following example illustrates a bug in the processing of (admittedly 
 obscure) <a href="ACL2____HINTS.html">hints</a> of the form <span class="v">:do-not-induct name</span>, where <span class="v">name</span> is 
 not <span class="v">t</span>, <span class="v">:otf-flg-override</span>, <span class="v">:otf</span>, or <span class="v">nil</span>.  In this example, 
 ACL2 had essentially ignored the hint and reverted to prove the original goal 
 by induction, rather than to skip the goal temporarily as is expected for such 
 hints.  Thanks to David Rager for a helpful discussion.</p> 
 
 <pre class="code">(<a href="ACL2____THM.html">thm</a> (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="COMMON-LISP____APPEND.html">append</a> (<a href="COMMON-LISP____APPEND.html">append</a> x y) z) (<a href="COMMON-LISP____APPEND.html">append</a> x y z))
          (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="COMMON-LISP____APPEND.html">append</a> (<a href="COMMON-LISP____APPEND.html">append</a> x2 y2) z2) (<a href="COMMON-LISP____APPEND.html">append</a> x2 y2 z2)))
     :hints (("Subgoal 1" :do-not-induct some-name)))</pre> 
 
 <p>Fixed a slight bug in the definitions of built-in <span class="tt"><a href="ACL2____THEORIES.html">theories</a></span>.  For 
 example, in a fresh ACL2 session the value of the following form is <span class="v">nil</span>, 
 but formerly included several <span class="v">:</span><span class="tt"><a href="ACL2____DEFINITION.html">definition</a></span> <a href="ACL2____RUNE.html">rune</a>s.</p> 
 
 <pre class="code">(<a href="COMMON-LISP____LET.html">let</a> ((<a href="ACL2____WORLD.html">world</a> (<a href="ACL2____W.html">w</a> state)))
  (<a href="ACL2____SET-DIFFERENCE-THEORIES.html">set-difference-theories</a> (<a href="ACL2____FUNCTION-THEORY.html">function-theory</a> :here)
                           (<a href="ACL2____FUNCTION-THEORY.html">function-theory</a> 'ground-zero)))</pre> 
 
 <p><b>CHANGES AT THE SYSTEM LEVEL AND TO DISTRIBUTED BOOKS</b></p> 
 
 <p>Many changes have been made to the distributed books, as recorded in svn 
 logs under the `Source' and 'Updates' links at the <a href="http://acl2-books.googlecode.com/" target="_blank"><nobr>ACL2 Books<img src="../Icon_External_Link.png" title="External link to http://acl2-books.googlecode.com/"></nobr></a> web page.  Here we 
 list some of the more significant changes.</p> 
 
 <blockquote> 
 
 <p>o A large library has been graciously contributed by the formal 
 verification group at Centaur Technology.  See <span class="v">books/centaur/</span> and, in 
 particular, file <span class="v">books/centaur/README</span>, which explains how the library 
 depends on the experimental HONS extension (see <a href="ACL2____HONS-AND-MEMOIZATION.html">hons-and-memoization</a>).</p> 
 
 <p>o Among the new books is an illustration of <span class="tt"><a href="ACL2____DEFATTACH.html">defattach</a></span>, 
 <span class="v">books/misc/defattach-example.lisp</span>, as well as a variant of defattach that 
 avoids the need for <a href="ACL2____GUARD.html">guard</a> verification, 
 <span class="v">books/misc/defattach-bang.lisp</span>.</p> 
 
 <p>o Distributed book <span class="v">books/misc/trace1.lisp</span> has been deleted.  It had 
 provided slightly more friendly <a href="COMMON-LISP____TRACE.html">trace</a> output for new users, but 
 distributed book <span class="v">books/misc/trace-star.lisp</span> may be better suited for that 
 purpose.</p>
</blockquote> 
 
 <p>ACL2 can once again be built on LispWorks (i.e., as the host Lisp), at 
 least with LispWorks 6.0.  Thanks to David Rager for useful conversations. 
 Several changes have been made from previous LispWorks-based ACL2 
 executables:<br> 
 
 o ACL2 now starts up in its read-eval-print loop.<br> 
 
 o You can save an image with <span class="tt"><a href="ACL2____SAVE-EXEC.html">save-exec</a></span>.<br> 
 
 o Multiprocessing is not enabled.<br> 
 
 o The stack size is managed using a LispWorks variable that causes the stack 
 to grow as needed.<br> 
 
 o When ACL2 is built a script file is written, as is done for other host 
 Lisps.  Thus, (assuming that no <span class="v">PREFIX</span> is specified), <span class="v">saved_acl2</span> is 
 just a small text file that invokes a binary executable, which for Lispworks 
 is <span class="v">saved_acl2.lw</span>.</p> 
 
 <p>The HTML documentation no longer has extra newlines in &lt;pre&gt; 
 environments.</p> 
 
 <p>Statistics on ACL2 code size may be found in distributed file 
 <span class="v">doc/acl2-code-size.txt</span>.  This file and other information can be found in 
 a new <a href="COMMON-LISP____DOCUMENTATION.html">documentation</a> topic, <a href="ACL2____ABOUT-ACL2.html">about-ACL2</a>.</p> 
 
 <p>Fixed the build process to pay attention to environment variable 
 <span class="v">ACL2_SYSTEM_BOOKS</span> (which may be supplied as a command-line argument to 
 `make').  An ACL2 executable can thus now be built even when there is no 
 <span class="v">books/</span> subdirectory if a suitable replacement directory is supplied.</p> 
 
 <p>Some warnings from the host Lisp are now suppressed that could formerly 
 appear.  For example, the warnings shown below occurs in Version 4.2 using 
 Allegro CL, but not in Version 4.3.</p> 
 
 <pre class="code">ACL2 !&gt;(<a href="COMMON-LISP____PROGN.html">progn</a> (<a href="ACL2____SET-IGNORE-OK.html">set-ignore-ok</a> t)
              (<a href="ACL2____SET-IRRELEVANT-FORMALS-OK.html">set-irrelevant-formals-ok</a> t)
              (<a href="COMMON-LISP____DEFUN.html">defun</a> bar (x y)
                x))
[[.. output omitted ..]]
 BAR
ACL2 !&gt;:comp bar
; While compiling BAR:
Warning: Variable Y is never used.
; While compiling (LABELS ACL2_*1*_ACL2::BAR ACL2_*1*_ACL2::BAR):
Warning: Variable Y is never used.
 BAR
ACL2 !&gt;</pre> 
 
 <p><b>EMACS SUPPORT</b></p> 
 
 <p>The distributed Emacs file <span class="v">emacs/emacs-acl2.el</span> now indents calls of 
 <span class="v">er@par</span> and <span class="v">warning$@par</span> the same way that calls of <span class="v">defun</span> are 
 indented.</p> 
 
 <p><b>EXPERIMENTAL VERSIONS</b></p> 
 
 <p>The parallel version (see <a href="ACL2____PARALLELISM.html">parallelism</a>) now supports parallel 
 evaluation of the ``waterfall'' part of the ACL2 prover; see <a href="ACL2____SET-WATERFALL-PARALLELISM.html">set-waterfall-parallelism</a>.  Thanks to David Rager for doing the primary 
 design and implementation work.</p> 
 
 <p>A new macro, <span class="tt"><a href="ACL2____SPEC-MV-LET.html">spec-mv-let</a></span>, supports speculative and parallel 
 execution in the parallel version, courtesy of David Rager.</p> 
 
 <p>Among the enhancements for the HONS version (see <a href="ACL2____HONS-AND-MEMOIZATION.html">hons-and-memoization</a>) are the following.</p> 
 
 <blockquote>
<p><span class="tt"><a href="ACL2____MEMOIZE.html">Memoize</a></span>d functions may now be traced (see <a href="ACL2____TRACE_42.html">trace$</a>).  Thanks to Sol Swords for requesting this enhancement.</p> 
 
 <p><span class="tt"><a href="ACL2____MEMOIZE-SUMMARY.html">Memoize-summary</a></span> and <span class="tt"><a href="ACL2____CLEAR-MEMOIZE-STATISTICS.html">clear-memoize-statistics</a></span> are now 
 <span class="v">:</span><span class="tt"><a href="ACL2____LOGIC.html">logic</a></span> mode functions that return <span class="v">nil</span>.  Thanks to Sol Swords 
 for this enhancement.</p> 
 
 <p><span class="tt"><a href="ACL2____MEMOIZE.html">Memoize</a></span> is now explicitly illegal for constrained functions. 
 (Already such memoization was ineffective.)</p> 
 
 <p>A new keyword argument, <span class="v">:AOKP</span>, controls whether or not to allow 
 memoization to take advantage of attachments; see <a href="ACL2____MEMOIZE.html">memoize</a> and for 
 relevant background, see <a href="ACL2____DEFATTACH.html">defattach</a>.</p> 
 
 <p><span class="tt"><a href="ACL2____MEMOIZE.html">Memoize</a></span> is now illegal by default for <span class="v">:</span><span class="tt"><a href="ACL2____LOGIC.html">logic</a></span> mode 
 functions that have not had their guards verified.  See <a href="ACL2____MEMOIZE.html">memoize</a> 
 (keyword <span class="v">:ideal-okp</span>) and see <a href="ACL2____ACL2-DEFAULTS-TABLE.html">ACL2-defaults-table</a> (key 
 <span class="v">:memoize-ideal-okp</span>) for and explanation of this restriction and how to 
 avoid it.</p> 
 
 <p><a href="ACL2____HISTORY.html">History</a> commands such as <span class="v">:</span><span class="tt"><a href="ACL2____PE.html">pe</a></span> and <span class="v">:</span><span class="tt"><a href="ACL2____PBT.html">pbt</a></span> now 
 display ``<span class="v">M</span>'' or ``<span class="v">m</span>'' to indicate memoized functions.  See <a href="ACL2____PC.html">pc</a>.</p>
</blockquote>
</body>
</html>
