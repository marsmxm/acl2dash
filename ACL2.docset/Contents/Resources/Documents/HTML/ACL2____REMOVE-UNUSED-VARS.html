<html>
<head>
<meta charset="UTF-8">
<title>Remove-unused-vars</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____REMOVE-UNUSED-VARS">Click for Remove-unused-vars in the Full Manual</a></h3>

<p>Remove all the lambda-bound variables that are not used.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(remove-unused-vars term) → new-term</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">term</span> — <font color="#606060">Guard <span class="v">(<a href="ACL2____PSEUDO-TERMP.html">pseudo-termp</a> term)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">new-term</span> — <font color="#606060">Type <span class="v">(<a href="ACL2____PSEUDO-TERMP.html">pseudo-termp</a> new-term)</span>, given the <a href="ACL2____GUARD.html">guard</a>.</font>
</dd> 
 
</dl></div> 
<p>We go through the term and, for each lambda expression we encounter, 
     we remove all the formal parameters, and corresponding actual parameters, 
     that are not free in the body of the lambda expression, 
     i.e. that are not used. 
     If all the formal parameters are unused, 
     we replace the lambda expression with its body.</p><p>The new term is logically equivalent to the old term. 
     If the actual parameters that have been removed have no side effects, 
     executing the new term gives the same outcomes as executing the old term 
     (except for perhaps doing so a little faster).</p><p>In order to prove termination, 
     we add an <span class="tt"><a href="ACL2____MBT.html">mbt</a></span> that establishes the hypothesis 
     of the theorem about <span class="v">remove-unused-vars-aux</span> 
     asserting that the new actual parameters are not more than the old ones.</p><p><b>Function: </b>remove-unused-vars</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
     remove-unused-vars (<a href="ACL2____TERM.html">term</a>)
     (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="ACL2____PSEUDO-TERMP.html">pseudo-termp</a> term)))
     (<a href="COMMON-LISP____LET.html">let</a> ((__function__ 'remove-unused-vars))
          (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
          (<a href="ACL2____B_A2.html">b*</a> (((when (<a href="ACL2____VARIABLEP.html">variablep</a> term)) term)
               ((when (<a href="ACL2____FQUOTEP.html">fquotep</a> term)) term)
               (fn (<a href="ACL2____FFN-SYMB.html">ffn-symb</a> term))
               ((when (<a href="COMMON-LISP____SYMBOLP.html">symbolp</a> fn))
                (<a href="ACL2____FCONS-TERM.html">fcons-term</a> fn
                            (<a href="ACL2____REMOVE-UNUSED-VARS-LST.html">remove-unused-vars-lst</a> (<a href="ACL2____FARGS.html">fargs</a> term))))
               (<a href="ACL2____FORMALS.html">formals</a> (<a href="ACL2____LAMBDA-FORMALS.html">lambda-formals</a> fn))
               (<a href="ACL2____BODY.html">body</a> (<a href="ACL2____LAMBDA-BODY.html">lambda-body</a> fn))
               (actuals (<a href="ACL2____FARGS.html">fargs</a> term))
               (body-vars (<a href="ACL2____ALL-VARS.html">all-vars</a> body))
               ((unless (<a href="ACL2____MBT.html">mbt</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="ACL2____LEN.html">len</a> formals) (<a href="ACL2____LEN.html">len</a> actuals))))
                nil)
               ((<a href="ACL2____MV.html">mv</a> formals actuals)
                (<a href="ACL2____REMOVE-UNUSED-VARS-AUX.html">remove-unused-vars-aux</a> formals actuals body-vars))
               ((when (<a href="COMMON-LISP____EQ.html">eq</a> formals nil))
                (<a href="ACL2____REMOVE-UNUSED-VARS.html">remove-unused-vars</a> body))
               (actuals (<a href="ACL2____REMOVE-UNUSED-VARS-LST.html">remove-unused-vars-lst</a> actuals))
               (<a href="ACL2____BODY.html">body</a> (<a href="ACL2____REMOVE-UNUSED-VARS.html">remove-unused-vars</a> body)))
              (<a href="ACL2____FCONS-TERM.html">fcons-term</a> (<a href="ACL2____MAKE-LAMBDA.html">make-lambda</a> formals body)
                          actuals))))</pre><p><b>Function: </b>remove-unused-vars-lst</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a> remove-unused-vars-lst (terms)
       (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="ACL2____PSEUDO-TERM-LISTP.html">pseudo-term-listp</a> terms)))
       (<a href="COMMON-LISP____LET.html">let</a> ((__function__ 'remove-unused-vars-lst))
            (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
            (<a href="COMMON-LISP____COND.html">cond</a> ((<a href="COMMON-LISP____ENDP.html">endp</a> terms) nil)
                  (t (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="ACL2____REMOVE-UNUSED-VARS.html">remove-unused-vars</a> (<a href="COMMON-LISP____CAR.html">car</a> terms))
                           (<a href="ACL2____REMOVE-UNUSED-VARS-LST.html">remove-unused-vars-lst</a> (<a href="COMMON-LISP____CDR.html">cdr</a> terms)))))))</pre><p><b>Function: </b>remove-unused-vars-aux</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a> remove-unused-vars-aux
       (<a href="ACL2____FORMALS.html">formals</a> actuals body-vars)
       (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____SYMBOL-LISTP.html">symbol-listp</a> formals)
                                   (<a href="ACL2____PSEUDO-TERM-LISTP.html">pseudo-term-listp</a> actuals)
                                   (<a href="ACL2____SYMBOL-LISTP.html">symbol-listp</a> body-vars))))
       (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP_____D3.html">=</a> (<a href="ACL2____LEN.html">len</a> formals) (<a href="ACL2____LEN.html">len</a> actuals))))
       (<a href="COMMON-LISP____LET.html">let</a> ((__function__ 'remove-unused-vars-aux))
            (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
            (<a href="ACL2____B_A2.html">b*</a> (((when (<a href="COMMON-LISP____ENDP.html">endp</a> formals)) (<a href="ACL2____MV.html">mv</a> nil nil))
                 (formal (<a href="COMMON-LISP____CAR.html">car</a> formals))
                 (actual (<a href="COMMON-LISP____CAR.html">car</a> actuals))
                 ((unless (<a href="ACL2____MEMBER-EQ.html">member-eq</a> formal body-vars))
                  (<a href="ACL2____REMOVE-UNUSED-VARS-AUX.html">remove-unused-vars-aux</a> (<a href="COMMON-LISP____CDR.html">cdr</a> formals)
                                          (<a href="COMMON-LISP____CDR.html">cdr</a> actuals)
                                          body-vars))
                 ((<a href="ACL2____MV.html">mv</a> formals actuals)
                  (<a href="ACL2____REMOVE-UNUSED-VARS-AUX.html">remove-unused-vars-aux</a> (<a href="COMMON-LISP____CDR.html">cdr</a> formals)
                                          (<a href="COMMON-LISP____CDR.html">cdr</a> actuals)
                                          body-vars)))
                (<a href="ACL2____MV.html">mv</a> (<a href="COMMON-LISP____CONS.html">cons</a> formal formals)
                    (<a href="COMMON-LISP____CONS.html">cons</a> actual actuals)))))</pre> 
 
 
 
<p><b>Theorem: </b>return-type-of-remove-unused-vars.new-term</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> return-type-of-remove-unused-vars.new-term
        (<a href="ACL2____IMPLIES.html">implies</a> (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____PSEUDO-TERMP.html">pseudo-termp</a> term))
                 (<a href="ACL2____B_A2.html">b*</a> ((?new-term (<a href="ACL2____REMOVE-UNUSED-VARS.html">remove-unused-vars</a> term)))
                     (<a href="ACL2____PSEUDO-TERMP.html">pseudo-termp</a> new-term)))
        :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>return-type-of-remove-unused-vars-lst.new-terms</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> return-type-of-remove-unused-vars-lst.new-terms
        (<a href="ACL2____IMPLIES.html">implies</a> (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____PSEUDO-TERM-LISTP.html">pseudo-term-listp</a> terms))
                 (<a href="ACL2____B_A2.html">b*</a> ((?new-terms (<a href="ACL2____REMOVE-UNUSED-VARS-LST.html">remove-unused-vars-lst</a> terms)))
                     (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____PSEUDO-TERM-LISTP.html">pseudo-term-listp</a> new-terms)
                          (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="ACL2____LEN.html">len</a> new-terms) (<a href="ACL2____LEN.html">len</a> terms)))))
        :rule-classes :rewrite)</pre> 

</body>
</html>
