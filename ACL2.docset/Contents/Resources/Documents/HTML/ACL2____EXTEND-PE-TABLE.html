<html>
<head>
<meta charset="UTF-8">
<title>Extend-pe-table</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____EXTEND-PE-TABLE">Click for Extend-pe-table in the Full Manual</a></h3>

<p>Replace <a href="ACL2____EVENTS.html">events</a> displayed by <a href="ACL2____HISTORY.html">history</a> commands</p><pre class="code">Example Form:
(<a href="ACL2____EXTEND-PE-TABLE.html">extend-pe-table</a> all-natp (all-p natp))

General Form:
(<a href="ACL2____EXTEND-PE-TABLE.html">extend-pe-table</a> event-name form)</pre> 
 
 <p>where <span class="v">event-name</span> is the name of an existing event and <span class="v">form</span> is to 
 be displayed by <a href="ACL2____HISTORY.html">history</a> commands in place of the actual event that 
 introduced <span class="v">event-name</span>.</p> 
 
 <p>We motivate and illustrate this utility with the following example. 
 Suppose you develop a macro to define the notion that each element of a list 
 satisfies a given predicate, as follows.</p> 
 
 <pre class="code">(<a href="COMMON-LISP____DEFMACRO.html">defmacro</a> all-p (pred)
  (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____SYMBOLP.html">symbolp</a> pred)))
  (<a href="COMMON-LISP____LET.html">let</a> ((<a href="ACL2____NAME.html">name</a> (<a href="ACL2____INTERN_42.html">intern$</a> (<a href="COMMON-LISP____CONCATENATE.html">concatenate</a> 'string "ALL-" (<a href="COMMON-LISP____SYMBOL-NAME.html">symbol-name</a> pred))
                       (<a href="ACL2____SYMBOL-PACKAGE-NAME.html">symbol-package-name</a> pred))))
    `(<a href="COMMON-LISP____DEFUN.html">defun</a> ,name (lst)
       (<a href="COMMON-LISP____IF.html">if</a> (<a href="COMMON-LISP____ATOM.html">atom</a> lst)
           t
         (<a href="COMMON-LISP____AND.html">and</a> (,pred lst)
              (,name (<a href="COMMON-LISP____CDR.html">cdr</a> lst)))))))</pre> 
 
 <p>So for example, after evaluating <span class="v">(all-p natp)</span>, you see the 
 following.</p> 
 
 <pre class="code">ACL2 !&gt;:pe all-natp
 L         2:x(ALL-P NATP)
              
&gt;L             (<a href="COMMON-LISP____DEFUN.html">DEFUN</a> ALL-NATP (LST)
                      (<a href="COMMON-LISP____IF.html">IF</a> (<a href="COMMON-LISP____ATOM.html">ATOM</a> LST)
                          T
                          (<a href="COMMON-LISP____AND.html">AND</a> (<a href="ACL2____NATP.html">NATP</a> LST) (ALL-NATP (<a href="COMMON-LISP____CDR.html">CDR</a> LST)))))
ACL2 !&gt;</pre> 
 
 <p>So far so good.  But suppose that instead, you introduce this event within 
 a call of <span class="tt"><a href="COMMON-LISP____PROGN.html">progn</a></span>, as follows.</p> 
 
 <pre class="code">(<a href="COMMON-LISP____PROGN.html">progn</a> (<a href="COMMON-LISP____DEFUN.html">defun</a> f1 (x) x)
       (<a href="COMMON-LISP____DEFUN.html">defun</a> f2 (x) x)
       (all-p natp))</pre> 
 
 <p>Then when we ask to see the event introducing <span class="v">all-natp</span>, we will not 
 see any use of the macro <span class="v">all-p</span>.</p> 
 
 <pre class="code">ACL2 !&gt;:pe all-natp
           2:x(<a href="COMMON-LISP____PROGN.html">PROGN</a> (<a href="COMMON-LISP____DEFUN.html">DEFUN</a> F1 # ...)
                     (<a href="COMMON-LISP____DEFUN.html">DEFUN</a> F2 # ...)
                     ...)
              
&gt;L             (<a href="COMMON-LISP____DEFUN.html">DEFUN</a> ALL-NATP (LST)
                      (<a href="COMMON-LISP____IF.html">IF</a> (<a href="COMMON-LISP____ATOM.html">ATOM</a> LST)
                          T
                          (<a href="COMMON-LISP____AND.html">AND</a> (<a href="ACL2____NATP.html">NATP</a> LST) (ALL-NATP (<a href="COMMON-LISP____CDR.html">CDR</a> LST)))))
ACL2 !&gt;</pre> 
 
 <p>Perhaps we therefore prefer that <a href="ACL2____HISTORY.html">history</a> commands display the event 
 for <span class="v">all-natp</span> as <span class="v">(all-p natp)</span>, rather than as the generated <span class="tt"><a href="COMMON-LISP____DEFUN.html">defun</a></span> event.  Of course, in this simple example that might not be important; 
 but it is easy to imagine examples where a small macro invocation generates a 
 large, ugly primitive event that is best not viewed by any user!</p> 
 
 <p>A solution is to associate the name <span class="v">all-natp</span> with the form that 
 introduced this name, as follows.</p> 
 
 <pre class="code">(<a href="ACL2____EXTEND-PE-TABLE.html">extend-pe-table</a> all-natp (all-p natp))</pre> 
 
 <p>After evaluating this form, we see the desired call of <span class="v">all-natp</span>.  In 
 essence, <span class="v">:</span><span class="tt"><a href="ACL2____PE.html">pe</a></span> and other <a href="ACL2____HISTORY.html">history</a> commands consider the 
 defining event for <span class="v">all-natp</span> to be <span class="v">(all-p natp)</span> rather than the 
 actual <span class="v">defun</span> form that introduced <span class="v">all-natp</span>.</p> 
 
 <pre class="code">ACL2 !&gt;:pe all-natp
           2  (<a href="COMMON-LISP____PROGN.html">PROGN</a> (<a href="COMMON-LISP____DEFUN.html">DEFUN</a> F1 # ...)
                     (<a href="COMMON-LISP____DEFUN.html">DEFUN</a> F2 # ...)
                     ...)
              
&gt;L             (ALL-P NATP)
ACL2 !&gt;</pre> 
 
 <p>As mentioned above, other <a href="ACL2____HISTORY.html">history</a> commands are sensitive to the 
 result of evaluating a call of <span class="v">extend-pe-table</span>.  For example:</p> 
 
 <pre class="code">ACL2 !&gt;:pcb all-natp
           2  (<a href="COMMON-LISP____PROGN.html">PROGN</a> (<a href="COMMON-LISP____DEFUN.html">DEFUN</a> F1 # ...)
                     (<a href="COMMON-LISP____DEFUN.html">DEFUN</a> F2 # ...)
                     ...)
 L             (<a href="COMMON-LISP____DEFUN.html">DEFUN</a> F1 (X) ...)
 L             (<a href="COMMON-LISP____DEFUN.html">DEFUN</a> F2 (X) ...)
 L             (ALL-P NATP)
ACL2 !&gt;</pre> 
 
 <p>Note that <span class="v">extend-pe-table</span> actually associates the indicated form with 
 the most recent event introducing the given event name.  Consider the 
 following example (output elided as shown).</p> 
 
 <pre class="code">ACL2 !&gt;(<a href="ACL2____ENCAPSULATE.html">encapsulate</a>
         ()
         (<a href="ACL2____PROGRAM.html">program</a>)
         (all-p alistp))
[[.. elided ..]]
 T
ACL2 !&gt;:pe all-alistp
           4:x(<a href="ACL2____ENCAPSULATE.html">ENCAPSULATE</a> NIL ...)
              
&gt;P             (<a href="COMMON-LISP____DEFUN.html">DEFUN</a> ALL-ALISTP (LST)
                      (<a href="COMMON-LISP____IF.html">IF</a> (<a href="COMMON-LISP____ATOM.html">ATOM</a> LST)
                          T
                          (<a href="COMMON-LISP____AND.html">AND</a> (<a href="ACL2____ALISTP.html">ALISTP</a> LST)
                               (ALL-ALISTP (<a href="COMMON-LISP____CDR.html">CDR</a> LST)))))
ACL2 !&gt;(<a href="ACL2____EXTEND-PE-TABLE.html">extend-pe-table</a> all-alistp (all-p alistp))

Summary
Form:  ( TABLE PE-TABLE ...)
Rules: NIL
Time:  0.00 seconds (prove: 0.00, print: 0.00, other: 0.00)
 PE-TABLE
ACL2 !&gt;:pe all-alistp
           4  (<a href="ACL2____ENCAPSULATE.html">ENCAPSULATE</a> NIL ...)
              
&gt;P             (ALL-P ALISTP)
ACL2 !&gt;(<a href="ACL2____VERIFY-TERMINATION.html">verify-termination</a> all-alistp)
[[.. elided ..]]
 ALL-ALISTP
ACL2 !&gt;:pe all-alistp
 L         6:x(<a href="ACL2____VERIFY-TERMINATION.html">VERIFY-TERMINATION</a> ALL-ALISTP)
              
&gt;L             (<a href="COMMON-LISP____DEFUN.html">DEFUN</a> ALL-ALISTP (LST)
                      (<a href="COMMON-LISP____IF.html">IF</a> (<a href="COMMON-LISP____ATOM.html">ATOM</a> LST)
                          T
                          (<a href="COMMON-LISP____AND.html">AND</a> (<a href="ACL2____ALISTP.html">ALISTP</a> LST)
                               (ALL-ALISTP (<a href="COMMON-LISP____CDR.html">CDR</a> LST)))))

Additional events for the logical name ALL-ALISTP:
           4  (<a href="ACL2____ENCAPSULATE.html">ENCAPSULATE</a> NIL ...)
              
&gt;PL            (ALL-P ALISTP)
ACL2 !&gt;(<a href="ACL2____EXTEND-PE-TABLE.html">extend-pe-table</a> all-alistp (:termination-verified (all-p alistp)))

Summary
Form:  ( TABLE PE-TABLE ...)
Rules: NIL
Time:  0.00 seconds (prove: 0.00, print: 0.00, other: 0.00)
 PE-TABLE
ACL2 !&gt;:pe all-alistp
 L         6  (<a href="ACL2____VERIFY-TERMINATION.html">VERIFY-TERMINATION</a> ALL-ALISTP)
              
&gt;L             (:TERMINATION-VERIFIED (ALL-P ALISTP))

Additional events for the logical name ALL-ALISTP:
           4  (<a href="ACL2____ENCAPSULATE.html">ENCAPSULATE</a> NIL ...)
              
&gt;PL            (ALL-P ALISTP)
ACL2 !&gt;</pre> 
 
 <p>Note that by using <span class="v">:</span><span class="tt"><a href="ACL2____PE_12.html">pe!</a></span>, in place of <span class="v">:</span><span class="tt"><a href="ACL2____PE.html">pe</a></span>, you can 
 avoid using the information that was provided by <span class="v">extend-pe-table</span>.</p> 
 
 <pre class="code">ACL2 !&gt;:pe! all-alistp
 L         6  (<a href="ACL2____VERIFY-TERMINATION.html">VERIFY-TERMINATION</a> ALL-ALISTP)
              
&gt;L             (<a href="COMMON-LISP____DEFUN.html">DEFUN</a> ALL-ALISTP (LST)
                      (<a href="COMMON-LISP____IF.html">IF</a> (<a href="COMMON-LISP____ATOM.html">ATOM</a> LST)
                          T
                          (<a href="COMMON-LISP____AND.html">AND</a> (<a href="ACL2____ALISTP.html">ALISTP</a> LST)
                               (ALL-ALISTP (<a href="COMMON-LISP____CDR.html">CDR</a> LST)))))

Additional events for the logical name ALL-ALISTP:
           4  (<a href="ACL2____ENCAPSULATE.html">ENCAPSULATE</a> NIL ...)
              
&gt;PL            (<a href="COMMON-LISP____DEFUN.html">DEFUN</a> ALL-ALISTP (LST)
                      (<a href="COMMON-LISP____IF.html">IF</a> (<a href="COMMON-LISP____ATOM.html">ATOM</a> LST)
                          T
                          (<a href="COMMON-LISP____AND.html">AND</a> (<a href="ACL2____ALISTP.html">ALISTP</a> LST)
                               (ALL-ALISTP (<a href="COMMON-LISP____CDR.html">CDR</a> LST)))))
ACL2 !&gt;</pre> 
 
 <p>In the examples above we invoked <span class="v">extend-pe-table</span> explicitly.  It might 
 have been better, however, to ``bake in'' such calls by way of the macro 
 itself, as follows.</p> 
 
 <pre class="code">(<a href="COMMON-LISP____DEFMACRO.html">defmacro</a> all-p (<a href="COMMON-LISP_____62WHOLE.html">&amp;whole</a> form pred)
  (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____SYMBOLP.html">symbolp</a> pred)))
  (<a href="COMMON-LISP____LET.html">let</a> ((<a href="ACL2____NAME.html">name</a> (<a href="ACL2____INTERN_42.html">intern$</a> (<a href="COMMON-LISP____CONCATENATE.html">concatenate</a> 'string "ALL-" (<a href="COMMON-LISP____SYMBOL-NAME.html">symbol-name</a> pred))
                       (<a href="ACL2____SYMBOL-PACKAGE-NAME.html">symbol-package-name</a> pred))))
    `(<a href="COMMON-LISP____PROGN.html">progn</a> (<a href="COMMON-LISP____DEFUN.html">defun</a> ,name (lst)
              (<a href="COMMON-LISP____IF.html">if</a> (<a href="COMMON-LISP____ATOM.html">atom</a> lst)
                  t
                (<a href="COMMON-LISP____AND.html">and</a> (,pred lst)
                     (,name (<a href="COMMON-LISP____CDR.html">cdr</a> lst)))))
            (<a href="ACL2____EXTEND-PE-TABLE.html">extend-pe-table</a> ,name ,form))))</pre> 
 
 <p>Then in a fresh session, after defining <span class="v">all-p</span> as shown immediately 
 above, we can obtain the following (edited) log.</p> 
 
 <pre class="code">ACL2 !&gt;(all-p natp)
[[.. elided ..]]
ACL2 !&gt;:pe all-natp
           2:x(ALL-P NATP)
ACL2 !&gt;</pre> 
 
 <p>We close with two remarks.  First, note that the indicated event must have 
 already been defined at the time <span class="v">extend-pe-table</span> is invoked.  Second 
 — in case an advanced user wishes to extend directly the underlying 
 table, <span class="v">pe-table</span> — we mention that this table associates each key, 
 an event name, with an association list that maps so-called absolute event 
 numbers with events to display.  So for example, we can remove all custom 
 printing of events for the name <span class="v">all-natp</span> as follows.</p> 
 
 <pre class="code">(<a href="ACL2____TABLE.html">table</a> pe-table 'all-natp nil)</pre> 
 

</body>
</html>
