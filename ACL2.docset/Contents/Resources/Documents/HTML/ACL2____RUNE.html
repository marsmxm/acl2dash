<html>
<head>
<meta charset="UTF-8">
<title>Rune</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____RUNE">Click for Rune in the Full Manual</a></h3>

<p>A rule name</p><pre class="code">Examples:
(:rewrite assoc-of-app)
(:linear delta-aref . 2)
(:definition length)
(:executable-counterpart length)</pre> 
 
 <p>Note: This topic discusses a basic notion of ``rule name'', or ``rune'' for 
 short.  Users often use abbreviations for runes; for example, a <a href="ACL2____THEORY.html">theory</a> 
 expression <span class="v">(<a href="ACL2____DISABLE.html">DISABLE</a> APPEND)</span> abbreviates the following set of runes: 
 <span class="v">{(:DEFINITION BINARY-APPEND), (:INDUCTION BINARY-APPEND)}</span>.  See <a href="ACL2____THEORIES.html">theories</a> for a discussion of so-called ``runic designators'', which include 
 expressions like <span class="v">APPEND</span> (as above) as well as <span class="v">(<a href="COMMON-LISP____APPEND.html">APPEND</a>)</span> (for the 
 <a href="ACL2____EXECUTABLE-COUNTERPART.html">executable-counterpart</a> of <span class="v">BINARY-APPEND</span>).  Runic designators can 
 also be ``runic abbreviations'' such as <span class="v">(:d APPEND)</span>, <span class="v">(:e APPEND)</span>, 
 <span class="v">(:i APPEND)</span>, and <span class="v">(:t APPEND)</span>, which designate the definition, 
 executable-counterpart, induction, and type-prescription rules for 
 <span class="v">BINARY-APPEND</span>.  For a complete description of runic designators, see 
 <a href="ACL2____THEORIES.html">theories</a>; we return now to the more basic notion of a rune.</p> 
 
 <p>Background: The theorem prover is driven from a database of rules.  The 
 most common rules are <span class="v">:</span><span class="tt"><a href="ACL2____REWRITE.html">rewrite</a></span> rules, which cause the simplifier 
 to replace one term with another.  <a href="ACL2____EVENTS.html">Events</a> introduce rules into the 
 database.  For example, a <span class="tt"><a href="COMMON-LISP____DEFUN.html">defun</a></span> event may introduce runes for 
 symbolically replacing a function call by its instantiated body, for 
 evaluating the function on constants, for determining the type of a call of 
 the function, and for the induction scheme introduced upon defining the 
 function.  <span class="tt"><a href="ACL2____DEFTHM.html">Defthm</a></span> may introduce several rules, one for each of the 
 <span class="v">:</span><span class="tt"><a href="ACL2____RULE-CLASSES.html">rule-classes</a></span> specified (where one rule class is specified if 
 <span class="v">:</span><span class="tt"><a href="ACL2____RULE-CLASSES.html">rule-classes</a></span> is omitted, namely, <span class="v">:rewrite</span>).</p> 
 
 <p>Every rule in the system has a name.  Each name is a structured object 
 called a ``rune,'' which is short for ``rule name''.  Runes are always of the 
 form <span class="v">(:token symbol . x)</span>, where <span class="v">:token</span> is some keyword symbol 
 indicating what kind of rule is named, <span class="v">symbol</span> is the event name that 
 created the rule (and is called the ``base symbol'' of the rune), and <span class="v">x</span> 
 is either <span class="v">nil</span> or a natural number that makes the rule name distinct from 
 that of rules generated by other <a href="ACL2____EVENTS.html">events</a> or by other <span class="v">:</span><span class="tt"><a href="ACL2____RULE-CLASSES.html">rule-classes</a></span> within the same event.</p> 
 
 <p>For example, an event of the form</p> 
 
 <pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> name thm
  :rule-classes ((:REWRITE :COROLLARY term1)
                 (:REWRITE :COROLLARY term2)
                 (:ELIM    :COROLLARY term3)))</pre> 
 
 <p>typically creates three rules, each with a unique rune.  The runes are</p> 
 
 <pre class="code">(:REWRITE name . 1), (:REWRITE name . 2), and (:ELIM name).</pre> 
 
 <p>However, a given formula may create more than one rule, and all rules 
 generated by the same <span class="v">:corollary</span> formula will share the same rune. 
 Consider the following example.</p> 
 
 <pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> my-thm
  (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> (foo (bar x)) x)
       (<a href="COMMON-LISP____EQUAL.html">equal</a> (bar (foo x)) x)))</pre> 
 
 <p>This is treated identically to the following.</p> 
 
 <pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> my-thm
  (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> (foo (bar x)) x)
       (<a href="COMMON-LISP____EQUAL.html">equal</a> (bar (foo x)) x))
  :rule-classes ((:rewrite
                  :corollary
                  (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> (foo (bar x)) x)
                       (<a href="COMMON-LISP____EQUAL.html">equal</a> (bar (foo x)) x)))))</pre> 
 
 <p>In either case, two rules are created: one rewriting <span class="v">(foo (bar x))</span> to 
 <span class="v">x</span>, and one rewriting <span class="v">(bar (foo x))</span> to <span class="v">x</span>.  However, only a 
 single rune is created, <span class="v">(:REWRITE MY-THM)</span>, because there is only one rule 
 class.  But now consider the following example.</p> 
 
 <pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> my-thm2
  (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> (foo (bar x)) x)
       (<a href="COMMON-LISP____EQUAL.html">equal</a> (bar (foo x)) x))
  :rule-classes ((:rewrite
                  :corollary
                  (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> (foo (bar x)) x)
                       (<a href="COMMON-LISP____EQUAL.html">equal</a> (bar (foo x)) x)))
                 (:rewrite
                  :corollary
                  (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> (foo (bar (foo x))) (foo x))
                       (<a href="COMMON-LISP____EQUAL.html">equal</a> (bar (foo (bar x))) (bar x))))))</pre> 
 
 <p>This time there are four rules created.  The first two rules are as before, 
 and are assigned the rune <span class="v">(:REWRITE MY-THM . 1)</span>.  The other two rules are 
 similarly generated for the second <span class="v">:corollary</span>, and are assigned the rune 
 <span class="v">(:REWRITE MY-THM . 2)</span>.</p> 
 
 <p>The function <span class="tt"><a href="ACL2____COROLLARY.html">corollary</a></span> will return the <a href="ACL2____COROLLARY.html">corollary</a> term 
 associated with a given rune in a given <a href="ACL2____WORLD.html">world</a>.  Example:</p> 
 
 <pre class="code">(<a href="ACL2____COROLLARY.html">corollary</a> '(:TYPE-PRESCRIPTION DIGIT-TO-CHAR) (<a href="ACL2____W.html">w</a> state))</pre> 
 
 <p>However, the preferred way to see the corollary term associated with a rune 
 or a name is to use <span class="v">:pf</span>; see <a href="ACL2____PF.html">pf</a>.</p> 
 
 <p>The <span class="tt"><a href="COMMON-LISP____DEFUN.html">defun</a></span> event creates as many as four rules.  <span class="v">(:definition
 fn)</span> is the rune given to the equality axiom defining the function, <span class="v">fn</span>. 
 <span class="v">(:executable-counterpart fn)</span> is the rune given to the rule for computing 
 <span class="v">fn</span> on known arguments.  A type prescription rule may be created under the 
 name <span class="v">(:type-prescription fn)</span>, and an <a href="ACL2____INDUCTION.html">induction</a> rule may be created 
 under the name <span class="v">(:induction fn)</span>.</p> 
 
 <p>Runes may be individually <a href="ACL2____ENABLE.html">enable</a>d and <a href="ACL2____DISABLE.html">disable</a>d, according to 
 whether they are included in the current theory.  See <a href="ACL2____THEORIES.html">theories</a>.  Thus, 
 it is permitted to <a href="ACL2____DISABLE.html">disable</a> <span class="v">(:elim name)</span>, say, while enabling the 
 other rules derived from name.  Similarly, <span class="v">(:definition fn)</span> may be <a href="ACL2____DISABLE.html">disable</a>d while <span class="v">(:executable-counterpart fn)</span> and the type prescriptions 
 for <span class="v">fn</span> are <a href="ACL2____ENABLE.html">enable</a>d.</p> 
 
 <p>Associated with most runes is the formula justifying the rule named.  This 
 is called the ``<a href="ACL2____COROLLARY.html">corollary</a> formula'' of the rune and may be obtained via 
 the function <span class="tt"><a href="ACL2____COROLLARY.html">corollary</a></span>, which takes as its argument a rune and a 
 property list <a href="ACL2____WORLD.html">world</a>.  Also see <a href="ACL2____PF.html">pf</a>.  The <a href="ACL2____COROLLARY.html">corollary</a> formula 
 for <span class="v">(:rewrite name . 1)</span> after the <span class="tt"><a href="ACL2____DEFTHM.html">defthm</a></span> event above is 
 <span class="v">term1</span>.  The corollary formulas for <span class="v">(:definition fn)</span> and 
 <span class="v">(:executable-counterpart fn)</span> are always identical: the defining axiom. 
 Some runes, e.g., <span class="v">(:definition car)</span>, do not have corollary formulas. 
 <span class="tt"><a href="ACL2____COROLLARY.html">Corollary</a></span> returns <span class="v">nil</span> on such runes.  In any case, the corollary 
 formula of a rune, when it is non-<span class="v">nil</span>, is a theorem and may be used in 
 the <span class="v">:use</span> and <span class="v">:by</span> <a href="ACL2____HINTS.html">hints</a>.</p> 
 
 <p>Note: The system has built-in rules that, for regularity, ought to have 
 names but don't because they can never be <a href="ACL2____DISABLE.html">disable</a>d.  One such rule is 
 that implemented by the <a href="ACL2____LINEAR.html">linear</a> arithmetic package.  Because many of our 
 subroutines are required by their calling conventions to return the justifying 
 rune, we have invented the notion of ``fake runes.''  Fake runes always have 
 the base symbol <span class="v">nil</span>, use a keyword token that includes the phrase 
 ``fake-rune'', and are always <a href="ACL2____ENABLE.html">enable</a>d.  Here is the list of fake 
 runes.</p> 
 
 <p><pre class="code">((:fake-rune-for-linear nil)
 (:fake-rune-for-type-set nil)
 (:fake-rune-for-cert-data nil))</pre></p> 
 
 <p>Occasionally the system will print a fake rune where a rune is expected. 
 For example, when <span class="v">(:FAKE-RUNE-FOR-LINEAR NIL)</span> is reported among the rules 
 used in a proof, it is an indication that the linear arithmetic package was 
 used.  However, fake runes are not allowed in <a href="ACL2____THEORIES.html">theories</a>, they cannot be 
 <a href="ACL2____ENABLE.html">enable</a>d or <a href="ACL2____DISABLE.html">disable</a>d, and they do not have associated <a href="ACL2____COROLLARY.html">corollary</a> formulas.  In short, despite the fact that the user may sometimes 
 see fake runes printed, they should never be typed.</p>
</body>
</html>
