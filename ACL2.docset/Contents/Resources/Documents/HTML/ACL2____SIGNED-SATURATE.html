<html>
<head>
<meta charset="UTF-8">
<title>Signed-saturate</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____SIGNED-SATURATE">Click for Signed-saturate in the Full Manual</a></h3>

<p><span class="tt">(signed-saturate n x)</span> coerces the integer <span class="v">x</span> into an <span class="v">n</span>-bit 
signed integer by signed saturation, then returns the result as an <span class="v">n</span>-bit 
<b>unsigned</b> number.</p><p>Normally signed saturation to <span class="v">n</span> bits is understood as:</p> 
 
<ul> 
<li>If <span class="v">x</span> is too small (less than <span class="v">-2^{n-1}</span>) it becomes <span class="v">-2^{n-1}</span>.</li> 
<li>If <span class="v">x</span> is too big (<span class="v">2^{n-1}</span> or more) it becomes <span class="v">2^{n-1} - 1</span>.</li> 
<li>Otherwise <span class="v">x</span> is unchanged.</li> 
</ul> 
 
<p>This is <b>almost</b> what we compute.  The twist is: after saturating as 
above, we mask the above with <span class="v">2^{n-1}</span> to obtain an unsigned, <span class="v">n</span>-bit 
result.</p> 
 
<p><span class="v">signed-saturate</span> is actually a macro.  Generally it expands into a call 
of <span class="v">signed-saturate-fn</span>.  But, in the common cases where <span class="v">n</span> is 
explicitly 8, 16, 32, or 64, it instead expands into a call of an optimized, 
inlined function.</p> 
 
<p><b>Macro: </b>signed-saturate</p><pre class="code">(<a href="COMMON-LISP____DEFMACRO.html">defmacro</a> signed-saturate (n x)
          (<a href="COMMON-LISP____COND.html">cond</a> ((<a href="COMMON-LISP____EQL.html">eql</a> n 8)
                 (<a href="COMMON-LISP____CONS.html">cons</a> 'signed-saturate8 (<a href="COMMON-LISP____CONS.html">cons</a> x 'nil)))
                ((<a href="COMMON-LISP____EQL.html">eql</a> n 16)
                 (<a href="COMMON-LISP____CONS.html">cons</a> 'signed-saturate16 (<a href="COMMON-LISP____CONS.html">cons</a> x 'nil)))
                ((<a href="COMMON-LISP____EQL.html">eql</a> n 32)
                 (<a href="COMMON-LISP____CONS.html">cons</a> 'signed-saturate32 (<a href="COMMON-LISP____CONS.html">cons</a> x 'nil)))
                ((<a href="COMMON-LISP____EQL.html">eql</a> n 64)
                 (<a href="COMMON-LISP____CONS.html">cons</a> 'signed-saturate64 (<a href="COMMON-LISP____CONS.html">cons</a> x 'nil)))
                (t (<a href="COMMON-LISP____CONS.html">cons</a> 'signed-saturate-fn
                         (<a href="COMMON-LISP____CONS.html">cons</a> n (<a href="COMMON-LISP____CONS.html">cons</a> x 'nil))))))</pre> 
 

</body>
</html>
