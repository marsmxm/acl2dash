<html>
<head>
<meta charset="UTF-8">
<title>ACL2-defaults-table</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____ACL2-DEFAULTS-TABLE">Click for ACL2-defaults-table in the Full Manual</a></h3>

<p>A <a href="ACL2____TABLE.html">table</a> specifying certain defaults, e.g., the default <a href="ACL2____DEFUN-MODE.html">defun-mode</a></p><pre class="code">Example Forms:
(<a href="ACL2____TABLE.html">table</a> acl2-defaults-table :defun-mode) ; current default defun-mode
(<a href="ACL2____TABLE.html">table</a> acl2-defaults-table :defun-mode :program)
           ; set default defun-mode to :program</pre> 
 
 <p>See <a href="ACL2____TABLE.html">table</a> for a discussion of tables in general.  The legal keys for 
 this <a href="ACL2____TABLE.html">table</a> are shown below.  They may be accessed and changed via the 
 general mechanisms provided by <a href="ACL2____TABLE.html">table</a>s.  However, there are often more 
 convenient ways to access and/or change the defaults.  (See also the note 
 below.)</p> 
 
 <pre class="code">:user</pre> 
 
 <p>The <span class="v">:user</span> key is for ACL2 users; the system does not consult this key 
 or set it (other than as part of general <span class="v">acl2-defaults-table </span> 
 maintenance).  Its value is required to be an association list (<span class="tt"><a href="ACL2____ALISTP.html">alistp</a></span>), so that different users can read and write their ``own'' keys.  For 
 example, suppose user Joe uses key <span class="v">:j</span> while user Mary uses key <span class="v">:m</span>; 
 then we could see a value for <span class="v">:user</span> of <span class="v">((:j . 3) (:m . 4))</span> after Joe 
 sets his value to 3 and Mary sets her value to 4.</p> 
 
 <pre class="code">:defun-mode</pre> 
 
 <p>the default <a href="ACL2____DEFUN-MODE.html">defun-mode</a>, which must be <span class="v">:</span><span class="tt"><a href="ACL2____PROGRAM.html">program</a></span> or 
 <span class="v">:</span><span class="tt"><a href="ACL2____LOGIC.html">logic</a></span>.  See <a href="ACL2____DEFUN-MODE.html">defun-mode</a> for a general discussion of <a href="ACL2____DEFUN-MODE.html">defun-mode</a>s.  The <span class="v">:</span><span class="tt"><a href="ACL2____DEFUN-MODE.html">defun-mode</a></span> key may be conveniently set by 
 keyword commands naming the new <a href="ACL2____DEFUN-MODE.html">defun-mode</a>, <span class="v">:</span><span class="tt"><a href="ACL2____PROGRAM.html">program</a></span> and 
 <span class="v">:</span><span class="tt"><a href="ACL2____LOGIC.html">logic</a></span>.  See <a href="ACL2____PROGRAM.html">program</a> and see <a href="ACL2____LOGIC.html">logic</a>.</p> 
 
 <pre class="code">:enforce-redundancy</pre> 
 
 <p>if <span class="v">t</span>, cause ACL2 to insist that most events are redundant (see <a href="ACL2____REDUNDANT-EVENTS.html">redundant-events</a>); if <span class="v">:warn</span>, cause a warning instead of an error for 
 such non-redundant events; else, <span class="v">nil</span>.  See <a href="ACL2____SET-ENFORCE-REDUNDANCY.html">set-enforce-redundancy</a>.</p> 
 
 <pre class="code">:verify-guards-eagerness</pre> 
 
 <p>an integer between 0 and 2 indicating how eager the system is to verify the 
 <a href="ACL2____GUARD.html">guard</a>s of a <a href="COMMON-LISP____DEFUN.html">defun</a> event.  See <a href="ACL2____SET-VERIFY-GUARDS-EAGERNESS.html">set-verify-guards-eagerness</a>.</p> 
 
 <pre class="code">:compile-fns</pre> 
 
 <p>When this key's value is <span class="v">t</span>, functions are compiled when they are 
 <span class="tt"><a href="COMMON-LISP____DEFUN.html">defun</a></span>'d; otherwise, the value is <span class="v">nil</span>.  (Except, this key's value 
 is ignored when explicit compilation is suppressed; see <a href="ACL2____COMPILATION.html">compilation</a>.) 
 To set the flag, see <a href="ACL2____SET-COMPILE-FNS.html">set-compile-fns</a>.</p> 
 
 <pre class="code">:measure-function</pre> 
 
 <p>the default measure function used by <span class="tt"><a href="COMMON-LISP____DEFUN.html">defun</a></span> when no <span class="v">:measure</span> is 
 supplied in <span class="tt"><a href="ACL2____XARGS.html">xargs</a></span>.  The default measure function must be a function 
 symbol of one argument. Let <span class="v">mfn</span> be the default measure function and 
 suppose no <span class="v">:measure</span> is supplied with some recursive function definition. 
 Then <span class="tt"><a href="COMMON-LISP____DEFUN.html">defun</a></span> finds the first formal, <span class="v">var</span>, that is tested along 
 every branch and changed in each recursive call.  The system then ``guesses'' 
 that <span class="v">(mfn var)</span> is the <span class="v">:measure</span> for that <span class="tt"><a href="COMMON-LISP____DEFUN.html">defun</a></span>.</p> 
 
 <pre class="code">:well-founded-relation</pre> 
 
 <p>the default well-founded relation used by <span class="tt"><a href="COMMON-LISP____DEFUN.html">defun</a></span> when no 
 <span class="v">:well-founded-relation</span> is supplied in <span class="tt"><a href="ACL2____XARGS.html">xargs</a></span>.  The default 
 well-founded relation must be a function symbol, <span class="v">rel</span>, of two arguments 
 about which a <span class="v">:well-founded-relation</span> rule has been proved.  See <a href="ACL2____WELL-FOUNDED-RELATION-RULE.html">well-founded-relation-rule</a>.</p> 
 
 <pre class="code">:bogus-defun-hints-ok</pre> 
 
 <p>When this key's value is <span class="v">t</span>, ACL2 allows <span class="v">:hints</span> and also 
 <span class="v">:measure</span> for nonrecursive function definitions.  Otherwise, the value is 
 <span class="v">nil</span> (the default) or <span class="v">:warn</span> (which makes the check but merely warns 
 when the check fails).  See <a href="ACL2____SET-BOGUS-DEFUN-HINTS-OK.html">set-bogus-defun-hints-ok</a> and <a href="ACL2____SET-BOGUS-MEASURE-OK.html">set-bogus-measure-ok</a>.</p> 
 
 <pre class="code">:bogus-mutual-recursion-ok</pre> 
 
 <p>When this key's value is <span class="v">t</span>, ACL2 skips the check that every function 
 in a <span class="tt"><a href="ACL2____MUTUAL-RECURSION.html">mutual-recursion</a></span> (or <span class="tt"><a href="ACL2____DEFUNS.html">defuns</a></span>) ``clique'' calls at least 
 one other function in that ``clique.''  Otherwise, the value is <span class="v">nil</span> (the 
 default) or <span class="v">:warn</span> (which makes the check but merely warns when the check 
 fails).  See <a href="ACL2____SET-BOGUS-MUTUAL-RECURSION-OK.html">set-bogus-mutual-recursion-ok</a>.</p> 
 
 <pre class="code">:irrelevant-formals-ok</pre> 
 
 <p>When this key's value is <span class="v">t</span>, the check for irrelevant formals is 
 bypassed; otherwise, the value is the keyword <span class="v">nil</span> (the default) or 
 <span class="v">:warn</span> (which makes the check but merely warns when the check fails).  See 
 <a href="ACL2____IRRELEVANT-FORMALS.html">irrelevant-formals</a> and see <a href="ACL2____SET-IRRELEVANT-FORMALS-OK.html">set-irrelevant-formals-ok</a>.</p> 
 
 <pre class="code">:ignore-ok</pre> 
 
 <p>When this key's value is <span class="v">t</span>, the check for ignored variables is 
 bypassed; otherwise, the value is the keyword <span class="v">nil</span> (the default) or 
 <span class="v">:warn</span> (which makes the check but merely warns when the check fails).  See 
 <a href="ACL2____SET-IGNORE-OK.html">set-ignore-ok</a>.</p> 
 
 <pre class="code">:bdd-constructors</pre> 
 
 <p>This key's value is a list of function symbols used to define the notion of 
 ``BDD normal form.''  See <a href="ACL2____BDD-ALGORITHM.html">bdd-algorithm</a> and see <a href="ACL2____HINTS.html">hints</a>.</p> 
 
 <pre class="code">:ttag</pre> 
 
 <p>This key's value, when non-<span class="v">nil</span>, allows certain operations that extend 
 the trusted code base beyond what is provided by ACL2.  See <a href="ACL2____DEFTTAG.html">defttag</a>. 
 See <a href="ACL2____DEFTTAG.html">defttag</a>.</p> 
 
 <pre class="code">:state-ok</pre> 
 
 <p>This key's value is either <span class="v">t</span> or <span class="v">nil</span> and indicates whether the 
 user is aware of the syntactic restrictions on the variable symbol <span class="v">STATE</span>. 
 See <a href="ACL2____SET-STATE-OK.html">set-state-ok</a>.</p> 
 
 <pre class="code">:backchain-limit</pre> 
 
 <p>This key's value is a list of two ``numbers.''  Either ``number'' may 
 optionally be <span class="v">nil</span>, which is treated like positive infinity.  The numbers 
 control backchaining through hypotheses during type-set reasoning and 
 rewriting.  See <a href="ACL2____BACKCHAIN-LIMIT.html">backchain-limit</a>.</p> 
 
 <pre class="code">:default-backchain-limit</pre> 
 
 <p>This key's value is a list of two ``numbers.''  Either ``number'' may 
 optionally be <span class="v">nil</span>, which is treated like positive infinity.  The numbers 
 are used respectively to set the backchain limit of a rule if one has not been 
 specified. See <a href="ACL2____BACKCHAIN-LIMIT.html">backchain-limit</a>.</p> 
 
 <pre class="code">:step-limit</pre> 
 
 <p>This key's value is either <span class="v">nil</span> or a natural number not exceeding the 
 value of <span class="v">*default-step-limit*</span>.  If the value is <span class="v">nil</span> or the value of 
 <span class="v">*default-step-limit*</span>, there is no limit on the number of ``steps'' that 
 ACL2 counts during a proof: currently, the number of top-level rewriting 
 calls.  Otherwise, the value is the maximum number of such calls allowed 
 during evaluation of any event.  See <a href="ACL2____SET-PROVER-STEP-LIMIT.html">set-prover-step-limit</a>.</p> 
 
 <pre class="code">:rewrite-stack-limit</pre> 
 
 <p>This key's value is a nonnegative integer less than <span class="v">(<a href="COMMON-LISP____EXPT.html">expt</a> 2 28)</span>.  It 
 is used to limit the depth of calls of ACL2 rewriter functions.  See <a href="ACL2____REWRITE-STACK-LIMIT.html">rewrite-stack-limit</a>.</p> 
 
 <pre class="code">:let*-abstractionp</pre> 
 
 <p>This key affects how the system displays subgoals.  The value is either 
 <span class="v">t</span> or <span class="v">nil</span>.  When t, let* expressions are introduced before printing 
 to eliminate common subexpressions.  The actual goal being worked on is 
 unchanged.</p> 
 
 <pre class="code">:case-split-limitations</pre> 
 
 <p>This key's value is a list of two ``numbers.''  Either ``number'' may 
 optionally be <span class="v">nil</span>, which is treated like positive infinity.  The numbers 
 control how the system handles case splits in the simplifier.  See <a href="ACL2____SET-CASE-SPLIT-LIMITATIONS.html">set-case-split-limitations</a>.</p> 
 
 <pre class="code">:include-book-dir-alist</pre> 
 
 <p>This key's value is used by <span class="tt"><a href="ACL2____INCLUDE-BOOK.html">include-book</a></span>'s <span class="v">:DIR</span> argument to 
 associate a directory with a keyword.  An exception is the keyword 
 <span class="v">:SYSTEM</span> for the <span class="v">books/</span> directory; see <a href="ACL2____INCLUDE-BOOK.html">include-book</a>, in 
 particular the section on ``Books Directory.''  Also see <span class="tt"><a href="ACL2____ADD-INCLUDE-BOOK-DIR.html">add-include-book-dir</a></span> and <span class="tt"><a href="ACL2____ADD-INCLUDE-BOOK-DIR_12.html">add-include-book-dir!</a></span>.</p> 
 
 <pre class="code">:match-free-default</pre> 
 
 <p>This key's value is either <span class="v">:all</span>, <span class="v">:once</span>, or <span class="v">nil</span>.  See <a href="ACL2____SET-MATCH-FREE-DEFAULT.html">set-match-free-default</a>.</p> 
 
 <pre class="code">:match-free-override</pre> 
 
 <p>This key's value is a list of runes.  See <a href="ACL2____ADD-MATCH-FREE-OVERRIDE.html">add-match-free-override</a>.</p> 
 
 <pre class="code">:match-free-override-nume</pre> 
 
 <p>This key's value is an integer used in the implementation of <a href="ACL2____ADD-MATCH-FREE-OVERRIDE.html">add-match-free-override</a>, so that only existing runes are affected by that 
 event.</p> 
 
 <pre class="code">:non-linearp</pre> 
 
 <p>This key's value is either <span class="v">t</span> or <span class="v">nil</span> and indicates whether the 
 user wishes ACL2 to extend the linear arithmetic decision procedure to include 
 non-linear reasoning.  See <a href="ACL2____NON-LINEAR-ARITHMETIC.html">non-linear-arithmetic</a>.</p> 
 
 <pre class="code">:tau-auto-modep</pre> 
 
 <p>This key's value is either <span class="v">t</span> or <span class="v">nil</span> and indicates whether the 
 user wishes ACL2 to look for opportunities to create <span class="v">:</span><span class="tt"><a href="ACL2____TAU-SYSTEM.html">tau-system</a></span> 
 rules from all suitable <span class="v">defun</span>s and from all suitable <span class="v">defthm</span>s (with 
 non-<span class="v">nil</span> <span class="v">:</span><span class="tt"><a href="ACL2____RULE-CLASSES.html">rule-classes</a></span>).  See <a href="ACL2____SET-TAU-AUTO-MODE.html">set-tau-auto-mode</a>.</p> 
 
 <pre class="code">:ruler-extenders</pre> 
 
 <p>This key's value may be a list of symbols, indicating those function 
 symbols that are not to block the collection of rulers; see <a href="COMMON-LISP____DEFUN.html">defun</a>. 
 Otherwise the value is <span class="v">:all</span> to indicate all function symbols, i.e., so 
 that no function symbol blocks the collection of rulers.  If a list is 
 specified (rather than <span class="v">:all</span>), then it may contain the keyword 
 <span class="v">:lambdas</span>, which has the special role of specifying all <span class="v">lambda</span> 
 applications.  No other keyword is permitted in the list.  See <a href="ACL2____RULERS.html">rulers</a>.</p> 
 
 <pre class="code">:memoize-ideal-okp</pre> 
 
 <p>This key's value must be either <span class="v">t</span>, <span class="v">nil</span>, or <span class="v">:warn</span>.  If the 
 value is <span class="v">nil</span> or not present, then it is illegal by default to <a href="ACL2____MEMOIZE.html">memoize</a> a <span class="v">:</span><span class="tt"><a href="ACL2____LOGIC.html">logic</a></span> mode function that has not been <a href="ACL2____GUARD.html">guard</a>-verified (see <a href="ACL2____VERIFY-GUARDS.html">verify-guards</a>), sometimes called an ``ideal-mode'' 
 function.  This illegality is the default because such calls of such functions 
 in the ACL2 loop are generally evaluated in the logic (using executable 
 counterpart definitions; see <a href="ACL2____EVALUATION.html">evaluation</a>), rather than directly by 
 executing calls of the corresponding (memoized) raw Lisp function.  However, 
 such a raw Lisp call can be made when the function is called by a <span class="v">:</span><span class="tt"><a href="ACL2____PROGRAM.html">program</a></span> mode function, so we allow you to override the default behavior by 
 associating the value <span class="v">t</span> or <span class="v">:warn</span> with the key 
 <span class="v">:memoize-ideal-okp</span>, where with <span class="v">:warn</span> you get a suitable warning. 
 Note that you can also allow memoization of ideal-mode functions by supplying 
 argument <span class="v">:ideal-okp</span> to your memoization event (see <a href="ACL2____MEMOIZE.html">memoize</a>), in 
 which case the value of <span class="v">:memoize-ideal-okp</span> in the 
 <span class="v">acl2-defaults-table</span> is irrelevant.</p> 
 
 <pre class="code">:check-invariant-risk</pre> 
 
 <p>For an explanation of this key, see <a href="ACL2____SET-CHECK-INVARIANT-RISK.html">set-check-invariant-risk</a>.</p> 
 
 <pre class="code">:register-invariant-risk</pre> 
 
 <p>For an explanation of this key, see <a href="ACL2____SET-REGISTER-INVARIANT-RISK.html">set-register-invariant-risk</a>.</p> 
 
 <pre class="code">:in-theory-redundant-okp</pre> 
 
 <p>When this key's value is <span class="v">t</span>, an <span class="tt"><a href="ACL2____IN-THEORY.html">in-theory</a></span> event may be 
 redundant.  See <span class="tt"><a href="ACL2____SET-IN-THEORY-REDUNDANT-OKP.html">set-in-theory-redundant-okp</a></span>.</p> 
 
 <p>Note: Unlike all other <a href="ACL2____TABLE.html">table</a>s, <span class="v">acl2-defaults-table</span> can affect 
 the soundness of the system.  The <a href="ACL2____TABLE.html">table</a> mechanism therefore enforces on 
 it a restriction not imposed on other <a href="ACL2____TABLE.html">table</a>s: when <span class="tt"><a href="ACL2____TABLE.html">table</a></span> is 
 used to update the <span class="v">acl2-defaults-table</span>, the key and value must be 
 variable-free forms.  Thus, while</p> 
 
 <pre class="code">(<a href="ACL2____TABLE.html">table</a> acl2-defaults-table :defun-mode :program),

(<a href="ACL2____TABLE.html">table</a> acl2-defaults-table :defun-mode ':program), and

(<a href="ACL2____TABLE.html">table</a> acl2-defaults-table :defun-mode (compute-mode *my-data*))</pre> 
 
 <p>are all examples of legal <a href="ACL2____EVENTS.html">events</a> (assuming <span class="v">compute-mode</span> is a 
 function of one non-<span class="tt"><a href="ACL2____STATE.html">state</a></span> argument that produces a <a href="ACL2____DEFUN-MODE.html">defun-mode</a> 
 as its single value),</p> 
 
 <pre class="code">(<a href="ACL2____TABLE.html">table</a> acl2-defaults-table :defun-mode (compute-mode (<a href="ACL2____W.html">w</a> state)))</pre> 
 
 <p>is not legal because the value form is <span class="tt"><a href="ACL2____STATE.html">state</a></span>-sensitive.</p> 
 
 <p>Consider for example the following three <a href="ACL2____EVENTS.html">events</a> which one might make 
 into the text of a book.</p> 
 
 <pre class="code">(<a href="COMMON-LISP____IN-PACKAGE.html">in-package</a> "ACL2")

(<a href="ACL2____TABLE.html">table</a> acl2-defaults-table
  :defun-mode
  (<a href="COMMON-LISP____IF.html">if</a> (<a href="ACL2____LD-SKIP-PROOFSP.html">ld-skip-proofsp</a> state) :logic :program))

(<a href="COMMON-LISP____DEFUN.html">defun</a> crash-and-burn (x) (<a href="COMMON-LISP____CAR.html">car</a> x))</pre> 
 
 <p>The second event is illegal because its value form is <span class="tt"><a href="ACL2____STATE.html">state</a></span>-sensitive.  If it were not illegal, then it would set the <span class="v">:</span><span class="tt"><a href="ACL2____DEFUN-MODE.html">defun-mode</a></span> to <span class="v">:</span><span class="tt"><a href="ACL2____PROGRAM.html">program</a></span> when the book was being certified but 
 would set the <a href="ACL2____DEFUN-MODE.html">defun-mode</a> to <span class="v">:</span><span class="tt"><a href="ACL2____LOGIC.html">logic</a></span> when the book was being 
 loaded by <span class="tt"><a href="ACL2____INCLUDE-BOOK.html">include-book</a></span>.  That is because during certification, <span class="tt"><a href="ACL2____LD-SKIP-PROOFSP.html">ld-skip-proofsp</a></span> is <span class="v">nil</span> (proof obligations are generated and proved), but 
 during book inclusion <span class="tt"><a href="ACL2____LD-SKIP-PROOFSP.html">ld-skip-proofsp</a></span> is non-<span class="v">nil</span> (those 
 obligations are assumed to have been satisfied.)  Thus, the above book, when 
 loaded, would create a function in <span class="v">:</span><span class="tt"><a href="ACL2____LOGIC.html">logic</a></span> mode that does not 
 actually meet the conditions for such status.</p> 
 
 <p>For similar reasons, <span class="tt"><a href="ACL2____TABLE.html">table</a></span> <a href="ACL2____EVENTS.html">events</a> affecting 
 <span class="v">acl2-defaults-table</span> are illegal within the scope of <span class="tt"><a href="ACL2____LOCAL.html">local</a></span> forms. 
 That is, the text</p> 
 
 <pre class="code">(<a href="COMMON-LISP____IN-PACKAGE.html">in-package</a> "ACL2")

(<a href="ACL2____LOCAL.html">local</a> (<a href="ACL2____TABLE.html">table</a> acl2-defaults-table :defun-mode :program))

(<a href="COMMON-LISP____DEFUN.html">defun</a> crash-and-burn (x) (<a href="COMMON-LISP____CAR.html">car</a> x))</pre> 
 
 <p>is illegal because <span class="v">acl2-defaults-table</span> is changed locally.  If this 
 text were acceptable as a book, then when the book was certified, 
 <span class="v">crash-and-burn</span> would be processed in <span class="v">:</span><span class="tt"><a href="ACL2____PROGRAM.html">program</a></span> mode, but when 
 the certified book was included later, <span class="v">crash-and-burn</span> would have 
 <span class="v">:</span><span class="tt"><a href="ACL2____LOGIC.html">logic</a></span> mode because the <span class="tt"><a href="ACL2____LOCAL.html">local</a></span> event would be skipped.</p> 
 
 <p>The text</p> 
 
 <pre class="code">(<a href="COMMON-LISP____IN-PACKAGE.html">in-package</a> "ACL2")

(<a href="ACL2____PROGRAM.html">program</a>) ;which is (<a href="ACL2____TABLE.html">table</a> acl2-defaults-table :defun-mode :program)

(<a href="COMMON-LISP____DEFUN.html">defun</a> crash-and-burn (x) (<a href="COMMON-LISP____CAR.html">car</a> x))</pre> 
 
 <p>is acceptable and defines <span class="v">crash-and-burn</span> in <span class="v">:</span><span class="tt"><a href="ACL2____PROGRAM.html">program</a></span> 
 mode, both during certification and subsequent inclusion.</p> 
 
 <p>We conclude with important observations about the interaction of the 
 <span class="v">acl2-defaults-table</span> with <span class="tt"><a href="ACL2____INCLUDE-BOOK.html">include-book</a></span>, <span class="tt"><a href="ACL2____CERTIFY-BOOK.html">certify-book</a></span>, and 
 <span class="tt"><a href="ACL2____ENCAPSULATE.html">encapsulate</a></span>.  If the <span class="v">acl2-defaults-table</span> has value <span class="v">V</span> and you 
 evaluate a call of <span class="tt"><a href="ACL2____INCLUDE-BOOK.html">include-book</a></span>, <span class="tt"><a href="ACL2____CERTIFY-BOOK.html">certify-book</a></span>, or <span class="tt"><a href="ACL2____ENCAPSULATE.html">encapsulate</a></span>, then the <span class="v">acl2-defaults-table</span> has value <span class="v">V</span> when that 
 call returns.  Thus, if you want to set the <span class="v">acl2-defaults-table</span> in a way 
 that persists, you need to do so using <a href="ACL2____COMMAND.html">command</a>s that are not inside 
 <a href="ACL2____BOOKS.html">books</a>.  It may be useful to set your favorite defaults in your <span class="tt"><a href="ACL2____ACL2-CUSTOMIZATION.html">ACL2-customization</a></span> file; see <a href="ACL2____ACL2-CUSTOMIZATION.html">ACL2-customization</a>.</p> 
 
 <p>ACL2 disallows (for logical reasons) setting of the 
 <span class="v">acl2-defaults-table</span> in the context of <span class="v">LOCAL</span>.  Often it is easy 
 simply to avoid wrapping an <span class="v">acl2-defaults-table</span> event, or a macro that 
 generates such an event, inside a <span class="v">LOCAL</span>; after all, a local context is 
 not useful when setting the <span class="v">acl2-defaults-table</span>, since that table is 
 restored as discussed above upon completion of <span class="tt"><a href="ACL2____INCLUDE-BOOK.html">include-book</a></span>, <span class="tt"><a href="ACL2____CERTIFY-BOOK.html">certify-book</a></span>, and <span class="tt"><a href="ACL2____ENCAPSULATE.html">encapsulate</a></span> forms.  Occasionally a bit more thought 
 is required to work around this restriction, but usually it's not difficult to 
 do so.  Suppose for example that you attempt to put following event form into 
 a book.</p> 
 
 <pre class="code">(<a href="ACL2____LOCAL.html">local</a> (<a href="COMMON-LISP____PROGN.html">progn</a> (<a href="ACL2____DEFTTAG.html">defttag</a> t) (<a href="COMMON-LISP____DEFUN.html">defun</a> foo (x) (<a href="ACL2____SYS-CALL.html">sys-call</a> x nil))))</pre> 
 
 <p>ACL2 responds with the following error message.</p> 
 
 <pre class="code">ACL2 Error in ( PROGN (<a href="ACL2____DEFTTAG.html">DEFTTAG</a> T) ...):  The form (<a href="ACL2____DEFTTAG.html">DEFTTAG</a> T)
is not an embedded event form in the context of LOCAL
because it implicitly sets the acl2-defaults-table in
a local context; see :DOC acl2-defaults-table, in particular
the explanation about this error message.  See :DOC
embedded-event-form.</pre> 
 
 <p>A solution is to use <span class="tt"><a href="ACL2____ENCAPSULATE.html">encapsulate</a></span> instead of (or in addition to) 
 <span class="tt"><a href="COMMON-LISP____PROGN.html">progn</a></span>, because <span class="tt"><a href="ACL2____ENCAPSULATE.html">encapsulate</a></span> establishes a new context that is 
 not considered within a surrounding <span class="v">LOCAL</span>.  For example, the following 
 replacement for the form above is legal in a book.</p> 
 
 <pre class="code">(<a href="ACL2____LOCAL.html">local</a> (<a href="ACL2____ENCAPSULATE.html">encapsulate</a> () (<a href="ACL2____DEFTTAG.html">defttag</a> t) (<a href="COMMON-LISP____DEFUN.html">defun</a> foo (x) (<a href="ACL2____SYS-CALL.html">sys-call</a> x nil))))</pre> 
 
 <p>To see that this works, try creating a file <span class="v">"foo.lisp"</span> whose first 
 form is <span class="v">(<a href="COMMON-LISP____IN-PACKAGE.html">in-package</a> "ACL2")</span> and whose only other form is the one 
 displayed just above.  Then the command <span class="v">(<a href="ACL2____CERTIFY-BOOK.html">certify-book</a> "foo" 0 t :ttags
 :all)</span> will successfully certify that book.</p>
</body>
</html>
