<html>
<head>
<meta charset="UTF-8">
<title>Atj-pre-translation-multiple-values</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=JAVA____ATJ-PRE-TRANSLATION-MULTIPLE-VALUES">Click for Atj-pre-translation-multiple-values in the Full Manual</a></h3>

<p>Pre-translation step performed by ATJ: 
          replacement of <span class="tt"><a href="COMMON-LISP____LIST.html">list</a></span> calls with <span class="tt"><a href="ACL2____MV.html">mv</a></span> calls.</p><p>This is done only in the shallow embedding.</p><p>In untranslated terms, 
     calls of <span class="tt"><a href="ACL2____MV.html">mv</a></span> determine when multiple results are produced. 
     In translated terms, 
     <span class="tt"><a href="ACL2____MV.html">mv</a></span> is expanded in the same way as <span class="tt"><a href="COMMON-LISP____LIST.html">list</a></span>, 
     and thus the information is somewhat. 
     However, it can be almost completely recovered with a bit of effort; 
     the `almost' means that in some very unlikely and contrived situations 
     we may regard a translated term 
     that originally (i.e. before being translated) 
     returned a single list value 
     as a term that returns a multiple value instead, 
     but this does not compromise correctness of the generated Java code.</p><p>In this pre-translation step, 
     we replace certain nests of two or more <span class="tt"><a href="COMMON-LISP____CONS.html">cons</a></span>es 
     ending in a quoted <span class="v">nil</span>, 
     which could be translated <span class="tt"><a href="COMMON-LISP____LIST.html">list</a></span> calls if taken in isolation, 
     with calls of <span class="tt"><a href="ACL2____MV.html">mv</a></span>. 
     Technically this is no longer a valid translated term, 
     because <span class="tt"><a href="ACL2____MV.html">mv</a></span> is a macro, 
     but it is a pseudo-term. 
     The presence of these <span class="tt"><a href="ACL2____MV.html">mv</a></span> calls is then recognized, 
     and handled appropriately, 
     by successive pre-translation steps, 
     as well as by the translation step.</p>
</body>
</html>
