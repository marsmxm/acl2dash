<html>
<head>
<meta charset="UTF-8">
<title>Getopt</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____GETOPT">Click for Getopt in the Full Manual</a></h3>

<p>A library for processing command-line option.</p><h3>Introduction</h3> 
 
<p><b>Getopt</b> is a tool for writing command-line programs in ACL2.  It is 
similar in spirit to <a href="http://perldoc.perl.org/Getopt/Long.html" target="_blank"><nobr>Getopt::Long<img src="../Icon_External_Link.png" title="External link to http://perldoc.perl.org/Getopt/Long.html"></nobr></a> for Perl, <a href="https://rubygems.org/gems/trollop/" target="_blank"><nobr>Trollop<img src="../Icon_External_Link.png" title="External link to https://rubygems.org/gems/trollop/"></nobr></a> for Ruby, and so on.</p> 
 
<p>We basically extend <a href="STD____DEFAGGREGATE.html">defaggregate</a> with a command-line parsing layer. 
This has some nice consequences:</p> 
 
<ul> 
 
<li>Argument parsing gives you an ordinary aggregate that can have nice, strong 
type guarantees on its fields.</li> 
 
<li>It's very easy to add new options, pass the arguments throughout your 
program, etc.</li> 
 
<li>You get excellent integration with <a href="ACL2____XDOC.html">xdoc</a>, i.e., documentation is 
mostly automated.</li> 
 
<li>We can automatically generate usage messages that stay up to date as you 
add new arguments.</li> 
 
</ul> 
 
<p>To make Getopt more automatic, we insist on some typical Unix conventions. 
We support options like these:</p> 
 
<pre class="code">--help              Long names use two dashes.
--color red         Values can use spaces or = signs.
--shape=square

-c red              Short aliases use one dash.  Plain
-s=square           aliases (with no arguments) can be
-xfvz               bundled.  E.g., -xfvz instead of
                    -x -f -v -z.</pre> 
 
<p>We insist on two dashes for long options, and one dash for short options. 
This lets us support mixing options in with other arguments like file names. 
For instance, after parsing something like:</p> 
 
<pre class="code">myprogram --depth 3 --verbose foo.java bar.java -o report.txt</pre> 
 
<p>You get two things out:</p> 
 
<ul> 
 
<li>A proper options structure with <i>depth</i> <span class="v">3</span>, <i>verbose</i> <span class="v">t</span>, 
and <i>output</i> <span class="v">report.txt</span>.</li> 
 
<li>The "extra" arguments, i.e., <span class="v">("foo.java" "bar.java")</span>.</li> 
 
</ul> 
 
<p>For rare cases where you need to process a file that starts with <span class="v">-</span>, the 
special syntax <span class="v">--</span> is a marker that means "stop looking for options 
here."</p> 
 
<h3>Using Getopts</h3> 
 
<p>Getopts is an ordinary library with no ttags.  To load it, just include the 
top book:</p> 
 
<pre class="code">(<a href="ACL2____INCLUDE-BOOK.html">include-book</a> "centaur/getopt/top" :dir :system)</pre> 
 
<p>After that, the main command is <a href="ACL2____DEFOPTIONS.html">defoptions</a>.</p> 
 
<p>There is also a demo of how to use Getopt: <a href="GETOPT-DEMO____DEMO-P.html">getopt-demo::demo-p</a>.</p>
</body>
</html>
