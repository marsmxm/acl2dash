<html>
<head>
<meta charset="UTF-8">
<title>Process-syntheto-toplevel-fn</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=SYNTHETO____PROCESS-SYNTHETO-TOPLEVEL-FN">Click for Process-syntheto-toplevel-fn in the Full Manual</a></h3>

<p>Translate a Syntheto top-level construct, or a list of them, 
          into corresponding ACL2 events and execute them, returning a list of outcomes.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(process-syntheto-toplevel-fn top/tops state) â†’ (mv * * state)</pre></dt> 
</dl></div> 
<p>This is the entry point for the translation from Syntheto to ACL2 and processing in ACL2.</p><p>We ensure that the input is a top-level construct or a list of them.</p><p>We retrieve the existing (i.e. old) top-level constructs 
     from the current translation state. 
     We wrap them into a context and we check that 
     the input satisfies the static semantics 
     (this wrapping is a bit awkward, and we will eliminate it 
     after we make some planned improvements to the static semantics). 
     If the static semantic checks succeed, 
     we generate an event to extend the translation state with the input.</p><p>This is just a start: there is, of course, much more to do here. 
     In particular, we need to generate ACL2 events 
     corresponding to the input Syntheto top-level constructs. 
     We are also curently ignoring the type obligations 
     generated by the static semantics checks: 
     these should be turned into ACL2 theorems, 
     and used to generate proofs for the other events 
     (e.g. guard proofs for function definitions).</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>process-syntheto-toplevel-fn</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 process-syntheto-toplevel-fn
 (top/tops state)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :stobjs (<a href="ACL2____STATE.html">state</a>)))
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard t))
 (<a href="COMMON-LISP____LET.html">let</a>
  ((__function__ 'process-syntheto-toplevel-fn))
  (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
  (<a href="ACL2____B_A2.html">b*</a>
   (((<a href="ACL2____MV.html">mv</a> er tops)
     (<a href="COMMON-LISP____COND.html">cond</a> ((<a href="SYNTHETO____TOPLEVELP.html">toplevelp</a> top/tops)
            (<a href="ACL2____MV.html">mv</a> nil (<a href="COMMON-LISP____LIST.html">list</a> top/tops)))
           ((<a href="SYNTHETO____TOPLEVEL-LISTP.html">toplevel-listp</a> top/tops)
            (<a href="ACL2____MV.html">mv</a> nil top/tops))
           (t (<a href="ACL2____MV.html">mv</a> t nil))))
    ((when er)
     (<a href="ACL2____VALUE.html">value</a>
      (<a href="SYNTHETO____MAKE-OUTCOME-UNEXPECTED-FAILURE.html">make-outcome-unexpected-failure</a>
        :message "Expected a toplevel or toplevel-list argument.")))
    (tstate (<a href="SYNTHETO____GET-TRANS-STATE.html">get-trans-state</a> (<a href="ACL2____W.html">w</a> state)))
    (old-tops (<a href="SYNTHETO____TRANS-STATE-_E3TOPS.html">trans-state-&gt;tops</a> tstate))
    (ctxt (<a href="SYNTHETO____MAKE-CONTEXT.html">make-context</a> :tops old-tops))
    (tstate (<a href="SYNTHETO____EXTEND-TRANS-STATE-LIST.html">extend-trans-state-list</a> tops tstate))
    (table-event (<a href="COMMON-LISP____CONS.html">cons</a> 'set-trans-state
                       (<a href="COMMON-LISP____CONS.html">cons</a> tstate 'nil)))
    (<a href="ACL2____STATE.html">state</a> (acl2::submit-event-quiet table-event state))
    ((<a href="ACL2____MV.html">mv</a> events outcomes state)
     (generate-and-process-acl2-events tops ctxt state))
    (new-tops (<a href="SYNTHETO____TOPS-FROM-TRANSFORM-OUTCOMES.html">tops-from-transform-outcomes</a> outcomes))
    (tstate (<a href="SYNTHETO____EXTEND-TRANS-STATE-LIST.html">extend-trans-state-list</a> new-tops tstate))
    (table-event (<a href="COMMON-LISP____CONS.html">cons</a> 'set-trans-state
                       (<a href="COMMON-LISP____CONS.html">cons</a> tstate 'nil)))
    (events (<a href="COMMON-LISP____IF.html">if</a> (<a href="COMMON-LISP____ENDP.html">endp</a> events)
                events
                (<a href="COMMON-LISP____APPEND.html">append</a> events (<a href="COMMON-LISP____LIST.html">list</a> table-event))))
    (final-outcome
         (<a href="COMMON-LISP____IF.html">if</a> (<a href="COMMON-LISP____ENDP.html">endp</a> outcomes)
             (<a href="SYNTHETO____MAKE-OUTCOME-UNEXPECTED-FAILURE.html">make-outcome-unexpected-failure</a>
                  :message "Shouldn't happen: No actual outcomes!")
             (<a href="COMMON-LISP____CAR.html">car</a> (<a href="COMMON-LISP____LAST.html">last</a> outcomes))))
    (make-final-outcome-form (<a href="SYNTHETO____OUTCOME--MAKE-MYSELF.html">outcome--make-myself</a> final-outcome)))
   (<a href="ACL2____VALUE.html">value</a>
    (<a href="COMMON-LISP____CONS.html">cons</a>
     'progn
     (<a href="COMMON-LISP____APPEND.html">append</a>
        events
        (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> 'value-triple
                    (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> 'quote
                                (<a href="COMMON-LISP____CONS.html">cons</a> make-final-outcome-form 'nil))
                          'nil))
              'nil)))))))</pre> 

</body>
</html>
