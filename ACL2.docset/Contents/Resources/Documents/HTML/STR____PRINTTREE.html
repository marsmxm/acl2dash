<html>
<head>
<meta charset="UTF-8">
<title>Printtree</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=STR____PRINTTREE">Click for Printtree in the Full Manual</a></h3>

<p>A tree structure for building up a block of text from components.</p><p>A printtree is simply either a <a href="STR____PRINTABLE.html">printable</a> object or else a 
cons of <a href="STR____PRINTTREE.html">printtree</a> objects.  It represents a block of text formed by 
concatenating together all its leaves in reverse order, i.e. from rightmost to 
leftmost.</p> 
 
<p>It might seem like an odd choice to standardize on right-to-left.  We do so 
because usually we build up a block of text by adding text to the end, and 
usually we expect trees of conses to be longer on the right than on the left, 
like lists.  Some Lisps might be especially optimized for such constructs and 
not so much for the other kind.</p> 
 
<p>A printtree object can be turned into a string using the function 
<span class="v">printtree-&gt;str</span>.</p> 
 
<p>In case there's any reason to accumulate a printtree left to right instead, 
it can be turned into a string in reverse order using 
<span class="v">printtree-&gt;str-left2right</span>.</p> 
 
<p><span class="v">pcat</span> is a convenient macro for composing printtree objects together; 
think of it as string concatenation for printtree objects.  <span class="v">(pcat a b c d)</span> 
simply macroexpands to <span class="v">(<a href="COMMON-LISP____LIST_A2.html">list*</a> d c b a)</span>, so that <span class="v">(printtree-&gt;str (pcat a
b c d))</span> equals <span class="v">(<a href="COMMON-LISP____CONCATENATE.html">concatenate</a> 'string (printtree-&gt;str a)
... (printtree-&gt;str d))</span>.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>printtree-p</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a> printtree-p (x)
       (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard t))
       (<a href="COMMON-LISP____IF.html">if</a> (<a href="COMMON-LISP____ATOM.html">atom</a> x)
           (printable-p x)
           (<a href="COMMON-LISP____AND.html">and</a> (printtree-p (<a href="COMMON-LISP____CAR.html">car</a> x))
                (printtree-p (<a href="COMMON-LISP____CDR.html">cdr</a> x)))))</pre> 
<p><b>Theorem: </b>printtree-p-when-printable-p</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> printtree-p-when-printable-p
        (<a href="ACL2____IMPLIES.html">implies</a> (printable-p x)
                 (printtree-p x)))</pre> 
<p><b>Theorem: </b>printtree-p-of-cons</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> printtree-p-of-cons
        (<a href="COMMON-LISP____EQUAL.html">equal</a> (printtree-p (<a href="COMMON-LISP____CONS.html">cons</a> x y))
               (<a href="COMMON-LISP____AND.html">and</a> (printtree-p x) (printtree-p y))))</pre> 
<p><b>Theorem: </b>printtree-p-when-consp</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> printtree-p-when-consp
        (<a href="ACL2____IMPLIES.html">implies</a> (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP____CONSP.html">consp</a> x)
                      (printtree-p (<a href="COMMON-LISP____CAR.html">car</a> x))
                      (printtree-p (<a href="COMMON-LISP____CDR.html">cdr</a> x)))
                 (printtree-p x))
        :rule-classes ((:rewrite :backchain-limit-lst (0 nil nil))))</pre> 
<p><b>Function: </b>printtree-fix$</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a> printtree-fix$ (x)
       (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard t))
       (<a href="COMMON-LISP____IF.html">if</a> (<a href="COMMON-LISP____ATOM.html">atom</a> x)
           (printable-fix$ x)
           (<a href="COMMON-LISP____CONS.html">cons</a> (printtree-fix$ (<a href="COMMON-LISP____CAR.html">car</a> x))
                 (printtree-fix$ (<a href="COMMON-LISP____CDR.html">cdr</a> x)))))</pre> 
<p><b>Function: </b>printtree-fix</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a> printtree-fix (x)
       (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (printtree-p x)))
       (<a href="ACL2____MBE.html">mbe</a> :logic (<a href="COMMON-LISP____IF.html">if</a> (<a href="COMMON-LISP____ATOM.html">atom</a> x)
                       (printable-fix x)
                       (<a href="COMMON-LISP____CONS.html">cons</a> (printtree-fix (<a href="COMMON-LISP____CAR.html">car</a> x))
                             (printtree-fix (<a href="COMMON-LISP____CDR.html">cdr</a> x))))
            :exec x))</pre> 
<p><b>Theorem: </b>printtree-p-of-printtree-fix</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> printtree-p-of-printtree-fix
        (printtree-p (printtree-fix x)))</pre> 
<p><b>Theorem: </b>printtree-fix-when-printtree-p</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> printtree-fix-when-printtree-p
        (<a href="ACL2____IMPLIES.html">implies</a> (printtree-p x)
                 (<a href="COMMON-LISP____EQUAL.html">equal</a> (printtree-fix x) x)))</pre> 
<p><b>Theorem: </b>printtree-fix-of-cons</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> printtree-fix-of-cons
        (<a href="COMMON-LISP____EQUAL.html">equal</a> (printtree-fix (<a href="COMMON-LISP____CONS.html">cons</a> a b))
               (<a href="COMMON-LISP____CONS.html">cons</a> (printtree-fix a)
                     (printtree-fix b))))</pre> 
<p><b>Function: </b>printtree-&gt;strlist-aux</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 printtree-&gt;strlist-aux (x acc)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (printtree-p x)))
 (<a href="COMMON-LISP____IF.html">if</a> (<a href="COMMON-LISP____ATOM.html">atom</a> x)
     (<a href="COMMON-LISP____IF.html">if</a> (printable-fix x)
         (<a href="COMMON-LISP____CONS.html">cons</a> (printable-&gt;str x) acc)
         acc)
     (printtree-&gt;strlist-aux (<a href="COMMON-LISP____CDR.html">cdr</a> x)
                             (printtree-&gt;strlist-aux (<a href="COMMON-LISP____CAR.html">car</a> x) acc))))</pre> 
<p><b>Function: </b>printtree-&gt;strlist</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a> printtree-&gt;strlist (x)
       (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (printtree-p x)))
       (<a href="ACL2____MBE.html">mbe</a> :logic (<a href="COMMON-LISP____IF.html">if</a> (<a href="COMMON-LISP____ATOM.html">atom</a> x)
                       (<a href="COMMON-LISP____AND.html">and</a> (printable-fix x)
                            (<a href="COMMON-LISP____LIST.html">list</a> (printable-&gt;str x)))
                       (<a href="COMMON-LISP____APPEND.html">append</a> (printtree-&gt;strlist (<a href="COMMON-LISP____CDR.html">cdr</a> x))
                               (printtree-&gt;strlist (<a href="COMMON-LISP____CAR.html">car</a> x))))
            :exec (printtree-&gt;strlist-aux x nil)))</pre> 
<p><b>Theorem: </b>printtree-&gt;strlist-aux-elim</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> printtree-&gt;strlist-aux-elim
        (<a href="COMMON-LISP____EQUAL.html">equal</a> (printtree-&gt;strlist-aux x acc)
               (<a href="COMMON-LISP____APPEND.html">append</a> (printtree-&gt;strlist x) acc)))</pre> 
<p><b>Theorem: </b>string-listp-of-printtree-&gt;strlist</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> string-listp-of-printtree-&gt;strlist
        (<a href="ACL2____STRING-LISTP.html">string-listp</a> (printtree-&gt;strlist x)))</pre> 
<p><b>Function: </b>revappend-printtree</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a> revappend-printtree (x acc)
       (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (printtree-p x)))
       (<a href="COMMON-LISP____IF.html">if</a> (<a href="COMMON-LISP____ATOM.html">atom</a> x)
           (revappend-printable x acc)
           (revappend-printtree (<a href="COMMON-LISP____CAR.html">car</a> x)
                                (revappend-printtree (<a href="COMMON-LISP____CDR.html">cdr</a> x) acc))))</pre> 
<p><b>Theorem: </b>revappend-printtree-elim</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
  revappend-printtree-elim
  (<a href="COMMON-LISP____EQUAL.html">equal</a> (revappend-printtree x acc)
         (<a href="STR____REVAPPEND-CHARS.html">revappend-chars</a> (string-append-lst (printtree-&gt;strlist x))
                          acc)))</pre> 
<p><b>Function: </b>printtree-&gt;str1</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a> printtree-&gt;str1 (x)
       (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (printtree-p x)))
       (<a href="STR____RCHARS-TO-STRING.html">rchars-to-string</a> (revappend-printtree x nil)))</pre> 
<p><b>Function: </b>printtree-&gt;str</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a> printtree-&gt;str (x)
       (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (printtree-p x)))
       (<a href="ACL2____MBE.html">mbe</a> :logic (<a href="COMMON-LISP____IF.html">if</a> (<a href="COMMON-LISP____ATOM.html">atom</a> x)
                       (printable-&gt;str x)
                       (<a href="COMMON-LISP____CONCATENATE.html">concatenate</a> 'string
                                    (printtree-&gt;str (<a href="COMMON-LISP____CDR.html">cdr</a> x))
                                    (printtree-&gt;str (<a href="COMMON-LISP____CAR.html">car</a> x))))
            :exec (<a href="COMMON-LISP____IF.html">if</a> (<a href="COMMON-LISP____ATOM.html">atom</a> x)
                      (printable-&gt;str x)
                      (printtree-&gt;str1 x))))</pre> 
<p><b>Theorem: </b>printtree-&gt;str-of-cons</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> printtree-&gt;str-of-cons
        (<a href="COMMON-LISP____EQUAL.html">equal</a> (printtree-&gt;str (<a href="COMMON-LISP____CONS.html">cons</a> a b))
               (<a href="ACL2____STRING-APPEND.html">string-append</a> (printtree-&gt;str b)
                              (printtree-&gt;str a))))</pre> 
<p><b>Theorem: </b>string-append-lst-of-printtree-&gt;strlist</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> string-append-lst-of-printtree-&gt;strlist
        (<a href="COMMON-LISP____EQUAL.html">equal</a> (string-append-lst (printtree-&gt;strlist x))
               (printtree-&gt;str x)))</pre> 
<p><b>Function: </b>printtree-&gt;str-left2right</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a> printtree-&gt;str-left2right (x)
       (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (printtree-p x)))
       (fast-string-append-lst (<a href="COMMON-LISP____REVERSE.html">reverse</a> (printtree-&gt;strlist x))))</pre> 

</body>
</html>
