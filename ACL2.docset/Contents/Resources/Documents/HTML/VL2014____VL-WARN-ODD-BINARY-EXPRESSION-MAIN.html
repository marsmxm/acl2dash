<html>
<head>
<meta charset="UTF-8">
<title>Vl-warn-odd-binary-expression-main</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=VL2014____VL-WARN-ODD-BINARY-EXPRESSION-MAIN">Click for Vl-warn-odd-binary-expression-main in the Full Manual</a></h3>

<p>Check the top-level of a binary expression for precedence problems.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(vl-warn-odd-binary-expression-main op1 a x flipped ss)  *</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">op1</span>  <font color="#606060">Guard <span class="v">(<a href="VL2014____VL-OP-P.html">vl-op-p</a> op1)</span>.</font>
</dd> 
  <dd>
<span class="tt">a</span>  <font color="#606060">Guard <span class="v">(<a href="VL2014____VL-EXPR-P.html">vl-expr-p</a> a)</span>.</font>
</dd> 
  <dd>
<span class="tt">x</span>  <font color="#606060">Guard <span class="v">(<a href="VL2014____VL-EXPR-P.html">vl-expr-p</a> x)</span>.</font>
</dd> 
  <dd>
<span class="tt">flipped</span>  <font color="#606060">Guard <span class="v">(<a href="ACL2____BOOLEANP.html">booleanp</a> flipped)</span>.</font>
</dd> 
  <dd>
<span class="tt">ss</span>  <font color="#606060">Guard <span class="v">(<a href="VL2014____VL-SCOPESTACK-P.html">vl-scopestack-p</a> ss)</span>.</font>
</dd> 
 
</dl></div> 
<p>Note that any particular binary expression, say <span class="v">P OP Q</span>, might 
have sub-structure in either the P argument or in the Q argument.  To deal with 
this, in <a href="VL2014____VL-WARN-ODD-BINARY-EXPRESSION.html">vl-warn-odd-binary-expression</a>, we call this function twice:</p> 
 
<ul> 
<li>First with <span class="v">(OP P Q)</span> and <span class="v">FLIPPED=NIL</span>,</li> 
<li>Then with <span class="v">(OP Q P)</span> and <span class="v">FLIPPED=T</span>.</li> 
</ul> 
 
<p>The first argument, A, we regard as the "simple" argument; we don't try to 
decompose it any more.  However, we try to match X against <span class="v">B OP2 C</span>.  Then, 
we see if we think the sequence <span class="v">A op (B op2 C)</span> seems reasonable.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>vl-warn-odd-binary-expression-main</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 vl-warn-odd-binary-expression-main
 (op1 a x flipped ss)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="VL2014____VL-OP-P.html">vl-op-p</a> op1)
                             (<a href="VL2014____VL-EXPR-P.html">vl-expr-p</a> a)
                             (<a href="VL2014____VL-EXPR-P.html">vl-expr-p</a> x)
                             (<a href="ACL2____BOOLEANP.html">booleanp</a> flipped)
                             (<a href="VL2014____VL-SCOPESTACK-P.html">vl-scopestack-p</a> ss))))
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> a flipped))
 (<a href="COMMON-LISP____LET.html">let</a>
    ((__function__ 'vl-warn-odd-binary-expression-main))
    (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
    (<a href="ACL2____B_A2.html">b*</a> (((when (<a href="COMMON-LISP____OR.html">or</a> (vl-fast-atom-p x)
                    (<a href="COMMON-LISP____NOT.html">not</a> (<a href="COMMON-LISP____EQL.html">eql</a> (<a href="VL2014____VL-OP-ARITY.html">vl-op-arity</a> (<a href="VL2014____VL-NONATOM-_E3OP.html">vl-nonatom-&gt;op</a> x))
                              2))))
          nil)
         (op2 (<a href="VL2014____VL-NONATOM-_E3OP.html">vl-nonatom-&gt;op</a> x))
         (op1-class (<a href="VL2014____VL-ODD-BINOP-CLASS.html">vl-odd-binop-class</a> op1))
         (op2-class (<a href="VL2014____VL-ODD-BINOP-CLASS.html">vl-odd-binop-class</a> op2))
         (key (<a href="COMMON-LISP____CONS.html">cons</a> op1-class op2-class))
         (look (<a href="ACL2____ASSOC-EQUAL.html">assoc-equal</a> key *vl-odd-binops-table*))
         ((unless look) nil))
        (case (<a href="COMMON-LISP____CDR.html">cdr</a> look)
              ((:check-precedence)
               (<a href="COMMON-LISP____IF.html">if</a> (<a href="ACL2____ASSOC-EQUAL.html">assoc-equal</a> "VL_EXPLICIT_PARENS"
                                (<a href="VL2014____VL-NONATOM-_E3ATTS.html">vl-nonatom-&gt;atts</a> x))
                   nil :check-precedence))
              (:check-type (<a href="COMMON-LISP____IF.html">if</a> (<a href="ACL2____ASSOC-EQUAL.html">assoc-equal</a> "VL_EXPLICIT_PARENS"
                                            (<a href="VL2014____VL-NONATOM-_E3ATTS.html">vl-nonatom-&gt;atts</a> x))
                               nil :check-type))
              (:check-type-unless-topargs-boolean
                   (<a href="ACL2____B_A2.html">b*</a> (((when (<a href="ACL2____ASSOC-EQUAL.html">assoc-equal</a> "VL_EXPLICIT_PARENS"
                                            (<a href="VL2014____VL-NONATOM-_E3ATTS.html">vl-nonatom-&gt;atts</a> x)))
                         nil)
                        (asize (<a href="VL2014____VL-EXPR-PROBABLE-SELFSIZE.html">vl-expr-probable-selfsize</a> a ss))
                        (xsize (<a href="VL2014____VL-EXPR-PROBABLE-SELFSIZE.html">vl-expr-probable-selfsize</a> x ss))
                        ((when (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP____OR.html">or</a> (<a href="COMMON-LISP____NOT.html">not</a> asize) (<a href="COMMON-LISP____EQL.html">eql</a> asize 1))
                                    (<a href="COMMON-LISP____OR.html">or</a> (<a href="COMMON-LISP____NOT.html">not</a> xsize) (<a href="COMMON-LISP____EQL.html">eql</a> xsize 1))))
                         nil))
                       :check-type))
              ((:check-precedence-plusminus)
               (<a href="COMMON-LISP____IF.html">if</a> (<a href="COMMON-LISP____AND.html">and</a> flipped
                        (<a href="COMMON-LISP____NOT.html">not</a> (<a href="ACL2____ASSOC-EQUAL.html">assoc-equal</a> "VL_EXPLICIT_PARENS"
                                          (<a href="VL2014____VL-NONATOM-_E3ATTS.html">vl-nonatom-&gt;atts</a> x))))
                   :check-precedence nil))
              (nil nil)
              (otherwise (<a href="ACL2____RAISE.html">raise</a> "Unexpected action type ~x0.~%"
                                (<a href="COMMON-LISP____CDR.html">cdr</a> look)))))))</pre> 

</body>
</html>
