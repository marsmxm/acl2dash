<html>
<head>
<meta charset="UTF-8">
<title>Set-prover-step-limit</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____SET-PROVER-STEP-LIMIT">Click for Set-prover-step-limit in the Full Manual</a></h3>

<p>Sets the step-limit used by the ACL2 prover</p><p>This event provides a way to limit the number of so-called ``prover 
 steps'' permitted for an event.  See <a href="ACL2____WITH-PROVER-STEP-LIMIT.html">with-prover-step-limit</a> for a way 
 to specify the limit on prover steps for a single event, rather than globally. 
 For a related utility based on time instead of prover steps, see <a href="ACL2____WITH-PROVER-TIME-LIMIT.html">with-prover-time-limit</a>.  For examples of how step limits work, see the 
 community book <span class="v">books/misc/misc2/step-limits.lisp</span>.  For a utility that 
 returns an indicator of the number of prover steps most recently taken, see 
 <a href="ACL2____LAST-PROVER-STEPS.html">last-prover-steps</a>.</p> 
 
 <p>Note: This is an event!  It does not print the usual event <a href="ACL2____SUMMARY.html">summary</a> 
 but nevertheless changes the ACL2 logical <a href="ACL2____WORLD.html">world</a> and is so recorded. 
 Moreover, its effect is to set the <span class="tt"><a href="ACL2____ACL2-DEFAULTS-TABLE.html">ACL2-defaults-table</a></span>, and hence its 
 effect is <span class="tt"><a href="ACL2____LOCAL.html">local</a></span> to the book or <span class="tt"><a href="ACL2____ENCAPSULATE.html">encapsulate</a></span> form containing it; 
 see <a href="ACL2____ACL2-DEFAULTS-TABLE.html">ACL2-defaults-table</a>.</p> 
 
 <pre class="code">Example Forms:
(<a href="ACL2____SET-PROVER-STEP-LIMIT.html">set-prover-step-limit</a> *default-step-limit*) ; no limit on prover steps
(<a href="ACL2____SET-PROVER-STEP-LIMIT.html">set-prover-step-limit</a> nil)   ; abbreviation for the form just above
(<a href="ACL2____SET-PROVER-STEP-LIMIT.html">set-prover-step-limit</a> 10000) ; allow at most 10,000 prover steps per event

General Form:
(<a href="ACL2____SET-PROVER-STEP-LIMIT.html">set-prover-step-limit</a> expr)</pre> 
 
 <p>where <span class="v">expr</span> evaluates either to <span class="v">nil</span> or else to a natural number 
 not exceeding the value of <span class="v">*default-step-limit*</span>.  If that value is 
 <span class="v">nil</span> or the value of <span class="v">*default-step-limit*</span>, then no default limit is 
 placed on the number of prover ``steps'' (see below) during processing of an 
 event.  Otherwise, that value is the maximum number of prover steps permitted 
 before an error occurs.</p> 
 
 <p>This event specifies the limit on the number of ``steps'' counted by the 
 ACL2 prover during processing of an event.  Currently, a step is counted for 
 each call of the system functions <span class="v">rewrite</span> and <span class="v">expand-abbreviations</span>. 
 However, the steps counted may change in future releases of ACL2, so users 
 would probably be well served by avoiding the assumption that only the above 
 two calls are counted as prover steps.</p> 
 
 <p>Depending on the computer you are using, you may have less than a half-hour 
 of time before the number of prover steps exceeds the maximum step-limit, 
 which is one less than the value of <span class="v">*default-step-limit*</span>.  Note however 
 the exception stated above: if the ``limit'' is <span class="v">nil</span> or is the value of 
 <span class="v">*default-step-limit*</span>, then no limit is imposed.</p> 
 
 <p>There is at best a loose connection between the counting of steps and 
 <span class="tt"><a href="ACL2____WITH-PROVER-TIME-LIMIT.html">with-prover-time-limit</a></span>.  In particular, for a call of <span class="v">mfc-rw</span> or 
 any <span class="v">mfc-</span> function (see <a href="ACL2____EXTENDED-METAFUNCTIONS.html">extended-metafunctions</a>), the steps taken 
 during that call are forgotten when returning from that call.</p> 
 
 <p>The limit is relevant for every event, as well as for calls of <span class="tt"><a href="ACL2____THM.html">thm</a></span> 
 and <span class="tt"><a href="ACL2____CERTIFY-BOOK.html">certify-book</a></span> â€” and more generally, to any form that creates 
 a ``summary context'' to print the usual event <a href="ACL2____SUMMARY.html">summary</a>.  The limit is 
 also put in force when entering the interactive <a href="ACL2____PROOF-BUILDER.html">proof-builder</a>.  A call 
 of <span class="v">set-prover-step-limit</span> applies to each subsequent form unless the call 
 of <span class="v">set-prover-step-limit</span> is within a summary context, in which case its 
 effect disappears when exiting that summary context.</p> 
 
 <p>The limit applies to each event, not just ``atomic'' events.  Consider the 
 following example.</p> 
 
 <pre class="code">(<a href="ACL2____SET-PROVER-STEP-LIMIT.html">set-prover-step-limit</a> 500)

(<a href="ACL2____ENCAPSULATE.html">encapsulate</a>
  ()
  (<a href="ACL2____DEFTHM.html">defthm</a> lemma-1 ; takes 380 steps
    (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="COMMON-LISP____APPEND.html">append</a> (<a href="COMMON-LISP____APPEND.html">append</a> x y) z) (<a href="COMMON-LISP____APPEND.html">append</a> x y z))
    :rule-classes nil)
  (<a href="ACL2____DEFTHM.html">defthm</a> lemma-2 ; would take 319 steps
    (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="ACL2____LEN.html">len</a> (<a href="COMMON-LISP____APPEND.html">append</a> x y)) (<a href="COMMON-LISP_____B2.html">+</a> (<a href="ACL2____LEN.html">len</a> x) (<a href="ACL2____LEN.html">len</a> y)))
    :rule-classes nil))</pre> 
 
 <p>The first <span class="tt"><a href="ACL2____DEFTHM.html">defthm</a></span> event, <span class="v">lemma-1</span> takes 380 steps (as of this 
 writing), as shown in the <a href="ACL2____SUMMARY.html">summary</a>:</p> 
 
 <pre class="code">Prover steps counted:  380
LEMMA-1</pre> 
 
 <p>The second <span class="tt"><a href="ACL2____DEFTHM.html">defthm</a></span> event, <span class="v">lemma-2</span>, takes 319 steps (as of this 
 writing) when evaluated at the top level.  However, in the context above, 380 
 steps of the available 500 steps (from the <span class="v">set-prover-step-limit</span> event 
 above) have already been taken under the above <span class="tt"><a href="ACL2____ENCAPSULATE.html">encapsulate</a></span> event. 
 Thus, when the number of steps would exceed 120, the proof of <span class="v">lemma-2</span> is 
 aborted:</p> 
 
 <pre class="code">ACL2 Error in STEP-LIMIT:  The prover step-limit, which is 120 in the
current context, has been exceeded.  See :DOC set-prover-step-limit.</pre> 
 
 <p>The summary for <span class="v">lemma-2</span> reflects that situation:</p> 
 
 <pre class="code">Prover steps counted:  More than 120</pre> 
 
 <p>The summary for the <span class="tt"><a href="ACL2____ENCAPSULATE.html">encapsulate</a></span> event then indicates that the 
 available steps for that event have also been exceeded:</p> 
 
 <pre class="code">Prover steps counted:  More than 500</pre> 
 
 <p>The discussion above applies to any event that contains other events, hence 
 applies similarly to <span class="tt"><a href="COMMON-LISP____PROGN.html">progn</a></span> events.</p> 
 
 <p>For those who use <span class="tt"><a href="ACL2____MAKE-EVENT.html">make-event</a></span>, we note that prover steps in the 
 expansion phase similarly contribute to the total number of steps counted. 
 For example, suppose that the limit is 500 prover steps as above, and you 
 submit <span class="v">(<a href="ACL2____MAKE-EVENT.html">make-event</a> EXPR)</span>, where 300 prover steps take place during 
 evaluation of <span class="v">EXPR</span>, producing event <span class="v">EV</span>.  Then evaluation of <span class="v">EV</span> 
 will cause an error if it takes more than 200 prover steps.  This observation 
 actually can be used to count prover steps for sequences of forms that are not 
 all legal <span class="tt"><a href="ACL2____EVENTS.html">events</a></span> (see <a href="ACL2____EMBEDDED-EVENT-FORM.html">embedded-event-form</a>), such as calls of 
 <span class="tt"><a href="ACL2____THM.html">thm</a></span>.  For example, a small built-in ACL2 test suite that includes 
 <span class="tt"><a href="ACL2____THM.html">thm</a></span> forms can be run by evaluating the form <span class="v">(mini-proveall)</span>, and 
 the steps can be counted as shown below.  (Here we assume a fresh ACL2 
 session; an error would occur if first, we evaluate the event 
 <span class="v">(<a href="ACL2____SET-PROVER-STEP-LIMIT.html">set-prover-step-limit</a> 500)</span> displayed above.)</p> 
 
 <pre class="code">ACL2 !&gt;(<a href="ACL2____MAKE-EVENT.html">make-event</a> (<a href="ACL2____ER-PROGN.html">er-progn</a> (mini-proveall) (<a href="ACL2____VALUE.html">value</a> '(<a href="ACL2____VALUE-TRIPLE.html">value-triple</a> nil))))
[[... output omitted here ...]]
Summary
Form:  ( MAKE-EVENT (<a href="ACL2____ER-PROGN.html">ER-PROGN</a> ...))
Rules: NIL
Warnings:  Double-rewrite, Equiv, Subsume and Non-rec
Time:  0.38 seconds (prove: 0.04, print: 0.29, other: 0.05)
Prover steps counted:  41090
 NIL
ACL2 !&gt;</pre>
</body>
</html>
