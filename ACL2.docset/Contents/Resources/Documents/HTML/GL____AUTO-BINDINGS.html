<html>
<head>
<meta charset="UTF-8">
<title>Auto-bindings</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=GL____AUTO-BINDINGS">Click for Auto-bindings in the Full Manual</a></h3>

<p>Simplified shape specifiers for <span class="v">:g-bindings</span>.</p><p>The <span class="v">auto-bindings</span> function lets you create simple <a href="GL____SHAPE-SPECS.html">shape-specs</a> in an easy way.  Here is an example:</p> 
 
<pre class="code">(<a href="ACL2____DEF-GL-THM.html">def-gl-thm</a> foo
  ...
  :g-bindings (<a href="GL____AUTO-BINDINGS.html">auto-bindings</a>                          ; expands to:
               (:nat opcode 8)                        ; g-integer with indices 0-8
               (:int multiplier 16)                   ; g-integer with indices 9-25
               (:bool enable)                         ; g-boolean with index 26
               (:mix (:nat a-bus 128)                 ; }  g-integers whose indices are interleaved,
                     (:nat b-bus 128)                 ; }  27 to 414 -- see below
                     (:rev (:seq (:nat c-bus 64)      ; } 
                                 (:skip 64))))   ; }
               (:rev (:nat fixup-bits 4))       ; g-integer with indices 420-415
               ))</pre> 
 
<p>This is good because</p> 
 
<ul> 
 
<li>you don't have to think about sign bits and do a bunch of stupid arithmetic 
to figure out the next free index, and</li> 
 
<li>you can painlessly extend the bindings when you want to add a new variable 
without having to update a bunch of indices.</li> 
 
</ul> 
 
<p>Auto-bindings are more limited than shape-specs.  Except for the special 
<span class="v">:mix</span> command, you can only write:</p> 
 
<pre class="code">(:bool var)  -- expands to a g-boolean shape-specifier
(:int var n) -- expands to a g-integer with n bits (signed 2's complement)
(:nat var n) -- equivalent to (:int var (<a href="COMMON-LISP_____B2.html">+</a> 1 n))
(:skip n)    -- takes up space in a :mix, but doesn't generate bindings.</pre> 
 
<p>The <span class="v">:rev</span> command reverses the order of the bits produced by directives inside it.</p> 
 
<p>The <span class="v">:mix</span> command interleaves the bits of the elements inside it. 
Currently we only allow mix to contain elements that are all the same size.</p> 
 
<p>The <span class="v">:seq</span> and <span class="v">:mix</span> commands can be nested to produce complicated 
interleavings.</p> 
 
<p>The <span class="v">:skip</span> command can be used to pad out a <span class="v">:mix</span> command so as to 
interleave a shorter variable with part of a longer variable.  E.g.:</p> 
<pre class="code">(:mix (:int a 7)
      (:seq (:int b 4) (:skip 3)))</pre> 
<p>produces</p> 
<pre class="code">((A (:G-INTEGER 0 2 4 6 8 9 10))
 (B (:G-INTEGER 1 3 5 7)))</pre> 
<p>That is, the first part of <span class="v">a</span> is mixed with <span class="v">b</span> but once the bits of 
<span class="v">b</span> run out, the rest of the bits of <span class="v">a</span> are simply in sequence.</p> 

</body>
</html>
