<html>
<head>
<meta charset="UTF-8">
<title>Montgomery-add-commutativity</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ECURVE____MONTGOMERY-ADD-COMMUTATIVITY">Click for Montgomery-add-commutativity in the Full Manual</a></h3>

<p>Commutativity of Montgomery addition.</p><p>This is easy when at least one of the points is the one at infinity. 
     When the two points are both finite, 
     there are two cases, according to the definition of addition: 
     either the points have the same x or not. 
     If they do, we know from theorem 
     <span class="tt"><a href="ECURVE____MONTGOMERY-POINTS-WITH-SAME-X-HAVE-SAME-OR-NEG-Y.html">montgomery-points-with-same-x-have-same-or-neg-y</a></span> 
     that the y are either the same or inverses: 
     if they are inverses, they are still inverses if swapped, 
     and the result is the point at infinite in both cases, 
     so commutativity holds; 
     if they are the same, then the two points are the same 
     and commutativity clearly holds.</p><p>The more elaborate case is when the two points have different x. 
     Looking at the formula to compute the addition, 
     first note that \lambda does not change if the points are swapped, 
     because the swapping negates both dividend and divisor, 
     and the negations simplify away. 
     The x of the addition is obtained by combining \lambda 
     with A and B and the two xs of the points: 
     the latter are both subtracted, 
     and if swapped the final result is the same. 
     So addition commutes at least for the x coordinate.</p><p>For the y of the addition, things are a bit more complex: 
     it is not immediately clear that 
     \lambda (x_1 - x_3) - y_1 = \lambda (x_2 - x_3) - y_2, 
     where we write \lambda for both because that part commutes, 
     as explained above. 
     If we distribute \lambda over (x_1 - x_3) and (x_2 - x_3), 
     we see that \lambda x_3 is the same for both, 
     so we are left with showing 
     \lambda x_1 - y_1 = \lambda x_2 - y_2. 
     Expanding \lambda 
     and extending the fraction to y-1 and y_2, 
     things simplify and both reduce to the same 
     \frac{x_1 y_2 - x_2 y_1}{x_2 - x_1}, 
     thus ensuring commutativity.</p><p>To carry out the argument above for the case of different xs, 
     we introduce local functions that define 
     \lambda, x_3, and y_2, 
     show they commute, 
     show them equivalent to <span class="tt"><a href="ECURVE____MONTGOMERY-ADD.html">montgomery-add</a></span> under suitable conditions, 
     and thus conclude the commutativity under those conditions, 
     which together with the commutativity theorems under other conditions, 
     allow us to conclude commutativity under all conditions.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Theorem: </b>montgomery-add-commutative</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> montgomery-add-commutative
        (<a href="ACL2____IMPLIES.html">implies</a> (<a href="COMMON-LISP____AND.html">and</a> (<a href="ECURVE____POINT-ON-MONTGOMERY-P.html">point-on-montgomery-p</a> point1 curve)
                      (<a href="ECURVE____POINT-ON-MONTGOMERY-P.html">point-on-montgomery-p</a> point2 curve))
                 (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="ECURVE____MONTGOMERY-ADD.html">montgomery-add</a> point1 point2 curve)
                        (<a href="ECURVE____MONTGOMERY-ADD.html">montgomery-add</a> point2 point1 curve))))</pre> 

</body>
</html>
