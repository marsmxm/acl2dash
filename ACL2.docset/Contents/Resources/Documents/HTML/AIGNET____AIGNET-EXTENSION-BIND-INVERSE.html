<html>
<head>
<meta charset="UTF-8">
<title>Aignet-extension-bind-inverse</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=AIGNET____AIGNET-EXTENSION-BIND-INVERSE">Click for Aignet-extension-bind-inverse in the Full Manual</a></h3>

<p>Find an appropriate free variable binding that is an aignet-extension of a bound variable.</p><p>An example rule using this utility:</p> 
<pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> lookup-id-in-extension-inverse
    (<a href="ACL2____IMPLIES.html">implies</a> (<a href="COMMON-LISP____AND.html">and</a> (<a href="AIGNET____AIGNET-EXTENSION-BIND-INVERSE.html">aignet-extension-bind-inverse</a> :orig orig :new new)
                  (<a href="COMMON-LISP_____C3_D3.html">&lt;=</a> (<a href="ACL2____NFIX.html">nfix</a> id) (<a href="AIGNET____FANIN-COUNT.html">fanin-count</a> orig)))
             (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="AIGNET____LOOKUP-ID.html">lookup-id</a> id orig)
                    (<a href="AIGNET____LOOKUP-ID.html">lookup-id</a> id new))))</pre> 
 
<p>Suppose this rule matches on the term <span class="v">(<a href="AIGNET____LOOKUP-ID.html">lookup-id</a> id (<a href="AIGNET____LOOKUP-REG-_E3NXST.html">lookup-reg-&gt;nxst</a> n
aignet))</span>.  Therefore, <span class="v">orig</span> is bound to <span class="v">(<a href="AIGNET____LOOKUP-REG-_E3NXST.html">lookup-reg-&gt;nxst</a> n aignet)</span>. 
The invocation of <span class="v">aignet-extension-bind-inverse</span> knows that the second 
argument of <span class="v">lookup-reg-&gt;nxst</span> is an aignet that is (likely) an extension of 
the lookup (because the lookup finds some suffix of that argument).  So it 
binds <span class="v">new</span> to <span class="v">aignet</span>, in this case.  Thus, this rule can be used 
instead of a whole series of rules about individual functions that look up some 
suffix of an aignet, such as:</p> 
<pre class="code">(<a href="ACL2____IMPLIES.html">implies</a> (<a href="COMMON-LISP_____C3_D3.html">&lt;=</a> (<a href="ACL2____NFIX.html">nfix</a> id) (<a href="AIGNET____FANIN-COUNT.html">fanin-count</a> (<a href="AIGNET____LOOKUP-REG-_E3NXST.html">lookup-reg-&gt;nxst</a> n aignet))))
         (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="AIGNET____LOOKUP-ID.html">lookup-id</a> id (<a href="AIGNET____LOOKUP-REG-_E3NXST.html">lookup-reg-&gt;nxst</a> n aignet))
                (<a href="AIGNET____LOOKUP-ID.html">lookup-id</a> id aignet)))

(<a href="ACL2____IMPLIES.html">implies</a> (<a href="COMMON-LISP_____C3_D3.html">&lt;=</a> (<a href="ACL2____NFIX.html">nfix</a> id) (<a href="AIGNET____FANIN-COUNT.html">fanin-count</a> (<a href="AIGNET____LOOKUP-STYPE.html">lookup-stype</a> n stype aignet))))
         (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="AIGNET____LOOKUP-ID.html">lookup-id</a> id (<a href="AIGNET____LOOKUP-STYPE.html">lookup-stype</a> n stype aignet))
                (<a href="AIGNET____LOOKUP-ID.html">lookup-id</a> id aignet)))</pre> 
<p>etc.</p> 
 
<p>See also <a href="AIGNET____AIGNET-EXTENSION-BINDING.html">aignet-extension-binding</a> for a similar macro that finds a 
binding for a suffix aignet from a term giving some extension.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>aignet-extension-bind-scan-lookups</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
    aignet-extension-bind-scan-lookups
    (term var table)
    (<a href="ACL2____B_A2.html">b*</a> (((when (<a href="COMMON-LISP____ATOM.html">atom</a> table)) nil)
         ((<a href="ACL2____MV.html">mv</a> ok subst)
          (acl2::simple-one-way-unify (<a href="COMMON-LISP____CAAR.html">caar</a> table)
                                      term nil))
         ((unless ok)
          (aignet-extension-bind-scan-lookups term var (<a href="COMMON-LISP____CDR.html">cdr</a> table)))
         (new (acl2::substitute-into-term (<a href="COMMON-LISP____CDAR.html">cdar</a> table)
                                          subst)))
        (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> var new) 'nil)))</pre> 
<p><b>Function: </b>aignet-extension-bind-inverse-fn</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 aignet-extension-bind-inverse-fn
 (x var mfc state)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :stobjs state)
          (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> mfc))
 (aignet-extension-bind-scan-lookups x var
                                     (<a href="ACL2____TABLE-ALIST.html">table-alist</a> 'aignet-lookup-fns
                                                  (<a href="ACL2____W.html">w</a> state))))</pre> 
<p><b>Theorem: </b>fanin-count-when-aignet-extension-bind-inverse</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> fanin-count-when-aignet-extension-bind-inverse
        (<a href="ACL2____IMPLIES.html">implies</a> (<a href="AIGNET____AIGNET-EXTENSION-BIND-INVERSE.html">aignet-extension-bind-inverse</a> :orig x
                                                :new y)
                 (<a href="COMMON-LISP_____C3_D3.html">&lt;=</a> (<a href="AIGNET____FANIN-COUNT.html">fanin-count</a> x) (<a href="AIGNET____FANIN-COUNT.html">fanin-count</a> y)))
        :rule-classes ((:linear :trigger-terms ((<a href="AIGNET____FANIN-COUNT.html">fanin-count</a> x)))))</pre> 
<p><b>Theorem: </b>stype-count-when-aignet-extension-bind-inverse</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
     stype-count-when-aignet-extension-bind-inverse
     (<a href="ACL2____IMPLIES.html">implies</a> (<a href="AIGNET____AIGNET-EXTENSION-BIND-INVERSE.html">aignet-extension-bind-inverse</a> :orig x
                                             :new y)
              (<a href="COMMON-LISP_____C3_D3.html">&lt;=</a> (<a href="AIGNET____STYPE-COUNT.html">stype-count</a> k x)
                  (<a href="AIGNET____STYPE-COUNT.html">stype-count</a> k y)))
     :rule-classes ((:linear :trigger-terms ((<a href="AIGNET____STYPE-COUNT.html">stype-count</a> k x)))))</pre> 
<p><b>Theorem: </b>fanin-count-cdr-when-aignet-extension-inverse</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
   fanin-count-cdr-when-aignet-extension-inverse
   (<a href="ACL2____IMPLIES.html">implies</a> (<a href="COMMON-LISP____AND.html">and</a> (<a href="AIGNET____AIGNET-EXTENSION-BIND-INVERSE.html">aignet-extension-bind-inverse</a> :orig x
                                                :new y)
                 (<a href="COMMON-LISP____CONSP.html">consp</a> x)
                 (<a href="AIGNET____FANIN-NODE-P.html">fanin-node-p</a> (<a href="COMMON-LISP____CAR.html">car</a> x)))
            (<a href="COMMON-LISP_____C3.html">&lt;</a> (<a href="AIGNET____FANIN-COUNT.html">fanin-count</a> (<a href="COMMON-LISP____CDR.html">cdr</a> x))
               (<a href="AIGNET____FANIN-COUNT.html">fanin-count</a> y)))
   :rule-classes ((:linear :trigger-terms ((<a href="AIGNET____FANIN-COUNT.html">fanin-count</a> (<a href="COMMON-LISP____CDR.html">cdr</a> x))))))</pre> 
<p><b>Theorem: </b>stype-count-cdr-when-aignet-extension-inverse</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
     stype-count-cdr-when-aignet-extension-inverse
     (<a href="ACL2____IMPLIES.html">implies</a> (<a href="COMMON-LISP____AND.html">and</a> (<a href="AIGNET____AIGNET-EXTENSION-BIND-INVERSE.html">aignet-extension-bind-inverse</a> :orig x
                                                  :new y)
                   (<a href="COMMON-LISP____EQUAL.html">equal</a> type (<a href="AIGNET____STYPE.html">stype</a> (<a href="COMMON-LISP____CAR.html">car</a> x)))
                   (<a href="COMMON-LISP____OR.html">or</a> (<a href="COMMON-LISP____NOT.html">not</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> (stype-fix type) (const-stype)))
                       (<a href="COMMON-LISP____CONSP.html">consp</a> x)))
              (<a href="COMMON-LISP_____C3.html">&lt;</a> (<a href="AIGNET____STYPE-COUNT.html">stype-count</a> type (<a href="COMMON-LISP____CDR.html">cdr</a> x))
                 (<a href="AIGNET____STYPE-COUNT.html">stype-count</a> type y)))
     :rule-classes
     ((:linear :trigger-terms ((<a href="AIGNET____STYPE-COUNT.html">stype-count</a> type (<a href="COMMON-LISP____CDR.html">cdr</a> x))))))</pre> 

</body>
</html>
