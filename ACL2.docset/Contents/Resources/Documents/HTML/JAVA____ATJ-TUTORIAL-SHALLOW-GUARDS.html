<html>
<head>
<meta charset="UTF-8">
<title>Atj-tutorial-shallow-guards</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=JAVA____ATJ-TUTORIAL-SHALLOW-GUARDS">Click for Atj-tutorial-shallow-guards in the Full Manual</a></h3>

<p>ATJ tutorial: Guards in the Shallow Embedding Approach.</p><p>This tutorial page provides an initial description of 
    the effect of ATJ's <span class="v">:guards</span> option 
    when <span class="v">:deep</span> is <span class="v">nil</span>, i.e. in the <a href="JAVA____ATJ-TUTORIAL-SHALLOW.html">shallow embedding approach</a>. We say `initial description' because the <span class="v">:guards t</span> option, 
    combined with other tools and methodologies, 
    provides a rich range of code generation options, 
    described throughout multiple tutorial pages.</p><h5>Ignoring Guards</h5><p>As briefly noted in 
    the factorial example in <a href="JAVA____ATJ-TUTORIAL-SHALLOW.html">atj-tutorial-shallow</a>, 
    the option <span class="v">:guards nil</span> specifies 
    not to assume the satisfaction of guards. 
    As in the <a href="JAVA____ATJ-TUTORIAL-DEEP-GUARDS.html">deep embedding</a>, this means that the generated Java code 
    mimics the execution of ACL2 code in the logic, 
    i.e. ignoring guards completely.</p><p>Accordingly, all the generated Java methods 
    take and return <span class="v">Acl2Value</span>s. 
    They accept any values, whether they satisfy the guards or not, 
    and return the results of the corresponding total ACL2 functions.</p><p>As in the <a href="JAVA____ATJ-TUTORIAL-DEEP-GUARDS.html">deep embedding</a>, when <span class="v">:guards</span> is <span class="v">nil</span> 
    ATJ treats calls of the form <span class="v">(<a href="ACL2____MBE.html">mbe</a> :logic a :exec b)</span> 
    as just <span class="v">a</span>, 
    in the sense that it translates <span class="v">a</span> to Java, 
    ignoring <span class="v">b</span>.</p><h5>Assuming Guards</h5><p>In contrast, the <span class="v">:guards t</span> option, 
    as in the <a href="JAVA____ATJ-TUTORIAL-DEEP-GUARDS.html">deep embedding</a>, specifies to assume the satisfaction of guards. 
    The same caveat applies here: 
    ideally this option should be used when all guards are verified, 
    and when it can be ensured that external Java code 
    calls ATJ-generated code only with values satisfied by the guards; 
    if any guard is not satisfied at run time, 
    incorrect behavior may occur.</p><p>As in the <a href="JAVA____ATJ-TUTORIAL-DEEP-GUARDS.html">deep embedding</a>, when <span class="v">:guards</span> is <span class="v">t</span> 
    ATJ treats calls of the form <span class="v">(<a href="ACL2____MBE.html">mbe</a> :logic a :exec b)</span> 
    as just <span class="v">b</span>, 
    in the sense that it translates <span class="v">b</span> to Java, 
    ignoring <span class="v">a</span>.</p><p>Executing the <span class="v">:exec</span> part of <span class="tt"><a href="ACL2____MBE.html">mbe</a></span>s, 
    instead of the <span class="v">:logic</span> part, 
    may result in much faster execution in some cases. 
    However, all the generated methods still take and return 
    inputs and outputs of type <span class="v">Acl2Value</span>. 
    Subsequent pages of this tutorial describe 
    how to generate methods with narrow argument and result types.</p><div class="box"></div><p><b>Previous:</b> <a href="JAVA____ATJ-TUTORIAL-SHALLOW.html">Shallow Embedding Approach</a></p>
</body>
</html>
