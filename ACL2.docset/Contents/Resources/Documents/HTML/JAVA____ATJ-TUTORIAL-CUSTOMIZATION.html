<html>
<head>
<meta charset="UTF-8">
<title>Atj-tutorial-customization</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=JAVA____ATJ-TUTORIAL-CUSTOMIZATION">Click for Atj-tutorial-customization in the Full Manual</a></h3>

<p>ATJ tutorial: Customization Options for Generated Code.</p><p>ATJ provides some options to customize the generated Java code, 
    in the form of keyword inputs, which are listed in <a href="JAVA____ATJ.html">the ATJ reference documentation</a>. This tutorial page covers the simpler options, 
    which apply to both <a href="JAVA____ATJ-TUTORIAL-DEEP-SHALLOW.html">deep and shallow embedding approaches</a>. The more complex options are covered elsewhere in this tutorial, 
    each by one or more pages.</p><h5>Java Package</h5><p>The Java code generated for 
    the factorial function in <a href="JAVA____ATJ-TUTORIAL-DEEP.html">atj-tutorial-deep</a> 
    has no <span class="v">package</span> declarations, 
    which means that the generated classes are in an unnamed package. 
    This (i.e. the absence of a <span class="v">package</span> declaration) is the default, 
    which can be overridden via ATJ's <span class="v">:java-package</span> option.</p><p>For the example in <a href="JAVA____ATJ-TUTORIAL-DEEP.html">atj-tutorial-deep</a>, the ATJ call</p><pre class="code">(<a href="JAVA____ATJ.html">java::atj</a> fact :deep t :guards nil :java-package "mypkg")</pre><p>generates files <span class="v">Acl2Code.java</span> and  <span class="v">Acl2CodeEnvironment.java</span> 
    that are the same as before but with the package declaration</p><pre class="code">package mypkg;</pre><p>at the beginning.</p><p>Now that the generated code is in the <span class="v">mypkg</span> package, 
    the external Java code exemplified in <a href="JAVA____ATJ-TUTORIAL-DEEP.html">atj-tutorial-deep</a> 
    must be adapted, e.g. by putting it into <span class="v">mypkg</span> as well, 
    or by referencing the generated Java class 
    via the fully qualified name <span class="v">mypkg.Acl2Code</span>, 
    or by importing the class via a declaration <span class="v">import mypkg.Acl2Code;</span>.</p><p>The string passed as the <span class="v">:java-package</span> option 
    must be not only a valid Java package name, 
    but also consist only of ASCII characters. 
    ATJ does not currently support the generation of 
    package names with non-ASCII characters.</p><p>Note that the files are generated in the current directory, 
    not in a <span class="v">mypkg</span> directory, 
    as may be expected based on Java's typical source file organization. 
    The directory where the files are generated 
    can be customized via the <span class="v">:output-dir</span> option, described below.</p><h5>Java Class</h5><p>The Java class generated for 
    the factorial function in <a href="JAVA____ATJ-TUTORIAL-DEEP.html">atj-tutorial-deep</a> 
    is called <span class="v">Acl2Code</span>; 
    the generated file is called <span class="v">Acl2Code.java</span>, 
    thus satisfying the constraint that a public class resides in a file 
    whose name is obtained by adding the <span class="v">.java</span> extension 
    to the class name. 
    The same applies to the class <span class="v">Acl2CodeEnvironment</span>, 
    generated in the file <span class="v">Acl2CodeEnvironment.java</span>. 
    These class (and thus file) names are the default, 
    which can be overridden via ATJ's <span class="v">:java-class</span> option.</p><p>For the example in <a href="JAVA____ATJ-TUTORIAL-DEEP.html">atj-tutorial-deep</a>, the ATJ call</p><pre class="code">(<a href="JAVA____ATJ.html">java::atj</a> fact :deep t :guards nil :java-class "Fact")</pre><p>generates files <span class="v">Fact.java</span> and <span class="v">FactEnvironment.java</span> 
    that is the same as before but with <span class="v">Fact</span> and <span class="v">FactEnvironment</span> 
    as the name of the classes.</p><p>Now that the main generated class is called <span class="v">Fact</span>, 
    the external Java code exemplified in <a href="JAVA____ATJ-TUTORIAL-DEEP.html">atj-tutorial-deep</a> 
    must be adapted, by referencing the generated Java class as <span class="v">Fact</span>.</p><p>The string passed as the <span class="v">:java-class</span> option 
    must be not only a valid Java class name, 
    but also consist only of ASCII characters. 
    ATJ does not currently support the generation of 
    class names with non-ASCII characters.</p><h5>Output Directory</h5><p>The Java files generated for 
    the factorial function in <a href="JAVA____ATJ-TUTORIAL-DEEP.html">atj-tutorial-deep</a> 
    reside in the current directory. 
    This is the default, 
    which can be overridden via ATJ's <span class="v">:output-dir</span> option.</p><p>For the example in <a href="JAVA____ATJ-TUTORIAL-DEEP.html">atj-tutorial-deep</a>, the ATJ call</p><pre class="code">(<a href="JAVA____ATJ.html">java::atj</a> fact :deep t :guards nil :output-dir "java")</pre><p>generates the same files 
    <span class="v">Acl2Code.java</span> and  <span class="v">Acl2CodeEnvironment.java</span> as before, 
    but in a subdirectory <span class="v">java</span> of the current directory. 
    The subdirectory must already exist; ATJ does not create it.</p><p>Needless to say, the invocations of the <span class="v">javac</span> and <span class="v">java</span> commands 
    must be adapted to the location of the <span class="v">.java</span> and <span class="v">.class</span> files.</p><p>The string must be a valid absolute or relative path 
    in the file system of the underlying operating system. 
    If it is a relative path, it is relative to the current directory. 
    When running ATJ interactively from the ACL2 shell, 
    the current directory is the one returned by <a href="ACL2____CBD.html"><span class="v">:cbd</span></a>. When running ATJ as part of book certification, 
    the current directory should be the same one 
    where the <span class="v">.lisp</span> file with the ATJ call resides.</p><p>If the <span class="v">:java-package</span> option is also used (see above), 
    the <span class="v">:output-dir</span> option can be used to generate the file 
    in a subdirectory consistent with the package name, 
    according to the typical organization of Java source files. 
    For example, if <span class="v">:java-package</span> is <span class="v">"mypkg"</span>, 
    <span class="v">:output-dir</span> can be set to <span class="v">"mypkg"</span> as well. 
    As another example, if <span class="v">:java-package</span> is <span class="v">"my.new.pkg"</span>, 
    <span class="v">:output-dir</span> can be set to <span class="v">"my/new/pkg"</span>, 
    assuming a Unix-like operating system 
    with forward slashes that separate file path elements. 
    As already noted above, all these directories must exist; 
    ATJ does not create them.</p><div class="box"></div><p><b>Previous:</b> <a href="JAVA____ATJ-TUTORIAL-EVALUATOR.html">ACL2 Evaluator Written in Java</a></p><p><b>Next:</b> <a href="JAVA____ATJ-TUTORIAL-SCREEN-OUTPUT.html">Control of the Screen Output</a></p>
</body>
</html>
