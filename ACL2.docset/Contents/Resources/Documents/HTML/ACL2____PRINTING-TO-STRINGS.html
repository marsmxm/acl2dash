<html>
<head>
<meta charset="UTF-8">
<title>Printing-to-strings</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____PRINTING-TO-STRINGS">Click for Printing-to-strings in the Full Manual</a></h3>

<p>Printing to strings instead of files or standard output</p><p>Each of ACL2's formatted printing functions, <span class="v">FM*</span>, has an 
 analogous macro <span class="v">FM*-TO-STRING</span> indicated below.  These functions do not 
 include a channel or <span class="tt"><a href="ACL2____STATE.html">state</a></span> as an argument, and <span class="v">FM*-TO-STRING</span> 
 returns the string that <span class="v">FM*</span> would print to the state, in place of 
 <span class="v">state</span>; see <a href="ACL2____FMT.html">fmt</a>.  The legal keyword arguments are described 
 below.</p> 
 
 <pre class="code">General Forms:                                 result
(<a href="ACL2____FMS-TO-STRING.html">fms-to-string</a> string alist &amp;key ...)          ; string
(<a href="ACL2____FMT-TO-STRING.html">fmt-to-string</a> string alist &amp;key ...)          ; (<a href="ACL2____MV.html">mv</a> col string)
(<a href="ACL2____FMT1-TO-STRING.html">fmt1-to-string</a> string alist column &amp;key ...)  ; (<a href="ACL2____MV.html">mv</a> col string)
(<a href="ACL2____FMS_12-TO-STRING.html">fms!-to-string</a> string alist &amp;key ...)         ; string
(<a href="ACL2____FMT_12-TO-STRING.html">fmt!-to-string</a> string alist &amp;key ...)         ; (<a href="ACL2____MV.html">mv</a> col string)
(<a href="ACL2____FMT1_12-TO-STRING.html">fmt1!-to-string</a> string alist column &amp;key ...) ; (<a href="ACL2____MV.html">mv</a> col string)</pre> 
 
 <p>The legal keyword arguments are as follows.  They are all optional with a 
 default of <span class="v">nil</span>.</p> 
 
 <blockquote>
<p><span class="v">:Evisc-tuple</span> is evaluated, and corresponds exactly to the 
 <span class="v">evisc-tuple</span> argument of the corresponding <span class="v">FM*</span> function; see <a href="ACL2____FMT.html">fmt</a>.</p> 
 
 <p><span class="v">:Fmt-control-alist</span> should typically evaluate to an alist that maps 
 print-control variables to values; see <a href="ACL2____PRINT-CONTROL.html">print-control</a>.  Any alist 
 mapping variables to values is legal, however.  By default the print controls 
 are set according to the value of constant <span class="v">*fmt-control-defaults*</span>; 
 <span class="v">:fmt-control-alist</span> overrides these defaults.  For example, 
 <span class="v">*fmt-control-defaults*</span> sets the right margin just as it is set in the 
 initial ACL2 <a href="ACL2____STATE.html">state</a>, by binding <span class="v">fmt-soft-right-margin</span> and 
 <span class="v">fmt-hard-right-margin</span> to their respective defaults of 
 <span class="v">*fmt-soft-right-margin-default*</span> and <span class="v">*fmt-hard-right-margin-default*</span>. 
 The following example shows how you can override those defaults, in this case 
 arranging to print flat by setting the right margin to a large number.</p> 
 
 <pre class="code">(<a href="ACL2____FMT-TO-STRING.html">fmt-to-string</a> "~x0"
               (<a href="COMMON-LISP____LIST.html">list</a> (<a href="COMMON-LISP____CONS.html">cons</a> #\0 (<a href="COMMON-LISP____MAKE-LIST.html">make-list</a> 30)))
               :fmt-control-alist
               `((<a href="ACL2____FMT-SOFT-RIGHT-MARGIN.html">fmt-soft-right-margin</a> . 10000)
                 (<a href="ACL2____FMT-HARD-RIGHT-MARGIN.html">fmt-hard-right-margin</a> . 10000)))</pre>
</blockquote> 
 
 <p>Also see <a href="ACL2____IO.html">io</a> for a discussion of the utility 
 <span class="v">get-output-stream-string$</span>, which allows for accumulating the results of 
 more than one printing call into a single string but requires the use of 
 <span class="tt"><a href="ACL2____STATE.html">state</a></span>.</p> 
 
 <p><b>Remarks on deviation from the <span class="tt"><a href="ACL2____FMT.html">fmt</a></span> functions.</b></p> 
 
 <ol> 
 
 <li>The <span class="tt"><a href="ACL2____EVISC-TABLE.html">evisc-table</a></span> is ignored by these functions that print to 
 strings.  Use the <span class="v">:evisc-tuple</span> keyword instead.</li> 
 
 <li>
<a href="ACL2____IPRINTING.html">Iprinting</a> is turned off during evaluation of calls of these 
 functions, even if it is enabled globally.  The reason is that for each iprint 
 index, <span class="v">i</span>, that is bound during creation of the result string, that 
 binding would disappear after the string is returned; so it would be 
 misleading or an error to read <span class="v">#@i#</span> after that return.</li> 
 
 <li>The following remark is subtle; see <a href="ACL2____FMT_12.html">fmt!</a> for relevant background. 
 By default, there is identical behavior for each pair of functions of the form 
 <span class="v">fm&lt;..&gt;-to-string</span> and <span class="v">fm&lt;..&gt;!-to-string</span>: both functions act like the 
 <span class="v">fm&lt;..&gt;!</span>  function, which is to say, they both avoid printing a 
 backslash (<span class="v">\</span>) when the right margin is exceeded, so that the results can 
 be read by ACL2.  If you include the pair <span class="v">(:WRITE-FOR-READ NIL)</span> in 
 <span class="v">:fmt-control-alist</span>, then the <span class="v">fm&lt;..&gt;-to-string</span> functions will be free 
 to insert such backslashes; but that pair will have no effect on the 
 <span class="v">fm&lt;..&gt;!-to-string</span> functions.</li> 
 
 </ol>
</body>
</html>
