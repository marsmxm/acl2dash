<html>
<head>
<meta charset="UTF-8">
<title>Check-function-specifier</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=SYNTHETO____CHECK-FUNCTION-SPECIFIER">Click for Check-function-specifier in the Full Manual</a></h3>

<p>Check if a function specifier is statically well-formed.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(check-function-specifier spec inputs/outputs ctxt) 
  → 
(mv err? obligs)</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">spec</span> — <font color="#606060">Guard <span class="v">(<a href="SYNTHETO____FUNCTION-SPECIFIERP.html">function-specifierp</a> spec)</span>.</font>
</dd> 
  <dd>
<span class="tt">inputs/outputs</span> — <font color="#606060">Guard <span class="v">(<a href="SYNTHETO____TYPED-VARIABLE-LISTP.html">typed-variable-listp</a> inputs/outputs)</span>.</font>
</dd> 
  <dd>
<span class="tt">ctxt</span> — <font color="#606060">Guard <span class="v">(<a href="SYNTHETO____CONTEXTP.html">contextp</a> ctxt)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">obligs</span> — <font color="#606060">Type <span class="v">(<a href="SYNTHETO____PROOF-OBLIGATION-LISTP.html">proof-obligation-listp</a> obligs)</span>.</font>
</dd> 
 
</dl></div> 
<p>When checking a function specifier, the context has 
     no types being defined, no variables in scope, 
     and no obligation variable and hypotheses, 
     but there may be function headers: 
     Ttese all come from the function specification 
     that this specifier is contained in.</p><p>The <span class="v">inputs/outputs</span> parameter of this ACL2 function 
     is non-<span class="v">nil</span> only when the specifier is an input/output one: 
     it consists of the inputs and output of the function header 
     (there must be exactly one) of the enclosing function specification.</p><p>A specification is a predicate, 
     so the body must be always boolean-valued.</p><p>For a regular function specifier, 
     we simply check the body and ensure it is a boolean. 
     The use of this kind of function specifier seems quite limited, 
     because there are no ordinary (not function) variables in scope: 
     it points to the fact that we'll need to extend Syntheto 
     with more general second-order functions 
     (still representable in ACL2's first-order logic, e.g. via SOFT).</p><p>For a quantifier function specifier, 
     we augment the context with the bound variables 
     and we check the matrix ensuring it is a boolean.</p><p>For an input/output function specifier, 
     we augment the context with the input/output variables 
     and we check the relation ensuring it is a boolean.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>check-function-specifier</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 check-function-specifier
 (spec inputs/outputs ctxt)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="SYNTHETO____FUNCTION-SPECIFIERP.html">function-specifierp</a> spec)
                             (<a href="SYNTHETO____TYPED-VARIABLE-LISTP.html">typed-variable-listp</a> inputs/outputs)
                             (<a href="SYNTHETO____CONTEXTP.html">contextp</a> ctxt))))
 (<a href="COMMON-LISP____DECLARE.html">declare</a>
      (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP____NULL.html">null</a> (<a href="SYNTHETO____CONTEXT-_E3TYPES.html">context-&gt;types</a> ctxt))
                         (<a href="OMAP____EMPTY.html">omap::empty</a> (<a href="SYNTHETO____CONTEXT-_E3VARIABLES.html">context-&gt;variables</a> ctxt))
                         (<a href="COMMON-LISP____NULL.html">null</a> (<a href="SYNTHETO____CONTEXT-_E3OBLIGATION-VARS.html">context-&gt;obligation-vars</a> ctxt))
                         (<a href="COMMON-LISP____NULL.html">null</a> (<a href="SYNTHETO____CONTEXT-_E3OBLIGATION-HYPS.html">context-&gt;obligation-hyps</a> ctxt)))))
 (<a href="COMMON-LISP____LET.html">let</a>
  ((__function__ 'check-function-specifier))
  (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
  (<a href="SYNTHETO____FUNCTION-SPECIFIER-CASE.html">function-specifier-case</a>
   spec
   :regular
   (<a href="ACL2____B_A2.html">b*</a>
    ((result (<a href="SYNTHETO____CHECK-EXPRESSION.html">check-expression</a> spec.body ctxt)))
    (<a href="SYNTHETO____TYPE-RESULT-CASE.html">type-result-case</a>
       result
       :err (<a href="ACL2____MV.html">mv</a> result.info nil)
       :ok
       (<a href="COMMON-LISP____IF.html">if</a> (<a href="SYNTHETO____TYPE-LIST-EQUIV.html">type-list-equiv</a> result.types (<a href="COMMON-LISP____LIST.html">list</a> (<a href="SYNTHETO____TYPE-BOOLEAN.html">type-boolean</a>)))
           (<a href="ACL2____MV.html">mv</a> nil result.obligations)
           (<a href="ACL2____MV.html">mv</a> (<a href="COMMON-LISP____LIST.html">list</a> :non-boolean-function-specifier-body spec.body)
               nil))))
   :quantified
   (<a href="ACL2____B_A2.html">b*</a>
    ((bound-var-ctxt
          (<a href="SYNTHETO____TYPED-VARIABLES-TO-VARIABLE-CONTEXT.html">typed-variables-to-variable-context</a> spec.variables))
     (ctxt (<a href="SYNTHETO____CONTEXT-ADD-VARIABLES.html">context-add-variables</a> bound-var-ctxt ctxt))
     (result (<a href="SYNTHETO____CHECK-EXPRESSION.html">check-expression</a> spec.matrix ctxt)))
    (<a href="SYNTHETO____TYPE-RESULT-CASE.html">type-result-case</a>
     result
     :err (<a href="ACL2____MV.html">mv</a> result.info nil)
     :ok
     (<a href="COMMON-LISP____IF.html">if</a>
       (<a href="SYNTHETO____TYPE-LIST-EQUIV.html">type-list-equiv</a> result.types (<a href="COMMON-LISP____LIST.html">list</a> (<a href="SYNTHETO____TYPE-BOOLEAN.html">type-boolean</a>)))
       (<a href="ACL2____MV.html">mv</a> nil result.obligations)
       (<a href="ACL2____MV.html">mv</a> (<a href="COMMON-LISP____LIST.html">list</a> :non-boolean-function-specifier-matrix spec.matrix)
           nil))))
   :input-output
   (<a href="ACL2____B_A2.html">b*</a>
    ((io-var-ctxt
          (<a href="SYNTHETO____TYPED-VARIABLES-TO-VARIABLE-CONTEXT.html">typed-variables-to-variable-context</a> inputs/outputs))
     (ctxt (<a href="SYNTHETO____CONTEXT-ADD-VARIABLES.html">context-add-variables</a> io-var-ctxt ctxt))
     (ctxt (<a href="SYNTHETO____CHANGE-CONTEXT.html">change-context</a> ctxt
                           :obligation-vars inputs/outputs))
     (result (<a href="SYNTHETO____CHECK-EXPRESSION.html">check-expression</a> spec.relation ctxt)))
    (<a href="SYNTHETO____TYPE-RESULT-CASE.html">type-result-case</a>
     result
     :err (<a href="ACL2____MV.html">mv</a> result.info nil)
     :ok
     (<a href="COMMON-LISP____IF.html">if</a>
      (<a href="SYNTHETO____TYPE-LIST-EQUIV.html">type-list-equiv</a> result.types (<a href="COMMON-LISP____LIST.html">list</a> (<a href="SYNTHETO____TYPE-BOOLEAN.html">type-boolean</a>)))
      (<a href="ACL2____MV.html">mv</a> nil result.obligations)
      (<a href="ACL2____MV.html">mv</a>
       (<a href="COMMON-LISP____LIST.html">list</a> :non-boolean-function-specifier-relation spec.relation)
       nil)))))))</pre> 
<p><b>Theorem: </b>proof-obligation-listp-of-check-function-specifier.obligs</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> proof-obligation-listp-of-check-function-specifier.obligs
        (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> ?err? ?obligs)
              (<a href="SYNTHETO____CHECK-FUNCTION-SPECIFIER.html">check-function-specifier</a> spec inputs/outputs ctxt)))
            (<a href="SYNTHETO____PROOF-OBLIGATION-LISTP.html">proof-obligation-listp</a> obligs))
        :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>check-function-specifier-of-function-specifier-fix-spec</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
     check-function-specifier-of-function-specifier-fix-spec
     (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="SYNTHETO____CHECK-FUNCTION-SPECIFIER.html">check-function-specifier</a> (<a href="SYNTHETO____FUNCTION-SPECIFIER-FIX.html">function-specifier-fix</a> spec)
                                      inputs/outputs ctxt)
            (<a href="SYNTHETO____CHECK-FUNCTION-SPECIFIER.html">check-function-specifier</a> spec inputs/outputs ctxt)))</pre> 
<p><b>Theorem: </b>check-function-specifier-function-specifier-equiv-congruence-on-spec</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 check-function-specifier-function-specifier-equiv-congruence-on-spec
 (<a href="ACL2____IMPLIES.html">implies</a>
  (<a href="SYNTHETO____FUNCTION-SPECIFIER-EQUIV.html">function-specifier-equiv</a> spec spec-equiv)
  (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="SYNTHETO____CHECK-FUNCTION-SPECIFIER.html">check-function-specifier</a> spec inputs/outputs ctxt)
         (<a href="SYNTHETO____CHECK-FUNCTION-SPECIFIER.html">check-function-specifier</a> spec-equiv inputs/outputs ctxt)))
 :rule-classes :congruence)</pre> 
<p><b>Theorem: </b>check-function-specifier-of-typed-variable-list-fix-inputs/outputs</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 check-function-specifier-of-typed-variable-list-fix-inputs/outputs
 (<a href="COMMON-LISP____EQUAL.html">equal</a>
  (<a href="SYNTHETO____CHECK-FUNCTION-SPECIFIER.html">check-function-specifier</a> spec
                            (<a href="SYNTHETO____TYPED-VARIABLE-LIST-FIX.html">typed-variable-list-fix</a> inputs/outputs)
                            ctxt)
  (<a href="SYNTHETO____CHECK-FUNCTION-SPECIFIER.html">check-function-specifier</a> spec inputs/outputs ctxt)))</pre> 
<p><b>Theorem: </b>check-function-specifier-typed-variable-list-equiv-congruence-on-inputs/outputs</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 check-function-specifier-typed-variable-list-equiv-congruence-on-inputs/outputs
 (<a href="ACL2____IMPLIES.html">implies</a>
  (<a href="SYNTHETO____TYPED-VARIABLE-LIST-EQUIV.html">typed-variable-list-equiv</a> inputs/outputs inputs/outputs-equiv)
  (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="SYNTHETO____CHECK-FUNCTION-SPECIFIER.html">check-function-specifier</a> spec inputs/outputs ctxt)
         (<a href="SYNTHETO____CHECK-FUNCTION-SPECIFIER.html">check-function-specifier</a> spec inputs/outputs-equiv ctxt)))
 :rule-classes :congruence)</pre> 
<p><b>Theorem: </b>check-function-specifier-of-context-fix-ctxt</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 check-function-specifier-of-context-fix-ctxt
 (<a href="COMMON-LISP____EQUAL.html">equal</a>
   (<a href="SYNTHETO____CHECK-FUNCTION-SPECIFIER.html">check-function-specifier</a> spec inputs/outputs (<a href="SYNTHETO____CONTEXT-FIX.html">context-fix</a> ctxt))
   (<a href="SYNTHETO____CHECK-FUNCTION-SPECIFIER.html">check-function-specifier</a> spec inputs/outputs ctxt)))</pre> 
<p><b>Theorem: </b>check-function-specifier-context-equiv-congruence-on-ctxt</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 check-function-specifier-context-equiv-congruence-on-ctxt
 (<a href="ACL2____IMPLIES.html">implies</a>
  (<a href="SYNTHETO____CONTEXT-EQUIV.html">context-equiv</a> ctxt ctxt-equiv)
  (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="SYNTHETO____CHECK-FUNCTION-SPECIFIER.html">check-function-specifier</a> spec inputs/outputs ctxt)
         (<a href="SYNTHETO____CHECK-FUNCTION-SPECIFIER.html">check-function-specifier</a> spec inputs/outputs ctxt-equiv)))
 :rule-classes :congruence)</pre> 

</body>
</html>
