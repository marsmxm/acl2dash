<html>
<head>
<meta charset="UTF-8">
<title>Vl-edgesynth-stmt-clklift</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=VL2014____VL-EDGESYNTH-STMT-CLKLIFT">Click for Vl-edgesynth-stmt-clklift in the Full Manual</a></h3>

<p>Lightweight rewriting to support allow us to support right-hand, 
 sides such as <span class="v">reset ? 0 : data</span>.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(vl-edgesynth-stmt-clklift x edgetable) → new-x</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">x</span> — <font color="#606060">Guard <span class="v">(<a href="COMMON-LISP____AND.html">and</a> (<a href="VL2014____VL-STMT-P.html">vl-stmt-p</a> x) (<a href="VL2014____VL-EDGESYNTH-STMT-P.html">vl-edgesynth-stmt-p</a> x))</span>.</font>
</dd> 
  <dd>
<span class="tt">edgetable</span> — <font color="#606060">Guard <span class="v">(<a href="VL2014____VL-EDGETABLE-P.html">vl-edgetable-p</a> edgetable)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">new-x</span> — <font color="#606060">Type <span class="v">(<a href="VL2014____VL-EDGESYNTH-STMT-P.html">vl-edgesynth-stmt-p</a> new-x)</span>, given the <a href="ACL2____GUARD.html">guard</a>.</font>
</dd> 
 
</dl></div> 
<p>We generally want to prohibit clocks from occurring in right-hand 
sides, e.g., we don't want to try to support things like:</p> 
 
<pre class="code">always @(posedge clk)
   q &lt;= a + b + clk;</pre> 
 
<p>However, it's essentially reasonable for us to test the clocks in a 
<span class="v">?:</span> expression, such as:</p> 
 
<pre class="code">always @(posedge clk or posedge reset)
   q &lt;= reset ? 0 : data;</pre> 
 
<p>So as a special hack, we implement a very lightweight transform to try to 
recognize simple right-hand sides of the form:</p> 
 
<pre class="code"> clk ? a : b
~clk ? a : b
!clk ? a : b</pre> 
 
<p>And replace them with equivalent if-then-else statements where the clocks is 
used in the condition.  I think this works even when there are delays, since 
the delays affect when the update is made, not when the right hand side values 
are evaluated.</p> 
 
 
 
<p><b>Theorem: </b>return-type-of-vl-edgesynth-stmt-clklift.new-x</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
     return-type-of-vl-edgesynth-stmt-clklift.new-x
     (<a href="ACL2____IMPLIES.html">implies</a> (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____FORCE.html">force</a> (<a href="COMMON-LISP____IF.html">if</a> (<a href="VL2014____VL-STMT-P.html">vl-stmt-p</a> x)
                              (<a href="VL2014____VL-EDGESYNTH-STMT-P.html">vl-edgesynth-stmt-p</a> x)
                              'nil))
                   (<a href="ACL2____FORCE.html">force</a> (<a href="VL2014____VL-EDGETABLE-P.html">vl-edgetable-p</a> edgetable)))
              (<a href="ACL2____B_A2.html">b*</a> ((?new-x (<a href="VL2014____VL-EDGESYNTH-STMT-CLKLIFT.html">vl-edgesynth-stmt-clklift</a> x edgetable)))
                  (<a href="VL2014____VL-EDGESYNTH-STMT-P.html">vl-edgesynth-stmt-p</a> new-x)))
     :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>return-type-of-vl-edgesynth-stmtlist-clklift.new-x</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 return-type-of-vl-edgesynth-stmtlist-clklift.new-x
 (<a href="ACL2____IMPLIES.html">implies</a> (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____FORCE.html">force</a> (<a href="COMMON-LISP____IF.html">if</a> (<a href="VL2014____VL-STMTLIST-P.html">vl-stmtlist-p</a> x)
                          (<a href="VL2014____VL-EDGESYNTH-STMTLIST-P.html">vl-edgesynth-stmtlist-p</a> x)
                          'nil))
               (<a href="ACL2____FORCE.html">force</a> (<a href="VL2014____VL-EDGETABLE-P.html">vl-edgetable-p</a> edgetable)))
          (<a href="ACL2____B_A2.html">b*</a> ((?new-x (<a href="VL2014____VL-EDGESYNTH-STMTLIST-CLKLIFT.html">vl-edgesynth-stmtlist-clklift</a> x edgetable)))
              (<a href="VL2014____VL-EDGESYNTH-STMTLIST-P.html">vl-edgesynth-stmtlist-p</a> new-x)))
 :rule-classes :rewrite)</pre> 

</body>
</html>
