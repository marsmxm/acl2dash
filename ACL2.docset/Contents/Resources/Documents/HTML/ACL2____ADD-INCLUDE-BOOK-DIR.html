<html>
<head>
<meta charset="UTF-8">
<title>Add-include-book-dir</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____ADD-INCLUDE-BOOK-DIR">Click for Add-include-book-dir in the Full Manual</a></h3>

<p>Link keyword for <span class="v">:dir</span> argument of <span class="tt"><a href="ACL2____LD.html">ld</a></span> and <span class="tt"><a href="ACL2____INCLUDE-BOOK.html">include-book</a></span></p><pre class="code">Example Forms:

; For (<a href="ACL2____INCLUDE-BOOK.html">include-book</a> "foo" :dir :smith), prepend "/u/smith/" to "foo".
(<a href="ACL2____ADD-INCLUDE-BOOK-DIR.html">add-include-book-dir</a> :smith "/u/smith/")

; For (<a href="ACL2____INCLUDE-BOOK.html">include-book</a> "bar" :dir :util), prepend absolute directory pathname
; corresponding to the relative pathname, "utilities/".
(<a href="ACL2____ADD-INCLUDE-BOOK-DIR.html">add-include-book-dir</a> :util "utilities")</pre> 
 
 <p>Note: This is an event!  It does not print the usual event <a href="ACL2____SUMMARY.html">summary</a> 
 but nevertheless changes the ACL2 logical <a href="ACL2____WORLD.html">world</a> and is so recorded.  It 
 is <span class="tt"><a href="ACL2____LOCAL.html">local</a></span> to the book or <span class="tt"><a href="ACL2____ENCAPSULATE.html">encapsulate</a></span> form in which it occurs. 
 See <span class="tt"><a href="ACL2____ADD-INCLUDE-BOOK-DIR_12.html">add-include-book-dir!</a></span> for a corresponding non-<span class="tt"><a href="ACL2____LOCAL.html">local</a></span> 
 event.</p> 
 
 <pre class="code">General Form:
(<a href="ACL2____ADD-INCLUDE-BOOK-DIR.html">add-include-book-dir</a> kwd dir)</pre> 
 
 <p>where <span class="v">kwd</span> is a <span class="tt"><a href="COMMON-LISP____KEYWORDP.html">keywordp</a></span> and <span class="v">dir</span> is a relative or absolute 
 <a href="COMMON-LISP____PATHNAME.html">pathname</a> for a directory, optionally using the syntax <span class="v">(:system
 . filename)</span> described in <a href="ACL2____FULL-BOOK-NAME.html">full-book-name</a>.  If the final '<span class="v">/</span>' is 
 missing for the resulting directory, ACL2 will add it for you.  The effect of 
 this event is to modify the meaning of the <span class="v">:dir</span> keyword argument of 
 <span class="tt"><a href="ACL2____INCLUDE-BOOK.html">include-book</a></span> or <span class="tt"><a href="ACL2____LD.html">ld</a></span> as indicated by the examples above, that 
 is, by associating the indicated directory with the indicated keyword for 
 purposes of the <span class="v">:dir</span> argument.  By the ``indicated directory'' we mean, 
 in the case that the pathname is a relative pathname, the directory relative 
 to the current connected book directory; see <a href="ACL2____CBD.html">cbd</a>.  See <a href="ACL2____DELETE-INCLUDE-BOOK-DIR.html">delete-include-book-dir</a> for how to undo this effect.</p> 
 
 <p>For a keyword already associated with a directory string by a previous 
 invocation of <span class="v">add-include-book-dir</span> or <span class="tt"><a href="ACL2____ADD-INCLUDE-BOOK-DIR_12.html">add-include-book-dir!</a></span>, it 
 is illegal to associate a different directory string until removing the 
 existing association; see <a href="ACL2____DELETE-INCLUDE-BOOK-DIR.html">delete-include-book-dir</a> (and see <a href="ACL2____DELETE-INCLUDE-BOOK-DIR_12.html">delete-include-book-dir!</a> if the existing association was made by <span class="tt"><a href="ACL2____ADD-INCLUDE-BOOK-DIR_12.html">add-include-book-dir!</a></span>.  If however the new directory string is identical with 
 the existing one, which was already assigned by <span class="v">add-include-book-dir</span>, 
 then the new call of <span class="v">add-include-book-dir</span> will be redundant (see <a href="ACL2____REDUNDANT-EVENTS.html">redundant-events</a>).</p> 
 
 <p>The keyword <span class="v">:system</span> can never be redefined.  It will always point to 
 the absolute pathname of the system books directory, which by default is 
 immediately under the directory where the ACL2 executable was originally built 
 (see <a href="ACL2____INCLUDE-BOOK.html">include-book</a>, in particular the discussion there of ``books 
 directory'').</p> 
 
 <p>This macro generates a <span class="tt"><a href="ACL2____TABLE.html">table</a></span> event that updates the table 
 <span class="v">include-book-dir!-table</span>, which associates keywords with absolute 
 pathnames.  However, as with <span class="tt"><a href="ACL2____ADD-INCLUDE-BOOK-DIR.html">add-include-book-dir</a></span>, direct table 
 updates are disallowed; you must use <span class="v">add-include-book-dir!</span> to add to the 
 table and <span class="tt"><a href="ACL2____DELETE-INCLUDE-BOOK-DIR_12.html">delete-include-book-dir!</a></span> to remove from the table.</p> 
 
 <p>It is illegal to call <span class="v">add-include-book-dir!</span> in a <span class="tt"><a href="ACL2____LOCAL.html">local</a></span> 
 context.  (If you are tempted to do that, consider using <span class="tt"><a href="ACL2____ADD-INCLUDE-BOOK-DIR.html">add-include-book-dir</a></span> instead.)  To understand this restriction, imagine a 
 book that contains the following sequence of <a href="ACL2____EVENTS.html">events</a>.</p> 
 
 <pre class="code">(<a href="ACL2____ADD-INCLUDE-BOOK-DIR_12.html">add-include-book-dir!</a> :my-dir "path/to/BAD/dir")
(<a href="ACL2____LOCAL.html">local</a> (<a href="ACL2____DELETE-INCLUDE-BOOK-DIR_12.html">delete-include-book-dir!</a> :my-dir))
(<a href="ACL2____LOCAL.html">local</a> (<a href="ACL2____ADD-INCLUDE-BOOK-DIR_12.html">add-include-book-dir!</a> :my-dir "path/to/GOOD/dir"))
(<a href="ACL2____INCLUDE-BOOK.html">include-book</a> "foo" :dir :my-dir)
(<a href="ACL2____DEFTHM.html">defthm</a> f-def
  (<a href="COMMON-LISP____EQUAL.html">equal</a> (f x) x))</pre> 
 
 <p>During the first (proof) pass of <span class="tt"><a href="ACL2____CERTIFY-BOOK.html">certify-book</a></span>, the book 
 <span class="v">path/to/GOOD/dir/foo.lisp</span> will be included.  But on the second pass, the 
 book <span class="v">path/to/BAD/dir/foo.lisp</span> will be included.  Now imagine that the 
 ``good'' version contains the event <span class="v">(<a href="COMMON-LISP____DEFUN.html">defun</a> f (x) x)</span> but the ``bad'' 
 version instead contains the event <span class="v">(<a href="COMMON-LISP____DEFUN.html">defun</a> f (x) (<a href="COMMON-LISP____NOT.html">not</a> x))</span>.  Then we can 
 easily prove <span class="v">nil</span> from the theorem <span class="v">f-def</span>!  Although it is likely that 
 <a href="ACL2____BOOK-HASH.html">book-hash</a> values could catch this error at <span class="tt"><a href="ACL2____INCLUDE-BOOK.html">include-book</a></span> time, 
 we prefer not to rely on these for soundness.</p>
</body>
</html>
