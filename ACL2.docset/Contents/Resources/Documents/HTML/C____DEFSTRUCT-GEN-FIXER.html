<html>
<head>
<meta charset="UTF-8">
<title>Defstruct-gen-fixer</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=C____DEFSTRUCT-GEN-FIXER">Click for Defstruct-gen-fixer in the Full Manual</a></h3>

<p>Generate the fixer of 
          the structures defined by the <span class="tt"><a href="C____DEFSTRUCT.html">defstruct</a></span>.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(defstruct-gen-fixer struct-tag-fix struct-tag-p tag memtypes) 
  → 
(mv event fixer-recognizer-thm)</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">struct-tag-fix</span> — <font color="#606060">Guard <span class="v">(<a href="COMMON-LISP____SYMBOLP.html">symbolp</a> struct-tag-fix)</span>.</font>
</dd> 
  <dd>
<span class="tt">struct-tag-p</span> — <font color="#606060">Guard <span class="v">(<a href="COMMON-LISP____SYMBOLP.html">symbolp</a> struct-tag-p)</span>.</font>
</dd> 
  <dd>
<span class="tt">tag</span> — <font color="#606060">Guard <span class="v">(<a href="COMMON-LISP____SYMBOLP.html">symbolp</a> tag)</span>.</font>
</dd> 
  <dd>
<span class="tt">memtypes</span> — <font color="#606060">Guard <span class="v">(<a href="C____MEMBER-TYPE-LISTP.html">member-type-listp</a> memtypes)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">event</span> — <font color="#606060">Type <span class="v">(<a href="ACL2____PSEUDO-EVENT-FORMP.html">pseudo-event-formp</a> event)</span>.</font>
</dd> 
<dd>
<span class="tt">fixer-recognizer-thm</span> — <font color="#606060">Type <span class="v">(<a href="COMMON-LISP____SYMBOLP.html">symbolp</a> fixer-recognizer-thm)</span>.</font>
</dd> 
 
</dl></div> 
<p>As the fixing value, 
     we pick a structure with the right tag, 
     the right member names, 
     zero integer values of appropriate types for the integer members, 
     and arrays of zeros of appropriate types and appropriate lengths 
     for the integer array mmbers.</p><p>We also return the name of the theorem that 
     rewrites the fixer away when the recognizer holds.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>defstruct-gen-fixer-aux</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 defstruct-gen-fixer-aux (memtypes)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="C____MEMBER-TYPE-LISTP.html">member-type-listp</a> memtypes)))
 (<a href="COMMON-LISP____LET.html">let</a>
  ((__function__ 'defstruct-gen-fixer-aux))
  (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
  (<a href="ACL2____B_A2.html">b*</a> (((when (<a href="COMMON-LISP____ENDP.html">endp</a> memtypes)) nil)
       ((<a href="C____MEMBER-TYPE.html">member-type</a> member) (<a href="COMMON-LISP____CAR.html">car</a> memtypes))
       (val (<a href="C____DEFSTRUCT-GEN-FIXING-TERM.html">defstruct-gen-fixing-term</a> member.type))
       (term (<a href="COMMON-LISP____CONS.html">cons</a> 'make-member-value
                   (<a href="COMMON-LISP____CONS.html">cons</a> ':name
                         (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> 'quote (<a href="COMMON-LISP____CONS.html">cons</a> member.name 'nil))
                               (<a href="COMMON-LISP____CONS.html">cons</a> ':value (<a href="COMMON-LISP____CONS.html">cons</a> val 'nil))))))
       (terms (defstruct-gen-fixer-aux (<a href="COMMON-LISP____CDR.html">cdr</a> memtypes))))
      (<a href="COMMON-LISP____CONS.html">cons</a> term terms))))</pre> 
<p><b>Theorem: </b>true-listp-of-defstruct-gen-fixer-aux</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> true-listp-of-defstruct-gen-fixer-aux
        (<a href="ACL2____B_A2.html">b*</a> ((terms (defstruct-gen-fixer-aux memtypes)))
            (<a href="ACL2____TRUE-LISTP.html">true-listp</a> terms))
        :rule-classes :rewrite)</pre> 
<p><b>Function: </b>defstruct-gen-fixer</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 defstruct-gen-fixer
 (struct-tag-fix struct-tag-p tag memtypes)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP____SYMBOLP.html">symbolp</a> struct-tag-fix)
                             (<a href="COMMON-LISP____SYMBOLP.html">symbolp</a> struct-tag-p)
                             (<a href="COMMON-LISP____SYMBOLP.html">symbolp</a> tag)
                             (<a href="C____MEMBER-TYPE-LISTP.html">member-type-listp</a> memtypes))))
 (<a href="COMMON-LISP____LET.html">let</a>
  ((__function__ 'defstruct-gen-fixer))
  (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
  (<a href="ACL2____B_A2.html">b*</a>
   ((<a href="ACL2____EVENT.html">event</a>
     (<a href="COMMON-LISP____CONS.html">cons</a>
      'std::deffixer
      (<a href="COMMON-LISP____CONS.html">cons</a>
       struct-tag-fix
       (<a href="COMMON-LISP____CONS.html">cons</a>
        ':pred
        (<a href="COMMON-LISP____CONS.html">cons</a>
         struct-tag-p
         (<a href="COMMON-LISP____CONS.html">cons</a>
          ':param
          (<a href="COMMON-LISP____CONS.html">cons</a>
           'x
           (<a href="COMMON-LISP____CONS.html">cons</a>
            ':body-fix
            (<a href="COMMON-LISP____CONS.html">cons</a>
             (<a href="COMMON-LISP____CONS.html">cons</a>
              'make-value-struct
              (<a href="COMMON-LISP____CONS.html">cons</a>
               ':tag
               (<a href="COMMON-LISP____CONS.html">cons</a>
                (<a href="COMMON-LISP____CONS.html">cons</a> 'ident
                      (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____SYMBOL-NAME.html">symbol-name</a> tag) 'nil))
                (<a href="COMMON-LISP____CONS.html">cons</a>
                     ':members
                     (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> 'list
                                 (defstruct-gen-fixer-aux memtypes))
                           'nil)))))
             'nil)))))))))
    (<a href="ACL2____THM.html">thm</a> (<a href="ACL2____PACKN-POS.html">packn-pos</a> (<a href="COMMON-LISP____LIST.html">list</a> struct-tag-fix '-when-
                          struct-tag-p)
                    struct-tag-fix)))
   (<a href="ACL2____MV.html">mv</a> event thm))))</pre> 
<p><b>Theorem: </b>pseudo-event-formp-of-defstruct-gen-fixer.event</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> pseudo-event-formp-of-defstruct-gen-fixer.event
        (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> acl2::?event ?fixer-recognizer-thm)
              (<a href="C____DEFSTRUCT-GEN-FIXER.html">defstruct-gen-fixer</a> struct-tag-fix
                                   struct-tag-p tag memtypes)))
            (<a href="ACL2____PSEUDO-EVENT-FORMP.html">pseudo-event-formp</a> event))
        :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>symbolp-of-defstruct-gen-fixer.fixer-recognizer-thm</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> symbolp-of-defstruct-gen-fixer.fixer-recognizer-thm
        (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> acl2::?event ?fixer-recognizer-thm)
              (<a href="C____DEFSTRUCT-GEN-FIXER.html">defstruct-gen-fixer</a> struct-tag-fix
                                   struct-tag-p tag memtypes)))
            (<a href="COMMON-LISP____SYMBOLP.html">symbolp</a> fixer-recognizer-thm))
        :rule-classes :rewrite)</pre> 

</body>
</html>
