<html>
<head>
<meta charset="UTF-8">
<title>Vl-emodwire</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=VL2014____VL-EMODWIRE">Click for Vl-emodwire in the Full Manual</a></h3>

<p>Construct an emod wire from a base name and index.</p><p>No restrictions are placed on the base name because we will 
automatically encode it if necessary; see <a href="VL2014____EMODWIRE-ENCODING.html">emodwire-encoding</a>.</p> 
 
<p>We take special measures to optimize this function: we pre-generate strings 
<span class="v">"[0]"</span>, <span class="v">"[1]"</span>, ..., <span class="v">"[255]"</span> so that for indicies under 256 
we can avoid some concatenations.  This appears to reduce memory usage by about 
half and reduces run-time by about 30% for a simple loop that builds the wire 
name <span class="v">foo[33]</span> millions of times, but this timing is based on the fast-cat 
book and may change if CCL gets a compiler-macro for CONCATENATE.</p> 
 
<p>Note that we emulate <a href="STD____DEFAGGREGATE.html">defaggregate</a> and add <span class="v">make-vl-emodwire</span> and 
<span class="v">change-vl-emodwire</span> macros.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>vl-make-indexed-wire-names-array</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a> vl-make-indexed-wire-names-array (n)
       (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> n (<a href="STR____CAT.html">cat</a> "[" (natstr n) "]"))
             (<a href="COMMON-LISP____IF.html">if</a> (<a href="ACL2____ZP.html">zp</a> n)
                 nil
                 (vl-make-indexed-wire-names-array (<a href="COMMON-LISP____1-.html">1-</a> n)))))</pre> 
<p><b>Function: </b>vl-emodwire-encoded$inline</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 vl-emodwire-encoded$inline
 (basename index)
 (<a href="COMMON-LISP____DECLARE.html">declare</a>
      (<a href="COMMON-LISP____TYPE.html">type</a> string basename)
      (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____MAYBE-NATP.html">maybe-natp</a> index)
                         (<a href="COMMON-LISP____OR.html">or</a> index (<a href="COMMON-LISP____NOT.html">not</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> basename "NIL"))))))
 (<a href="ACL2____MBE.html">mbe</a>
     :logic (<a href="COMMON-LISP____IF.html">if</a> (<a href="COMMON-LISP____NOT.html">not</a> index)
                (<a href="COMMON-LISP____INTERN.html">intern</a> basename "ACL2")
                (<a href="COMMON-LISP____INTERN.html">intern</a> (<a href="STR____CAT.html">cat</a> basename "[" (natstr index) "]")
                        "ACL2"))
     :exec
     (<a href="COMMON-LISP____COND.html">cond</a> ((<a href="COMMON-LISP____NOT.html">not</a> index) (<a href="COMMON-LISP____INTERN.html">intern</a> basename "ACL2"))
           ((<a href="COMMON-LISP_____C3.html">&lt;</a> index 256)
            (<a href="COMMON-LISP____INTERN.html">intern</a> (<a href="STR____CAT.html">cat</a> basename
                         (<a href="ACL2____AREF1.html">aref1</a> '*vl-indexed-wire-name-array*
                                *vl-indexed-wire-name-array* index))
                    "ACL2"))
           (t (<a href="COMMON-LISP____INTERN.html">intern</a> (<a href="STR____CAT.html">cat</a> basename "[" (natstr index) "]")
                      "ACL2")))))</pre> 
<p><b>Theorem: </b>vl-emodwire-p-of-vl-emodwire-encoded</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
  vl-emodwire-p-of-vl-emodwire-encoded
  (<a href="ACL2____IMPLIES.html">implies</a>
       (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____FORCE.html">force</a> (<a href="COMMON-LISP____STRINGP.html">stringp</a> name))
            (<a href="ACL2____FORCE.html">force</a> (<a href="ACL2____MAYBE-NATP.html">maybe-natp</a> index))
            (<a href="ACL2____FORCE.html">force</a> (<a href="COMMON-LISP____OR.html">or</a> index (<a href="COMMON-LISP____NOT.html">not</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> name "NIL")))))
       (<a href="VL2014____VL-EMODWIRE-P.html">vl-emodwire-p</a> (vl-emodwire-encoded (vl-emodwire-encode name)
                                           index))))</pre> 
<p><b>Function: </b>vl-emodwire-exec$inline</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
  vl-emodwire-exec$inline (basename index)
  (<a href="COMMON-LISP____DECLARE.html">declare</a>
       (<a href="COMMON-LISP____TYPE.html">type</a> string basename)
       (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____MAYBE-NATP.html">maybe-natp</a> index)
                          (<a href="COMMON-LISP____OR.html">or</a> index (<a href="COMMON-LISP____NOT.html">not</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> basename "NIL"))))))
  (vl-emodwire-encoded (vl-emodwire-encode basename)
                       index))</pre> 
<p><b>Theorem: </b>vl-emodwire-p-of-vl-emodwire-exec</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
     vl-emodwire-p-of-vl-emodwire-exec
     (<a href="ACL2____IMPLIES.html">implies</a> (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____FORCE.html">force</a> (<a href="COMMON-LISP____STRINGP.html">stringp</a> basename))
                   (<a href="ACL2____FORCE.html">force</a> (<a href="ACL2____MAYBE-NATP.html">maybe-natp</a> index))
                   (<a href="ACL2____FORCE.html">force</a> (<a href="COMMON-LISP____OR.html">or</a> index (<a href="COMMON-LISP____NOT.html">not</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> basename "NIL")))))
              (<a href="VL2014____VL-EMODWIRE-P.html">vl-emodwire-p</a> (vl-emodwire-exec basename index))))</pre> 
<p><b>Function: </b>vl-emodwire</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
  vl-emodwire (basename index)
  (<a href="COMMON-LISP____DECLARE.html">declare</a>
       (<a href="COMMON-LISP____TYPE.html">type</a> string basename)
       (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____MAYBE-NATP.html">maybe-natp</a> index)
                          (<a href="COMMON-LISP____OR.html">or</a> index (<a href="COMMON-LISP____NOT.html">not</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> basename "NIL"))))))
  (<a href="ACL2____MBE.html">mbe</a> :logic (<a href="COMMON-LISP____LET.html">let</a> ((basename (vl-emodwire-encode basename)))
                   (<a href="COMMON-LISP____IF.html">if</a> (<a href="COMMON-LISP____NOT.html">not</a> index)
                       (<a href="COMMON-LISP____INTERN.html">intern</a> basename "ACL2")
                       (<a href="COMMON-LISP____INTERN.html">intern</a> (<a href="STR____CAT.html">cat</a> basename "[" (natstr index) "]")
                               "ACL2")))
       :exec (vl-emodwire-exec basename index)))</pre> 
<p><b>Theorem: </b>vl-emodwire-is-vl-emodwire-exec</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> vl-emodwire-is-vl-emodwire-exec
        (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="VL2014____VL-EMODWIRE.html">vl-emodwire</a> basename index)
               (vl-emodwire-exec basename index)))</pre> 
<p><b>Theorem: </b>symbolp-of-vl-emodwire</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> symbolp-of-vl-emodwire
        (<a href="COMMON-LISP____SYMBOLP.html">symbolp</a> (<a href="VL2014____VL-EMODWIRE.html">vl-emodwire</a> basename index))
        :rule-classes :type-prescription)</pre> 
<p><b>Theorem: </b>vl-emodwire-p-of-vl-emodwire</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
     vl-emodwire-p-of-vl-emodwire
     (<a href="ACL2____IMPLIES.html">implies</a> (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____FORCE.html">force</a> (<a href="COMMON-LISP____STRINGP.html">stringp</a> basename))
                   (<a href="ACL2____FORCE.html">force</a> (<a href="ACL2____MAYBE-NATP.html">maybe-natp</a> index))
                   (<a href="ACL2____FORCE.html">force</a> (<a href="COMMON-LISP____OR.html">or</a> index (<a href="COMMON-LISP____NOT.html">not</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> basename "NIL")))))
              (<a href="VL2014____VL-EMODWIRE-P.html">vl-emodwire-p</a> (<a href="VL2014____VL-EMODWIRE.html">vl-emodwire</a> basename index))))</pre> 

</body>
</html>
