<html>
<head>
<meta charset="UTF-8">
<title>Note-2-7-other</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____NOTE-2-7-OTHER">Click for Note-2-7-other in the Full Manual</a></h3>

<p>ACL2 Version  2.7 Notes on Miscellaneous Changes</p><p>Made several minor <a href="COMMON-LISP____DOCUMENTATION.html">documentation</a> improvements.  We are 
 grateful to Eric Smith for suggesting (most of) these.</p> 
 
 <p>Improved <span class="v">(<a href="ACL2____SHOW-BDD.html">show-bdd</a>)</span> (see <a href="ACL2____BDD.html">bdd</a>) to give more useful feedback when 
 there are ``leaf'' terms not known to be Boolean.</p> 
 
 <p>Sped up processing of large mutual-recursion nests.  In one large example 
 the speedup was roughly two orders of magnitude.</p> 
 
 <p>Modified event printing so that if both <span class="v">'prove</span> and <span class="v">'event</span> are 
 inhibited, then events are no longer printed on behalf of <span class="tt"><a href="ACL2____CERTIFY-BOOK.html">certify-book</a></span>, <span class="tt"><a href="ACL2____ENCAPSULATE.html">encapsulate</a></span>, or <span class="tt"><a href="ACL2____DEFSTOBJ.html">defstobj</a></span>.  Thanks to Eric Smith 
 for prompting consideration of such a change.</p> 
 
 <p>The following technical change was made to support <span class="v">with-error-trace</span> 
 and <span class="v">wet</span> (see <a href="ACL2____NOTE-2-7-NEW-FUNCTIONALITY.html">note-2-7-new-functionality</a>), but may be of interest 
 to those who do low-level programming using the ACL2 logical <span class="tt"><a href="ACL2____WORLD.html">world</a></span>. 
 The <span class="v">'unnormalized-body</span> property is now stored not only for functions 
 defined in <span class="v">:</span><span class="tt"><a href="ACL2____LOGIC.html">logic</a></span> mode, but also for functions defined by the 
 user in <span class="v">:</span><span class="tt"><a href="ACL2____PROGRAM.html">program</a></span> mode.  (<span class="v">:Program</span> mode Functions built into 
 ACL2 still have their <span class="v">'unnormalized-body</span> property omitted, in order to 
 save space.)</p> 
 
 <p>The handling of ``invisible'' functions for purposes of controlling 
 rewriting (see <a href="ACL2____LOOP-STOPPER.html">loop-stopper</a>) has been moved to a new table; see <a href="ACL2____INVISIBLE-FNS-TABLE.html">invisible-fns-table</a>.  Macros that access and modify this table are called 
 ``<span class="v">...-invisible-fns-table</span>'' in place of their former names, 
 ``<span class="v">...-invisible-fns-alist</span>.''  This feature was formerly implemented in 
 the <span class="tt"><a href="ACL2____ACL2-DEFAULTS-TABLE.html">ACL2-defaults-table</a></span>, which prevented a book from exporting lists 
 of invisible functions intended to work with the <a href="ACL2____REWRITE.html">rewrite</a> rules 
 developed in the book.  Thanks to Eric Smith and Rob Sumners for suggesting 
 this change.  See <a href="ACL2____SET-INVISIBLE-FNS-TABLE.html">set-invisible-fns-table</a> (formerly 
 <span class="v">set-invisible-fns-alist</span>), and also see <a href="ACL2____ADD-INVISIBLE-FNS.html">add-invisible-fns</a> and see 
 <a href="ACL2____REMOVE-INVISIBLE-FNS.html">remove-invisible-fns</a>, which provides ways to incrementally add to and 
 remove from this table, respectively.  The handling of printing binary 
 function call nests using macros (See <a href="ACL2____ADD-BINOP.html">add-binop</a>) has also been moved 
 out of the <span class="tt"><a href="ACL2____ACL2-DEFAULTS-TABLE.html">ACL2-defaults-table</a></span> as suggested by Eric and Rob, but this 
 feature didn't work anyhow (see <a href="ACL2____NOTE-2-7-BUG-FIXES.html">note-2-7-bug-fixes</a>).  Incidentally, the 
 symbols <span class="v">binop-table</span>, <span class="tt"><a href="ACL2____ADD-BINOP.html">add-binop</a></span>, and <span class="tt"><a href="ACL2____REMOVE-BINOP.html">remove-binop</a></span> have all 
 been added to the list <span class="v">*acl2-exports*</span> (see <a href="ACL2____ACL2-USER.html">ACL2-user</a>), <span class="tt"><a href="ACL2____ADD-INVISIBLE-FNS.html">add-invisible-fns</a></span> and <span class="tt"><a href="ACL2____REMOVE-INVISIBLE-FNS.html">remove-invisible-fns</a></span> have been added to that 
 list, and <span class="v">set-invisible-fns-alist</span> has been replaced in that list by 
 <span class="tt"><a href="ACL2____SET-INVISIBLE-FNS-TABLE.html">set-invisible-fns-table</a></span>.  Function <span class="v">invisible-fns-alistp</span> is no 
 longer defined and has been removed from <span class="v">*acl2-exports*</span>.</p> 
 
 <p>We now enforce the stated restriction on the pairings in 
 <span class="v">macro-aliases-table</span> (see <a href="ACL2____MACRO-ALIASES-TABLE.html">macro-aliases-table</a>), namely, that it 
 associates names of macros with names of functions (with respect to the current 
 ACL2 logical <a href="ACL2____WORLD.html">world</a>).  We make a similar requirement on <span class="tt"><a href="ACL2____INVISIBLE-FNS-TABLE.html">invisible-fns-table</a></span>.</p> 
 
 <p>The <span class="tt"><a href="ACL2____THEORY-INVARIANT.html">theory-invariant</a></span> event has been modified so that the default 
 action is an error rather than a warning.  Thanks to Eric Smith for suggesting 
 this change.  Also, the value returned upon successful execution of a <span class="tt"><a href="ACL2____THEORY-INVARIANT.html">theory-invariant</a></span> event is now the key.</p> 
 
 <p>Proof output that reports destructor elimination no longer uses the word 
 ``generalizing''.  This small change may help in browsing proof output, since 
 now ``generaliz'' takes you to true uses of generalization.  Thanks to Matyas 
 Sustik for suggesting such a change.</p> 
 
 <p>The command <span class="v">:</span><span class="tt"><a href="ACL2____PL.html">pl</a></span> now prints an abbreviated controller-alist for 
 <span class="v">;</span><span class="tt"><a href="ACL2____DEFINITION.html">definition</a></span> rules.  Formerly the output from <span class="v">:pl</span> could be 
 overwhelming when the supplied function was part of a large <span class="tt"><a href="ACL2____MUTUAL-RECURSION.html">mutual-recursion</a></span> nest.</p> 
 
 <p>The defaults for keyword parameters of <span class="tt"><a href="ACL2____CERTIFY-BOOK.html">certify-book</a></span> have changed. 
 See <a href="ACL2____NOTE-2-7-BUG-FIXES.html">note-2-7-bug-fixes</a>, in particular, the discussion there of two 
 modifications to <span class="v">certify-book</span>.</p> 
 
 <p>Technical changes have been made to <span class="tt"><a href="ACL2____COMPRESS1.html">compress1</a></span> and <span class="tt"><a href="ACL2____COMPRESS2.html">compress2</a></span> 
 that should usually be invisible to users.  The next paragraph describes them 
 in detail, only for completeness (i.e., that description can be ignored by most 
 users).  But first, here is an example showing an effect on users.  The slow 
 array warning was not there previously.  Notice that the warning only arises 
 if the event form is changed.  The solution is to be sure that redundant 
 <span class="tt"><a href="ACL2____DEFCONST.html">defconst</a></span> forms are syntactically identical.</p> 
 
 <pre class="code">ACL2 !&gt;(<a href="ACL2____DEFCONST.html">defconst</a> *a* (<a href="ACL2____COMPRESS1.html">compress1</a> 'demo
                                '((:header :dimensions (5)
                                           :maximum-length 15
                                           :default uninitialized
                                           :name demo)
                                  (1 . one)
                                  (0 . zero))))

Summary
Form:  ( DEFCONST *A* ...)
Rules: NIL
Warnings:  None
Time:  0.00 seconds (prove: 0.00, print: 0.00, other: 0.00)
 *A*
ACL2 !&gt;(<a href="ACL2____AREF1.html">aref1</a> 'demo *a* 0)
ZERO
ACL2 !&gt;(<a href="ACL2____DEFCONST.html">defconst</a> *a* (<a href="ACL2____COMPRESS1.html">compress1</a> 'demo
                                '((:header :dimensions (5)
                                           :maximum-length 15
                                           :default uninitialized
                                           :name demo)
                                  (1 . one)
                                  (0 . zero))))

This event is redundant.  See :DOC redundant-events.

Summary
Form:  ( DEFCONST *A* ...)
Rules: NIL
Warnings:  None
Time:  0.00 seconds (prove: 0.00, print: 0.00, other: 0.00)
 :REDUNDANT
ACL2 !&gt;(<a href="ACL2____AREF1.html">aref1</a> 'demo *a* 0)
ZERO
ACL2 !&gt;(<a href="ACL2____DEFCONST.html">defconst</a> *a* (<a href="ACL2____COMPRESS1.html">compress1</a> 'demo
                                '((:header :dimensions (5)
                                           :maximum-length 15
                                           :default uninitialized
                                           :name demo)
                                  (0 . zero)
                                  (1 . one))))

This event is redundant.  See :DOC redundant-events.

Summary
Form:  ( DEFCONST *A* ...)
Rules: NIL
Warnings:  None
Time:  0.00 seconds (prove: 0.00, print: 0.00, other: 0.00)
 :REDUNDANT
ACL2 !&gt;(<a href="ACL2____AREF1.html">aref1</a> 'demo *a* 0)

**********************************************************
Slow Array Access!  A call of AREF1 on an array named
DEMO is being executed slowly.  See :DOC slow-array-warning
**********************************************************

ZERO
ACL2 !&gt;</pre> 
 
 <p>As before, the von Neumann structure stored in the <span class="v">'acl2-array</span> 
 property of the array name contains the array list object in its <span class="tt"><a href="COMMON-LISP____CAR.html">car</a></span>. 
 However, previously it was the case that <span class="v">compress1</span> and <span class="v">compress2</span> did 
 not update that <span class="v">car</span> when its new value would be equal to its old value. 
 This was done largely in support of some type-set tables defined using <span class="tt"><a href="ACL2____DEFCONST.html">defconst</a></span> in <span class="v">type-set-b.lisp</span>.  The new versions of <span class="tt"><a href="ACL2____COMPRESS1.html">compress1</a></span> and 
 <span class="tt"><a href="ACL2____COMPRESS2.html">compress2</a></span> are simpler in that no such exception is made in the case of 
 equal lists, although instead the entire compression process is 
 short-circuited when the input array list object is <span class="tt"><a href="COMMON-LISP____EQ.html">eq</a></span> to the <span class="v">car</span> 
 of the <span class="v">'acl2-array</span> property.  This change was made because the equality 
 test was causing a ``slow array access'' warning to be printed in rare cases 
 during proofs, as described elsewhere (see <a href="ACL2____NOTE-2-7-BUG-FIXES.html">note-2-7-bug-fixes</a>).</p> 
 
 <p>We no longer distribute documentation specific to Lucid Emacs.  The Info 
 documentation in directory <span class="v">doc/EMACS/</span> works well both for Gnu Emacs and 
 XEmacs.</p> 
 
 <p>A little-advertised macro, <span class="v">value</span>, has long been allowed for top-level 
 forms in <a href="ACL2____BOOKS.html">books</a>; see <a href="ACL2____EMBEDDED-EVENT-FORM.html">embedded-event-form</a>.  This has been replaced 
 by a new macro, <span class="v">value-triple</span>.  The two have the same semantics at the 
 top-level of books, where <span class="tt"><a href="ACL2____STATE.html">state</a></span> is ``live''.  However, 
 <span class="v">value-triple</span> should be used at the top-level of a book, while <span class="v">value</span> 
 should be used in function definitions (as before).  This change eliminates a 
 warning put out by the Allegro Common Lisp compiler for top-level <span class="v">value</span> 
 forms in <a href="ACL2____BOOKS.html">books</a>.</p>
</body>
</html>
