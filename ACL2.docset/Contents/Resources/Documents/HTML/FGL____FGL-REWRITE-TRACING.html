<html>
<head>
<meta charset="UTF-8">
<title>Fgl-rewrite-tracing</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=FGL____FGL-REWRITE-TRACING">Click for Fgl-rewrite-tracing in the Full Manual</a></h3>

<p>How to trace the FGL rewriter</p> 
 
<p>FGL allows attempts at applying rewrite rules to be traced using a 
configurable tracing function.  By default, a basic tracing function is 
provided such that the user only needs to set up some state global variables to 
enable and use it.  The function that performs the trace printing is 
attachable, so more advanced users can replace it with a custom version.</p> 
 
<h3>Basic Tracing</h3> 
 
<p>The default tracing implementation may be activated by setting the following 
state globals:</p> 
 
<pre class="code">;; Enable the tracing function
(<a href="ACL2____ASSIGN.html">assign</a> :fgl-trace-rewrites t)

;; Alist whose keys are the rules that will be traced
(<a href="ACL2____ASSIGN.html">assign</a> :fgl-trace-rule-alist '(((:rewrite fgl::fgl-lognot))))

;; Evisc tuple for trace output
(<a href="ACL2____ASSIGN.html">assign</a> :fgl-trace-evisc-tuple (<a href="ACL2____EVISC-TUPLE.html">evisc-tuple</a> 8 12 nil nil))</pre> 
 
<p>If the attachments for the tracing functions have changed, they may be reset to 
the default functions as follows:</p> 
 
<pre class="code">(fgl-rewrite-trace-defaults)</pre> 
 
<h3>Custom Tracing</h3> 
 
<p>The default attachment for the tracing functions may be replaced with 
custom versions.  It may be useful to base it upon the default implementations, 
which append "-default" to the name of each function; i.e., the default implementation for <span class="v">fgl-rewrite-trace-cond</span> is <span class="v">fgl-rewrite-trace-cond-default</span>.</p> 
 
<p>The tracing functions have the following signatures:</p> 
 
<pre class="code">(fgl-rewrite-traced-rule-p rule interp-st state)
(fgl-rewrite-trace-cond rule fn args interp-st state)
(fgl-rewrite-trace-start-output depth rule fn args interp-st state)
(fgl-rewrite-trace-success-output depth val rule fn args interp-st state)
(fgl-rewrite-trace-failure-output depth failed-hyp rule fn args interp-st state)</pre> 
 
<p>where the inputs are as follows:</p> 
 
<ul> 
 
<li>
<span class="v">rule</span>, the rule being attempted, satisfying <span class="v">(<a href="FGL____FGL-GENERIC-RULE-P.html">fgl-generic-rule-p</a> rule)</span>
</li> 
 
<li>
<span class="v">fn</span> and <span class="v">args</span> of the object that the rule is being applied to, 
where <span class="v">args</span> satisfies <span class="v">fgl-objectlist-p</span>
</li> 
 
<li>
<span class="v">depth</span>, the current stack depth of traced rule applications</li> 
 
<li>
<span class="v">status</span>, either <span class="v">:start</span>, <span class="v">:hyps</span>, <span class="v">:finish</span>, or <span class="v">:abort</span>
</li> 
 
<li>
<span class="v">val</span>, the return value from a successful rewrite</li> 
 
<li>
<span class="v">failed-hyp</span>, the index of the hypothesis that failed or <span class="v">nil</span> if the 
rule application failed for some other reason</li> 
 
<li>
<span class="v">interp-st</span>, the FGL interpreter state</li> 
 
<li>
<span class="v">state</span>, the ACL2 state.</li> 
</ul> 
 

</body>
</html>
