<html>
<head>
<meta charset="UTF-8">
<title>Vl-follow-hidexpr-dimcheck</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=VL____VL-FOLLOW-HIDEXPR-DIMCHECK">Click for Vl-follow-hidexpr-dimcheck in the Full Manual</a></h3>

<p>Check an array index against the corresponding array bounds.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(vl-follow-hidexpr-dimcheck name index dim &amp;key strictp) → err</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">name</span> — Name being the array, for better errors.<br>    <font color="#606060">Guard <span class="v">(<a href="COMMON-LISP____STRINGP.html">stringp</a> name)</span>.</font>
</dd> 
  <dd>
<span class="tt">index</span> — An index into an array.<br>    <font color="#606060">Guard <span class="v">(<a href="VL____VL-EXPR-P.html">vl-expr-p</a> index)</span>.</font>
</dd> 
  <dd>
<span class="tt">dim</span> — Bounds from the corresponding declaration.<br>    <font color="#606060">Guard <span class="v">(<a href="VL____VL-DIMENSION-P.html">vl-dimension-p</a> dim)</span>.</font>
</dd> 
  <dd>
<span class="tt">strictp</span> — Require indices to be resolved?.<br>    <font color="#606060">Guard <span class="v">(<a href="ACL2____BOOLEANP.html">booleanp</a> strictp)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">err</span> — <font color="#606060">Type <span class="v">(<a href="ACL2____IFF.html">iff</a> (<a href="VL____VL-MSG-P.html">vl-msg-p</a> err) err)</span>.</font>
</dd> 
 
</dl></div> 
<p>In strict mode, we require that the <span class="v">index</span> and the array 
dimensions all be resolved and that the index be in range.</p> 
 
<p>In non-strict mode, we tolerate unresolved indices and declaration bounds. 
Note that we still do bounds checking if the indices and array bounds happen to 
be resolved.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>vl-follow-hidexpr-dimcheck-fn</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 vl-follow-hidexpr-dimcheck-fn
 (name index dim strictp)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP____STRINGP.html">stringp</a> name)
                             (<a href="VL____VL-EXPR-P.html">vl-expr-p</a> index)
                             (<a href="VL____VL-DIMENSION-P.html">vl-dimension-p</a> dim)
                             (<a href="ACL2____BOOLEANP.html">booleanp</a> strictp))))
 (<a href="COMMON-LISP____LET.html">let</a>
  ((__function__ 'vl-follow-hidexpr-dimcheck))
  (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
  (<a href="ACL2____B_A2.html">b*</a>
   ((dim (<a href="VL____VL-DIMENSION-FIX.html">vl-dimension-fix</a> dim)))
   (vl-dimension-case
    dim (:unsized nil)
    (:star nil)
    (:datatype
     (<a href="COMMON-LISP____IF.html">if</a>
      strictp
      (<a href="VL____VMSG.html">vmsg</a>
       "unimplemented: check dimension against datatype-based associative
                  dimension ~a0"
       dim)
      nil))
    (:queue
     (<a href="COMMON-LISP____IF.html">if</a>
      strictp
      (<a href="VL____VMSG.html">vmsg</a>
        "unimplemented: check dimension against queue dimension ~a0"
        dim)
      nil))
    (:range
         (<a href="ACL2____B_A2.html">b*</a> (((unless (<a href="VL____VL-EXPR-RESOLVED-P.html">vl-expr-resolved-p</a> index))
               (<a href="COMMON-LISP____IF.html">if</a> strictp (<a href="VL____VMSG.html">vmsg</a> "unresolved array index")
                   nil))
              ((unless (<a href="VL____VL-RANGE-RESOLVED-P.html">vl-range-resolved-p</a> dim.range))
               (<a href="COMMON-LISP____IF.html">if</a> strictp
                   (<a href="VL____VMSG.html">vmsg</a> "unresolved bounds on declaration of ~s0"
                         (<a href="VL____STRING-FIX.html">string-fix</a> name))
                   nil))
              (idxval (<a href="VL____VL-RESOLVED-_E3VAL.html">vl-resolved-&gt;val</a> index))
              (msbval (<a href="VL____VL-RESOLVED-_E3VAL.html">vl-resolved-&gt;val</a> dim.msb))
              (lsbval (<a href="VL____VL-RESOLVED-_E3VAL.html">vl-resolved-&gt;val</a> dim.lsb))
              (minval (<a href="COMMON-LISP____MIN.html">min</a> msbval lsbval))
              (maxval (<a href="COMMON-LISP____MAX.html">max</a> msbval lsbval))
              ((unless (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP_____C3_D3.html">&lt;=</a> minval idxval)
                            (<a href="COMMON-LISP_____C3_D3.html">&lt;=</a> idxval maxval)))
               (<a href="VL____VMSG.html">vmsg</a> "array index ~x0 out of bounds (~x1 to ~x2)"
                     idxval minval maxval)))
             nil))))))</pre> 
<p><b>Theorem: </b>return-type-of-vl-follow-hidexpr-dimcheck</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
  return-type-of-vl-follow-hidexpr-dimcheck
  (<a href="ACL2____B_A2.html">b*</a> ((err (vl-follow-hidexpr-dimcheck-fn name index dim strictp)))
      (<a href="ACL2____IFF.html">iff</a> (<a href="VL____VL-MSG-P.html">vl-msg-p</a> err) err))
  :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>vl-follow-hidexpr-dimcheck-fn-of-str-fix-name</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
     vl-follow-hidexpr-dimcheck-fn-of-str-fix-name
     (<a href="COMMON-LISP____EQUAL.html">equal</a> (vl-follow-hidexpr-dimcheck-fn (<a href="ACL2____STR-FIX.html">str-fix</a> name)
                                           index dim strictp)
            (vl-follow-hidexpr-dimcheck-fn name index dim strictp)))</pre> 
<p><b>Theorem: </b>vl-follow-hidexpr-dimcheck-fn-streqv-congruence-on-name</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 vl-follow-hidexpr-dimcheck-fn-streqv-congruence-on-name
 (<a href="ACL2____IMPLIES.html">implies</a>
  (<a href="ACL2____STREQV.html">streqv</a> name name-equiv)
  (<a href="COMMON-LISP____EQUAL.html">equal</a>
      (vl-follow-hidexpr-dimcheck-fn name index dim strictp)
      (vl-follow-hidexpr-dimcheck-fn name-equiv index dim strictp)))
 :rule-classes :congruence)</pre> 
<p><b>Theorem: </b>vl-follow-hidexpr-dimcheck-fn-of-vl-expr-fix-index</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
     vl-follow-hidexpr-dimcheck-fn-of-vl-expr-fix-index
     (<a href="COMMON-LISP____EQUAL.html">equal</a> (vl-follow-hidexpr-dimcheck-fn name (<a href="VL____VL-EXPR-FIX.html">vl-expr-fix</a> index)
                                           dim strictp)
            (vl-follow-hidexpr-dimcheck-fn name index dim strictp)))</pre> 
<p><b>Theorem: </b>vl-follow-hidexpr-dimcheck-fn-vl-expr-equiv-congruence-on-index</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 vl-follow-hidexpr-dimcheck-fn-vl-expr-equiv-congruence-on-index
 (<a href="ACL2____IMPLIES.html">implies</a>
  (<a href="VL____VL-EXPR-EQUIV.html">vl-expr-equiv</a> index index-equiv)
  (<a href="COMMON-LISP____EQUAL.html">equal</a>
      (vl-follow-hidexpr-dimcheck-fn name index dim strictp)
      (vl-follow-hidexpr-dimcheck-fn name index-equiv dim strictp)))
 :rule-classes :congruence)</pre> 
<p><b>Theorem: </b>vl-follow-hidexpr-dimcheck-fn-of-vl-dimension-fix-dim</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 vl-follow-hidexpr-dimcheck-fn-of-vl-dimension-fix-dim
 (<a href="COMMON-LISP____EQUAL.html">equal</a>
    (vl-follow-hidexpr-dimcheck-fn name index (<a href="VL____VL-DIMENSION-FIX.html">vl-dimension-fix</a> dim)
                                   strictp)
    (vl-follow-hidexpr-dimcheck-fn name index dim strictp)))</pre> 
<p><b>Theorem: </b>vl-follow-hidexpr-dimcheck-fn-vl-dimension-equiv-congruence-on-dim</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 vl-follow-hidexpr-dimcheck-fn-vl-dimension-equiv-congruence-on-dim
 (<a href="ACL2____IMPLIES.html">implies</a>
  (<a href="VL____VL-DIMENSION-EQUIV.html">vl-dimension-equiv</a> dim dim-equiv)
  (<a href="COMMON-LISP____EQUAL.html">equal</a>
      (vl-follow-hidexpr-dimcheck-fn name index dim strictp)
      (vl-follow-hidexpr-dimcheck-fn name index dim-equiv strictp)))
 :rule-classes :congruence)</pre> 
<p><b>Theorem: </b>vl-follow-hidexpr-dimcheck-fn-of-bool-fix-strictp</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
     vl-follow-hidexpr-dimcheck-fn-of-bool-fix-strictp
     (<a href="COMMON-LISP____EQUAL.html">equal</a> (vl-follow-hidexpr-dimcheck-fn
                 name index dim (<a href="ACL2____BOOL-FIX.html">acl2::bool-fix</a> strictp))
            (vl-follow-hidexpr-dimcheck-fn name index dim strictp)))</pre> 
<p><b>Theorem: </b>vl-follow-hidexpr-dimcheck-fn-iff-congruence-on-strictp</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 vl-follow-hidexpr-dimcheck-fn-iff-congruence-on-strictp
 (<a href="ACL2____IMPLIES.html">implies</a>
  (<a href="ACL2____IFF.html">iff</a> strictp strictp-equiv)
  (<a href="COMMON-LISP____EQUAL.html">equal</a>
      (vl-follow-hidexpr-dimcheck-fn name index dim strictp)
      (vl-follow-hidexpr-dimcheck-fn name index dim strictp-equiv)))
 :rule-classes :congruence)</pre> 

</body>
</html>
