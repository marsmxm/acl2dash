<html>
<head>
<meta charset="UTF-8">
<title>Sd-keylist-find-skipped</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=VL2014____SD-KEYLIST-FIND-SKIPPED">Click for Sd-keylist-find-skipped in the Full Manual</a></h3>

<p>Perform skip-detection for a single pattern within an expression.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(sd-keylist-find-skipped x y ctx) → prob?</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">x</span> — <font color="#606060">Guard <span class="v">(<a href="VL2014____SD-KEYLIST-P.html">sd-keylist-p</a> x)</span>.</font>
</dd> 
  <dd>
<span class="tt">y</span> — <font color="#606060">Guard <span class="v">(<a href="VL2014____SD-KEYLIST-P.html">sd-keylist-p</a> y)</span>.</font>
</dd> 
  <dd>
<span class="tt">ctx</span> — <font color="#606060">Guard <span class="v">(<a href="VL2014____VL-CONTEXT1-P.html">vl-context1-p</a> ctx)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">prob?</span> — <font color="#606060">Type <span class="v">(<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="VL2014____SD-PROBLEM-P.html">sd-problem-p</a> prob?) (<a href="COMMON-LISP____IF.html">if</a> prob? t nil))</span>, given the <a href="ACL2____GUARD.html">guard</a>.</font>
</dd> 
 
</dl></div> 
<p>We expect that all of the keys in <span class="v">x</span> and <span class="v">y</span> have the same 
pattern.  In practice, assuming the original wire names are free of <span class="v">*</span> 
characters, this means that all keys throughout <span class="v">x</span> and <span class="v">y</span> should differ 
only by their indices.  More specifically, our expectation here is that the 
keys in <span class="v">x</span> have been generated from the wires in some particular 
expression, while the keys in <span class="v">y</span> were generated by looking at the entire 
module.</p> 
 
<p>Our goal is to investigate whether this expression uses "all but one" of 
the wires of this pattern.  That is, it would be suspicious for <span class="v">x</span> to 
mention all of foo1, foo2, foo3, and foo5, but not foo4.  If there are a lot of 
wires in <span class="v">x</span> and <span class="v">y</span>, then this is a very easy comparison.  The hard 
cases are when there aren't very many wires in the first place.</p> 
 
<p>If there is only one wire that matches this pattern, then there are only two 
cases -- the expression mentions the wire or it doesn't -- and neither of these 
cases are suspicious.</p> 
 
<p>If there are only two wires that share this pattern, then we might use none, 
one, or both of them, and none of these cases are suspicious.</p> 
 
<p>If there are three wires that share this pattern, and we only use two of 
them, then this is starting to get slightly suspicious.  We'll go ahead and 
flag it.</p> 
 
<p>Beyond that point, if we find that exactly one wire is missing, we flag it 
with an <span class="v">alarm</span> level equal to the number of wires that match the pattern. 
In other words, the alarm level is somehow like a confidence indicator that 
says how suspicious this omission is -- it's not too suspicious to omit one out 
of three wires, but it's really suspicious to omit one out of ten.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>sd-keylist-find-skipped</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a> sd-keylist-find-skipped (x y ctx)
       (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="VL2014____SD-KEYLIST-P.html">sd-keylist-p</a> x)
                                   (<a href="VL2014____SD-KEYLIST-P.html">sd-keylist-p</a> y)
                                   (<a href="VL2014____VL-CONTEXT1-P.html">vl-context1-p</a> ctx))))
       (<a href="COMMON-LISP____LET.html">let</a> ((__function__ 'sd-keylist-find-skipped))
            (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
            (<a href="ACL2____B_A2.html">b*</a> ((ys (<a href="SET____MERGESORT.html">mergesort</a> y))
                 (yl (<a href="ACL2____LEN.html">len</a> ys))
                 ((unless (<a href="COMMON-LISP_____E3.html">&gt;</a> yl 2)) nil)
                 (xs (<a href="SET____MERGESORT.html">mergesort</a> x))
                 (missing (<a href="SET____DIFFERENCE.html">difference</a> ys xs))
                 (nmissing (<a href="ACL2____LEN.html">len</a> missing))
                 ((unless (<a href="COMMON-LISP_____D3.html">=</a> nmissing 1)) nil)
                 (linearp (<a href="VL2014____SD-KEYLIST-LINEAR-INCREMENTS-P.html">sd-keylist-linear-increments-p</a> ys))
                 (idx-min (<a href="VL2014____SD-KEY-_E3INDEX.html">sd-key-&gt;index</a> (<a href="COMMON-LISP____CAR.html">car</a> ys)))
                 (idx-max (<a href="VL2014____SD-KEY-_E3INDEX.html">sd-key-&gt;index</a> (<a href="COMMON-LISP____CAR.html">car</a> (<a href="COMMON-LISP____LAST.html">last</a> ys))))
                 (idx-missing (<a href="VL2014____SD-KEY-_E3INDEX.html">sd-key-&gt;index</a> (<a href="COMMON-LISP____CAR.html">car</a> missing)))
                 (middlep (<a href="COMMON-LISP____AND.html">and</a> linearp (<a href="ACL2____NATP.html">natp</a> idx-min)
                               (<a href="ACL2____NATP.html">natp</a> idx-max)
                               (<a href="ACL2____NATP.html">natp</a> idx-missing)
                               (<a href="COMMON-LISP_____C3.html">&lt;</a> idx-min idx-missing)
                               (<a href="COMMON-LISP_____C3.html">&lt;</a> idx-missing idx-max)))
                 (dupep (same-lengthp x ys))
                 (priority (<a href="COMMON-LISP____COND.html">cond</a> ((<a href="COMMON-LISP____AND.html">and</a> middlep dupep) 10)
                                 (middlep 6)
                                 (dupep 4)
                                 (linearp 2)
                                 (t 1))))
                (<a href="VL2014____MAKE-SD-PROBLEM.html">make-sd-problem</a> :type :skipped
                                 :priority priority
                                 :groupsize yl
                                 :key (<a href="COMMON-LISP____CAR.html">car</a> missing)
                                 :ctx ctx))))</pre> 
<p><b>Theorem: </b>return-type-of-sd-keylist-find-skipped</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> return-type-of-sd-keylist-find-skipped
        (<a href="ACL2____IMPLIES.html">implies</a> (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____FORCE.html">force</a> (<a href="VL2014____SD-KEYLIST-P.html">sd-keylist-p</a> x))
                      (<a href="ACL2____FORCE.html">force</a> (<a href="VL2014____SD-KEYLIST-P.html">sd-keylist-p</a> y))
                      (<a href="ACL2____FORCE.html">force</a> (<a href="VL2014____VL-CONTEXT1-P.html">vl-context1-p</a> ctx)))
                 (<a href="ACL2____B_A2.html">b*</a> ((prob? (<a href="VL2014____SD-KEYLIST-FIND-SKIPPED.html">sd-keylist-find-skipped</a> x y ctx)))
                     (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="VL2014____SD-PROBLEM-P.html">sd-problem-p</a> prob?)
                            (<a href="COMMON-LISP____IF.html">if</a> prob? t nil))))
        :rule-classes :rewrite)</pre> 

</body>
</html>
