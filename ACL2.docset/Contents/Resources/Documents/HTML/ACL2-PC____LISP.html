<html>
<head>
<meta charset="UTF-8">
<title>ACL2-pc::lisp</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2-PC____LISP">Click for ACL2-pc::lisp in the Full Manual</a></h3>

<p>(meta) 
evaluate the given form in Lisp</p><pre class="code">Example:
(lisp (<a href="ACL2____ASSIGN.html">assign</a> xxx 3))

General Form:
(lisp form)</pre> 
 
 <p>Evaluate <span class="v">form</span>.  The <span class="v">lisp</span> command is mainly of interest for side 
 effects.  Also see <a href="ACL2-PC____PRINT.html">ACL2-pc::print</a>, <a href="ACL2-PC____SKIP.html">ACL2-pc::skip</a>, and <a href="ACL2-PC____FAIL.html">ACL2-pc::fail</a>.</p> 
 
 <p>The rest of the documentation for <span class="v">lisp</span> is of interest only to those 
 who use it in macro commands.  If the Lisp evaluation (by <span class="v">trans-eval</span>) of 
 form returns an <a href="ACL2____ERROR-TRIPLE.html">error-triple</a> of the form <span class="v">(<a href="ACL2____MV.html">mv</a> erp
 ((NIL NIL STATE) . (erp-1 val-1 &amp;)) state)</span>, then the <span class="v">lisp</span> command 
 returns the appropriate error triple</p> 
 
 <pre class="code">(<a href="ACL2____MV.html">mv</a> (<a href="COMMON-LISP____OR.html">or</a> erp erp-1)
    val-1
    state) .</pre> 
 
 <p>Otherwise, the <span class="v">trans-eval</span> of form must return an error triple of the 
 form <span class="v">(<a href="ACL2____MV.html">mv</a> erp (<a href="COMMON-LISP____CONS.html">cons</a> stobjs-out val) &amp;)</span>, and the <span class="v">lisp</span> command returns 
 the appropriate error triple</p> 
 
 <pre class="code">(<a href="ACL2____MV.html">mv</a> erp
    val
    state).</pre> 
 
 <p>Note that the output signature of the form has been lost.  The user must 
 know the signature in order to use the output of the <span class="v">lisp</span> command. 
 Trans-eval, which is undocumented except by comments in the ACL2 source code, 
 has replaced, in <span class="v">val</span>, any occurrence of the current state or the current 
 values of stobjs by simple symbols such as <span class="v">REPLACED-STATE</span>.  The actual 
 values of these objects may be recovered, in principle, from the <span class="v">state</span> 
 returned and the <span class="v">user-stobj-alist</span> within that state.  However, in 
 practice, the stobjs cannot be recovered because the user is denied access to 
 <span class="v">user-stobj-alist</span>.  The moral is: do not try to write macro commands that 
 manipulate stobjs.  Should the returned <span class="v">val</span> contain <span class="v">REPLACED-STATE</span> 
 the value may simply be ignored and <span class="v">state</span> used, since that is what 
 <span class="v">REPLACED-STATE</span> denotes.</p>
</body>
</html>
