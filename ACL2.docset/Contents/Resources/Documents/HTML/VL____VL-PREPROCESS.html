<html>
<head>
<meta charset="UTF-8">
<title>Vl-preprocess</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=VL____VL-PREPROCESS">Click for Vl-preprocess in the Full Manual</a></h3>

<p>Top-level interface to the preprocessor.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(vl-preprocess echars &amp;key defines 
               filemap config iskips bytes idcache 
               ifdefmap defmap warnings (state 'state)) 
 
  → 
(mv successp defines filemap iskips ifdefmap 
    defmap bytes warnings new-echars state) 
</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">echars</span> — Characters to preprocess, in order.<br>    <font color="#606060">Guard <span class="v">(<a href="VL____VL-ECHARLIST-P.html">vl-echarlist-p</a> echars)</span>.</font>
</dd> 
  <dd>
<span class="tt">defines</span> — Initial definitions to use.<br>    <font color="#606060">Guard <span class="v">(<a href="VL____VL-DEFINES-P.html">vl-defines-p</a> defines)</span>.</font>
</dd> 
  <dd>
<span class="tt">filemap</span> — Initial file map to extend (for `includes).<br>    <font color="#606060">Guard <span class="v">(<a href="VL____VL-FILEMAP-P.html">vl-filemap-p</a> filemap)</span>.</font>
</dd> 
  <dd>
<span class="tt">config</span> — Controls the Verilog edition, include paths, etc.<br>    <font color="#606060">Guard <span class="v">(<a href="VL____VL-LOADCONFIG-P.html">vl-loadconfig-p</a> config)</span>.</font>
</dd> 
  <dd>
<span class="tt">iskips</span> — Multi-include optimization.<br>    <font color="#606060">Guard <span class="v">(<a href="VL____VL-INCLUDESKIPS-P.html">vl-includeskips-p</a> iskips)</span>.</font>
</dd> 
  <dd>
<span class="tt">bytes</span> — Bytes read so far.<br>    <font color="#606060">Guard <span class="v">(<a href="ACL2____NATP.html">natp</a> bytes)</span>.</font>
</dd> 
  <dd>
<span class="tt">idcache</span> — Include-directory cache.<br>    <font color="#606060">Guard <span class="v">(<a href="VL____VL-DIRLIST-CACHE-P.html">vl-dirlist-cache-p</a> idcache)</span>.</font>
</dd> 
  <dd>
<span class="tt">ifdefmap</span> — Ifdef use map to extend.<br>    <font color="#606060">Guard <span class="v">(<a href="VL____VL-IFDEF-USE-MAP-P.html">vl-ifdef-use-map-p</a> ifdefmap)</span>.</font>
</dd> 
  <dd>
<span class="tt">defmap</span> — Define use map to extend.<br>    <font color="#606060">Guard <span class="v">(<a href="VL____VL-DEF-USE-MAP-P.html">vl-def-use-map-p</a> defmap)</span>.</font>
</dd> 
  <dd>
<span class="tt">warnings</span> — Warnings accumulator to extend.<br>    <font color="#606060">Guard <span class="v">(<a href="VL____VL-WARNINGLIST-P.html">vl-warninglist-p</a> warnings)</span>.</font>
</dd> 
  <dd>
<span class="tt">state</span> — ACL2's <a href="ACL2____STATE.html">state</a>, for file i/o.</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">successp</span> — Was preprocessing successful?.<br>    <font color="#606060">Type <span class="v">(<a href="ACL2____BOOLEANP.html">booleanp</a> successp)</span>.</font>
</dd> 
<dd>
<span class="tt">defines</span> — Updated defines after preprocessing the files.<br>    <font color="#606060">Type <span class="v">(<a href="VL____VL-DEFINES-P.html">vl-defines-p</a> defines)</span>.</font>
</dd> 
<dd>
<span class="tt">filemap</span> — Possibly extended filemap.<br>    <font color="#606060">Type <span class="v">(<a href="VL____VL-FILEMAP-P.html">vl-filemap-p</a> filemap)</span>.</font>
</dd> 
<dd>
<span class="tt">iskips</span> — Possibly updated iskips.<br>    <font color="#606060">Type <span class="v">(<a href="VL____VL-INCLUDESKIPS-P.html">vl-includeskips-p</a> iskips)</span>.</font>
</dd> 
<dd>
<span class="tt">ifdefmap</span> — Possibly extended ifdef use map.<br>    <font color="#606060">Type <span class="v">(<a href="VL____VL-IFDEF-USE-MAP-P.html">vl-ifdef-use-map-p</a> ifdefmap)</span>.</font>
</dd> 
<dd>
<span class="tt">defmap</span> — Possibly extended define use map.<br>    <font color="#606060">Type <span class="v">(<a href="VL____VL-DEF-USE-MAP-P.html">vl-def-use-map-p</a> defmap)</span>.</font>
</dd> 
<dd>
<span class="tt">bytes</span> — Updated total bytes.<br>    <font color="#606060">Type <span class="v">(<a href="ACL2____NATP.html">natp</a> bytes)</span>.</font>
</dd> 
<dd>
<span class="tt">warnings</span> — Possibly updated warnings.<br>    <font color="#606060">Type <span class="v">(<a href="VL____VL-WARNINGLIST-P.html">vl-warninglist-p</a> warnings)</span>.</font>
</dd> 
<dd>
<span class="tt">new-echars</span> — Updated extended characters, after preprocessing.<br>    <font color="#606060">Type <span class="v">(<a href="VL____VL-ECHARLIST-P.html">vl-echarlist-p</a> new-echars)</span>.</font>
</dd> 
<dd>
<span class="tt">state</span> — <font color="#606060">Type <span class="v">(state-p1 state)</span>, given <span class="v">(<a href="ACL2____FORCE.html">force</a> (state-p1 state))</span>.</font>
</dd> 
 
</dl></div> 
 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>vl-preprocess-fn</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 vl-preprocess-fn
 (echars defines filemap config iskips bytes
         idcache ifdefmap defmap warnings state)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :stobjs (<a href="ACL2____STATE.html">state</a>)))
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="VL____VL-ECHARLIST-P.html">vl-echarlist-p</a> echars)
                             (<a href="VL____VL-DEFINES-P.html">vl-defines-p</a> defines)
                             (<a href="VL____VL-FILEMAP-P.html">vl-filemap-p</a> filemap)
                             (<a href="VL____VL-LOADCONFIG-P.html">vl-loadconfig-p</a> config)
                             (<a href="VL____VL-INCLUDESKIPS-P.html">vl-includeskips-p</a> iskips)
                             (<a href="ACL2____NATP.html">natp</a> bytes)
                             (<a href="VL____VL-DIRLIST-CACHE-P.html">vl-dirlist-cache-p</a> idcache)
                             (<a href="VL____VL-IFDEF-USE-MAP-P.html">vl-ifdef-use-map-p</a> ifdefmap)
                             (<a href="VL____VL-DEF-USE-MAP-P.html">vl-def-use-map-p</a> defmap)
                             (<a href="VL____VL-WARNINGLIST-P.html">vl-warninglist-p</a> warnings))))
 (<a href="COMMON-LISP____LET.html">let</a>
  ((__function__ 'vl-preprocess))
  (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
  (<a href="ACL2____B_A2.html">b*</a>
   (((local-stobjs ppst)
     (<a href="ACL2____MV.html">mv</a> successp
         defines filemap iskips ifdefmap defmap
         bytes warnings new-echars ppst state))
    (<a href="VL____PPST.html">ppst</a> (<a href="VL____VL-PPST-UPDATE-DEFINES.html">vl-ppst-update-defines</a> defines))
    (<a href="VL____PPST.html">ppst</a> (<a href="VL____VL-PPST-UPDATE-FILEMAP.html">vl-ppst-update-filemap</a> filemap))
    (<a href="VL____PPST.html">ppst</a> (<a href="VL____VL-PPST-UPDATE-CONFIG.html">vl-ppst-update-config</a> config))
    (<a href="VL____PPST.html">ppst</a> (<a href="VL____VL-PPST-UPDATE-ACTIVEP.html">vl-ppst-update-activep</a> t))
    (<a href="VL____PPST.html">ppst</a> (<a href="VL____VL-PPST-UPDATE-ISKIPS.html">vl-ppst-update-iskips</a> iskips))
    (<a href="VL____PPST.html">ppst</a> (<a href="VL____VL-PPST-UPDATE-WARNINGS.html">vl-ppst-update-warnings</a> warnings))
    (<a href="VL____PPST.html">ppst</a> (<a href="VL____VL-PPST-UPDATE-IDCACHE.html">vl-ppst-update-idcache</a> idcache))
    (<a href="VL____PPST.html">ppst</a> (<a href="VL____VL-PPST-UPDATE-IFDEFMAP.html">vl-ppst-update-ifdefmap</a> ifdefmap))
    (<a href="VL____PPST.html">ppst</a> (<a href="VL____VL-PPST-UPDATE-DEFMAP.html">vl-ppst-update-defmap</a> defmap))
    (<a href="COMMON-LISP____-.html">-</a> (<a href="COMMON-LISP____OR.html">or</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="VL____VL-LOADCONFIG-_E3INCLUDE-DIRS.html">vl-loadconfig-&gt;include-dirs</a> config)
                  (<a href="ACL2____ALIST-KEYS.html">alist-keys</a> (<a href="VL____VL-PPST-_E3IDCACHE.html">vl-ppst-&gt;idcache</a>)))
           (<a href="ACL2____RAISE.html">raise</a> "idcache is screwed up: ~x0 versus ~x1"
                  (<a href="VL____VL-LOADCONFIG-_E3INCLUDE-DIRS.html">vl-loadconfig-&gt;include-dirs</a> config)
                  (<a href="ACL2____ALIST-KEYS.html">alist-keys</a> (<a href="VL____VL-PPST-_E3IDCACHE.html">vl-ppst-&gt;idcache</a>)))))
    (<a href="VL____PPST.html">ppst</a> (<a href="VL____VL-PPST-UPDATE-BYTES.html">vl-ppst-update-bytes</a> bytes))
    ((<a href="ACL2____MV.html">mv</a> successp remainder ppst state)
     (<a href="VL____VL-PREPROCESS-LOOP.html">vl-preprocess-loop</a> echars
                         *vl-preprocess-clock* ppst state))
    (<a href="ACL2____DEFINES.html">defines</a> (<a href="VL____VL-PPST-_E3DEFINES.html">vl-ppst-&gt;defines</a>))
    (filemap (<a href="VL____VL-PPST-_E3FILEMAP.html">vl-ppst-&gt;filemap</a>))
    (iskips (<a href="VL____VL-PPST-_E3ISKIPS.html">vl-ppst-&gt;iskips</a>))
    (ifdefmap (<a href="VL____VL-PPST-_E3IFDEFMAP.html">vl-ppst-&gt;ifdefmap</a>))
    (defmap (<a href="VL____VL-PPST-_E3DEFMAP.html">vl-ppst-&gt;defmap</a>))
    (bytes (<a href="VL____VL-PPST-_E3BYTES.html">vl-ppst-&gt;bytes</a>))
    (<a href="VL____WARNINGS.html">warnings</a> (<a href="VL____VL-PPST-_E3WARNINGS.html">vl-ppst-&gt;warnings</a>))
    ((when successp)
     (<a href="COMMON-LISP____LET.html">let</a> ((<a href="VL____PPST.html">ppst</a> (<a href="VL____VL-PPST-UNSOUND-NREVERSE-ACC.html">vl-ppst-unsound-nreverse-acc</a> ppst)))
          (<a href="ACL2____MV.html">mv</a> successp defines filemap iskips ifdefmap
              defmap bytes warnings (<a href="VL____VL-PPST-_E3ACC.html">vl-ppst-&gt;acc</a>)
              ppst state))))
   (<a href="ACL2____MV.html">mv</a>
    (<a href="ACL2____CW.html">cw</a>
       "[[ Previous  ]]: ~s0~%~
             [[ Remaining ]]: ~s1~%"
       (<a href="VL____VL-ECHARLIST-_E3STRING.html">vl-echarlist-&gt;string</a> (<a href="VL____VL-SAFE-PREVIOUS-N.html">vl-safe-previous-n</a> 50 (<a href="VL____VL-PPST-_E3ACC.html">vl-ppst-&gt;acc</a>)))
       (<a href="VL____VL-ECHARLIST-_E3STRING.html">vl-echarlist-&gt;string</a> (<a href="VL____VL-SAFE-NEXT-N.html">vl-safe-next-n</a> 50 remainder)))
    defines filemap iskips ifdefmap
    defmap bytes warnings nil ppst state))))</pre> 
<p><b>Theorem: </b>booleanp-of-vl-preprocess.successp</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> booleanp-of-vl-preprocess.successp
        (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> ?successp acl2::?defines ?filemap
                  ?iskips ?ifdefmap ?defmap ?bytes
                  ?warnings ?new-echars acl2::?state)
              (vl-preprocess-fn echars defines
                                filemap config iskips bytes idcache
                                ifdefmap defmap warnings state)))
            (<a href="ACL2____BOOLEANP.html">booleanp</a> successp))
        :rule-classes :type-prescription)</pre> 
<p><b>Theorem: </b>vl-defines-p-of-vl-preprocess.defines</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> vl-defines-p-of-vl-preprocess.defines
        (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> ?successp acl2::?defines ?filemap
                  ?iskips ?ifdefmap ?defmap ?bytes
                  ?warnings ?new-echars acl2::?state)
              (vl-preprocess-fn echars defines
                                filemap config iskips bytes idcache
                                ifdefmap defmap warnings state)))
            (<a href="VL____VL-DEFINES-P.html">vl-defines-p</a> defines))
        :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>vl-filemap-p-of-vl-preprocess.filemap</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> vl-filemap-p-of-vl-preprocess.filemap
        (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> ?successp acl2::?defines ?filemap
                  ?iskips ?ifdefmap ?defmap ?bytes
                  ?warnings ?new-echars acl2::?state)
              (vl-preprocess-fn echars defines
                                filemap config iskips bytes idcache
                                ifdefmap defmap warnings state)))
            (<a href="VL____VL-FILEMAP-P.html">vl-filemap-p</a> filemap))
        :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>vl-includeskips-p-of-vl-preprocess.iskips</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> vl-includeskips-p-of-vl-preprocess.iskips
        (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> ?successp acl2::?defines ?filemap
                  ?iskips ?ifdefmap ?defmap ?bytes
                  ?warnings ?new-echars acl2::?state)
              (vl-preprocess-fn echars defines
                                filemap config iskips bytes idcache
                                ifdefmap defmap warnings state)))
            (<a href="VL____VL-INCLUDESKIPS-P.html">vl-includeskips-p</a> iskips))
        :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>vl-ifdef-use-map-p-of-vl-preprocess.ifdefmap</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> vl-ifdef-use-map-p-of-vl-preprocess.ifdefmap
        (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> ?successp acl2::?defines ?filemap
                  ?iskips ?ifdefmap ?defmap ?bytes
                  ?warnings ?new-echars acl2::?state)
              (vl-preprocess-fn echars defines
                                filemap config iskips bytes idcache
                                ifdefmap defmap warnings state)))
            (<a href="VL____VL-IFDEF-USE-MAP-P.html">vl-ifdef-use-map-p</a> ifdefmap))
        :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>vl-def-use-map-p-of-vl-preprocess.defmap</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> vl-def-use-map-p-of-vl-preprocess.defmap
        (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> ?successp acl2::?defines ?filemap
                  ?iskips ?ifdefmap ?defmap ?bytes
                  ?warnings ?new-echars acl2::?state)
              (vl-preprocess-fn echars defines
                                filemap config iskips bytes idcache
                                ifdefmap defmap warnings state)))
            (<a href="VL____VL-DEF-USE-MAP-P.html">vl-def-use-map-p</a> defmap))
        :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>natp-of-vl-preprocess.bytes</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> natp-of-vl-preprocess.bytes
        (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> ?successp acl2::?defines ?filemap
                  ?iskips ?ifdefmap ?defmap ?bytes
                  ?warnings ?new-echars acl2::?state)
              (vl-preprocess-fn echars defines
                                filemap config iskips bytes idcache
                                ifdefmap defmap warnings state)))
            (<a href="ACL2____NATP.html">natp</a> bytes))
        :rule-classes :type-prescription)</pre> 
<p><b>Theorem: </b>vl-warninglist-p-of-vl-preprocess.warnings</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> vl-warninglist-p-of-vl-preprocess.warnings
        (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> ?successp acl2::?defines ?filemap
                  ?iskips ?ifdefmap ?defmap ?bytes
                  ?warnings ?new-echars acl2::?state)
              (vl-preprocess-fn echars defines
                                filemap config iskips bytes idcache
                                ifdefmap defmap warnings state)))
            (<a href="VL____VL-WARNINGLIST-P.html">vl-warninglist-p</a> warnings))
        :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>vl-echarlist-p-of-vl-preprocess.new-echars</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> vl-echarlist-p-of-vl-preprocess.new-echars
        (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> ?successp acl2::?defines ?filemap
                  ?iskips ?ifdefmap ?defmap ?bytes
                  ?warnings ?new-echars acl2::?state)
              (vl-preprocess-fn echars defines
                                filemap config iskips bytes idcache
                                ifdefmap defmap warnings state)))
            (<a href="VL____VL-ECHARLIST-P.html">vl-echarlist-p</a> new-echars))
        :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>state-p1-of-vl-preprocess.state</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
    state-p1-of-vl-preprocess.state
    (<a href="ACL2____IMPLIES.html">implies</a>
         (<a href="ACL2____FORCE.html">force</a> (state-p1 state))
         (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> ?successp acl2::?defines ?filemap
                   ?iskips ?ifdefmap ?defmap ?bytes
                   ?warnings ?new-echars acl2::?state)
               (vl-preprocess-fn echars defines
                                 filemap config iskips bytes idcache
                                 ifdefmap defmap warnings state)))
             (state-p1 state)))
    :rule-classes :rewrite)</pre> 

</body>
</html>
