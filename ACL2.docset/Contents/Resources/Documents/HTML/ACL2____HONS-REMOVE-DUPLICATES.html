<html>
<head>
<meta charset="UTF-8">
<title>Hons-remove-duplicates</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____HONS-REMOVE-DUPLICATES">Click for Hons-remove-duplicates in the Full Manual</a></h3>

<p><span class="tt">(hons-remove-duplicates l)</span> removes duplicate elements from a 
list, and is implemented using <a href="ACL2____FAST-ALISTS.html">fast-alists</a>.</p><p>This operation is similar to the built-in ACL2 function <a href="ACL2____REMOVE-DUPLICATES-EQUAL.html">remove-duplicates-equal</a>, but it has different performance characteristics and 
the answer it produces is in an oddly different order.</p> 
 
<p>ACL2's <a href="COMMON-LISP____REMOVE-DUPLICATES.html">remove-duplicates</a> function preserves the order of 
non-duplicated elements but has a rather inefficient <span class="v">O(n^2)</span> 
implementation: it walks down the list, checking for each element whether there 
are any more occurrences of the element in the tail of the list.</p> 
 
<p>In contrast, <span class="v">hons-remove-duplicates</span> is a tail-recursive function that 
uses a fast alist to record the elements that have been seen so far.  This is 
effectively <span class="v">O(n)</span> if we assume that hashing is constant time.  Note, 
however.  that this approach requires us to <a href="ACL2____HONS.html">hons</a> the elements in the 
list, which may be quite expensive if the list contains large structures.</p> 
 
<p>Another reasonably efficient way to remove duplicate elements from a list 
include sorting the elements, e.g., via <a href="SET____MERGESORT.html">set::mergesort</a>.</p> 
 
<p>In the special case of removing duplicates from lists of natural numbers, 
<a href="ACL2____NAT-LIST-REMOVE-DUPLICATES.html">nat-list-remove-duplicates</a> may be offer superior performance.</p> 
 
<p>Even though <span class="v">hons-remove-duplicates</span> has a reasonably nice logical 
definition that is merely in terms of <a href="ACL2____REMOVE-DUPLICATES-EQUAL.html">remove-duplicates-equal</a> and <a href="ACL2____REV.html">rev</a>, we leave it disabled by default and go ahead and prove various theorems 
about it.  These theorems are perhaps best regarded as a back-up plan.  In 
general, you may often be able to avoid reasoning about 
<span class="v">hons-remove-duplicates</span> via the following, strong <a href="ACL2____SET-EQUIV.html">set-equiv</a> 
rule:</p> 
 
<p><b>Theorem: </b>hons-remove-duplicates-under-set-equiv</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> hons-remove-duplicates-under-set-equiv
        (<a href="ACL2____SET-EQUIV.html">set-equiv</a> (<a href="ACL2____HONS-REMOVE-DUPLICATES.html">hons-remove-duplicates</a> x)
                   (<a href="ACL2____REMOVE-DUPLICATES-EQUAL.html">remove-duplicates-equal</a> x)))</pre> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>hons-remove-duplicates1</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 hons-remove-duplicates1 (l tab)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard t))
 (<a href="COMMON-LISP____COND.html">cond</a>
   ((<a href="COMMON-LISP____ATOM.html">atom</a> l)
    (<a href="ACL2____PROGN_42.html">progn$</a> (<a href="ACL2____FAST-ALIST-FREE.html">fast-alist-free</a> tab) nil))
   ((<a href="ACL2____HONS-GET.html">hons-get</a> (<a href="COMMON-LISP____CAR.html">car</a> l) tab)
    (hons-remove-duplicates1 (<a href="COMMON-LISP____CDR.html">cdr</a> l) tab))
   (t (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CAR.html">car</a> l)
            (hons-remove-duplicates1 (<a href="COMMON-LISP____CDR.html">cdr</a> l)
                                     (<a href="ACL2____HONS-ACONS.html">hons-acons</a> (<a href="COMMON-LISP____CAR.html">car</a> l) t tab))))))</pre> 
<p><b>Function: </b>hons-remove-duplicates</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a> hons-remove-duplicates (l)
       (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard t))
       (<a href="ACL2____MBE.html">mbe</a> :logic (<a href="ACL2____REV.html">rev</a> (<a href="ACL2____REMOVE-DUPLICATES-EQUAL.html">remove-duplicates-equal</a> (<a href="ACL2____REV.html">rev</a> l)))
            :exec (hons-remove-duplicates1 l (<a href="ACL2____LEN.html">len</a> l))))</pre> 
<p><b>Theorem: </b>hons-remove-duplicates-when-atom</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> hons-remove-duplicates-when-atom
        (<a href="ACL2____IMPLIES.html">implies</a> (<a href="COMMON-LISP____ATOM.html">atom</a> x)
                 (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="ACL2____HONS-REMOVE-DUPLICATES.html">hons-remove-duplicates</a> x) nil)))</pre> 
<p><b>Theorem: </b>hons-remove-duplicates-of-list-fix</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> hons-remove-duplicates-of-list-fix
        (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="ACL2____HONS-REMOVE-DUPLICATES.html">hons-remove-duplicates</a> (<a href="ACL2____LIST-FIX.html">list-fix</a> x))
               (<a href="ACL2____HONS-REMOVE-DUPLICATES.html">hons-remove-duplicates</a> x)))</pre> 
<p><b>Theorem: </b>list-equiv-implies-equal-hons-remove-duplicates-1</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> list-equiv-implies-equal-hons-remove-duplicates-1
        (<a href="ACL2____IMPLIES.html">implies</a> (<a href="ACL2____LIST-EQUIV.html">list-equiv</a> x x-equiv)
                 (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="ACL2____HONS-REMOVE-DUPLICATES.html">hons-remove-duplicates</a> x)
                        (<a href="ACL2____HONS-REMOVE-DUPLICATES.html">hons-remove-duplicates</a> x-equiv)))
        :rule-classes (:congruence))</pre> 
<p><b>Theorem: </b>set-equiv-implies-set-equiv-hons-remove-duplicates-1</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> set-equiv-implies-set-equiv-hons-remove-duplicates-1
        (<a href="ACL2____IMPLIES.html">implies</a> (<a href="ACL2____SET-EQUIV.html">set-equiv</a> x x-equiv)
                 (<a href="ACL2____SET-EQUIV.html">set-equiv</a> (<a href="ACL2____HONS-REMOVE-DUPLICATES.html">hons-remove-duplicates</a> x)
                            (<a href="ACL2____HONS-REMOVE-DUPLICATES.html">hons-remove-duplicates</a> x-equiv)))
        :rule-classes (:congruence))</pre> 
<p><b>Theorem: </b>hons-remove-duplicates-under-set-equiv</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> hons-remove-duplicates-under-set-equiv
        (<a href="ACL2____SET-EQUIV.html">set-equiv</a> (<a href="ACL2____HONS-REMOVE-DUPLICATES.html">hons-remove-duplicates</a> x)
                   (<a href="ACL2____REMOVE-DUPLICATES-EQUAL.html">remove-duplicates-equal</a> x)))</pre> 
<p><b>Theorem: </b>no-duplicatesp-equal-of-hons-remove-duplicates</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> no-duplicatesp-equal-of-hons-remove-duplicates
        (<a href="ACL2____NO-DUPLICATESP-EQUAL.html">no-duplicatesp-equal</a> (<a href="ACL2____HONS-REMOVE-DUPLICATES.html">hons-remove-duplicates</a> x)))</pre> 
<p><b>Theorem: </b>duplicity-in-of-hons-remove-duplicates</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> duplicity-in-of-hons-remove-duplicates
        (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="ACL2____DUPLICITY.html">duplicity</a> a (<a href="ACL2____HONS-REMOVE-DUPLICATES.html">hons-remove-duplicates</a> x))
               (<a href="COMMON-LISP____IF.html">if</a> (<a href="COMMON-LISP____MEMBER.html">member</a> a x) 1 0)))</pre> 
<p><b>Theorem: </b>hons-remove-duplicates1-of-nil</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> hons-remove-duplicates1-of-nil
        (<a href="COMMON-LISP____EQUAL.html">equal</a> (hons-remove-duplicates1 x nil)
               (<a href="ACL2____HONS-REMOVE-DUPLICATES.html">hons-remove-duplicates</a> x)))</pre> 
<p><b>Theorem: </b>acl2-count-of-hons-remove-duplicates</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> acl2-count-of-hons-remove-duplicates
        (<a href="COMMON-LISP_____C3_D3.html">&lt;=</a> (<a href="ACL2____ACL2-COUNT.html">acl2-count</a> (<a href="ACL2____HONS-REMOVE-DUPLICATES.html">hons-remove-duplicates</a> x))
            (<a href="ACL2____ACL2-COUNT.html">acl2-count</a> x))
        :rule-classes ((:rewrite) (:linear)))</pre> 

</body>
</html>
