<html>
<head>
<meta charset="UTF-8">
<title>Write-bytes-to-file!</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____WRITE-BYTES-TO-FILE_12">Click for Write-bytes-to-file! in the Full Manual</a></h3>

<p>Write bytes to a file when not allowed without a trust tag.</p><pre class="code">;; Writes the BYTES to file FILENAME, overwriting its previous contents.
;; Returns (<a href="ACL2____MV.html">mv</a> erp state).  The ttag is needed because this calls
;; open-output-channel!, but that makes this version usable during make-event
;; expansion, clause-processors, etc.
(<a href="COMMON-LISP____DEFUN.html">defun</a> write-bytes-to-file! (bytes filename ctx state)
  (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :stobjs state
                  :guard (<a href="COMMON-LISP____AND.html">and</a> (all-bytep bytes)
                              (<a href="COMMON-LISP____STRINGP.html">stringp</a> filename))))
  (<a href="ACL2____MV-LET.html">mv-let</a> (channel state)
    (<a href="ACL2____OPEN-OUTPUT-CHANNEL_12.html">open-output-channel!</a> filename :byte state)
    (<a href="COMMON-LISP____IF.html">if</a> (<a href="COMMON-LISP____NOT.html">not</a> channel)
        (<a href="ACL2____PROG2_42.html">prog2$</a> (<a href="ACL2____ER.html">er</a> hard? ctx "Unable to open file ~s0 for :byte output." filename)
                (<a href="ACL2____MV.html">mv</a> t state))
      (<a href="COMMON-LISP____IF.html">if</a> (<a href="COMMON-LISP____EQ.html">eq</a> channel 'acl2-output-channel::standard-character-output-0) ;todo: prove that this doesn't happen
          (<a href="ACL2____PROG2_42.html">prog2$</a> (<a href="ACL2____ER.html">er</a> hard? ctx "Unexpected output channel name: ~x0." channel)
                  (<a href="ACL2____MV.html">mv</a> t state))
        (<a href="ACL2____PPROGN.html">pprogn</a> (<a href="ACL2____WRITE-BYTES-TO-CHANNEL.html">write-bytes-to-channel</a> bytes channel state)
                (<a href="ACL2____CLOSE-OUTPUT-CHANNEL.html">close-output-channel</a> channel state)
                (<a href="ACL2____MV.html">mv</a> nil state))))))</pre>
</body>
</html>
