<html>
<head>
<meta charset="UTF-8">
<title>Arrays-example</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____ARRAYS-EXAMPLE">Click for Arrays-example in the Full Manual</a></h3>

<p>An example illustrating ACL2 arrays</p><p>The example below illustrates the use of ACL2 arrays.  It is not, 
 of course, a substitute for the detailed explanations provided elsewhere (see 
 <a href="ACL2____ARRAYS.html">arrays</a>, including subtopics).</p> 
 
 <pre class="code">ACL2 !&gt;(<a href="COMMON-LISP____DEFUN.html">defun</a> defarray (<a href="ACL2____NAME.html">name</a> size initial-element)
         (<a href="ACL2____COMPRESS1.html">compress1</a> name
                    (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____LIST.html">list</a> :HEADER
                                :DIMENSIONS (<a href="COMMON-LISP____LIST.html">list</a> size)
                                :MAXIMUM-LENGTH (<a href="COMMON-LISP____1_B2.html">1+</a> size)
                                :DEFAULT initial-element
                                :NAME name)
                          nil)))

Since DEFARRAY is non-recursive, its admission is trivial.  We observe
that the type of DEFARRAY is described by the theorem
(<a href="COMMON-LISP____AND.html">AND</a> (<a href="COMMON-LISP____CONSP.html">CONSP</a> (DEFARRAY NAME SIZE INITIAL-ELEMENT))
     (<a href="ACL2____TRUE-LISTP.html">TRUE-LISTP</a> (DEFARRAY NAME SIZE INITIAL-ELEMENT))).
We used the :type-prescription rule COMPRESS1.

Summary
Form:  ( DEFUN DEFARRAY ...)
Rules: ((:TYPE-PRESCRIPTION COMPRESS1))
Warnings:  None
Time:  0.02 seconds (prove: 0.00, print: 0.02, other: 0.00)
 DEFARRAY
ACL2 !&gt;(<a href="ACL2____ASSIGN.html">assign</a> my-ar (defarray 'a1 5 17))
 ((:HEADER :DIMENSIONS (5)
           :MAXIMUM-LENGTH 6 :DEFAULT 17 :NAME A1))
ACL2 !&gt;(<a href="ACL2____AREF1.html">aref1</a> 'a1 (<a href="ACL2_____04.html">@</a> my-ar) 3)
17
ACL2 !&gt;(<a href="ACL2____AREF1.html">aref1</a> 'a1 (<a href="ACL2_____04.html">@</a> my-ar) 8)

ACL2 Error in TOP-LEVEL:  The guard for the function symbol AREF1,
which is
(<a href="COMMON-LISP____AND.html">AND</a> (<a href="ACL2____ARRAY1P.html">ARRAY1P</a> NAME L) (<a href="COMMON-LISP____INTEGERP.html">INTEGERP</a> N) (<a href="COMMON-LISP_____E3_D3.html">&gt;=</a> N 0) (<a href="COMMON-LISP_____C3.html">&lt;</a> N (<a href="COMMON-LISP____CAR.html">CAR</a> (<a href="ACL2____DIMENSIONS.html">DIMENSIONS</a> NAME L)))),
is violated by the arguments in the call (<a href="ACL2____AREF1.html">AREF1</a> 'A1 '(#) 8).

ACL2 !&gt;(<a href="ACL2____ASSIGN.html">assign</a> my-ar (<a href="ACL2____ASET1.html">aset1</a> 'a1 (<a href="ACL2_____04.html">@</a> my-ar) 3 'xxx))
 ((3 . XXX)
  (:HEADER :DIMENSIONS (5)
           :MAXIMUM-LENGTH 6 :DEFAULT 17 :NAME A1))
ACL2 !&gt;(<a href="ACL2____AREF1.html">aref1</a> 'a1 (<a href="ACL2_____04.html">@</a> my-ar) 3)
XXX
ACL2 !&gt;(<a href="ACL2____ASET1.html">aset1</a> 'a1 (<a href="ACL2_____04.html">@</a> my-ar) 3 'yyy) ; BAD: (<a href="ACL2_____04.html">@</a> my-ar) now points to
                                    ;      an old copy of the array!
((3 . YYY)
 (3 . XXX)
 (:HEADER :DIMENSIONS (5)
          :MAXIMUM-LENGTH 6 :DEFAULT 17 :NAME A1))
ACL2 !&gt;(<a href="ACL2____AREF1.html">aref1</a> 'a1 (<a href="ACL2_____04.html">@</a> my-ar) 3) ; Because of "BAD" above, the array
                               ; access is done using assoc rather
                               ; than Lisp aref, hence is slower;
                               ; but the answer is still correct,
                               ; reflecting the value in (<a href="ACL2_____04.html">@</a> my-ar),
                               ; which was not changed above.

**********************************************************
Slow Array Access!  A call of AREF1 on an array named
A1 is being executed slowly.  See :DOC slow-array-warning
**********************************************************

XXX
ACL2 !&gt;</pre>
</body>
</html>
