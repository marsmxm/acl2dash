<html>
<head>
<meta charset="UTF-8">
<title>Deftheory</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____DEFTHEORY">Click for Deftheory in the Full Manual</a></h3>

<p>Define a theory (to <a href="ACL2____ENABLE.html">enable</a> or <a href="ACL2____DISABLE.html">disable</a> a set of rules)</p><pre class="code">Example:
(<a href="ACL2____DEFTHEORY.html">deftheory</a> interp-theory
           (<a href="ACL2____SET-DIFFERENCE-THEORIES.html">set-difference-theories</a>
             (<a href="ACL2____UNIVERSAL-THEORY.html">universal-theory</a> :here)
             (<a href="ACL2____UNIVERSAL-THEORY.html">universal-theory</a> 'interp-section)))

General Forms:
(<a href="ACL2____DEFTHEORY.html">deftheory</a> name term)
(<a href="ACL2____DEFTHEORY.html">deftheory</a> name term :redundant-okp flg)</pre> 
 
 <p>where <span class="v">name</span> is a new symbolic name (see <a href="ACL2____NAME.html">name</a>), <span class="v">term</span> is a 
 term that when evaluated will produce a theory (see <a href="ACL2____THEORIES.html">theories</a>), and 
 <span class="v">flg</span> is expected to be Boolean.  Except for the variable <span class="tt"><a href="ACL2____WORLD.html">world</a></span>, 
 <span class="v">term</span> must contain no free variables.  <span class="v">Term</span> is evaluated with <span class="tt"><a href="ACL2____WORLD.html">world</a></span> bound to the current world (see <a href="ACL2____WORLD.html">world</a>) and the resulting theory 
 is then converted to a <i>runic theory</i> (see <a href="ACL2____THEORIES.html">theories</a>) and 
 associated with <span class="v">name</span>.  Henceforth, this runic theory is returned as the 
 value of the theory expression <span class="v">(<a href="ACL2____THEORY.html">theory</a> name)</span>.</p> 
 
 <p>The value returned is the length of the resulting theory.  For example, in 
 the following, the theory associated with <span class="v">'FOO</span> has 54 <a href="ACL2____RUNE.html">rune</a>s:</p> 
 
 <pre class="code">ACL2 !&gt;(<a href="ACL2____DEFTHEORY.html">deftheory</a> foo (<a href="ACL2____UNION-THEORIES.html">union-theories</a> '(<a href="ACL2____BINARY-APPEND.html">binary-append</a>)
                                      (<a href="ACL2____THEORY.html">theory</a> 'minimal-theory)))

Summary
Form:  ( DEFTHEORY FOO ...)
Rules: NIL
Warnings:  None
Time:  0.00 seconds (prove: 0.00, print: 0.00, other: 0.00)
 54
ACL2 !&gt;</pre> 
 
 <p>Note that the theory being defined depends on the context.  For example, 
 consider the following (contrived) example book.</p> 
 
 <pre class="code">(<a href="COMMON-LISP____IN-PACKAGE.html">in-package</a> "ACL2")
(<a href="ACL2____DEFUND.html">defund</a> foo (x) (<a href="COMMON-LISP____CONSP.html">consp</a> x)) ; defund disables foo
(<a href="ACL2____LOCAL.html">local</a> (<a href="ACL2____IN-THEORY.html">in-theory</a> (<a href="ACL2____ENABLE.html">enable</a> foo)))
(<a href="ACL2____DEFTHEORY.html">deftheory</a> my-theory (<a href="ACL2____CURRENT-THEORY.html">current-theory</a> :here))
(<a href="ACL2____IN-THEORY.html">in-theory</a> (<a href="ACL2____DISABLE.html">disable</a> foo))
(<a href="ACL2____DEFTHM.html">defthm</a> foo-property
  (<a href="ACL2____IMPLIES.html">implies</a> (<a href="COMMON-LISP____CONSP.html">consp</a> x)
           (foo x))
  :hints (("Goal" :in-theory (<a href="ACL2____ENABLE.html">enable</a> my-theory))))</pre> 
 
 <p>At the time <span class="v">foo-property</span> is proved admissible during book 
 certification (see <a href="ACL2____CERTIFY-BOOK.html">certify-book</a>), the <span class="tt"><a href="ACL2____LOCAL.html">local</a></span> <span class="tt"><a href="ACL2____IN-THEORY.html">in-theory</a></span> 
 event has previously been evaluated, so the <a href="ACL2____DEFINITION.html">definition</a> of <span class="v">foo</span> is 
 <a href="ACL2____ENABLE.html">enable</a>d.  Thus, the <span class="v">:in-theory</span> hint on <span class="v">foo-property</span> will 
 <a href="ACL2____ENABLE.html">enable</a> <span class="v">foo</span>, and the theorem proves.  HOWEVER, when the book is 
 later included (see <a href="ACL2____INCLUDE-BOOK.html">include-book</a>), the <span class="tt"><a href="ACL2____LOCAL.html">local</a></span> event is skipped, 
 so the definition of <span class="v">foo</span> is <a href="ACL2____DISABLE.html">disable</a>d at the time the <a href="ACL2____THEORY.html">theory</a> 
 <span class="v">my-theory</span> is defined.  Hence, unlike the case for the admissibility pass 
 of the book's certification, that theory does not include the definition of 
 <span class="v">foo</span> when the book is included.</p> 
 
 <p>There is, however, a way to ensure that a <a href="ACL2____THEORY.html">theory</a> defined in a book 
 is the same at <span class="tt"><a href="ACL2____INCLUDE-BOOK.html">include-book</a></span> time as it was during the admissibility 
 pass of the book's certification; see <a href="ACL2____DEFTHEORY-STATIC.html">deftheory-static</a>.</p> 
 
 <p>Note that a <span class="v">deftheory</span> event is never redundant unless 
 <span class="v">:redundant-okp t</span> is specified, which supports a limited form of 
 redundancy.  See <a href="ACL2____REDUNDANT-EVENTS.html">redundant-events</a>.</p>
</body>
</html>
