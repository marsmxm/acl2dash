<html>
<head>
<meta charset="UTF-8">
<title>Pprint-obj-declor</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=C____PPRINT-OBJ-DECLOR">Click for Pprint-obj-declor in the Full Manual</a></h3>

<p>Pretty-print an object declarator.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(pprint-obj-declor declor) → part</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">declor</span> — <font color="#606060">Guard <span class="v">(<a href="C____OBJ-DECLORP.html">obj-declorp</a> declor)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">part</span> — <font color="#606060">Type <span class="v">(<a href="ACL2____MSGP.html">msgp</a> part)</span>.</font>
</dd> 
 
</dl></div> 
<p>This requires a bit of care, 
     because we may need to print parentheses for proper grouping. 
     This is similar to the <a href="C____PPRINT-EXPRESSIONS.html">pretty-printing of expressions</a>, but much simpler, 
     so we do can put all the logic into this pretty-printing function, 
     avoiding all the structure needed for expressions 
     (which need that structure due to their greater complexity). 
     The idea is the same, though.</p><p>Array declarators bind tighter than pointer declarators. 
     E.g. <span class="v">*x[]</span> is like <span class="v">*(x[])</span>, not like <span class="v">(*x)[]</span>. 
     This is because the concrete syntax <span class="v">*x[]</span> must be organized, 
     according to the C grammar [C:6.7.6], 
     as a <i>pointer</i> and a <i>direct-declarator</i>, 
     the latter consisting of 
     another <i>direct-declarator</i> for just the identifier <span class="v">x</span> 
     and of square brackets with nothing between them.</p><p>So, analogously to the treatment of expressions, 
     we need to take the relative precendence of pointer and array declarators 
     when pretty-printing them:</p><ul>
<li>If a declarator is an identifier, we just print it.</li>
<li>If a declarator is a pointer declarator, 
      we recursively pretty-print its sub-declarator, 
      and then we add <span class="v">*</span> in front. 
      We do not add any parentheses in this case. 
      So, if the sub-declarator is a pointer one, 
      the two <span class="v">*</span> will print one after the other, as desired. 
      If instead the sub-declarator is an array one, 
      then as explained above it binds tighter, so it needs no parentheses.</li>
<li>If a declarator is an array one, 
      we recursively pretty-print its sub-declarator. 
      If that sub-declarator is a pointer one, 
      then we need to parenthesize it, 
      because otherwise things would bind in the wrong way. 
      If instead the sub-declarator is an identifier or an array one, 
      then no parentheses are added, as desired.</li>
</ul> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>pprint-obj-declor</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 pprint-obj-declor (declor)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="C____OBJ-DECLORP.html">obj-declorp</a> declor)))
 (<a href="COMMON-LISP____LET.html">let</a>
  ((__function__ 'pprint-obj-declor))
  (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
  (<a href="C____OBJ-DECLOR-CASE.html">obj-declor-case</a>
     declor
     :ident (<a href="C____PPRINT-IDENT.html">pprint-ident</a> declor.get)
     :pointer (<a href="ACL2____MSG.html">msg</a> "*~@0" (<a href="C____PPRINT-OBJ-DECLOR.html">pprint-obj-declor</a> declor.decl))
     :array (<a href="ACL2____B_A2.html">b*</a> ((sub (<a href="C____PPRINT-OBJ-DECLOR.html">pprint-obj-declor</a> declor.decl)))
                (<a href="COMMON-LISP____IF.html">if</a> (<a href="C____OBJ-DECLOR-CASE.html">obj-declor-case</a> declor.decl :pointer)
                    (<a href="ACL2____MSG.html">msg</a> "(~@0)[~@1]" sub
                         (<a href="COMMON-LISP____IF.html">if</a> declor.size (<a href="C____PPRINT-ICONST.html">pprint-iconst</a> declor.size)
                             ""))
                    (<a href="ACL2____MSG.html">msg</a> "~@0[~@1]" sub
                         (<a href="COMMON-LISP____IF.html">if</a> declor.size (<a href="C____PPRINT-ICONST.html">pprint-iconst</a> declor.size)
                             "")))))))</pre> 
<p><b>Theorem: </b>msgp-of-pprint-obj-declor</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> msgp-of-pprint-obj-declor
        (<a href="ACL2____B_A2.html">b*</a> ((part (<a href="C____PPRINT-OBJ-DECLOR.html">pprint-obj-declor</a> declor)))
            (<a href="ACL2____MSGP.html">msgp</a> part))
        :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>pprint-obj-declor-of-obj-declor-fix-declor</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> pprint-obj-declor-of-obj-declor-fix-declor
        (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="C____PPRINT-OBJ-DECLOR.html">pprint-obj-declor</a> (<a href="C____OBJ-DECLOR-FIX.html">obj-declor-fix</a> declor))
               (<a href="C____PPRINT-OBJ-DECLOR.html">pprint-obj-declor</a> declor)))</pre> 
<p><b>Theorem: </b>pprint-obj-declor-obj-declor-equiv-congruence-on-declor</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> pprint-obj-declor-obj-declor-equiv-congruence-on-declor
        (<a href="ACL2____IMPLIES.html">implies</a> (<a href="C____OBJ-DECLOR-EQUIV.html">obj-declor-equiv</a> declor declor-equiv)
                 (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="C____PPRINT-OBJ-DECLOR.html">pprint-obj-declor</a> declor)
                        (<a href="C____PPRINT-OBJ-DECLOR.html">pprint-obj-declor</a> declor-equiv)))
        :rule-classes :congruence)</pre> 

</body>
</html>
