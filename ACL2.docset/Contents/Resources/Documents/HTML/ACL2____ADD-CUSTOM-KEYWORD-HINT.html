<html>
<head>
<meta charset="UTF-8">
<title>Add-custom-keyword-hint</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____ADD-CUSTOM-KEYWORD-HINT">Click for Add-custom-keyword-hint in the Full Manual</a></h3>

<p>Add a new custom keyword hint</p><pre class="code">Examples:
(<a href="ACL2____ADD-CUSTOM-KEYWORD-HINT.html">add-custom-keyword-hint</a> :my-hint (my-hint-fn val ...))

(<a href="ACL2____ADD-CUSTOM-KEYWORD-HINT.html">add-custom-keyword-hint</a> :my-hint
                         (my-hint-fn val ...)
                         :checker (my-hint-checker-fn val ...))</pre> 
 
 <pre class="code">General Form:
(<a href="ACL2____ADD-CUSTOM-KEYWORD-HINT.html">add-custom-keyword-hint</a> :key term1 :checker term2)</pre> 
 
 <p>where <span class="v">:key</span> is a <span class="tt"><a href="COMMON-LISP____KEYWORDP.html">keywordp</a></span> not among the primitive keyword hints 
 listed in <span class="v">*hint-keywords*</span>, the <span class="v">:checker</span> argument is optional, and 
 <span class="v">term1</span> and (if supplied) <span class="v">term2</span> are terms with certain free-variable 
 and signature restrictions described below.  Henceforth, <span class="v">:key</span> is treated 
 as a custom keyword hint, e.g., the user can employ <span class="v">:key</span> in hints to 
 <span class="tt"><a href="ACL2____DEFTHM.html">defthm</a></span>, such as:</p> 
 
 <pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> name ...
  :hints (("Subgoal *1/1'" ... :key val ...))).</pre> 
 
 <p>Custom keyword hints are complicated.  To use them you must understand 
 <span class="tt"><a href="ACL2____STATE.html">state</a></span>, multiple values (e.g., <span class="tt"><a href="ACL2____MV.html">mv</a></span> and <span class="tt"><a href="ACL2____MV-LET.html">mv-let</a></span>), ACL2's 
 notion of error triples (see <a href="ACL2____PROGRAMMING-WITH-STATE.html">programming-with-state</a>), how to generate 
 ``soft'' errors with <span class="tt"><a href="ACL2____ER.html">er</a></span>, how to use <span class="tt"><a href="ACL2____FMT.html">fmt</a></span>-strings to control 
 output, how to use computed hints (see <a href="ACL2____COMPUTED-HINTS.html">computed-hints</a>) and some aspects 
 of ACL2's internal event processing.  Furthermore, it is possible to implement 
 a custom keyword hint that can make an event non-reproducible!  So we 
 recommend that these hints be developed by ACL2 experts.  Basically the custom 
 keyword feature allows the implementors and other experts to extend the hint 
 facility without modifying the ACL2 sources.</p> 
 
 <p><span class="v">Term1</span> is called the ``generator'' term and <span class="v">term2</span> is called the 
 ``checker'' term of the custom keyword hint <span class="v">:key</span>.  Together they specify 
 the semantics of the new custom keyword hint <span class="v">:key</span>.  Roughly speaking, 
 when a custom keyword hint is supplied by the user, as in</p> 
 
 <pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> name ...
  :hints (("Subgoal *1/1'" ... :my-hint val ...))).</pre> 
 
 <p>the checker term is evaluated on <span class="v">val</span> to check that <span class="v">val</span> is of the 
 expected shape.  Provided <span class="v">val</span> passes the check, the generator term is 
 used to compute a standard hint.  Like computed hints, the generator of a 
 custom keyword hint is allowed to inspect the actual clause on which it is 
 being fired.  Indeed, it is allowed to inspect the entire list of hints 
 (standard and custom) supplied for that clause.  Thus, in the most general 
 case, a custom keyword hint is just a very special kind of computed hint.</p> 
 
 <p>The generator, <span class="v">term1</span>, must have no free variables other than:</p> 
 
 <pre class="code">(val keyword-alist
 id clause world stable-under-simplificationp
 hist pspv ctx state).</pre> 
 
 <p>Moreover, either <span class="v">term1</span> must evaluate to a single non-<a href="ACL2____STOBJ.html">stobj</a> 
 value, or else it must be single-threaded in <span class="v">state</span> and have the standard 
 <a href="ACL2____ERROR-TRIPLE.html">error-triple</a> output signature, <span class="v">(<a href="ACL2____MV.html">mv</a> * * state)</span>.</p> 
 
 <p>The restrictions on the checker, <span class="v">term2</span>, are that it be single-threaded 
 in <span class="v">state</span>, have the standard <a href="ACL2____ERROR-TRIPLE.html">error-triple</a> output signature, <span class="v">(<a href="ACL2____MV.html">mv</a> * *
 state)</span>, and have no free variables other than:</p> 
 
 <pre class="code">(val world ctx state).</pre> 
 
 <p>For examples, see the community books directory <span class="v">books/hints/</span>, in 
 particular <span class="v">basic-tests.lisp</span>.</p> 
 
 <p>To delete a previously added custom keyword hint, see <a href="ACL2____REMOVE-CUSTOM-KEYWORD-HINT.html">remove-custom-keyword-hint</a>.</p> 
 
 <p>The community book <span class="v">hints/merge-hint.lisp</span> can be useful in writing 
 custom keyword hints.  See the examples near the of the file.</p> 
 
 <p>Note: This is an event!  It does not print the usual event <a href="ACL2____SUMMARY.html">summary</a> 
 but nevertheless changes the ACL2 logical <a href="ACL2____WORLD.html">world</a> and is so 
 recorded.</p>
</body>
</html>
