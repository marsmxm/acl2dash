<html>
<head>
<meta charset="UTF-8">
<title>Type-set-inverter</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____TYPE-SET-INVERTER">Click for Type-set-inverter in the Full Manual</a></h3>

<p>Exhibit a new decoding for an ACL2 type-set</p><p>See <a href="ACL2____RULE-CLASSES.html">rule-classes</a> for a general discussion of rule classes, 
 including how they are used to build rules from formulas and a discussion of 
 the various keywords in a rule class description.</p> 
 
 <pre class="code">Example Rule Class:
(:type-set-inverter
  :corollary (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="COMMON-LISP____AND.html">and</a> (counting-number x) (<a href="COMMON-LISP____NOT.html">not</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> x 0)))
                    (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP____INTEGERP.html">integerp</a> x) (<a href="COMMON-LISP_____C3.html">&lt;</a> 0 x)))
  :type-set 2)

General Forms of Rule Class:
:type-set-inverter, or
(:type-set-inverter :type-set n)

General Form of Theorem or Corollary:
(<a href="COMMON-LISP____EQUAL.html">EQUAL</a> new-expr old-expr)</pre> 
 
 <p>where <span class="v">n</span> is a <span class="tt"><a href="ACL2____TYPE-SET.html">type-set</a></span> (see <a href="ACL2____TYPE-SET.html">type-set</a>) and <span class="v">old-expr</span> 
 is the term containing <span class="v">x</span> as a free variable that ACL2 currently uses to 
 recognize <span class="tt"><a href="ACL2____TYPE-SET.html">type-set</a></span> <span class="v">n</span>.  For a given <span class="v">n</span>, the exact form of 
 <span class="v">old-expr</span> is generated by</p> 
 
 <pre class="code">(convert-type-set-to-term 'x n (ens state) (<a href="ACL2____W.html">w</a> state) nil)].</pre> 
 
 <p>If the <span class="v">:</span><span class="tt"><a href="ACL2____TYPE-SET.html">type-set</a></span> field of the rule-class is omitted, we 
 attempt to compute it from the right-hand side, <span class="v">old-expr</span>, of the 
 corollary.  That computation is done by <span class="v">type-set-implied-by-term</span> (see 
 <a href="ACL2____TYPE-SET.html">type-set</a>).  However, it is possible that the type-set we compute from 
 <span class="v">lhs</span> does not have the required property that when inverted with 
 <span class="v">convert-type-set-to-term</span> the result is <span class="v">lhs</span>.  If you omit 
 <span class="v">:</span><span class="tt"><a href="ACL2____TYPE-SET.html">type-set</a></span> and an error is caused because <span class="v">lhs</span> has the 
 incorrect form, you should manually specify both <span class="v">:</span><span class="tt"><a href="ACL2____TYPE-SET.html">type-set</a></span> and 
 the <span class="v">lhs</span> generated by <span class="v">convert-type-set-to-term</span>.</p> 
 
 <p>The rule generated will henceforth make <span class="v">new-expr</span> be the term used by 
 ACL2 to recognize type-set <span class="v">n</span>.  If this rule is created by a <span class="tt"><a href="ACL2____DEFTHM.html">defthm</a></span> event named <span class="v">name</span> then the rune of the rule is 
 <span class="v">(:type-set-inverter name)</span> and by disabling that rune you can prevent its 
 being used to decode type-sets.</p> 
 
 <p>Type-sets are inverted when forced assumptions are turned into formulas to 
 be proved.  In their internal form, assumptions are essentially pairs 
 consisting of a context and a goal term, which was forced.  Abstractly a 
 context is just a list of hypotheses which may be assumed while proving the 
 goal term.  But actually contexts are alists which pair terms with type-sets, 
 encoding the current hypotheses.  For example, if the original conjecture 
 contained the hypothesis <span class="v">(<a href="COMMON-LISP____INTEGERP.html">integerp</a> x)</span> then the context used while working 
 on that conjecture will include the assignment to <span class="v">x</span> of the type-set 
 <span class="v">*ts-integer*</span>.</p>
</body>
</html>
