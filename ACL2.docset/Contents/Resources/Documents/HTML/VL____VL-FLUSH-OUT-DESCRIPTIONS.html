<html>
<head>
<meta charset="UTF-8">
<title>Vl-flush-out-descriptions</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=VL____VL-FLUSH-OUT-DESCRIPTIONS">Click for Vl-flush-out-descriptions in the Full Manual</a></h3>

<p>Attempt to find and load any missing modules.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(vl-flush-out-descriptions st n state) → (mv st state)</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">st</span> — <font color="#606060">Guard <span class="v">(<a href="VL____VL-LOADSTATE-P.html">vl-loadstate-p</a> st)</span>.</font>
</dd> 
  <dd>
<span class="tt">n</span> — Counter to force termination.<br>    <font color="#606060">Guard <span class="v">(<a href="ACL2____NATP.html">natp</a> n)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">st</span> — <font color="#606060">Type <span class="v">(<a href="VL____VL-LOADSTATE-P.html">vl-loadstate-p</a> st)</span>.</font>
</dd> 
<dd>
<span class="tt">state</span> — <font color="#606060">Type <span class="v">(state-p1 state)</span>, given <span class="v">(<a href="ACL2____FORCE.html">force</a> (state-p1 state))</span>.</font>
</dd> 
 
</dl></div> 
<p>After some initial files have been loaded, it is generally 
necessary to track down and load, e.g., any submodules that have been 
referenced but not defined.  We call this process "flushing out" the 
description list.</p> 
 
<p>To find some description <span class="v">foo</span>, we look through the provided search 
directories, in order, for a file whose name is <span class="v">foo.v</span>.  (We can also 
consider files with other extensions, see the <span class="v">search-exts</span> option in <a href="VL____VL-LOADCONFIG-P.html">vl-loadconfig-p</a>.)</p> 
 
<p>We try to load the first such <span class="v">foo.v</span> that we find.  This is <b>not 
necessarily sensible</b>.  It might be, for instance, that <span class="v">foo.v</span> will not 
define anything named <span class="v">foo</span>, or that it will define all sorts of other 
modules instead of <span class="v">foo</span>.  In other words, for this search procedure to make 
sense, you need to follow a sort of naming discipline and keep descriptions in 
files that have appropriate names.</p> 
 
<p>Flushing out the descriptions is necessarily an <b>iterative</b> process. 
After we load some library module <span class="v">foo</span>, we might find that it references 
some other library module <span class="v">bar</span> that we have not yet loaded.  To ensure that 
the process will eventually terminate, so cap the maximum number of times we 
will look for new modules.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>vl-flush-out-descriptions</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 vl-flush-out-descriptions (st n state)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :stobjs (<a href="ACL2____STATE.html">state</a>)))
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="VL____VL-LOADSTATE-P.html">vl-loadstate-p</a> st) (<a href="ACL2____NATP.html">natp</a> n))))
 (<a href="COMMON-LISP____LET.html">let</a>
  ((__function__ 'vl-flush-out-descriptions))
  (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
  (<a href="ACL2____B_A2.html">b*</a>
   ((st (<a href="VL____VL-LOADSTATE-FIX.html">vl-loadstate-fix</a> st))
    (missing (<a href="VL____VL-DESCRIPTIONS-LEFT-TO-LOAD.html">vl-descriptions-left-to-load</a> st))
    ((unless missing) (<a href="ACL2____MV.html">mv</a> st state))
    ((when (<a href="ACL2____ZP.html">zp</a> n))
     (<a href="ACL2____MV.html">mv</a>
      (<a href="VL____VL-LOADSTATE-WARN.html">vl-loadstate-warn</a>
       :type :vl-flush-failed
       :msg
       "Failed to load description~s0 ~&amp;1 ~
                                     because we reached the maximum number of ~
                                     tries."
       :args (<a href="COMMON-LISP____LIST.html">list</a> (<a href="COMMON-LISP____IF.html">if</a> (<a href="VL____VL-PLURAL-P.html">vl-plural-p</a> missing) "s" "")
                   missing))
      state))
    (num-prev (<a href="ACL2____LEN.html">len</a> (<a href="VL____VL-LOADSTATE-_E3DESCS.html">vl-loadstate-&gt;descs</a> st)))
    ((<a href="ACL2____MV.html">mv</a> st state)
     (<a href="VL____VL-LOAD-DESCRIPTIONS.html">vl-load-descriptions</a> missing st state))
    (num-new (<a href="ACL2____LEN.html">len</a> (<a href="VL____VL-LOADSTATE-_E3DESCS.html">vl-loadstate-&gt;descs</a> st)))
    ((when (<a href="COMMON-LISP____EQUAL.html">equal</a> num-prev num-new))
     (<a href="ACL2____MV.html">mv</a> (<a href="VL____VL-LOADSTATE-WARN.html">vl-loadstate-warn</a>
              :type :vl-search-failed
              :msg "Failed to find ~x0 description~s1: ~&amp;2."
              :args (<a href="COMMON-LISP____LIST.html">list</a> (<a href="COMMON-LISP____LENGTH.html">length</a> missing)
                          (<a href="COMMON-LISP____IF.html">if</a> (<a href="VL____VL-PLURAL-P.html">vl-plural-p</a> missing) "s" "")
                          (<a href="SET____MERGESORT.html">mergesort</a> missing)))
         state)))
   (<a href="VL____VL-FLUSH-OUT-DESCRIPTIONS.html">vl-flush-out-descriptions</a> st (<a href="COMMON-LISP____-.html">-</a> n 1)
                              state))))</pre> 
<p><b>Theorem: </b>vl-loadstate-p-of-vl-flush-out-descriptions.st</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> vl-loadstate-p-of-vl-flush-out-descriptions.st
        (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> ?st acl2::?state)
              (<a href="VL____VL-FLUSH-OUT-DESCRIPTIONS.html">vl-flush-out-descriptions</a> st n state)))
            (<a href="VL____VL-LOADSTATE-P.html">vl-loadstate-p</a> st))
        :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>state-p1-of-vl-flush-out-descriptions.state</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> state-p1-of-vl-flush-out-descriptions.state
        (<a href="ACL2____IMPLIES.html">implies</a> (<a href="ACL2____FORCE.html">force</a> (state-p1 state))
                 (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> ?st acl2::?state)
                       (<a href="VL____VL-FLUSH-OUT-DESCRIPTIONS.html">vl-flush-out-descriptions</a> st n state)))
                     (state-p1 state)))
        :rule-classes :rewrite)</pre> 

</body>
</html>
