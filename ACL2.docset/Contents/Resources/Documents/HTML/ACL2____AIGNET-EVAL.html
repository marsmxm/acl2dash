<html>
<head>
<meta charset="UTF-8">
<title>Aignet-eval</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____AIGNET-EVAL">Click for Aignet-eval in the Full Manual</a></h3>

<p>Evaluating AIGNET networks</p> 
<p>The (combinational) semantics of an AIGNET network is given by the function</p> 
<pre class="code">(lit-eval lit invals regvals aignet).</pre> 
<p>Invals and regvals are bit arrays containing a value for each (respectively) 
primary input and register node in the network.  But because this function is a 
simple recursive specification for the semantics of a node and not written for 
performance, it is likely to perform badly (worst-case exponential time in the 
size of the network).</p> 
 
<p>To actually execute evaluations of nodes, instead do the following:</p> 
 
<pre class="code">(<a href="ACL2____B_A2.html">b*</a> ((vals ;; Resize vals to have one bit for each aignet node.
      (<a href="ACL2____RESIZE-BITS.html">resize-bits</a> (<a href="AIGNET____NUM-FANINS.html">num-fanins</a> aignet) vals))
     (vals ;; Copy primary input values from invals into vals.
      (aignet-invals-&gt;vals invals vals aignet))
     (vals ;; Copy register values from regvals into vals.
      (aignet-regvals-&gt;vals regvals vals aignet))
     (vals ;; Record the evaluations of all other nodes in vals.
      (<a href="ACL2____AIGNET-EVAL.html">aignet-eval</a> vals aignet))
     (lit-value1 ;; Look up the value of a particular literal of interest.
      (aignet-eval-lit lit1 vals))
     (lit-value2 ;; Look up another literal.
      (aignet-eval-lit lit2 vals)))
 ...)</pre> 
 
<p>(Note: invals and regvals have a different layout than vals; they include 
only one entry per (respectively) primary input or register instead of one 
entry per node, so they are indexed by I/O number whereas vals is indexed by 
node ID.)</p> 
 
<p>The following theorem shows the correspondence between a literal looked up 
in <span class="v">vals</span> after running aignet-eval and the <span class="v">lit-eval</span> of that 
literal:</p> 
 <p><b>Theorem: </b>aignet-eval-lit-of-aignet-eval</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
    aignet-eval-lit-of-aignet-eval
    (<a href="ACL2____IMPLIES.html">implies</a> (<a href="AIGNET____AIGNET-IDP.html">aignet-idp</a> (lit-id lit) aignet)
             (<a href="COMMON-LISP____EQUAL.html">equal</a> (aignet-eval-lit lit (<a href="ACL2____AIGNET-EVAL.html">aignet-eval</a> vals aignet))
                    (lit-eval lit
                              (aignet-vals-&gt;invals nil vals aignet)
                              (aignet-vals-&gt;regvals nil vals aignet)
                              aignet))))</pre> 
 
<p>These theorems resolve the copying between invals/regvals and <span class="v">vals</span>:</p> 
 <p><b>Theorem: </b>aignet-vals-&gt;invals-of-aignet-invals-&gt;vals</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
  aignet-vals-&gt;invals-of-aignet-invals-&gt;vals
  (<a href="ACL2____BITS-EQUIV.html">bits-equiv</a>
       (aignet-vals-&gt;invals invals1
                            (aignet-invals-&gt;vals invals vals aignet)
                            aignet)
       (set-prefix (<a href="AIGNET____NUM-INS.html">num-ins</a> aignet)
                   invals invals1)))</pre> 
 <p><b>Theorem: </b>aignet-vals-&gt;invals-of-aignet-regvals-&gt;vals</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 aignet-vals-&gt;invals-of-aignet-regvals-&gt;vals
 (<a href="ACL2____BITS-EQUIV.html">bits-equiv</a>
     (aignet-vals-&gt;invals invals1
                          (aignet-regvals-&gt;vals regvals vals aignet)
                          aignet)
     (aignet-vals-&gt;invals invals1 vals aignet)))</pre> 
 <p><b>Theorem: </b>aignet-vals-&gt;regvals-of-aignet-regvals-&gt;vals</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 aignet-vals-&gt;regvals-of-aignet-regvals-&gt;vals
 (<a href="ACL2____BITS-EQUIV.html">bits-equiv</a>
    (aignet-vals-&gt;regvals regvals1
                          (aignet-regvals-&gt;vals regvals vals aignet)
                          aignet)
    (set-prefix (<a href="AIGNET____NUM-REGS.html">num-regs</a> aignet)
                regvals regvals1)))</pre> 
 <p><b>Theorem: </b>aignet-vals-&gt;regvals-of-aignet-invals-&gt;vals</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 aignet-vals-&gt;regvals-of-aignet-invals-&gt;vals
 (<a href="ACL2____BITS-EQUIV.html">bits-equiv</a>
      (aignet-vals-&gt;regvals regvals1
                            (aignet-invals-&gt;vals invals vals aignet)
                            aignet)
      (aignet-vals-&gt;regvals regvals1 vals aignet)))</pre> 
 
<p>For higher-level functions for simulation, see the book "aig-sim.lisp".</p> 

</body>
</html>
