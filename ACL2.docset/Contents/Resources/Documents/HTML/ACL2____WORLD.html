<html>
<head>
<meta charset="UTF-8">
<title>World</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____WORLD">Click for World in the Full Manual</a></h3>

<p>ACL2 property lists and the ACL2 logical database</p><p>The ACL2 logical world is a data structure that includes all 
 logical content resulting from the <a href="ACL2____COMMAND.html">command</a>s evaluated, back through and 
 including initialization, but not including commands that have been 
 undone (see <a href="ACL2____UBT.html">ubt</a>).  Thus in particular, the world includes a 
 representation of the current logical theory, as well as some extra-logical 
 information such as the values of ACL2 <a href="ACL2____TABLE.html">table</a>s.  The rest of this topic 
 focuses on the structure of the the ACL2 world and, more generally, the 
 ``world'' data structure.</p> 
 
 <p>A ``world'' is a list of triples, each of the form <span class="v">(sym prop . val)</span>, 
 implementing the ACL2 notion of property lists.  ACL2 permits the simultaneous 
 existence of many property list worlds.  ``The world'' is often used as a 
 shorthand for ``the ACL2 logical world'' which is the particular property list 
 world used within the ACL2 system to maintain a database that contains rules, 
 <a href="ACL2____TABLE.html">table</a>s, and so on.</p> 
 
 <p>Common Lisp provides the notion of ``property lists'' by which one can 
 attach ``properties'' and their corresponding ``values'' to symbols.  For 
 example, one can arrange for the <span class="v">'color</span> property of the symbol 
 <span class="v">'box-14</span> to be <span class="v">'purple</span> and the <span class="v">'color</span> property of the symbol 
 <span class="v">'triangle-7</span> to be <span class="v">'yellow</span>.  Access to property lists is given via 
 the Common Lisp function <span class="v">get</span>.  Thus, <span class="v">(get 'box-14 'color)</span> might 
 return <span class="v">'purple</span>.  Property lists can be changed via the special form 
 <span class="v">setf</span>.  Thus, <span class="v">(setf (get 'box-14 'color) 'blue)</span> changes the Common 
 Lisp property list configuration so that <span class="v">(get 'box-14 'color)</span> returns 
 <span class="v">'blue</span>.  It should be obvious that ACL2 cannot provide this facility, 
 because Common Lisp's <span class="v">get</span> ``function'' is not a function of its argument, 
 but instead a function of some implicit state object representing the property 
 list settings for all symbols.</p> 
 
 <p>ACL2 provides the functions <span class="v">getprop</span> and <span class="v">putprop</span> which allow one 
 to mimic the Common Lisp property list facility.  However, ACL2's <span class="v">getprop</span> 
 takes as one of its arguments a list that is a direct encoding of what was 
 above called the ``state object representing the property list settings for 
 all symbols.''  Because ACL2 already has a notion of ``<a href="ACL2____STATE.html">state</a>'' that is 
 quite distinct from that used here, we call this property list object a 
 ``world.''  A world is just a true list of triples.  Each triple is of the 
 form <span class="v">(sym prop . val)</span>.  This world can be thought of as a slightly 
 elaborated form of association list and <span class="v">getprop</span> is a slightly elaborated 
 form of <span class="tt"><a href="COMMON-LISP____ASSOC.html">assoc</a></span> that takes two keys.  When <span class="v">getprop</span> is called on a 
 symbol, <span class="v">s</span>, property <span class="v">p</span>, and world, <span class="v">w</span>, it scans <span class="v">w</span> for the 
 first triple whose <span class="v">sym</span> is <span class="v">s</span> and <span class="v">prop</span> is <span class="v">p</span> and returns the 
 corresponding <span class="v">val</span>. <span class="v">Getprop</span> has two additional arguments: one 
 controls what it returns if no such <span class="v">sym</span> and <span class="v">prop</span> exist in <span class="v">w</span>, 
 and the other allows an extremely efficient implementation.  To set some 
 property's value for some symbol, ACL2 provides <span class="v">putprop</span>.  <span class="v">(<a href="ACL2____PUTPROP.html">putprop</a> sym
 prop val w)</span> merely returns a new world, <span class="v">w'</span>, in which <span class="v">(sym prop
 . val)</span> has been <span class="tt"><a href="COMMON-LISP____CONS.html">cons</a></span>ed onto the front of <span class="v">w</span>, thus 
 ``overwriting'' the <span class="v">prop</span> value of <span class="v">sym</span> in <span class="v">w</span> to <span class="v">val</span> and 
 leaving all other properties in <span class="v">w</span> unchanged.</p> 
 
 <p>One aspect of ACL2's property list arrangement is that it is possible to 
 have many different property list worlds.  For example, <span class="v">'box-14</span> can have 
 <span class="v">'color</span> <span class="v">'purple</span> in one world and can have <span class="v">'color</span> <span class="v">'yes</span> in 
 another, and these two worlds can exist simultaneously because <span class="v">getprop</span> is 
 explicitly provided the world from which the property value is to be 
 extracted.</p> 
 
 <p>The efficiency alluded to above stems from the fact that Common Lisp 
 provides property lists.  Using Common Lisp's provisions behind the scenes, 
 ACL2 can ``install'' the properties of a given world into the Common Lisp 
 property list state so as to make retrieval via <span class="v">getprop</span> very fast in the 
 special case that the world provided to <span class="v">getprop</span> has been installed.  To 
 permit more than one installed world, each of which is permitted to be changed 
 via <span class="v">putprop</span>, ACL2 requires that worlds be named and these names are used 
 to distinguish installed versions of the various worlds.  See <a href="ACL2____EXTEND-WORLD.html">extend-world</a> and <a href="ACL2____RETRACT-WORLD.html">retract-world</a> for how to install a world.</p> 
 
 <p>However, the ACL2 system uses a property list world, named 
 <span class="v">'current-acl2-world</span>, in which to store the succession of user <a href="ACL2____COMMAND.html">command</a>s and their effects on the logic.  This world is often referred to in 
 our <a href="COMMON-LISP____DOCUMENTATION.html">documentation</a> as ``the world'' though it should be stressed that 
 the user is permitted to have worlds and ACL2's is in no way distinguished 
 except that the user is not permitted to modify it except via event <a href="ACL2____COMMAND.html">command</a>s.  The ACL2 world is part of the ACL2 <a href="ACL2____STATE.html">state</a> and may be 
 obtained via <span class="v">(<a href="ACL2____W.html">w</a> state)</span>.</p> 
 
 <p><b>Warning</b>: The ACL2 world is very large.  Its length as of this 
 writing (Version 2.5) is over <span class="v">40,000</span> and it grows with each release. 
 Furthermore, some of the values stored in it are pointers to old versions of 
 itself.  Printing <span class="v">(<a href="ACL2____W.html">w</a> state)</span> is something you should avoid because you 
 likely will not have the patience to await its completion.  For these 
 practical reasons, the only thing you should do with <span class="v">(<a href="ACL2____W.html">w</a> state)</span> is provide 
 it to <span class="v">getprop</span>, as in the form</p> 
 
 <pre class="code">(<a href="ACL2____GETPROP.html">getprop</a> sym prop default 'current-acl2-world (<a href="ACL2____W.html">w</a> state))</pre> 
 
 <p>or its convenient abbreviation</p> 
 
 <pre class="code">(<a href="ACL2____GETPROPC.html">getpropc</a> sym prop default)</pre> 
 
 <p>to inspect properties within it, or to pass it to ACL2 primitives, such as 
 theory functions, where it is expected.</p> 
 
 <p>Some ACL2 <a href="ACL2____COMMAND.html">command</a> forms, such as theory expressions (see <a href="ACL2____THEORIES.html">theories</a>) and the values to be stored in tables (see <a href="ACL2____TABLE.html">table</a>), are 
 permitted to use the variable symbol <span class="v">world</span> freely with the understanding 
 that when these forms are evaluated that variable is bound to <span class="v">(<a href="ACL2____W.html">w</a> state)</span>. 
 Theoretically, this gives those forms complete knowledge of the current 
 logical configuration of ACL2.  However, at the moment, few world scanning 
 functions have been documented for the ACL2 user.  Instead, supposedly 
 convenient macro forms have been created and documented.  For example, 
 <span class="v">(<a href="ACL2____CURRENT-THEORY.html">current-theory</a> :here)</span>, which is the theory expression which returns the 
 currently <a href="ACL2____ENABLE.html">enable</a>d theory, actually macroexpands to 
 <span class="v">(current-theory-fn :here world)</span>.  When evaluated with <span class="v">world</span> bound to 
 <span class="v">(<a href="ACL2____W.html">w</a> state)</span>, <span class="v">current-theory-fn</span> scans the current ACL2 world and 
 computes the set of <a href="ACL2____RUNE.html">rune</a>s currently <a href="ACL2____ENABLE.html">enable</a>d in it.</p>
</body>
</html>
