<html>
<head>
<meta charset="UTF-8">
<title>Atj-elim-tailrec-in-return</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=JAVA____ATJ-ELIM-TAILREC-IN-RETURN">Click for Atj-elim-tailrec-in-return in the Full Manual</a></h3>

<p>Eliminate any tail-recursive call in a <span class="v">return</span> statement.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(atj-elim-tailrec-in-return expr? method-params method-name) 
  → 
block</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">expr?</span> — <font color="#606060">Guard <span class="v">(<a href="JAVA____MAYBE-JEXPRP.html">maybe-jexprp</a> expr?)</span>.</font>
</dd> 
  <dd>
<span class="tt">method-params</span> — <font color="#606060">Guard <span class="v">(<a href="JAVA____JPARAM-LISTP.html">jparam-listp</a> method-params)</span>.</font>
</dd> 
  <dd>
<span class="tt">method-name</span> — <font color="#606060">Guard <span class="v">(<a href="COMMON-LISP____STRINGP.html">stringp</a> method-name)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">block</span> — <font color="#606060">Type <span class="v">(<a href="JAVA____JBLOCKP.html">jblockp</a> block)</span>.</font>
</dd> 
 
</dl></div> 
<p>This is called by <span class="tt"><a href="JAVA____ATJ-ELIM-TAILREC-IN-JSTATEM.html">atj-elim-tailrec-in-jstatem</a></span> 
     when a <span class="v">return</span> statement with an expression is encountered. 
     The first input is the optional expression of the <span class="v">return</span>.</p><p>If the expression is a call of the method, 
     we return a block consisting of 
     (1) a parallel assignment of the call's actual arguments 
     to the method's parameters, and 
     (2) a <span class="v">continue</span> statement.</p><p>If the expression is a right-associated conditional conjunction 
     <span class="v">expr1 &amp;&amp; (expr2 &amp;&amp; (... &amp;&amp; exprN)...)</span>, 
     and its rightmost conjunct <span class="v">exprN</span> is a call of the method, 
     we return a block of the form</p><pre class="code">if (expr1 &amp;&amp; (expr2 &amp;&amp; (... &amp;&amp; exprN-1)...)) {
    &lt;parallel-asg&gt;
    continue;
} else {
    return false;
}</pre><p>In all other cases, 
     we return a block consisting of the single <span class="v">return</span> statement 
     with the given expression; 
     that is, not change to that part of the Java code is made.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>atj-elim-tailrec-in-return</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 atj-elim-tailrec-in-return
 (expr? method-params method-name)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="JAVA____MAYBE-JEXPRP.html">maybe-jexprp</a> expr?)
                             (<a href="JAVA____JPARAM-LISTP.html">jparam-listp</a> method-params)
                             (<a href="COMMON-LISP____STRINGP.html">stringp</a> method-name))))
 (<a href="COMMON-LISP____LET.html">let</a>
  ((__function__ 'atj-elim-tailrec-in-return))
  (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
  (<a href="ACL2____B_A2.html">b*</a>
   (((unless (<a href="JAVA____JEXPRP.html">jexprp</a> expr?))
     (<a href="COMMON-LISP____LIST.html">list</a> (<a href="JAVA____JSTATEM-RETURN.html">jstatem-return</a> nil)))
    (expr expr?))
   (<a href="COMMON-LISP____COND.html">cond</a>
    ((<a href="COMMON-LISP____AND.html">and</a> (<a href="JAVA____JEXPR-CASE.html">jexpr-case</a> expr :method)
          (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="JAVA____JEXPR-METHOD-_E3NAME.html">jexpr-method-&gt;name</a> expr)
                 method-name))
     (<a href="JAVA____ATJ-ELIM-TAILREC-GEN-BLOCK.html">atj-elim-tailrec-gen-block</a> (<a href="JAVA____JEXPR-METHOD-_E3ARGS.html">jexpr-method-&gt;args</a> expr)
                                 method-params))
    ((<a href="COMMON-LISP____AND.html">and</a> (<a href="JAVA____JEXPR-CASE.html">jexpr-case</a> expr :binary)
          (<a href="JAVA____JBINOP-CASE.html">jbinop-case</a> (<a href="JAVA____JEXPR-BINARY-_E3OP.html">jexpr-binary-&gt;op</a> expr)
                       :condand))
     (<a href="ACL2____B_A2.html">b*</a>
      ((exprs (<a href="JAVA____UNMAKE-RIGHT-ASSOC-CONDAND.html">unmake-right-assoc-condand</a> expr))
       ((unless (<a href="COMMON-LISP_____E3_D3.html">&gt;=</a> (<a href="ACL2____LEN.html">len</a> exprs) 2))
        (<a href="ACL2____RAISE.html">raise</a>
         "Internal error: ~
                         expression ~x0 has fewer than 2 conjuncts."
         exprs)
        (<a href="ACL2____EC-CALL.html">ec-call</a> (<a href="JAVA____JBLOCK-FIX.html">jblock-fix</a> :irrelevant)))
       (rightmost (<a href="COMMON-LISP____CAR.html">car</a> (<a href="COMMON-LISP____LAST.html">last</a> exprs)))
       (others (<a href="COMMON-LISP____BUTLAST.html">butlast</a> exprs 1))
       ((unless (<a href="COMMON-LISP____AND.html">and</a> (<a href="JAVA____JEXPR-CASE.html">jexpr-case</a> rightmost :method)
                     (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="JAVA____JEXPR-METHOD-_E3NAME.html">jexpr-method-&gt;name</a> rightmost)
                            method-name)))
        (<a href="COMMON-LISP____LIST.html">list</a> (<a href="JAVA____JSTATEM-RETURN.html">jstatem-return</a> expr?))))
      (<a href="JAVA____JBLOCK-IFELSE.html">jblock-ifelse</a>
          (<a href="JAVA____MAKE-RIGHT-ASSOC-CONDAND.html">make-right-assoc-condand</a> others)
          (<a href="JAVA____ATJ-ELIM-TAILREC-GEN-BLOCK.html">atj-elim-tailrec-gen-block</a> (<a href="JAVA____JEXPR-METHOD-_E3ARGS.html">jexpr-method-&gt;args</a> rightmost)
                                      method-params)
          (<a href="JAVA____JBLOCK-RETURN.html">jblock-return</a> (<a href="JAVA____JEXPR-LITERAL-FALSE.html">jexpr-literal-false</a>)))))
    (t (<a href="COMMON-LISP____LIST.html">list</a> (<a href="JAVA____JSTATEM-RETURN.html">jstatem-return</a> expr?)))))))</pre> 
<p><b>Theorem: </b>jblockp-of-atj-elim-tailrec-in-return</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 jblockp-of-atj-elim-tailrec-in-return
 (<a href="ACL2____B_A2.html">b*</a>
  ((block
      (<a href="JAVA____ATJ-ELIM-TAILREC-IN-RETURN.html">atj-elim-tailrec-in-return</a> expr? method-params method-name)))
  (<a href="JAVA____JBLOCKP.html">jblockp</a> block))
 :rule-classes :rewrite)</pre> 

</body>
</html>
