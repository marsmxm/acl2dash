<html>
<head>
<meta charset="UTF-8">
<title>Sharp-f-reader</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____SHARP-F-READER">Click for Sharp-f-reader in the Full Manual</a></h3>

<p>Read a rational number in floating-point (scientific notation) 
 syntax</p><pre class="code">Examples:

ACL2 !&gt;#f567
567
ACL2 !&gt;#f_5_6__7_ ; underscores are allowed, and discarded
567
ACL2 !&gt;
ACL2 !&gt;#f-567
-567
ACL2 !&gt;#f+567
567
ACL2 !&gt;#f5.67
567/100
ACL2 !&gt;#f-5.67
-567/100
ACL2 !&gt;#f5.67e3
5670
ACL2 !&gt;#f-5.67e3
-5670
ACL2 !&gt;#f-5.67e-3
-567/100000
ACL2 !&gt;#f.67e2
67
ACL2 !&gt;#f-.67e2
-67
ACL2 !&gt;#f-.67e+4
-6700
ACL2 !&gt;#f-0.67e+4
-6700
ACL2 !&gt;#fx101
257
ACL2 !&gt;#fx10.1
257/16
ACL2 !&gt;#fx10.1p3
257/2
ACL2 !&gt;#fx10.1p-4
257/256
ACL2 !&gt;#fx-10.1p-4
-257/256
ACL2 !&gt;#fx.1p4
1
ACL2 !&gt;#fx.1p+8
16
ACL2 !&gt;#fx.1p-2
1/64
ACL2 !&gt;#fx-0_4p1_0
-4096
ACL2 !&gt;</pre> 
 
 <p>As illustrated above, we support two forms of this reader: <span class="v">#f</span>, 
 indicating base 10 digits, and <span class="v">#fx</span>, indicating base 16 digits.  Let {i} 
 be notation representing a sequence of digits and (optionally) underscore 
 (<span class="v">_</span>) characters, optionally preceded by a sign (<span class="v">-</span> or <span class="v">+</span>), that 
 the ACL2 reader reads as the integer i after discarding underscore characters; 
 similarly for {j} and {n}, except that an initial sign is illegal for {j}, and 
 for {n} the digits are always base 10 (even in the case of <span class="v">#fx</span>).  Note 
 that each such string is terminated at the first character from the input 
 channel that is not a digit.  For the <span class="v">#f</span> case we have the following 
 semantics.</p> 
 
 <pre class="code">#f{i}          =&gt; i
#f{i}e{n}      =&gt; i * 10^n
#f{i}.{j}      =&gt; i + (<a href="COMMON-LISP_____F2.html">/</a> j 10^k) where k is the length of {j}
#f{i}.{j}e{n}  =&gt; (i + (<a href="COMMON-LISP_____F2.html">/</a> j 10^k)) * 10^n where k is the length of {j}</pre> 
 
 <p>We have the following similar semantics for the #('#fx') case, except that 
 {i} and {j} are now read in base 16.  Note that {n} is still read in base 
 10.</p> 
 
 <pre class="code">#fx{i}         =&gt; i
#fx{i}p{n}     =&gt; i * 2^n
#fx{i}.{j}     =&gt; i + (<a href="COMMON-LISP_____F2.html">/</a> j 16^k) where k is the length of {j}
#fx{i}.{j}p{n} =&gt; (i + (<a href="COMMON-LISP_____F2.html">/</a> j 16^k)) * 2^n where k is the length of {j}</pre> 
 
 <p>We thank Dmitry Nadezhin for pointing us to the following page, which 
 explains an analogous ``floating point literal'' syntax for C++:</p> 
 
 <pre class="code">http://en.cppreference.com/w/cpp/language/floating_literal</pre> 
 
 <p>Note, however, that in ACL2 we do not support the use of single quote 
 (<span class="v">'</span>) as a separator, using underscore (<span class="v">_</span>) instead, which is 
 consistent with another reader macro, <span class="v">#u</span> (see <a href="ACL2____SHARP-U-READER.html">sharp-u-reader</a>). 
 Moreover, unlike the syntax described on the page above, the ACL2 <span class="v">#f</span> 
 reader allows an initial sign (<span class="v">-</span> or <span class="v">+</span>).  To see why, note that in 
 Lisp, the string <span class="v">"-#"</span> starts a symbol, for example:</p> 
 
 <pre class="code">? '-#f23
|-#F23|
?</pre> 
 
 <p>Since the ACL2 reader is based on the Lisp reader, it would be awkward to 
 provide support to read the string <span class="v">"-#f23"</span> as a number, -23.  Instead, 
 ACL2 accepts a sign immediately after the initial <span class="v">"#f"</span> or 
 <span class="v">"#fx"</span>:</p> 
 
 <pre class="code">ACL2 !&gt;#f-23
-23
ACL2 !&gt;</pre>
</body>
</html>
