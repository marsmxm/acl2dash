<html>
<head>
<meta charset="UTF-8">
<title>Vl-delta</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=VL2014____VL-DELTA">Click for Vl-delta in the Full Manual</a></h3>

<p>A set of changes to be made to a module.</p><p>This is a product type introduced by <a href="FTY____DEFPROD.html">defprod</a>.</p> 
<h5>Fields</h5> 
<dl>
<dt>nf  <a href="VL2014____VL-NAMEFACTORY.html">vl-namefactory</a>
</dt> 
 
<dt>vardecls  <a href="VL2014____VL-VARDECLLIST.html">vl-vardecllist</a>
</dt> 
 
<dt>assigns  <a href="VL2014____VL-ASSIGNLIST.html">vl-assignlist</a>
</dt> 
 
<dt>modinsts  <a href="VL2014____VL-MODINSTLIST.html">vl-modinstlist</a>
</dt> 
 
<dt>gateinsts  <a href="VL2014____VL-GATEINSTLIST.html">vl-gateinstlist</a>
</dt> 
 
<dt>warnings  <a href="VL2014____VL-WARNINGLIST.html">vl-warninglist</a>
</dt> 
 
<dt>addmods  <a href="VL2014____VL-MODULELIST.html">vl-modulelist</a>
</dt> 
 
</dl><p>An <a href="VL2014____VL-DELTA-P.html">vl-delta-p</a> is mostly just a bunch of accumulators of 
different types, which may be useful when writing a transform that makes 
updates to a module.  It also has a <a href="VL2014____VL-NAMEFACTORY-P.html">vl-namefactory-p</a> which can be used 
to generate fresh names.</p> 
 
<p>What is this all about?</p> 
 
<p>Many simple transforms just walk through a module's elements and rewrite 
them in some "local" way.  For instance, to size expressions or resolve 
arguments, we're just walking over the existing module elements and annotating 
or changing them.  These sorts of transforms usually have no need for a 
delta.</p> 
 
<p>Deltas become useful when a transform needs to rewrite the module elements 
in some way that depends on <i>other stuff</i> being added to the module and/or 
to the module list.  For example:</p> 
 
<ul> 
 
<li>When we split up expressions, we might rewrite <span class="v">a + b</span> into <span class="v">tmp</span>, 
while also adding <span class="v">wire[3:0] tmp</span> and <span class="v">assign tmp = a + b</span> to the 
module.</li> 
 
<li>When we turn expressions into occurrences, we might delete <span class="v">assign tmp =
a + b</span> altogether, while adding <pre class="code">VL_4_BIT_PLUS _adder_123 (tmp, a, b)</pre> to 
the module and adding <span class="v">VL_4_BIT_PLUS</span> and its supporting modules in the 
module list.</li> 
 
</ul> 
 
<p>We found that writing these kinds of transforms meant passing around several 
different accumulators for the different types of elements we wanted to add. 
It is quite painful to write a whole set of functions that take, say, five 
accumulators, and to prove even the simple type theorems about them.  A delta 
is mainly just a bundle of these accumulators, which greatly simplifies the 
code for transforms like <a href="VL2014____SPLIT.html">split</a>.</p> 
 
<p>We found it useful to add a <a href="VL2014____VL-NAMEFACTORY-P.html">vl-namefactory-p</a> to the delta, since that 
way any transform that wants to generate fresh names can do so easily.</p>
</body>
</html>
