<html>
<head>
<meta charset="UTF-8">
<title>Atc-check-struct-write-scalar</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=C____ATC-CHECK-STRUCT-WRITE-SCALAR">Click for Atc-check-struct-write-scalar in the Full Manual</a></h3>

<p>Check if a <span class="tt"><a href="COMMON-LISP____LET.html">let</a></span> binding may represent a structure write 
          of a scalar member.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(atc-check-struct-write-scalar var val prec-tags) 
  → 
(mv yes/no mem tag member mem-type)</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">var</span> — <font color="#606060">Guard <span class="v">(<a href="COMMON-LISP____SYMBOLP.html">symbolp</a> var)</span>.</font>
</dd> 
  <dd>
<span class="tt">val</span> — <font color="#606060">Guard <span class="v">(<a href="ACL2____PSEUDO-TERMP.html">pseudo-termp</a> val)</span>.</font>
</dd> 
  <dd>
<span class="tt">prec-tags</span> — <font color="#606060">Guard <span class="v">(<a href="C____ATC-STRING-TAGINFO-ALISTP.html">atc-string-taginfo-alistp</a> prec-tags)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">yes/no</span> — <font color="#606060">Type <span class="v">(<a href="ACL2____BOOLEANP.html">booleanp</a> yes/no)</span>.</font>
</dd> 
<dd>
<span class="tt">mem</span> — <font color="#606060">Type <span class="v">(<a href="ACL2____PSEUDO-TERMP.html">pseudo-termp</a> mem)</span>.</font>
</dd> 
<dd>
<span class="tt">tag</span> — <font color="#606060">Type <span class="v">(<a href="C____IDENTP.html">identp</a> tag)</span>.</font>
</dd> 
<dd>
<span class="tt">member</span> — <font color="#606060">Type <span class="v">(<a href="C____IDENTP.html">identp</a> member)</span>.</font>
</dd> 
<dd>
<span class="tt">mem-type</span> — <font color="#606060">Type <span class="v">(<a href="C____TYPEP.html">typep</a> mem-type)</span>.</font>
</dd> 
 
</dl></div> 
<p>A structure write of a scalar member, 
     i.e. an assignment to a scalar structure member 
     via a pointer to the structure, 
     is represented by a <span class="tt"><a href="COMMON-LISP____LET.html">let</a></span> binding of the form</p><pre class="code">(<a href="COMMON-LISP____LET.html">let</a> ((&lt;struct&gt; (struct-&lt;tag&gt;-write-&lt;member&gt; &lt;mem&gt; &lt;struct&gt;))) ...)</pre><p>where <span class="v">&lt;struct&gt;</span> is a variable of pointer type to a structure type, 
     which must occur identically as 
     both the <span class="tt"><a href="COMMON-LISP____LET.html">let</a></span> variable 
     and as the last argument of <span class="v">struct-&lt;tag&gt;-write-&lt;member&gt;</span>, 
     <span class="v">&lt;mem&gt;</span> is an expression that yields the member value to write, 
     and <span class="v">...</span> represents the code that follows the assignment. 
     This function takes as arguments 
     the variable and value of a <span class="tt"><a href="COMMON-LISP____LET.html">let</a></span> binder, 
     and checks if they have the form described above. 
     If they do, the member argument is returned for further processing. 
     We also return the tag, the member name, and the member type.</p><p>Similarly to <span class="tt"><a href="C____ATC-CHECK-STRUCT-READ-SCALAR.html">atc-check-struct-read-scalar</a></span>, 
     we consult the <span class="v">prec-tags</span> alist, 
     which must contain the C structure type associated to the writer.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>atc-check-struct-write-scalar</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 atc-check-struct-write-scalar
 (var val prec-tags)
 (<a href="COMMON-LISP____DECLARE.html">declare</a>
      (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP____SYMBOLP.html">symbolp</a> var)
                         (<a href="ACL2____PSEUDO-TERMP.html">pseudo-termp</a> val)
                         (<a href="C____ATC-STRING-TAGINFO-ALISTP.html">atc-string-taginfo-alistp</a> prec-tags))))
 (<a href="COMMON-LISP____LET.html">let</a>
    ((__function__ 'atc-check-struct-write-scalar))
    (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
    (<a href="ACL2____B_A2.html">b*</a> (((acl2::fun (no))
          (<a href="ACL2____MV.html">mv</a> nil nil (<a href="C____IRR-IDENT.html">irr-ident</a>)
              (<a href="C____IRR-IDENT.html">irr-ident</a>)
              (<a href="C____IRR-TYPE.html">irr-type</a>)))
         ((unless (<a href="ACL2____PSEUDO-TERM-CASE.html">pseudo-term-case</a> val :fncall))
          (no))
         ((<a href="ACL2____PSEUDO-TERM-FNCALL.html">pseudo-term-fncall</a> val) val)
         ((<a href="ACL2____MV.html">mv</a> okp struct tag write member)
          (<a href="C____ATC-CHECK-SYMBOL-4PART.html">atc-check-symbol-4part</a> val.fn))
         ((unless (<a href="COMMON-LISP____AND.html">and</a> okp
                       (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="COMMON-LISP____SYMBOL-NAME.html">symbol-name</a> struct) "STRUCT")
                       (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="COMMON-LISP____SYMBOL-NAME.html">symbol-name</a> write) "WRITE")))
          (no))
         (<a href="ACL2____TAG.html">tag</a> (<a href="COMMON-LISP____SYMBOL-NAME.html">symbol-name</a> tag))
         (info (<a href="COMMON-LISP____CDR.html">cdr</a> (<a href="ACL2____ASSOC-EQUAL.html">assoc-equal</a> tag prec-tags)))
         ((unless info) (no))
         (info (<a href="C____ATC-TAG-INFO-_E3DEFSTRUCT.html">atc-tag-info-&gt;defstruct</a> info))
         ((unless (<a href="ACL2____MEMBER-EQ.html">member-eq</a> val.fn (<a href="C____DEFSTRUCT-INFO-_E3WRITERS.html">defstruct-info-&gt;writers</a> info)))
          (no))
         (members (<a href="C____DEFSTRUCT-MEMBER-INFO-LIST-_E3MEMTYPE-LIST.html">defstruct-member-info-list-&gt;memtype-list</a>
                       (<a href="C____DEFSTRUCT-INFO-_E3MEMBERS.html">defstruct-info-&gt;members</a> info)))
         (<a href="ACL2____TAG.html">tag</a> (<a href="C____DEFSTRUCT-INFO-_E3TAG.html">defstruct-info-&gt;tag</a> info))
         (member (<a href="COMMON-LISP____SYMBOL-NAME.html">symbol-name</a> member))
         ((unless (<a href="C____IDENT-STRINGP.html">ident-stringp</a> member)) (no))
         (member (<a href="C____IDENT.html">ident</a> member))
         (mem-type (<a href="C____MEMBER-TYPE-LOOKUP.html">member-type-lookup</a> member members))
         ((unless mem-type) (no))
         ((unless (list-lenp 2 val.args)) (no))
         (mem (<a href="COMMON-LISP____FIRST.html">first</a> val.args))
         (struct (<a href="COMMON-LISP____SECOND.html">second</a> val.args)))
        (<a href="COMMON-LISP____IF.html">if</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> struct var)
            (<a href="ACL2____MV.html">mv</a> t mem tag member mem-type)
            (no)))))</pre> 
<p><b>Theorem: </b>booleanp-of-atc-check-struct-write-scalar.yes/no</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> booleanp-of-atc-check-struct-write-scalar.yes/no
        (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> ?yes/no
                  ?mem acl2::?tag ?member ?mem-type)
              (<a href="C____ATC-CHECK-STRUCT-WRITE-SCALAR.html">atc-check-struct-write-scalar</a> var val prec-tags)))
            (<a href="ACL2____BOOLEANP.html">booleanp</a> yes/no))
        :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>pseudo-termp-of-atc-check-struct-write-scalar.mem</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> pseudo-termp-of-atc-check-struct-write-scalar.mem
        (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> ?yes/no
                  ?mem acl2::?tag ?member ?mem-type)
              (<a href="C____ATC-CHECK-STRUCT-WRITE-SCALAR.html">atc-check-struct-write-scalar</a> var val prec-tags)))
            (<a href="ACL2____PSEUDO-TERMP.html">pseudo-termp</a> mem))
        :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>identp-of-atc-check-struct-write-scalar.tag</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> identp-of-atc-check-struct-write-scalar.tag
        (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> ?yes/no
                  ?mem acl2::?tag ?member ?mem-type)
              (<a href="C____ATC-CHECK-STRUCT-WRITE-SCALAR.html">atc-check-struct-write-scalar</a> var val prec-tags)))
            (<a href="C____IDENTP.html">identp</a> tag))
        :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>identp-of-atc-check-struct-write-scalar.member</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> identp-of-atc-check-struct-write-scalar.member
        (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> ?yes/no
                  ?mem acl2::?tag ?member ?mem-type)
              (<a href="C____ATC-CHECK-STRUCT-WRITE-SCALAR.html">atc-check-struct-write-scalar</a> var val prec-tags)))
            (<a href="C____IDENTP.html">identp</a> member))
        :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>typep-of-atc-check-struct-write-scalar.mem-type</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> typep-of-atc-check-struct-write-scalar.mem-type
        (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> ?yes/no
                  ?mem acl2::?tag ?member ?mem-type)
              (<a href="C____ATC-CHECK-STRUCT-WRITE-SCALAR.html">atc-check-struct-write-scalar</a> var val prec-tags)))
            (<a href="C____TYPEP.html">typep</a> mem-type))
        :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>pseudo-term-count-of-atc-check-struct-write-scalar</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> pseudo-term-count-of-atc-check-struct-write-scalar
        (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> ?yes/no
                  ?mem acl2::?tag ?member ?mem-type)
              (<a href="C____ATC-CHECK-STRUCT-WRITE-SCALAR.html">atc-check-struct-write-scalar</a> var val prec-tags)))
            (<a href="ACL2____IMPLIES.html">implies</a> yes/no
                     (<a href="COMMON-LISP_____C3.html">&lt;</a> (<a href="ACL2____PSEUDO-TERM-COUNT.html">pseudo-term-count</a> mem)
                        (<a href="ACL2____PSEUDO-TERM-COUNT.html">pseudo-term-count</a> val))))
        :rule-classes :linear)</pre> 

</body>
</html>
