<html>
<head>
<meta charset="UTF-8">
<title>Eval-intern-in-package-of-symbol</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2PL____EVAL-INTERN-IN-PACKAGE-OF-SYMBOL">Click for Eval-intern-in-package-of-symbol in the Full Manual</a></h3>

<p>Evaluation semantics of <span class="tt"><a href="ACL2____INTERN-IN-PACKAGE-OF-SYMBOL.html">intern-in-package-of-symbol</a></span>.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(eval-intern-in-package-of-symbol x y packages) → result</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">x</span> — <font color="#606060">Guard <span class="v">(<a href="ACL2PL____VALUEP.html">valuep</a> x)</span>.</font>
</dd> 
  <dd>
<span class="tt">y</span> — <font color="#606060">Guard <span class="v">(<a href="ACL2PL____VALUEP.html">valuep</a> y)</span>.</font>
</dd> 
  <dd>
<span class="tt">packages</span> — <font color="#606060">Guard <span class="v">(<a href="ACL2PL____PACKAGE-LISTP.html">package-listp</a> packages)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">result</span> — <font color="#606060">Type <span class="v">(<a href="ACL2PL____MAYBE-VALUEP.html">maybe-valuep</a> result)</span>.</font>
</dd> 
 
</dl></div> 
<p>The evaluation semantics of this function depends on 
     the package definition in the ACL2 environment. 
     Thus, this meta-level function takes a list of packages as argument 
     (meant to capture the package definitions in the ACL2 environment).</p><p>We find the package of the second symbol argument. 
     If the package does not exist, it is an error, 
     which we formalize by returning <span class="v">nil</span> instead of a value. 
     Under suitable well-formedness conditions on 
     ACL2 programs and evaluation states, 
     the package should always exist, 
     because only symbols from existing packages 
     can be manipulated during evaluation. 
     This will be proved formally eventually, 
     but here we define a defensive evaluation semantics, 
     which is common practice in programming language formalizations.</p><p>If a package is found, 
     we check whether its import list includes a symbol 
     whose name is the first string argument. 
     If it does, that symbol is the result. 
     Otherwise, we return a symbol consisting of 
     the package name and the first string argument name.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>eval-intern-in-package-of-symbol</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
    eval-intern-in-package-of-symbol
    (x y packages)
    (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2PL____VALUEP.html">valuep</a> x)
                                (<a href="ACL2PL____VALUEP.html">valuep</a> y)
                                (<a href="ACL2PL____PACKAGE-LISTP.html">package-listp</a> packages))))
    (<a href="COMMON-LISP____LET.html">let</a> ((__function__ 'eval-intern-in-package-of-symbol))
         (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
         (<a href="COMMON-LISP____IF.html">if</a> (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2PL____VALUE-CASE.html">value-case</a> x :string)
                  (<a href="ACL2PL____VALUE-CASE.html">value-case</a> y :symbol))
             (<a href="ACL2____B_A2.html">b*</a> ((x-string (<a href="ACL2PL____VALUE-STRING-_E3GET.html">value-string-&gt;get</a> x))
                  (y-symbol (<a href="ACL2PL____VALUE-SYMBOL-_E3GET.html">value-symbol-&gt;get</a> y))
                  (y-package (<a href="ACL2PL____SYMBOL-VALUE-_E3PACKAGE.html">symbol-value-&gt;package</a> y-symbol))
                  (package? (<a href="ACL2PL____PACKAGE-LOOKUP.html">package-lookup</a> y-package packages))
                  ((when (<a href="COMMON-LISP____NOT.html">not</a> package?)) nil)
                  (imports (<a href="ACL2PL____PACKAGE-_E3IMPORTS.html">package-&gt;imports</a> package?))
                  (symbol? (<a href="ACL2PL____IMPORT-LOOKUP.html">import-lookup</a> x-string imports))
                  ((when symbol?) (<a href="ACL2PL____VALUE-SYMBOL.html">value-symbol</a> symbol?)))
                 (<a href="ACL2PL____VALUE-SYMBOL.html">value-symbol</a> (<a href="ACL2PL____MAKE-SYMBOL-VALUE.html">make-symbol-value</a> :package y-package
                                                  :name x-string)))
             (<a href="ACL2PL____VALUE-NIL.html">value-nil</a>))))</pre> 
<p><b>Theorem: </b>maybe-valuep-of-eval-intern-in-package-of-symbol</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
     maybe-valuep-of-eval-intern-in-package-of-symbol
     (<a href="ACL2____B_A2.html">b*</a> ((result (<a href="ACL2PL____EVAL-INTERN-IN-PACKAGE-OF-SYMBOL.html">eval-intern-in-package-of-symbol</a> x y packages)))
         (<a href="ACL2PL____MAYBE-VALUEP.html">maybe-valuep</a> result))
     :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>eval-intern-in-package-of-symbol-of-value-fix-x</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> eval-intern-in-package-of-symbol-of-value-fix-x
        (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="ACL2PL____EVAL-INTERN-IN-PACKAGE-OF-SYMBOL.html">eval-intern-in-package-of-symbol</a> (<a href="ACL2PL____VALUE-FIX.html">value-fix</a> x)
                                                 y packages)
               (<a href="ACL2PL____EVAL-INTERN-IN-PACKAGE-OF-SYMBOL.html">eval-intern-in-package-of-symbol</a> x y packages)))</pre> 
<p><b>Theorem: </b>eval-intern-in-package-of-symbol-value-equiv-congruence-on-x</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 eval-intern-in-package-of-symbol-value-equiv-congruence-on-x
 (<a href="ACL2____IMPLIES.html">implies</a>
      (<a href="ACL2PL____VALUE-EQUIV.html">value-equiv</a> x x-equiv)
      (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="ACL2PL____EVAL-INTERN-IN-PACKAGE-OF-SYMBOL.html">eval-intern-in-package-of-symbol</a> x y packages)
             (<a href="ACL2PL____EVAL-INTERN-IN-PACKAGE-OF-SYMBOL.html">eval-intern-in-package-of-symbol</a> x-equiv y packages)))
 :rule-classes :congruence)</pre> 
<p><b>Theorem: </b>eval-intern-in-package-of-symbol-of-value-fix-y</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> eval-intern-in-package-of-symbol-of-value-fix-y
        (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="ACL2PL____EVAL-INTERN-IN-PACKAGE-OF-SYMBOL.html">eval-intern-in-package-of-symbol</a> x (<a href="ACL2PL____VALUE-FIX.html">value-fix</a> y)
                                                 packages)
               (<a href="ACL2PL____EVAL-INTERN-IN-PACKAGE-OF-SYMBOL.html">eval-intern-in-package-of-symbol</a> x y packages)))</pre> 
<p><b>Theorem: </b>eval-intern-in-package-of-symbol-value-equiv-congruence-on-y</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 eval-intern-in-package-of-symbol-value-equiv-congruence-on-y
 (<a href="ACL2____IMPLIES.html">implies</a>
      (<a href="ACL2PL____VALUE-EQUIV.html">value-equiv</a> y y-equiv)
      (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="ACL2PL____EVAL-INTERN-IN-PACKAGE-OF-SYMBOL.html">eval-intern-in-package-of-symbol</a> x y packages)
             (<a href="ACL2PL____EVAL-INTERN-IN-PACKAGE-OF-SYMBOL.html">eval-intern-in-package-of-symbol</a> x y-equiv packages)))
 :rule-classes :congruence)</pre> 
<p><b>Theorem: </b>eval-intern-in-package-of-symbol-of-package-list-fix-packages</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 eval-intern-in-package-of-symbol-of-package-list-fix-packages
 (<a href="COMMON-LISP____EQUAL.html">equal</a>
  (<a href="ACL2PL____EVAL-INTERN-IN-PACKAGE-OF-SYMBOL.html">eval-intern-in-package-of-symbol</a> x y (<a href="ACL2PL____PACKAGE-LIST-FIX.html">package-list-fix</a> packages))
  (<a href="ACL2PL____EVAL-INTERN-IN-PACKAGE-OF-SYMBOL.html">eval-intern-in-package-of-symbol</a> x y packages)))</pre> 
<p><b>Theorem: </b>eval-intern-in-package-of-symbol-package-list-equiv-congruence-on-packages</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 eval-intern-in-package-of-symbol-package-list-equiv-congruence-on-packages
 (<a href="ACL2____IMPLIES.html">implies</a>
      (<a href="ACL2PL____PACKAGE-LIST-EQUIV.html">package-list-equiv</a> packages packages-equiv)
      (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="ACL2PL____EVAL-INTERN-IN-PACKAGE-OF-SYMBOL.html">eval-intern-in-package-of-symbol</a> x y packages)
             (<a href="ACL2PL____EVAL-INTERN-IN-PACKAGE-OF-SYMBOL.html">eval-intern-in-package-of-symbol</a> x y packages-equiv)))
 :rule-classes :congruence)</pre> 

</body>
</html>
