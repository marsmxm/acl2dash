<html>
<head>
<meta charset="UTF-8">
<title>Atj-gen-test-main-method</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=JAVA____ATJ-GEN-TEST-MAIN-METHOD">Click for Atj-gen-test-main-method in the Full Manual</a></h3>

<p>Generate the Java main method for the test Java class.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(atj-gen-test-main-method tests$ java-class$) → method</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">tests$</span> — <font color="#606060">Guard <span class="v">(<a href="JAVA____ATJ-TEST-LISTP.html">atj-test-listp</a> tests$)</span>.</font>
</dd> 
  <dd>
<span class="tt">java-class$</span> — <font color="#606060">Guard <span class="v">(<a href="COMMON-LISP____STRINGP.html">stringp</a> java-class$)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">method</span> — <font color="#606060">Type <span class="v">(<a href="JAVA____JMETHODP.html">jmethodp</a> method)</span>.</font>
</dd> 
 
</dl></div> 
<p>This is generated only if the <span class="v">:tests</span> input is not <span class="v">nil</span>.</p><p>This method initializes the ACL2 environment 
     and then calls each test method. 
     It also prints a message saying whether all tests passed or not.</p><p>If no argument is passed to this method 
     (the argument normally comes from the command line, 
     when the generated code is called as a Java application), 
     then the test methods are called with 0 as the repetition parameter: 
     that is, no time information is printed. 
     Otherwise, there must exactly one argument 
     that must parse to a positive integer, 
     which is passed as the repetition parameter to the test methods.</p><p>Note that we generate an expression name for <span class="v">args.length</span>, 
     because grammatically this is not a field access expression in Java: 
     it cannot be generated from the nonterminal <span class="v">field-acces</span>; 
     it can be generated from the nonterminal <span class="v">expression-name</span>.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>atj-gen-test-main-method</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 atj-gen-test-main-method
 (tests$ java-class$)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="JAVA____ATJ-TEST-LISTP.html">atj-test-listp</a> tests$)
                             (<a href="COMMON-LISP____STRINGP.html">stringp</a> java-class$))))
 (<a href="COMMON-LISP____LET.html">let</a>
  ((__function__ 'atj-gen-test-main-method))
  (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
  (<a href="ACL2____B_A2.html">b*</a>
   ((method-param
         (<a href="JAVA____MAKE-JPARAM.html">make-jparam</a> :final? nil
                      :type (<a href="JAVA____JTYPE-ARRAY.html">jtype-array</a> (<a href="JAVA____JTYPE-CLASS.html">jtype-class</a> "String"))
                      :name "args"))
    (method-body
     (<a href="COMMON-LISP____APPEND.html">append</a>
      (<a href="JAVA____JBLOCK-LOCVAR.html">jblock-locvar</a> (<a href="JAVA____JTYPE-INT.html">jtype-int</a>)
                     "n" (<a href="JAVA____JEXPR-LITERAL-0.html">jexpr-literal-0</a>))
      (<a href="JAVA____JBLOCK-IF.html">jblock-if</a>
       (<a href="JAVA____JEXPR-BINARY.html">jexpr-binary</a> (<a href="JAVA____JBINOP-EQ.html">jbinop-eq</a>)
                     (<a href="JAVA____JEXPR-NAME.html">jexpr-name</a> "args.length")
                     (<a href="JAVA____JEXPR-LITERAL-1.html">jexpr-literal-1</a>))
       (<a href="JAVA____JBLOCK-ASG.html">jblock-asg</a>
            (<a href="JAVA____JEXPR-NAME.html">jexpr-name</a> "n")
            (<a href="JAVA____JEXPR-SMETHOD.html">jexpr-smethod</a> (<a href="JAVA____JTYPE-CLASS.html">jtype-class</a> "Integer")
                           "parseInt"
                           (<a href="COMMON-LISP____LIST.html">list</a> (<a href="JAVA____JEXPR-ARRAY.html">jexpr-array</a> (<a href="JAVA____JEXPR-NAME.html">jexpr-name</a> "args")
                                              (<a href="JAVA____JEXPR-LITERAL-0.html">jexpr-literal-0</a>))))))
      (<a href="JAVA____JBLOCK-IF.html">jblock-if</a>
         (<a href="JAVA____JEXPR-BINARY.html">jexpr-binary</a> (<a href="JAVA____JBINOP-GT.html">jbinop-gt</a>)
                       (<a href="JAVA____JEXPR-NAME.html">jexpr-name</a> "args.length")
                       (<a href="JAVA____JEXPR-LITERAL-1.html">jexpr-literal-1</a>))
         (<a href="JAVA____JBLOCK-THROW.html">jblock-throw</a>
              (<a href="JAVA____JEXPR-NEWCLASS.html">jexpr-newclass</a>
                   (<a href="JAVA____JTYPE-CLASS.html">jtype-class</a> "IllegalArgumentException")
                   (<a href="COMMON-LISP____LIST.html">list</a> (<a href="JAVA____JEXPR-LITERAL-STRING.html">jexpr-literal-string</a>
                              "There must be 0 or 1 arguments.")))))
      (<a href="JAVA____JBLOCK-SMETHOD.html">jblock-smethod</a> (<a href="JAVA____JTYPE-CLASS.html">jtype-class</a> java-class$)
                      "initialize" nil)
      (<a href="JAVA____ATJ-GEN-RUN-TESTS.html">atj-gen-run-tests</a> tests$)
      (<a href="JAVA____JBLOCK-IFELSE.html">jblock-ifelse</a>
       (<a href="JAVA____JEXPR-NAME.html">jexpr-name</a> "failures")
       (<a href="COMMON-LISP____APPEND.html">append</a> (<a href="JAVA____JBLOCK-IMETHOD.html">jblock-imethod</a>
                    (<a href="JAVA____JEXPR-NAME.html">jexpr-name</a> "System.out")
                    "println"
                    (<a href="COMMON-LISP____LIST.html">list</a> (<a href="JAVA____ATJ-GEN-JSTRING.html">atj-gen-jstring</a> "Some tests failed.")))
               (<a href="JAVA____JBLOCK-IMETHOD.html">jblock-imethod</a> (<a href="JAVA____JEXPR-NAME.html">jexpr-name</a> "System.out")
                               "println" nil)
               (<a href="JAVA____JBLOCK-SMETHOD.html">jblock-smethod</a> (<a href="JAVA____JTYPE-CLASS.html">jtype-class</a> "System")
                               "exit" (<a href="COMMON-LISP____LIST.html">list</a> (<a href="JAVA____JEXPR-LITERAL-1.html">jexpr-literal-1</a>))))
       (<a href="COMMON-LISP____APPEND.html">append</a> (<a href="JAVA____JBLOCK-IMETHOD.html">jblock-imethod</a>
                    (<a href="JAVA____JEXPR-NAME.html">jexpr-name</a> "System.out")
                    "println"
                    (<a href="COMMON-LISP____LIST.html">list</a> (<a href="JAVA____ATJ-GEN-JSTRING.html">atj-gen-jstring</a> "All tests passed.")))
               (<a href="JAVA____JBLOCK-IMETHOD.html">jblock-imethod</a> (<a href="JAVA____JEXPR-NAME.html">jexpr-name</a> "System.out")
                               "println" nil)
               (<a href="JAVA____JBLOCK-SMETHOD.html">jblock-smethod</a> (<a href="JAVA____JTYPE-CLASS.html">jtype-class</a> "System")
                               "exit" (<a href="COMMON-LISP____LIST.html">list</a> (<a href="JAVA____JEXPR-LITERAL-0.html">jexpr-literal-0</a>))))))))
   (<a href="JAVA____MAKE-JMETHOD.html">make-jmethod</a> :access (<a href="JAVA____JACCESS-PUBLIC.html">jaccess-public</a>)
                 :abstract? nil
                 :static? t
                 :final? nil
                 :synchronized? nil
                 :native? nil
                 :strictfp? nil
                 :result (<a href="JAVA____JRESULT-VOID.html">jresult-void</a>)
                 :name "main"
                 :params (<a href="COMMON-LISP____LIST.html">list</a> method-param)
                 :throws (<a href="COMMON-LISP____LIST.html">list</a> *aij-class-undef-pkg-exc*)
                 :body method-body))))</pre> 
<p><b>Theorem: </b>jmethodp-of-atj-gen-test-main-method</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> jmethodp-of-atj-gen-test-main-method
        (<a href="ACL2____B_A2.html">b*</a> ((method (<a href="JAVA____ATJ-GEN-TEST-MAIN-METHOD.html">atj-gen-test-main-method</a> tests$ java-class$)))
            (<a href="JAVA____JMETHODP.html">jmethodp</a> method))
        :rule-classes :rewrite)</pre> 

</body>
</html>
