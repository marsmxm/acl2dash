<html>
<head>
<meta charset="UTF-8">
<title>Atc-tutorial-conditional-expressions</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=C____ATC-TUTORIAL-CONDITIONAL-EXPRESSIONS">Click for Atc-tutorial-conditional-expressions in the Full Manual</a></h3>

<p>ATC tutorial: ACL2 representation of C conditional expressions.</p><p>C has both conditional statements and conditional expressions. 
    Conditional expressions are ternary expressions of the form <span class="v">a ? b : c</span>. 
    While <a href="C____ATC-TUTORIAL-CONDITIONAL-STATEMENTS.html">atc-tutorial-conditional-statements</a> explains 
    how to represent conditional statements in ACL2, 
    this tutorial page explains how to represent conditional expressions.</p><p>C conditional expressions are represented by ACL2 <span class="tt"><a href="COMMON-LISP____IF.html">if</a></span>s 
    wrapped with <span class="tt"><a href="C____CONDEXPR.html">condexpr</a></span>. 
    This is the identity function, and should be normally enabled in proofs. 
    Its purpose is to indicate to ATC that the wrapped <span class="tt"><a href="COMMON-LISP____IF.html">if</a></span> 
    represents a conditional expressions instead of a conditional statements. 
    Given that conditional statements are more frequent 
    than conditional expressions in C, 
    using the wrapper for conditional expressions, 
    and no wrapper for conditional statements, 
    reduces verbosity while still supporting the explicit distinction.</p><p>For example, the ACL2 function</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a> |h| (|x| |y|)
  (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="C____SINTP.html">c::sintp</a> |x|)
                              (<a href="C____SINTP.html">c::sintp</a> |y|)
                              ;; x &gt; 0:
                              (<a href="COMMON-LISP_____E3.html">&gt;</a> (<a href="C____SINT-_E3GET.html">c::sint-&gt;get</a> |x|) 0))
                  :guard-hints (("Goal"
                                 :in-theory
                                 (<a href="ACL2____ENABLE.html">enable</a> c::sub-sint-sint-okp
                                         c::sint-integerp-alt-def
                                         c::sint-integer-fix
                                         c::sint-&gt;get)))))
  (<a href="C____SUB-SINT-SINT.html">c::sub-sint-sint</a>
   |x|
   (<a href="C____CONDEXPR.html">c::condexpr</a>
    (<a href="COMMON-LISP____IF.html">if</a> (<a href="C____BOOLEAN-FROM-SINT.html">c::boolean-from-sint</a> (<a href="C____GE-SINT-SINT.html">c::ge-sint-sint</a> |y| (<a href="C____SINT-DEC-CONST.html">c::sint-dec-const</a> 18)))
        (<a href="C____SINT.html">c::sint</a> 0)
      (<a href="C____SINT.html">c::sint</a> 1)))))</pre><p>represents the C function</p><pre class="code">int h(int x, int y) {
    return x - (y &gt;= 18 ? 0 : 1);
}</pre><p>As another example, the ACL2 function</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a> |i| (|a| |b|)
  (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="C____SINTP.html">c::sintp</a> |a|)
                              (<a href="C____SINTP.html">c::sintp</a> |b|))
                  :guard-hints (("Goal"
                                 :in-theory
                                 (<a href="ACL2____ENABLE.html">enable</a> c::boolean-from-sint
                                         c::sint-integerp-alt-def
                                         c::sint-integer-fix
                                         c::gt-sint-sint
                                         c::sub-sint-sint-okp
                                         c::sint-&gt;get)))))
  (<a href="COMMON-LISP____IF.html">if</a> (<a href="C____BOOLEAN-FROM-SINT.html">c::boolean-from-sint</a> (<a href="C____GT-SINT-SINT.html">c::gt-sint-sint</a> |a| |b|))
      (<a href="C____SUB-SINT-SINT.html">c::sub-sint-sint</a> |a|
                        (<a href="C____CONDEXPR.html">c::condexpr</a>
                         (<a href="COMMON-LISP____IF.html">if</a> (<a href="C____BOOLEAN-FROM-SINT.html">c::boolean-from-sint</a>
                              (<a href="C____EQ-SINT-SINT.html">c::eq-sint-sint</a> |b| (<a href="C____SINT-DEC-CONST.html">c::sint-dec-const</a> 3)))
                             (<a href="C____SINT-DEC-CONST.html">c::sint-dec-const</a> 0)
                           (<a href="C____SINT-DEC-CONST.html">c::sint-dec-const</a> 1))))
    |b|))</pre><p>represents the C function</p><pre class="code">int i(int a, int b) {
    if (a &gt; b) {
        return a - (b == 3 ? 0 : 1);
    } else {
        return b;
    }
}</pre><p>Note that the two ACL2 <span class="tt"><a href="COMMON-LISP____IF.html">if</a></span>s are treated differently 
    because of the absence or presence of the <span class="tt"><a href="C____CONDEXPR.html">condexpr</a></span> wrapper: 
    the outer one represents a conditional statement, 
    the inner one represents a conditional expression.</p><p>The tests of the ACL2 <span class="tt"><a href="COMMON-LISP____IF.html">if</a></span>s that represent conditional expressions 
    must return ACL2 booleans, 
    in the same way as the <span class="tt"><a href="COMMON-LISP____IF.html">if</a></span>s that represent conditional statements. 
    As explained in <a href="C____ATC-TUTORIAL-CONDITIONAL-STATEMENTS.html">atc-tutorial-conditional-statements</a>, 
    the function <span class="tt"><a href="C____BOOLEAN-FROM-SINT.html">boolean-from-sint</a></span> is used 
    to convert C <span class="v">int</span>s to ACL2 booleans in the tests.</p><p>It is important to note that representing C conditional expressions 
    with a ternary function defined to be equal to <span class="tt"><a href="COMMON-LISP____IF.html">if</a></span> does not work. 
    Such a function would have to be strict, 
    like all ACL2 functions except <span class="tt"><a href="COMMON-LISP____IF.html">if</a></span>. 
    But in general conditional expressions must be non-strict.</p><div class="box"></div><p><b>Previous:</b> <a href="C____ATC-TUTORIAL-CONDITIONAL-STATEMENTS.html">ACL2 representation of C conditional statements</a></p><p><b>Next:</b> <a href="C____ATC-TUTORIAL-CONDITIONALS-WITH-MBT.html">Treatment of ACL2 conditionals with <span class="tt"><a href="ACL2____MBT.html">mbt</a></span> or <span class="tt"><a href="ACL2____MBT_42.html">mbt$</a></span></a></p>
</body>
</html>
