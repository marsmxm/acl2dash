<html>
<head>
<meta charset="UTF-8">
<title>Grammar</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=JAVA____GRAMMAR">Click for Grammar in the Full Manual</a></h3>

<p>Grammar of the Java language [JLS].</p><p>[JLS] presents the grammar of Java using the notation in [JLS:2.4], 
     which is similar to EBNF (Extended Backus-Naur Form). 
     But since we currently have a <a href="ABNF____GRAMMAR-PARSER.html">verified ABNF grammar parser</a>, we use ABNF (Augmented Backus-Naur Form) to formalize the Java grammar.</p><p>The ABNF grammar of Java is in the files 
     <span class="v">lexical-grammar.txt</span> and <span class="v">syntactic-grammar.txt</span> 
     in this directory; 
     this splitting corresponds to [JLS:2.2] and [JLS:2.3]. 
     Note that these files, according to ABNF, 
     must have their lines terminated by carriage-return and line-feed pairs: 
     see the notes <a href="ABNF____PARSE-GRAMMAR-FROM-FILE.html">here</a> for details about this.</p><p>ABNF is a little different from EBNF. 
     A difference is that EBNF has a construct for syntactic exception 
     (e.g. <span class="v">consonant = letter - vowel</span>), 
     while ABNF does not. 
     The notation in [JLS:2.4] 
     has a syntactic exception construct (<span class="v">but not</span>) 
     that corresponds to EBNF's <span class="v">-</span> construct. 
     However, the Java grammar alone is ambiguous anyhow, 
     and we need extra-grammatical predicates to formalize Java syntax: 
     we use those to formalize the syntactic exceptions in the Java grammar, 
     since ABNF does not capture them.</p><p>While ABNF lacks syntactic exceptions, 
     it has constructs that are not in EBNF or in the notation in [JLS:2.4], 
     which actually allow us to capture more constraints in the grammar, 
     or the same constraints slightly more concisely. 
     In particular, ABNF has value range alternatives, 
     which allow us to define <span class="v">RawInputCharacter</span> [JLS:3.3] 
     without using informal prose. 
     ABNF also has case-insensitive string terminal notations, 
     which allow us to list the letters just once 
     in the definition of <span class="v">HexDigit</span> [JLS:3.3], 
     and similarly to express certain rules more concisely.</p><p>Besides the rule for <span class="v">RawInputCharacter</span> mentioned above, 
     the Java grammar in [JLS] includes two other rules 
     defined entirely using informal prose, 
     namely the rules for <span class="v">JavaLetter</span> and <span class="v">JavaLetterOrDigit</span>. 
     Even though ABNF includes prose notation, 
     we prefer to avoid its use altogether, 
     and instead define these two nonterminals 
     as synonyms of <span class="v">RawInputCharacter</span>, 
     delegating a more precise definition to extra-grammatical predicates 
     (which is what the prose notation does anyways). 
     It is obvious that the Java letters and numbers defined by those two rules 
     are Unicode characters, 
     since their prose definitions are `any Unicode character that ...', 
     and the prose definition of <span class="v">RawUnicodeCharacter</span> is 
     `any Unicode character'. 
     Avoiding prose notation in our ABNF grammar of Java 
     lets us prove properties such as the fact that 
     all the terminal strings generated by the grammar 
     consist of Unicode characters; 
     this would not be possible with prose notations, 
     which are completely unconstrained.</p><p>The Java grammar in [JLS] uses camelcase nonterminals. 
     Since rule names (i.e. nonterminals) are case-insensitive in ABNF, 
     we systematically turn those camelcase nonterminals 
     into dash-separated lowercase nonterminals. 
     In the grammar files, 
     we use ABNF comments for the <span class="v">but not</span> syntactic exceptions 
     in the Java grammar in [JLS]; 
     this is just for documentation, 
     because, as noted above, we formalize these syntactic exceptions 
     via extra-grammatical predicates. 
     We also use ABNF comments for the prose notations in [JLS], 
     which, as explained above, we express as non-prose notations in ABNF. 
     We also use ABNF comments to separate the files into sections, 
     and to reference the parts of [JLS] where the the rules appear.</p><p>The ABNF notation is documented in <a href="https://www.rfc-editor.org/info/rfc5234" target="_blank"><nobr>RFC 5234<img src="../Icon_External_Link.png" title="External link to https://www.rfc-editor.org/info/rfc5234"></nobr></a> and <a href="https://www.rfc-editor.org/info/rfc7405" target="_blank"><nobr>RFC 7405<img src="../Icon_External_Link.png" title="External link to https://www.rfc-editor.org/info/rfc7405"></nobr></a>. The correspondence with the notation in [JLS] should be clear.</p>
</body>
</html>
