<html>
<head>
<meta charset="UTF-8">
<title>Check-branch-list</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=SYNTHETO____CHECK-BRANCH-LIST">Click for Check-branch-list in the Full Manual</a></h3>

<p>Check if a list of branches is statically well-formed.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(check-branch-list branches current-sup ctxt) → result</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">branches</span> — <font color="#606060">Guard <span class="v">(<a href="SYNTHETO____BRANCH-LISTP.html">branch-listp</a> branches)</span>.</font>
</dd> 
  <dd>
<span class="tt">current-sup</span> — <font color="#606060">Guard <span class="v">(<a href="SYNTHETO____TYPE-LISTP.html">type-listp</a> current-sup)</span>.</font>
</dd> 
  <dd>
<span class="tt">ctxt</span> — <font color="#606060">Guard <span class="v">(<a href="SYNTHETO____CONTEXTP.html">contextp</a> ctxt)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">result</span> — <font color="#606060">Type <span class="v">(<a href="SYNTHETO____TYPE-RESULTP.html">type-resultp</a> result)</span>.</font>
</dd> 
 
</dl></div> 
<p>These are the branches that form a conditional expression, 
       in which the order of the branches is significant. 
       This means that each branch is checked in a context 
       where the conditions of the preceding branches are negated 
       (otherwise one of the preceding branches would be taken). 
       Thus, as we process each branch, 
       we augment the context with the negation of the branch condition 
       just before processing the subsequent branches.</p><p>The type of a conditional is the supremum of 
       the types of the branches. 
       We calculate it by carrying and updating the type supremum 
       as we go through the branches: 
       this is the <span class="v">current-sup</span> argument of this ACL2 function, 
       which is initially <span class="v">nil</span> 
       (which cannot be the type list of an expression, 
       which must always have one or more types). 
       If we reach the end of the branches without a supremum, 
       we fail because it means that there are no branches 
       (unlike ACL2's <span class="tt"><a href="COMMON-LISP____COND.html">cond</a></span>, there is no implicit value returned 
       by a Syntheto conditional expression without branches; 
       in particular, there is no <span class="v">nil</span> as such in Syntheto). 
       When we process the first branch, use it as the supremum. 
       When we cannot calculate a supremum (i.e. it does not exist), 
       type checking fails.</p> 
 

</body>
</html>
