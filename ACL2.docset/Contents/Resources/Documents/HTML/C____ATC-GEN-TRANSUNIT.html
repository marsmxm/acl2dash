<html>
<head>
<meta charset="UTF-8">
<title>Atc-gen-transunit</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=C____ATC-GEN-TRANSUNIT">Click for Atc-gen-transunit in the Full Manual</a></h3>

<p>Generate a C translation unit from the ACL2 target functions, 
          and accompanying event.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(atc-gen-transunit targets proofs prog-const wf-thm 
                   fn-thms print names-to-avoid ctx state) 
 
  → 
(mv erp val state)</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">targets</span> — <font color="#606060">Guard <span class="v">(<a href="ACL2____SYMBOL-LISTP.html">symbol-listp</a> targets)</span>.</font>
</dd> 
  <dd>
<span class="tt">proofs</span> — <font color="#606060">Guard <span class="v">(<a href="ACL2____BOOLEANP.html">booleanp</a> proofs)</span>.</font>
</dd> 
  <dd>
<span class="tt">prog-const</span> — <font color="#606060">Guard <span class="v">(<a href="COMMON-LISP____SYMBOLP.html">symbolp</a> prog-const)</span>.</font>
</dd> 
  <dd>
<span class="tt">wf-thm</span> — <font color="#606060">Guard <span class="v">(<a href="COMMON-LISP____SYMBOLP.html">symbolp</a> wf-thm)</span>.</font>
</dd> 
  <dd>
<span class="tt">fn-thms</span> — <font color="#606060">Guard <span class="v">(<a href="ACL2____SYMBOL-SYMBOL-ALISTP.html">symbol-symbol-alistp</a> fn-thms)</span>.</font>
</dd> 
  <dd>
<span class="tt">print</span> — <font color="#606060">Guard <span class="v">(<a href="ACL2____EVMAC-INPUT-PRINT-P.html">evmac-input-print-p</a> print)</span>.</font>
</dd> 
  <dd>
<span class="tt">names-to-avoid</span> — <font color="#606060">Guard <span class="v">(<a href="ACL2____SYMBOL-LISTP.html">symbol-listp</a> names-to-avoid)</span>.</font>
</dd> 
  <dd>
<span class="tt">ctx</span> — <font color="#606060">Guard <span class="v">(<a href="ACL2____CTXP.html">ctxp</a> ctx)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">val</span> — A <span class="v">(tuple (tunit transunitp)
                                 (local-events pseudo-event-form-listp)
                                 (exported-events pseudo-event-form-listp)
                                 (updated-names-to-avoid symbol-listp)
                                 val)</span>.</dd> 
 
</dl></div> 
<p>In order to speed up the proofs of 
     the generated theorems for the function environment 
     for relatively large C programs, 
     we generate a theorem to ``cache'' 
     the result of calling <span class="tt"><a href="C____INIT-FUN-ENV.html">init-fun-env</a></span> 
     on the generated translation unit, 
     to avoid recomputing that for every function environment theorem. 
     We need to generate the name of this (local) theorem 
     before generating the function environment theorems, 
     so that those theorems can use the name of this theorem in the hints; 
     but we can only generate the theorem 
     after generating the translation unit. 
     So first we generate the name, 
     then we generate the translation unit, 
     and then we generate the theorem; 
     however, in the generated events, 
     we put that theorem before the ones for the functions.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>atc-gen-transunit</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 atc-gen-transunit
 (targets proofs prog-const wf-thm
          fn-thms print names-to-avoid ctx state)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :stobjs (<a href="ACL2____STATE.html">state</a>)))
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____SYMBOL-LISTP.html">symbol-listp</a> targets)
                             (<a href="ACL2____BOOLEANP.html">booleanp</a> proofs)
                             (<a href="COMMON-LISP____SYMBOLP.html">symbolp</a> prog-const)
                             (<a href="COMMON-LISP____SYMBOLP.html">symbolp</a> wf-thm)
                             (<a href="ACL2____SYMBOL-SYMBOL-ALISTP.html">symbol-symbol-alistp</a> fn-thms)
                             (<a href="ACL2____EVMAC-INPUT-PRINT-P.html">evmac-input-print-p</a> print)
                             (<a href="ACL2____SYMBOL-LISTP.html">symbol-listp</a> names-to-avoid)
                             (<a href="ACL2____CTXP.html">ctxp</a> ctx))))
 (<a href="COMMON-LISP____LET.html">let</a>
  ((__function__ 'atc-gen-transunit))
  (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
  (<a href="ACL2____B_A2.html">b*</a>
   (((<a href="ACL2____MV.html">mv</a> appcond-local-events
         fn-appconds appcond-thms names-to-avoid)
     (<a href="COMMON-LISP____IF.html">if</a> proofs
         (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> appconds fn-appconds)
               (<a href="C____ATC-GEN-APPCONDS.html">atc-gen-appconds</a> targets (<a href="ACL2____W.html">w</a> state)))
              ((<a href="ACL2____MV.html">mv</a> appcond-events
                   appcond-thms &amp; names-to-avoid)
               (<a href="ACL2____EVMAC-APPCOND-THEOREM-LIST.html">evmac-appcond-theorem-list</a>
                    appconds
                    nil names-to-avoid print ctx state)))
             (<a href="ACL2____MV.html">mv</a> appcond-events fn-appconds
                 appcond-thms names-to-avoid))
         (<a href="ACL2____MV.html">mv</a> nil nil nil nil)))
    ((<a href="ACL2____MV.html">mv</a> wf-thm-local-events
         wf-thm-exported-events)
     (<a href="C____ATC-GEN-WF-THM.html">atc-gen-wf-thm</a> proofs prog-const wf-thm print))
    (init-fun-env-thm (<a href="ACL2____ADD-SUFFIX.html">add-suffix</a> prog-const "-FUN-ENV"))
    ((<a href="ACL2____MV.html">mv</a> init-fun-env-thm names-to-avoid)
     (<a href="ACL2____FRESH-LOGICAL-NAME-WITH-_42S-SUFFIX.html">fresh-logical-name-with-$s-suffix</a>
          init-fun-env-thm
          nil names-to-avoid (<a href="ACL2____W.html">w</a> state)))
    ((<a href="ACL2____ER.html">er</a> (<a href="COMMON-LISP____LIST.html">list</a> exts fn-thm-local-events
               fn-thm-exported-events names-to-avoid))
     (<a href="C____ATC-GEN-EXT-DECLON-LIST.html">atc-gen-ext-declon-list</a> targets nil
                              nil proofs prog-const init-fun-env-thm
                              fn-thms fn-appconds appcond-thms
                              print names-to-avoid ctx state))
    (tunit (<a href="C____MAKE-TRANSUNIT.html">make-transunit</a> :declons exts))
    (local-init-fun-env-events
         (<a href="C____ATC-GEN-INIT-FUN-ENV-THM.html">atc-gen-init-fun-env-thm</a> init-fun-env-thm
                                   proofs prog-const tunit))
    ((<a href="ACL2____MV.html">mv</a> local-const-event exported-const-event)
     (<a href="COMMON-LISP____IF.html">if</a> proofs
         (<a href="C____ATC-GEN-PROG-CONST.html">atc-gen-prog-const</a> prog-const tunit print)
         (<a href="ACL2____MV.html">mv</a> nil nil)))
    (local-events (<a href="COMMON-LISP____APPEND.html">append</a> appcond-local-events
                          (<a href="COMMON-LISP____AND.html">and</a> proofs (<a href="COMMON-LISP____LIST.html">list</a> local-const-event))
                          wf-thm-local-events
                          local-init-fun-env-events
                          fn-thm-local-events))
    (exported-events
         (<a href="COMMON-LISP____APPEND.html">append</a> (<a href="COMMON-LISP____AND.html">and</a> proofs (<a href="COMMON-LISP____LIST.html">list</a> exported-const-event))
                 wf-thm-exported-events
                 fn-thm-exported-events)))
   (<a href="ACL2____VALUE.html">acl2::value</a> (<a href="COMMON-LISP____LIST.html">list</a> tunit local-events
                      exported-events names-to-avoid)))))</pre> 

</body>
</html>
