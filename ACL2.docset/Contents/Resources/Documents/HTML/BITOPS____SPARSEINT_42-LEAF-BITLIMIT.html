<html>
<head>
<meta charset="UTF-8">
<title>Sparseint$-leaf-bitlimit</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=BITOPS____SPARSEINT_42-LEAF-BITLIMIT">Click for Sparseint$-leaf-bitlimit in the Full Manual</a></h3>

<p>Limit on the size (in bits) of sparseint leaves.</p><p>This constant sets a tradeoff between representation efficiency of 
a single element versus opportunities for structure sharing between multiple 
elements.  If the bitlimit is small, then we can potentially share structure 
more granularly among objects.  However, if it is so small that the bignums on 
the leaves are dwarfed in size by the conses used to create the tree nodes, 
then this is unlikely to be efficient.</p> 
 
<p>Absent empirical evidence, we currently set the limit to 256, which we think 
is likely to be the size of a tree node in most 64-bit Lisps (i.e., two conses, 
128 bits each).</p> 
 
<p>We wrap the constant <span class="v">*sparseint$-leaf-bitlimit*</span> in a macro so that if 
dereferencing that global variable becomes a performance consideration, we can 
change the macro to just return the value instead of the constant.  We use a 
defconst in the first place to make it easy to experiment with different values 
by redefining the constant.</p>
</body>
</html>
