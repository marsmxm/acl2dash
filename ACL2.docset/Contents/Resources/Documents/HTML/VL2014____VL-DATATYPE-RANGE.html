<html>
<head>
<meta charset="UTF-8">
<title>Vl-datatype-range</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=VL2014____VL-DATATYPE-RANGE">Click for Vl-datatype-range in the Full Manual</a></h3>

<p>Get the range, if any, for a data type.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(vl-datatype-range x) → (mv warning range)</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">x</span> — <font color="#606060">Guard <span class="v">(<a href="VL2014____VL-DATATYPE-P.html">vl-datatype-p</a> x)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">warning</span> — <font color="#606060">Type <span class="v">(<a href="ACL2____IFF.html">iff</a> (<a href="VL2014____VL-WARNING-P.html">vl-warning-p</a> warning) warning)</span>.</font>
</dd> 
<dd>
<span class="tt">range</span> — On success: the range of this datatype.<br>    <font color="#606060">Type <span class="v">(<a href="VL2014____VL-MAYBE-RANGE-P.html">vl-maybe-range-p</a> range)</span>.</font>
</dd> 
 
</dl></div> 
<p>The datatype should be fully resolved, as in the output from <a href="VL2014____VL-DATATYPE-USERTYPE-ELIM.html">vl-datatype-usertype-elim</a>.</p> 
 
<p>What exactly do we mean by the range of a datatype?  Most data types can 
have multiple array dimensions.  What we mean is the range of indices that are 
valid to apply directly to the data structure: that is, the range of the 
"first" array dimension.  This means: the leftmost unpacked dimension if 
there are unpacked dimensions; otherwise the leftmost packed dimension, 
otherwise nil.  When types are composed, e.g. by declaring a type to be another 
type with some additional dimensions, the additional dimensions go to the left. 
Examples:</p> 
 
<pre class="code">typedef logic [3:0] nibble;
typedef nibble [7:0] quadword [1:0];
typedef quadword cacheline [15:0];</pre> 
 
<p>These are equivalent to:</p> 
<pre class="code">typedef logic [3:0] nibble;
typedef logic [7:0] [3:0] quadword [1:0];
typedef logic [7:0] [3:0] cacheline [15:0] [1:0];</pre> 
 
<p>A tricky part here is that a variable declaration's datatype doesn't 
necessarily include all of the unpacked array dimensions.  In the declaration 
of my_kbyte, the type of my_kbyte is dword but it has additional dimensions 
stored in the variable declaration itself.  So we take as an extra argument the 
unpacked dimensions of the datatype.  If there are any unpacked dimensions, 
then the first unpacked dimension is transformed into the range; otherwise, 
it's the first packed dimension (or the declared range of a net type).</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>vl-datatype-range</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 vl-datatype-range (x)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="VL2014____VL-DATATYPE-P.html">vl-datatype-p</a> x)))
 (<a href="COMMON-LISP____LET.html">let</a> ((__function__ 'vl-datatype-range))
      (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
      (<a href="ACL2____B_A2.html">b*</a> (((fun (fail msg args))
            (<a href="ACL2____MV.html">mv</a> (<a href="VL2014____MAKE-VL-WARNING.html">make-vl-warning</a> :type :vl-datatype-range-fail
                                 :msg msg
                                 :args args)
                nil))
           ((fun (success range)) (<a href="ACL2____MV.html">mv</a> nil range))
           (x (<a href="VL2014____VL-DATATYPE-FIX.html">vl-datatype-fix</a> x))
           (udims (<a href="VL2014____VL-DATATYPE-_E3UDIMS.html">vl-datatype-&gt;udims</a> x))
           ((when (<a href="COMMON-LISP____CONSP.html">consp</a> udims))
            (<a href="ACL2____B_A2.html">b*</a> ((dim (<a href="VL2014____VL-PACKEDDIMENSION-FIX.html">vl-packeddimension-fix</a> (<a href="COMMON-LISP____CAR.html">car</a> udims)))
                 ((when (<a href="COMMON-LISP____EQ.html">eq</a> dim :vl-unsized-dimension))
                  (fail "Most significant dimension is unsized: ~a0"
                        (<a href="COMMON-LISP____LIST.html">list</a> x))))
                (success dim)))
           (pdims (<a href="VL2014____VL-DATATYPE-_E3PDIMS.html">vl-datatype-&gt;pdims</a> x))
           ((when (<a href="COMMON-LISP____CONSP.html">consp</a> pdims))
            (<a href="ACL2____B_A2.html">b*</a> (((when (<a href="COMMON-LISP____EQ.html">eq</a> (<a href="COMMON-LISP____CAR.html">car</a> pdims) :vl-unsized-dimension))
                  (fail "Most significant dimension is unsized: ~a0"
                        (<a href="COMMON-LISP____LIST.html">list</a> x))))
                (success (<a href="COMMON-LISP____CAR.html">car</a> pdims)))))
          (success nil))))</pre> 
<p><b>Theorem: </b>return-type-of-vl-datatype-range.warning</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> return-type-of-vl-datatype-range.warning
        (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> common-lisp::?warning ?range)
              (<a href="VL2014____VL-DATATYPE-RANGE.html">vl-datatype-range</a> x)))
            (<a href="ACL2____IFF.html">iff</a> (<a href="VL2014____VL-WARNING-P.html">vl-warning-p</a> warning) warning))
        :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>vl-maybe-range-p-of-vl-datatype-range.range</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> vl-maybe-range-p-of-vl-datatype-range.range
        (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> common-lisp::?warning ?range)
              (<a href="VL2014____VL-DATATYPE-RANGE.html">vl-datatype-range</a> x)))
            (<a href="VL2014____VL-MAYBE-RANGE-P.html">vl-maybe-range-p</a> range))
        :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>vl-datatype-range-of-vl-datatype-fix-x</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> vl-datatype-range-of-vl-datatype-fix-x
        (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="VL2014____VL-DATATYPE-RANGE.html">vl-datatype-range</a> (<a href="VL2014____VL-DATATYPE-FIX.html">vl-datatype-fix</a> x))
               (<a href="VL2014____VL-DATATYPE-RANGE.html">vl-datatype-range</a> x)))</pre> 
<p><b>Theorem: </b>vl-datatype-range-vl-datatype-equiv-congruence-on-x</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> vl-datatype-range-vl-datatype-equiv-congruence-on-x
        (<a href="ACL2____IMPLIES.html">implies</a> (<a href="VL2014____VL-DATATYPE-EQUIV.html">vl-datatype-equiv</a> x x-equiv)
                 (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="VL2014____VL-DATATYPE-RANGE.html">vl-datatype-range</a> x)
                        (<a href="VL2014____VL-DATATYPE-RANGE.html">vl-datatype-range</a> x-equiv)))
        :rule-classes :congruence)</pre> 

</body>
</html>
