<html>
<head>
<meta charset="UTF-8">
<title>Def-saved-obligs</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____DEF-SAVED-OBLIGS">Click for Def-saved-obligs in the Full Manual</a></h3>

<p>Save the proof obligations for a given event as separate defthms.</p><p>Say you'd like to admit a function and verify its guards, but you 
want its termination and guard proof obligations to be saved as defthms so that 
you can use them later.  Here is how to do this with def-saved-obligs:</p> 
 
<pre class="code">(<a href="ACL2____DEF-SAVED-OBLIGS.html">def-saved-obligs</a> foo-obligs
  :proofs ((foo-measure-thm :hints (...))
           (foo-guard-thm   :hints (...)))
  (<a href="COMMON-LISP____DEFUN.html">defun</a> foo (x y)
    (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard ...))
    ...))</pre> 
 
<h5>Notes</h5> 
 
<p>Major caveat: This works by trying to admit the proof obligations as defthms 
before admitting the actual events.  In some cases this isn't possible: e.g., 
for termination conditions of some reflexive functions and guard verifications 
involving some requirement about the result of a recursive call.  For guards, 
it should work to defer the guard verification to a separate def-saved-obligs 
event from the one with the defun.  For reflexive functions, you're out of luck 
with this macro, for the present.</p> 
 
<p>The :proofs entries should occur in the order that the corresponding proof 
obligations are tackled by ACL2.</p> 
 
<p>The theorems produced will all have :rule-classes nil.</p> 
 
<p>The ambient theory may affect the proof obligations that are saved.  It 
might make sense to do <span class="v">(<a href="ACL2____LOCAL.html">local</a> (<a href="ACL2____IN-THEORY.html">in-theory</a> nil))</span> when you use this.</p> 
 
<h5>Implementation</h5> 
 
<p>This macro expands to a make-event form.  In the make-event expansion phase, 
the events are run with some default hints installed that record each proof 
obligation and avoid having to actually complete the proof. on every proof 
obligation, push the corresponding clause onto a state global, and then 
unsoundly complete the proof by instantiating a bogus theorem NIL submitted 
using skip-proofs.  (Since the use of skip-proofs is only in the make-event 
expansion phase, its effects are erased and it is allowed by certify-book even 
without :skip-proofs-okp.)</p> 
</body>
</html>
