<html>
<head>
<meta charset="UTF-8">
<title>Must-eval-to</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____MUST-EVAL-TO">Click for Must-eval-to in the Full Manual</a></h3>

<p>A top-level <span class="tt"><a href="ACL2____ASSERT_42.html">assert$</a></span>-like command to ensure that 
          a form evaluates to a non-erroneous error triple 
          with the value of a specified expression.</p><pre class="code">(<a href="ACL2____MUST-EVAL-TO.html">must-eval-to</a> form
              expr
              :ld-skip-proofsp ...
              :with-output-off ...
              :check-expansion ....)</pre> 
 
   <p><span class="v">Form</span> should evaluate to an error triple <span class="v">(<a href="ACL2____MV.html">mv</a> erp val state)</span>. 
   If <span class="v">erp</span> is <span class="v">nil</span> and <span class="v">val</span> is the value of <span class="v">expr</span> 
   then <span class="v">(<a href="ACL2____MUST-EVAL-TO.html">must-eval-to</a> form expr)</span> expands to <span class="v">(<a href="ACL2____VALUE-TRIPLE.html">value-triple</a> 'val)</span>; 
   otherwise expansion causes an appropriate soft error. 
   Note that both <span class="v">form</span> and <span class="v">expr</span> are evaluated.</p> 
 
   <p>The <span class="v">:ld-skip-proofsp</span> option sets the value of <span class="tt"><a href="ACL2____LD-SKIP-PROOFSP.html">ld-skip-proofsp</a></span> 
   to use for evaluating <span class="v">form</span>, 
   unless it is <span class="v">:default</span>, which is the default, 
   in which case <span class="tt"><a href="ACL2____LD-SKIP-PROOFSP.html">ld-skip-proofsp</a></span> retains its current value.</p> 
 
   <p>The <span class="v">:with-output-off</span> option serves to suppress output from <span class="v">form</span>: 
   when not <span class="v">nil</span>, 
   it is used as the <span class="v">:off</span> argument of <span class="tt"><a href="ACL2____WITH-OUTPUT.html">with-output</a></span>. 
   The default is <span class="v">:all</span>, i.e., all output is suppressed.</p> 
 
   <p>The <span class="v">:check-expansion</span> option determines whether <span class="v">form</span> 
   is re-run and re-checked at <span class="tt"><a href="ACL2____INCLUDE-BOOK.html">include-book</a></span> time; 
   see <span class="tt"><a href="ACL2____MAKE-EVENT.html">make-event</a></span>. 
   By default, it is not.</p> 
 
   <p><b>Macro: </b>must-eval-to</p><pre class="code">(<a href="COMMON-LISP____DEFMACRO.html">defmacro</a>
 must-eval-to
 (<a href="COMMON-LISP_____62WHOLE.html">&amp;whole</a> must-eval-to-form form
         expr &amp;key (<a href="ACL2____LD-SKIP-PROOFSP.html">ld-skip-proofsp</a> ':default)
         (with-output-off ':all)
         (check-expansion 'nil
                          check-expansion-p))
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="ACL2____BOOLEANP.html">booleanp</a> check-expansion)))
 (<a href="COMMON-LISP____LET_A2.html">let*</a>
  ((<a href="ACL2____BODY.html">body</a>
    (<a href="COMMON-LISP____CONS.html">cons</a>
     'er-let*
     (<a href="COMMON-LISP____CONS.html">cons</a>
      (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> 'form-val-use-nowhere-else
                  (<a href="COMMON-LISP____CONS.html">cons</a> form 'nil))
            'nil)
      (<a href="COMMON-LISP____CONS.html">cons</a>
       (<a href="COMMON-LISP____CONS.html">cons</a>
        'let
        (<a href="COMMON-LISP____CONS.html">cons</a>
         (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> 'expr-val
                     (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> 'check-vars-not-free
                                 (<a href="COMMON-LISP____CONS.html">cons</a> '(form-val-use-nowhere-else)
                                       (<a href="COMMON-LISP____CONS.html">cons</a> expr 'nil)))
                           'nil))
               'nil)
         (<a href="COMMON-LISP____CONS.html">cons</a>
          (<a href="COMMON-LISP____CONS.html">cons</a>
           'cond
           (<a href="COMMON-LISP____CONS.html">cons</a>
            '((<a href="COMMON-LISP____EQUAL.html">equal</a> form-val-use-nowhere-else expr-val)
              (<a href="ACL2____VALUE.html">value</a> (<a href="COMMON-LISP____LIST.html">list</a> 'value-triple
                           (<a href="COMMON-LISP____LIST.html">list</a> 'quote expr-val))))
            (<a href="COMMON-LISP____CONS.html">cons</a>
             (<a href="COMMON-LISP____CONS.html">cons</a>
              't
              (<a href="COMMON-LISP____CONS.html">cons</a>
               (<a href="COMMON-LISP____CONS.html">cons</a>
                'er
                (<a href="COMMON-LISP____CONS.html">cons</a>
                 'soft
                 (<a href="COMMON-LISP____CONS.html">cons</a>
                  (<a href="COMMON-LISP____CONS.html">cons</a>
                   'msg
                   (<a href="COMMON-LISP____CONS.html">cons</a>
                    '"( MUST-EVAL-TO ~@0 ~@1)"
                    (<a href="COMMON-LISP____CONS.html">cons</a>
                     (<a href="COMMON-LISP____CONS.html">cons</a> 'tilde-@-abbreviate-object-phrase
                           (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> 'quote (<a href="COMMON-LISP____CONS.html">cons</a> form 'nil))
                                 'nil))
                     (<a href="COMMON-LISP____CONS.html">cons</a>
                          (<a href="COMMON-LISP____CONS.html">cons</a> 'tilde-@-abbreviate-object-phrase
                                (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> 'quote (<a href="COMMON-LISP____CONS.html">cons</a> expr 'nil))
                                      'nil))
                          'nil))))
                  (<a href="COMMON-LISP____CONS.html">cons</a>
                   '"Evaluation returned ~X01, not the value ~x2 of ~
                            the expression ~x3."
                   (<a href="COMMON-LISP____CONS.html">cons</a>
                    'form-val-use-nowhere-else
                    (<a href="COMMON-LISP____CONS.html">cons</a> '(<a href="ACL2____EVISC-TUPLE.html">evisc-tuple</a> 4 3 nil nil)
                          (<a href="COMMON-LISP____CONS.html">cons</a> 'expr-val
                                (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> 'quote (<a href="COMMON-LISP____CONS.html">cons</a> expr 'nil))
                                      'nil))))))))
               'nil))
             'nil)))
          'nil)))
       'nil))))
   (form
    (<a href="COMMON-LISP____CONS.html">cons</a>
     'make-event
     (<a href="COMMON-LISP____CONS.html">cons</a>
          (<a href="COMMON-LISP____IF.html">if</a> (<a href="COMMON-LISP____EQ.html">eq</a> ld-skip-proofsp :default)
              body
              (<a href="COMMON-LISP____CONS.html">cons</a> 'state-global-let*
                    (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> 'ld-skip-proofsp
                                      (<a href="COMMON-LISP____CONS.html">cons</a> ld-skip-proofsp 'nil))
                                'nil)
                          (<a href="COMMON-LISP____CONS.html">cons</a> body 'nil))))
          (<a href="COMMON-LISP____CONS.html">cons</a> ':on-behalf-of
                (<a href="COMMON-LISP____CONS.html">cons</a> must-eval-to-form
                      (<a href="COMMON-LISP____AND.html">and</a> check-expansion-p
                           (<a href="COMMON-LISP____CONS.html">cons</a> ':check-expansion
                                 (<a href="COMMON-LISP____CONS.html">cons</a> check-expansion 'nil)))))))))
  (<a href="COMMON-LISP____COND.html">cond</a> (with-output-off
             (<a href="COMMON-LISP____CONS.html">cons</a> 'with-output
                   (<a href="COMMON-LISP____CONS.html">cons</a> ':off
                         (<a href="COMMON-LISP____CONS.html">cons</a> with-output-off (<a href="COMMON-LISP____CONS.html">cons</a> form 'nil)))))
        (t form))))</pre>
</body>
</html>
