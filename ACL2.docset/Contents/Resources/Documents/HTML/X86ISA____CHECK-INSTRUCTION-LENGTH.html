<html>
<head>
<meta charset="UTF-8">
<title>Check-instruction-length</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=X86ISA____CHECK-INSTRUCTION-LENGTH">Click for Check-instruction-length in the Full Manual</a></h3>

<p>Check if the length of an instruction exceeds 15 bytes.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(check-instruction-length start-rip temp-rip delta-rip) 
   
badlength?</pre></dt>
<dt>Returns</dt>
<dd>
<span class="tt">badlength?</span>  <font color="#606060">Type <span class="v">(<a href="ACL2____MAYBE-NATP.html">acl2::maybe-natp</a> badlength?)</span>.</font>
</dd> 
 
</dl></div> 
<p> 
   The maximum length of an instruction is 15 bytes; 
   a longer instruction causes a #GP(0) exception. 
   See AMD manual, Dec'17, Volume 2, Table 8-6. 
   This function is used to check this condition. 
   </p> 
   <p> 
   The <span class="v">start-rip</span> argument is 
   the instruction pointer at the beginning of the instruction. 
   The <span class="v">temp-rip</span> argument is generally 
   the instruction pointer just past the end of the instruction, 
   in which case the <span class="v">delta-rip</span> argument is 0. 
   In the other cases, <span class="v">delta-rip</span> is a small non-zero number, 
   and <span class="v">temp-rip + delta-rip</span> is 
   the instruction pointer just past the end of the instruction. 
   </p> 
   <p> 
   This function returns <span class="v">nil</span> if the length does not exceed 15 bytes. 
   Otherwise, this function returns the offending length (a number above 15), 
   which is useful for error reporting in the model. 
   </p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>check-instruction-length$inline</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a> check-instruction-length$inline
       (start-rip temp-rip delta-rip)
       (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____TYPE.html">type</a> (signed-byte 48) start-rip)
                (<a href="COMMON-LISP____TYPE.html">type</a> (signed-byte 48) temp-rip)
                (<a href="COMMON-LISP____TYPE.html">type</a> (unsigned-byte 3) delta-rip))
       (<a href="ACL2____B_A2.html">b*</a> ((start-rip (<a href="ACL2____MBE.html">mbe</a> :logic (<a href="ACL2____IFIX.html">ifix</a> start-rip)
                            :exec start-rip))
            (temp-rip (<a href="ACL2____MBE.html">mbe</a> :logic (<a href="ACL2____IFIX.html">ifix</a> temp-rip)
                           :exec temp-rip))
            (delta-rip (<a href="ACL2____MBE.html">mbe</a> :logic (<a href="ACL2____NFIX.html">nfix</a> delta-rip)
                            :exec delta-rip))
            ((<a href="COMMON-LISP____THE.html">the</a> (signed-byte 49) end-rip)
             (<a href="COMMON-LISP_____B2.html">+</a> (<a href="COMMON-LISP____THE.html">the</a> (signed-byte 48) temp-rip)
                (<a href="COMMON-LISP____THE.html">the</a> (unsigned-byte 3) delta-rip)))
            ((<a href="COMMON-LISP____THE.html">the</a> (signed-byte 50) length)
             (<a href="COMMON-LISP____-.html">-</a> (<a href="COMMON-LISP____THE.html">the</a> (signed-byte 49) end-rip)
                (<a href="COMMON-LISP____THE.html">the</a> (signed-byte 48) start-rip))))
           (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP_____E3.html">&gt;</a> length 15) length)))</pre> 
<p><b>Theorem: </b>maybe-natp-of-check-instruction-length</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 maybe-natp-of-check-instruction-length
 (<a href="ACL2____B_A2.html">b*</a>
  ((badlength?
    (check-instruction-length$inline start-rip temp-rip delta-rip)))
  (<a href="ACL2____MAYBE-NATP.html">acl2::maybe-natp</a> badlength?))
 :rule-classes :rewrite)</pre> 

</body>
</html>
