<html>
<head>
<meta charset="UTF-8">
<title>Tshell</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____TSHELL">Click for Tshell in the Full Manual</a></h3>

<p>A fancy alternative to <a href="ACL2____SYS-CALL.html">sys-call</a> that features output streaming 
and capture, exit-code capture, interruption, and better control over when 
forking occurs.</p><p><b>Tshell</b> is an ACL2 wrapper around the <a href="https://github.com/jaredcdavis/shellpool/" target="_blank"><nobr>Shellpool<img src="../Icon_External_Link.png" title="External link to https://github.com/jaredcdavis/shellpool/"></nobr></a> library for 
Common Lisp, which is available via <a href="ACL2____QUICKLISP.html">quicklisp</a>.  It allows you to run 
external programs from within ACL2, and has many nice features for handling 
output, etc.</p> 
 
<p>Shellpool has its own <a href="https://github.com/jaredcdavis/shellpool/blob/master/DOC.md" target="_blank"><nobr>API 
documentation<img src="../Icon_External_Link.png" title="External link to https://github.com/jaredcdavis/shellpool/blob/master/DOC.md"></nobr></a>, which you may find useful.</p> 
 
 
<h3>Usage</h3> 
 
<p>Note that Tshell requires <a href="ACL2____TRUST-TAG.html">trust-tag</a>s because its implementation 
requires some raw Lisp code.  The book to load is:</p> 
 
<pre class="code">(<a href="ACL2____INCLUDE-BOOK.html">include-book</a> "centaur/misc/tshell" :dir :system)</pre> 
 
<p>After loading this book, the first step is then to launch one or more 
shells, e.g.,</p> 
 
<pre class="code">(<a href="ACL2____VALUE-TRIPLE.html">value-triple</a> (<a href="ACL2____TSHELL-ENSURE.html">tshell-ensure</a>))</pre> 
 
<p>This is a thin wrapper around <span class="v">shellpool:ensure</span>.  It launches the 
subsidiary bash shells that tshell/shellpool will use to run programs.  This 
step requires forking ACL2 itself, so you typically want to do this early in 
your ACL2 session, before you have allocated tons of memory.</p> 
 
<p>After that, you can start launching programs using <a href="ACL2____TSHELL-CALL.html">tshell-call</a> or 
<a href="ACL2____TSHELL-RUN-BACKGROUND.html">tshell-run-background</a>.  For instance,</p> 
 
<pre class="code">ACL2 !&gt;(<a href="ACL2____TSHELL-CALL.html">tshell-call</a> "echo hello")
(<a href="ACL2____TSHELL-CALL.html">tshell-call</a> "echo hello")
hello             ;; &lt;-- output from subprogram, streamed
(0 ("hello"))   ;; &lt;-- exit code 0, output lines</pre>
</body>
</html>
