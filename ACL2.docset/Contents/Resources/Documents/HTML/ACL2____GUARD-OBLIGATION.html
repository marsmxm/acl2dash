<html>
<head>
<meta charset="UTF-8">
<title>Guard-obligation</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____GUARD-OBLIGATION">Click for Guard-obligation in the Full Manual</a></h3>

<p>The guard proof obligation</p><p>See <a href="ACL2____VERIFY-GUARDS.html">verify-guards</a>, and see <a href="ACL2____GUARD.html">guard</a> for a discussion of 
 guards.  <span class="v">Guard-obligation</span> is a low-level function for use in system 
 programs, not typically appropriate for most ACL2 users.  A corresponding 
 user-level utility is <a href="ACL2____VERIFY-GUARDS-FORMULA.html">verify-guards-formula</a>; also see <a href="ACL2____GUARD-FORMULA-UTILITIES.html">guard-formula-utilities</a> for related utilities.</p> 
 
 <pre class="code">Example Forms:
(<a href="ACL2____GUARD-OBLIGATION.html">guard-obligation</a> 'foo nil t t 'top-level state)
(<a href="ACL2____GUARD-OBLIGATION.html">guard-obligation</a> '(<a href="COMMON-LISP____IF.html">if</a> (<a href="COMMON-LISP____CONSP.html">consp</a> x) (foo (<a href="COMMON-LISP____CAR.html">car</a> x)) t) nil nil t 'my-fn state)

General Forms:
(<a href="ACL2____GUARD-OBLIGATION.html">guard-obligation</a> name rrp guard-debug guard-simplify ctx state)
(<a href="ACL2____GUARD-OBLIGATION.html">guard-obligation</a> term rrp guard-debug guard-simplify ctx state)</pre> 
 
 <p>where the first argument is either the name of a function or theorem or is 
 a non-variable term that may be in untranslated form; <span class="v">rrp</span> (``return 
 redundant p'') is non-<span class="v">nil</span> when it is permissible to return a value of 
 <span class="v">'redundant</span> in the first (name) case (and is irrelevant in the term case); 
 <span class="v">guard-debug</span> is typically <span class="v">nil</span> but may be <span class="v">t</span> (see <a href="ACL2____GUARD-DEBUG.html">guard-debug</a>); <span class="v">guard-simplify</span> is typically <span class="v">t</span> but may be <span class="v">nil</span> 
 (see <a href="ACL2____VERIFY-GUARDS.html">verify-guards</a>); <span class="v">ctx</span> is a context (typically, a symbol used in 
 error and warning messages); and <span class="tt"><a href="ACL2____STATE.html">state</a></span> references the ACL2 <a href="ACL2____STATE.html">state</a>.</p> 
 
 <p>If you want to obtain the formula but you don't care about the so-called 
 ``tag tree'':</p> 
 
 <pre class="code">(<a href="ACL2____MV-LET.html">mv-let</a> (erp val)
        (<a href="ACL2____GUARD-OBLIGATION.html">guard-obligation</a> x nil guard-debug guard-simplify 'top-level state)
        (<a href="COMMON-LISP____IF.html">if</a> erp
           ( .. code for handling error case, e.g., name is undefined .. )
          (<a href="COMMON-LISP____LET.html">let</a> ((cl-set (<a href="COMMON-LISP____CADR.html">cadr</a> val))) ; to be proved for guard verification
            ( .. code using cl-set, which is a list of clauses,
                 implicitly conjoined, each of which is viewed as
                 a disjunction .. ))))</pre> 
 
 <p>The form <span class="v">(<a href="ACL2____GUARD-OBLIGATION.html">guard-obligation</a> x rrp guard-debug guard-simplify ctx state)</span> 
 evaluates to a pair <span class="v">(<a href="ACL2____MV.html">mv</a> erp val)</span>, where <span class="v">erp</span> is <span class="v">nil</span> unless there 
 is an error.  (Actually, this is a context-message pair; see the source code's 
 ``Essay on Context-message Pairs''for relevant information.)  Suppose <span class="v">erp</span> 
 is <span class="v">nil</span>.  Then <span class="v">val</span> is the keyword <span class="v">:redundant</span> if the 
 corresponding <span class="tt"><a href="ACL2____VERIFY-GUARDS.html">verify-guards</a></span> event would be redundant and <span class="v">rrp</span> is 
 not <span class="v">nil</span>; see <a href="ACL2____REDUNDANT-EVENTS.html">redundant-events</a>.  Otherwise, <span class="v">val</span> is a tuple 
 <span class="v">(<a href="COMMON-LISP____LIST_A2.html">list*</a> names cl-set ttree)</span>, where: <span class="v">names</span> is <span class="v">(<a href="COMMON-LISP____CONS.html">cons</a> :term xt)</span> if 
 <span class="v">x</span> is not a variable, where <span class="v">xt</span> is the translated form of <span class="v">x</span>; and 
 otherwise is a list containing <span class="v">x</span> along with, if <span class="v">x</span> is defined in a 
 <span class="v">mutual-recursion</span>, any other functions defined in the same <span class="tt"><a href="ACL2____MUTUAL-RECURSION.html">mutual-recursion</a></span> nest; <span class="v">cl-set</span> is a list of lists of terms, viewed as a 
 conjunction of clauses (each viewed (as a disjunction); and <span class="v">ttree</span> is an 
 assumption-free tag-tree that justifies cl-set.  (The notion of ``tag-tree'' 
 may probably be ignored except for system developers.)</p> 
 
 <p><span class="v">Guard-obligation</span> is typically used for function names or non-variable 
 terms, but as for <span class="tt"><a href="ACL2____VERIFY-GUARDS.html">verify-guards</a></span>, it may also be applied to theorem 
 names.</p> 
 
 <p>See the source code for <span class="tt"><a href="ACL2____VERIFY-GUARDS-FORMULA.html">verify-guards-formula</a></span> for an example of how 
 to use <span class="v">guard-obligation</span>.</p>
</body>
</html>
