<html>
<head>
<meta charset="UTF-8">
<title>Hons-resize</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____HONS-RESIZE">Click for Hons-resize in the Full Manual</a></h3>

<p><span class="v">(<a href="ACL2____HONS-RESIZE.html">hons-resize</a> ...)</span> can be used to manually adjust the sizes of 
the hash tables that govern which ACL2 Objects are considered <a href="ACL2____NORMED.html">normed</a>.</p><p>General form:</p> 
 
 <pre class="code">(<a href="ACL2____HONS-RESIZE.html">hons-resize</a> [:str-ht size]
             [:nil-ht size]
             [:cdr-ht size]
             [:cdr-ht-eql size]
             [:addr-ht size]
             [:other-ht size]
             [:sbits size]
             [:fal-ht size]
             [:persist-ht size])</pre> 
 
 <p>Example:</p> 
 
 <pre class="code">(<a href="ACL2____HONS-RESIZE.html">hons-resize</a> :str-ht 100000
             :addr-ht (<a href="COMMON-LISP____EXPT.html">expt</a> 2 27))</pre> 
 
 <p>Logically, <span class="v">hons-resize</span> just returns nil; we leave it enabled and would 
 think it odd to ever prove a theorem about it.</p> 
 
 <p>Under the hood, <span class="v">hons-resize</span> can be used to change the sizes of certain 
 hash tables in the Hons Space.</p> 
 
 <p>All arguments are optional.  The size given to each argument should either 
 be nil (the default) or a natural number.  A natural number indicates the 
 newly desired size for the hash table, whereas nil means "don't resize this 
 table." Any non-natural argument is regarded as nil.</p> 
 
 <p>You may wish to call this function for two reasons.</p> 
 
 <p>1.  Improving Performance by Resizing Up</p> 
 
 <p>Since the hash tables in the Hons Space automatically grow as new objects 
 are normed, <span class="v">hons-resize</span> is unnecessary.  But automatic growth can be slow 
 because it is incremental: a particular hash table might be grown dozens of 
 times over the course of your application.  Using <span class="v">hons-resize</span> to pick a 
 more appropriate initial size may help to reduce this overhead.</p> 
 
 <p>2.  Reducing Memory Usage by Resizing Down</p> 
 
 <p>Resizing can also be used to shrink the hash tables.  This might possibly 
 be useful immediately after a <span class="tt"><a href="ACL2____HONS-CLEAR.html">hons-clear</a></span> to free up memory taken by 
 the hash tables themselves.  (Of course, the tables will grow again as you 
 create new normed objects.)</p> 
 
 <p>Advice for using <span class="v">hons-resize</span>.</p> 
 
 <p>Note that hash tables that are already close to the desired size, or which 
 have too many elements to fit into the desired size, will not actually be 
 resized.  This makes resizing relatively "safe."</p> 
 
 <p>Note that the <span class="tt"><a href="ACL2____HONS-SUMMARY.html">hons-summary</a></span> function can be used to see how large 
 and how full your hash tables are.  This may be useful in deciding what sizes 
 you want to give to <span class="v">hons-resize</span>.</p> 
 
 <p>Note that <span class="v">hons-resize</span> operates by (1) allocating new hash tables, then 
 (2) copying everything from the old hash table into the new table.  Because of 
 this, for best performance you should ideally call it when the hash tables 
 involved are minimally populated, i.e., at the start of your application, or 
 soon after a <span class="tt"><a href="ACL2____HONS-CLEAR.html">hons-clear</a></span>.</p>
</body>
</html>
