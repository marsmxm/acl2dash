<html>
<head>
<meta charset="UTF-8">
<title>Vl-gateinst-gate-elim</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=VL2014____VL-GATEINST-GATE-ELIM">Click for Vl-gateinst-gate-elim in the Full Manual</a></h3>

<p>Try to convert a single gate into one of VL's primitive modules.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(vl-gateinst-gate-elim x primalist warnings) 
   
(mv warnings gateinsts modinsts addmods)</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">x</span>  <font color="#606060">Guard <span class="v">(<a href="VL2014____VL-GATEINST-P.html">vl-gateinst-p</a> x)</span>.</font>
</dd> 
  <dd>
<span class="tt">primalist</span>  Mapping from gate types to primitive modules.<br><font color="#606060">Guard <span class="v">(<a href="VL2014____VL-PRIMALIST-P.html">vl-primalist-p</a> primalist)</span>.</font>
</dd> 
  <dd>
<span class="tt">warnings</span>  <font color="#606060">Guard <span class="v">(<a href="VL2014____VL-WARNINGLIST-P.html">vl-warninglist-p</a> warnings)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">warnings</span>  <font color="#606060">Type <span class="v">(<a href="VL2014____VL-WARNINGLIST-P.html">vl-warninglist-p</a> warnings)</span>.</font>
</dd> 
<dd>
<span class="tt">gateinsts</span>  <font color="#606060">Type <span class="v">(<a href="VL2014____VL-GATEINSTLIST-P.html">vl-gateinstlist-p</a> gateinsts)</span>, given <span class="v">(<a href="ACL2____FORCE.html">force</a> (<a href="VL2014____VL-GATEINST-P.html">vl-gateinst-p</a> x))</span>.</font>
</dd> 
<dd>
<span class="tt">modinsts</span>  <font color="#606060">Type <span class="v">(<a href="VL2014____VL-MODINSTLIST-P.html">vl-modinstlist-p</a> modinsts)</span>, given <span class="v">(<a href="ACL2____FORCE.html">force</a> (<a href="VL2014____VL-GATEINST-P.html">vl-gateinst-p</a> x))</span>.</font>
</dd> 
<dd>
<span class="tt">addmods</span>  <font color="#606060">Type <span class="v">(<a href="VL2014____VL-MODULELIST-P.html">vl-modulelist-p</a> addmods)</span>, given <span class="v">(<a href="ACL2____FORCE.html">force</a> (<a href="VL2014____VL-GATEINST-P.html">vl-gateinst-p</a> x))</span>.</font>
</dd> 
 
</dl></div> 
<p>We try to convert the gate instance <span class="v">x</span> into an instance of the 
corresponding <a href="VL2014____PRIMITIVES.html">primitive</a> VL module.  We 
return new lists of <span class="v">gateinsts</span> and <span class="v">modinsts</span> that should collectively 
replace this gate instance.  The idea is that the replacement 
gateinsts/modinsts should be equivalent to the gate being eliminated.</p> 
 
<p>We may fail to eliminate <span class="v">x</span> for several reasons, for instance:</p> 
 
<ul> 
 
<li>it has more than the usual number of arguments (higher arity gates can 
simplified by <a href="VL2014____GATESPLIT.html">gatesplit</a>,</li> 
 
<li>it is an array of gates (these can be split up by <a href="VL2014____REPLICATE-INSTS.html">replicate-insts</a>),</li> 
 
<li>it has blank arguments (these can be handled by <a href="VL2014____BLANKARGS.html">blankargs</a>), or</li> 
 
<li>its arguments are not one-bit expressions, since these sometimes have odd 
semantics in Cadence (see for instance the comments in <a href="VL2014____VL-MAKE-GATES-FOR-BUF_F2NOT.html">vl-make-gates-for-buf/not</a>, which is part of the gatesplit transform.)</li> 
 
</ul> 
 
<p>In case of such a failure, we add non-fatal warnings to explain what 
happened and leave the gate unchanged.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>vl-gateinst-gate-elim</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 vl-gateinst-gate-elim
 (x primalist warnings)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="VL2014____VL-GATEINST-P.html">vl-gateinst-p</a> x)
                             (<a href="VL2014____VL-PRIMALIST-P.html">vl-primalist-p</a> primalist)
                             (<a href="VL2014____VL-WARNINGLIST-P.html">vl-warninglist-p</a> warnings))))
 (<a href="COMMON-LISP____LET.html">let</a>
  ((__function__ 'vl-gateinst-gate-elim))
  (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
  (<a href="ACL2____B_A2.html">b*</a>
   (((<a href="VL2014____VL-GATEINST.html">vl-gateinst</a> x) x)
    (target (<a href="COMMON-LISP____CDR.html">cdr</a> (<a href="ACL2____HONS-ASSOC-EQUAL.html">hons-assoc-equal</a> x.type primalist)))
    (exprs (<a href="VL2014____VL-PLAINARGLIST-_E3EXPRS.html">vl-plainarglist-&gt;exprs</a> x.args))
    ((unless target)
     (<a href="ACL2____MV.html">mv</a>
      (<a href="VL2014____WARN.html">warn</a>
       :type :vl-gate-elim-fail
       :msg
       "~a0: gates of type ~x1 are not supported by ~
                        gate-elim; leaving this gate unchanged."
       :args (<a href="COMMON-LISP____LIST.html">list</a> x x.type))
      (<a href="COMMON-LISP____LIST.html">list</a> x)
      nil nil))
    (target (<a href="VL2014____VL-MODULE-FIX.html">vl-module-fix</a> target))
    (ports (<a href="VL2014____VL-MODULE-_E3PORTS.html">vl-module-&gt;ports</a> target))
    ((unless (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP____NOT.html">not</a> x.range)
                  (<a href="COMMON-LISP____NOT.html">not</a> (<a href="VL2014____VL-COLLECT-INTERFACE-PORTS.html">vl-collect-interface-ports</a> ports))
                  (same-lengthp x.args ports)
                  (<a href="COMMON-LISP____NOT.html">not</a> (<a href="COMMON-LISP____MEMBER.html">member</a> nil exprs))
                  (<a href="ACL2____ALL-EQUALP.html">all-equalp</a> 1 (<a href="VL2014____VL-EXPRLIST-_E3FINALWIDTHS.html">vl-exprlist-&gt;finalwidths</a> exprs))))
     (<a href="ACL2____MV.html">mv</a>
      (<a href="VL2014____WARN.html">warn</a>
       :type :vl-gate-elim-fail
       :msg
       "~a0: gates with ~s1 are not supported by gate-elim; ~
                        leaving this gate unchanged."
       :args (<a href="COMMON-LISP____LIST.html">list</a> x
                   (<a href="COMMON-LISP____COND.html">cond</a> (x.range "arrays")
                         ((<a href="COMMON-LISP____NOT.html">not</a> (same-lengthp x.args ports))
                          "extra arguments")
                         ((<a href="COMMON-LISP____MEMBER.html">member</a> nil exprs) "blank arguments")
                         (t "wide arguments"))))
      (<a href="COMMON-LISP____LIST.html">list</a> x)
      nil nil))
    (<a href="ACL2____ARGS.html">args</a> (<a href="VL2014____VL-ADD-PORTNAMES-TO-PLAINARGS.html">vl-add-portnames-to-plainargs</a> x.args ports))
    (modinst
     (<a href="VL2014____MAKE-VL-MODINST.html">make-vl-modinst</a> :instname x.name
                      :modname (<a href="VL2014____VL-MODULE-_E3NAME.html">vl-module-&gt;name</a> target)
                      :portargs (<a href="VL2014____MAKE-VL-ARGUMENTS-PLAIN.html">make-vl-arguments-plain</a> :args args)
                      :paramargs (<a href="VL2014____MAKE-VL-PARAMARGS-PLAIN.html">make-vl-paramargs-plain</a> :args nil)
                      :loc x.loc)))
   (<a href="ACL2____MV.html">mv</a> (<a href="VL2014____OK.html">ok</a>)
       nil (<a href="COMMON-LISP____LIST.html">list</a> modinst)
       (<a href="COMMON-LISP____LIST.html">list</a> target)))))</pre> 
<p><b>Theorem: </b>vl-warninglist-p-of-vl-gateinst-gate-elim.warnings</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> vl-warninglist-p-of-vl-gateinst-gate-elim.warnings
        (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> ?warnings ?gateinsts ?modinsts ?addmods)
              (<a href="VL2014____VL-GATEINST-GATE-ELIM.html">vl-gateinst-gate-elim</a> x primalist warnings)))
            (<a href="VL2014____VL-WARNINGLIST-P.html">vl-warninglist-p</a> warnings))
        :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>vl-gateinstlist-p-of-vl-gateinst-gate-elim.gateinsts</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
     vl-gateinstlist-p-of-vl-gateinst-gate-elim.gateinsts
     (<a href="ACL2____IMPLIES.html">implies</a> (<a href="ACL2____FORCE.html">force</a> (<a href="VL2014____VL-GATEINST-P.html">vl-gateinst-p</a> x))
              (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> ?warnings ?gateinsts ?modinsts ?addmods)
                    (<a href="VL2014____VL-GATEINST-GATE-ELIM.html">vl-gateinst-gate-elim</a> x primalist warnings)))
                  (<a href="VL2014____VL-GATEINSTLIST-P.html">vl-gateinstlist-p</a> gateinsts)))
     :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>vl-modinstlist-p-of-vl-gateinst-gate-elim.modinsts</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
     vl-modinstlist-p-of-vl-gateinst-gate-elim.modinsts
     (<a href="ACL2____IMPLIES.html">implies</a> (<a href="ACL2____FORCE.html">force</a> (<a href="VL2014____VL-GATEINST-P.html">vl-gateinst-p</a> x))
              (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> ?warnings ?gateinsts ?modinsts ?addmods)
                    (<a href="VL2014____VL-GATEINST-GATE-ELIM.html">vl-gateinst-gate-elim</a> x primalist warnings)))
                  (<a href="VL2014____VL-MODINSTLIST-P.html">vl-modinstlist-p</a> modinsts)))
     :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>vl-modulelist-p-of-vl-gateinst-gate-elim.addmods</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
     vl-modulelist-p-of-vl-gateinst-gate-elim.addmods
     (<a href="ACL2____IMPLIES.html">implies</a> (<a href="ACL2____FORCE.html">force</a> (<a href="VL2014____VL-GATEINST-P.html">vl-gateinst-p</a> x))
              (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> ?warnings ?gateinsts ?modinsts ?addmods)
                    (<a href="VL2014____VL-GATEINST-GATE-ELIM.html">vl-gateinst-gate-elim</a> x primalist warnings)))
                  (<a href="VL2014____VL-MODULELIST-P.html">vl-modulelist-p</a> addmods)))
     :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>vl-gateinst-gate-elim-mvtypes-1</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
  vl-gateinst-gate-elim-mvtypes-1
  (<a href="ACL2____TRUE-LISTP.html">true-listp</a> (<a href="ACL2____MV-NTH.html">mv-nth</a> 1
                      (<a href="VL2014____VL-GATEINST-GATE-ELIM.html">vl-gateinst-gate-elim</a> x primalist warnings)))
  :rule-classes :type-prescription)</pre> 
<p><b>Theorem: </b>vl-gateinst-gate-elim-mvtypes-2</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
  vl-gateinst-gate-elim-mvtypes-2
  (<a href="ACL2____TRUE-LISTP.html">true-listp</a> (<a href="ACL2____MV-NTH.html">mv-nth</a> 2
                      (<a href="VL2014____VL-GATEINST-GATE-ELIM.html">vl-gateinst-gate-elim</a> x primalist warnings)))
  :rule-classes :type-prescription)</pre> 
<p><b>Theorem: </b>vl-gateinst-gate-elim-mvtypes-3</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
  vl-gateinst-gate-elim-mvtypes-3
  (<a href="ACL2____TRUE-LISTP.html">true-listp</a> (<a href="ACL2____MV-NTH.html">mv-nth</a> 3
                      (<a href="VL2014____VL-GATEINST-GATE-ELIM.html">vl-gateinst-gate-elim</a> x primalist warnings)))
  :rule-classes :type-prescription)</pre> 

</body>
</html>
