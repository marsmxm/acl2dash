<html>
<head>
<meta charset="UTF-8">
<title>Add-meta-rule</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=RP____ADD-META-RULE">Click for Add-meta-rule in the Full Manual</a></h3>

<p>A macro to add created meta rules to RP-Rewriter</p><p> 
<pre class="code"><span class="v">
(<a href="RP____ADD-META-RULE.html">add-meta-rule</a> :meta-fnc &lt;meta-fnc-name&gt; ;; mandatory
               :trig-fnc &lt;trig-fnc-name&gt; ;; mandatory
               :formula-checks &lt;formula-check-fnc-name&gt; ;; nil by default,
 necessary for most cases.
               :returns &lt;return-signature&gt;   ;; optional
               :outside-in &lt;nil-t-or-:both&gt;  ;; optional, nil by default
               :valid-syntaxp &lt;t-or-nil&gt;     ;; optional, t by default
               :disabledp &lt;t-or-nil&gt;         ;; optional, t by default
               :hints    &lt;regular-ACL2-hints&gt; ;; optional
               :cl-name-prefix &lt;nil-or-a-unqiue-prefix&gt; ;; optional, nil by default
               )
</span> 
 </pre> 
 
registers a verified meta-rule for RP-Rewriter. 
</p> 
 
<p> Mandatory arguments: </p> 
<ul> 
<li> :meta-fnc  must be the name of the meta function. </li> 
<li> :trig-fnc  the function to trigger this meta function </li> 
</ul> 
 
<p> Optional Arguments: </p> 
 
<ul> 
<li> :formula-checks  the name of the formula-checks function created 
with def-formula-checks if the meta rule needed one. This will likely be 
necessary for most cases. </li> 
<li> :returns  return signature of the meta function. By default, it is 'term', 
which means that it only returns the rewritten term. Other acceptable forms are 
(mv term dont-rw), (mv term dont-rw rp-state), (mv term rp-state) etc. in any 
order. </li> 
<li> :rw-direction  whether the meta rule be applied from outside-in or 
inside-out. You can pass :inside-out, nil (same as :inside-out), :outside-in or 
:both. If you choose to make it an outside-in rule, 
then it is recommended that you input the current dont-rw structure to the meta 
function and update 
it accordingly. </li> 
<li> :valid-syntaxp  if you proved that your meta function returns rp-termp, 
then set this to t. Otherwise, RP-Rewriter will have to call rp-termp everytime 
the meta runction changes the term. </li> 
<li> :disabledp This macro will prove the necessary lemma to make sure that the 
meta function can be registered soundly (even though this lemma might be 
redundant). If you choose to keep this lemma disabled, then set this to t. It 
is, by default, set to t. </li> 
<li>:hints regular ACL2 hints passed to the defthm event of the aforementioned 
lemma to be proved.</li> 
<li> :cl-name-prefix Meta functions are attached to RP-Rewriter using a 
defattach mechanism. By default, add-meta-rule will not trigger this mechanism, 
and the user needs to call <a href="RP____ATTACH-META-FNCS.html">attach-meta-fncs</a> once all the necessary meta 
rules are created and included in the same book. If you wish to call <a href="RP____ATTACH-META-FNCS.html">attach-meta-fncs</a> automatically with rp::add-meta-rule, then pass a unique 
name for :cl-name-prefix. It is nil by default, which will prevent <a href="RP____ATTACH-META-FNCS.html">attach-meta-fncs</a> from being executed. </li> 
</ul> 

</body>
</html>
