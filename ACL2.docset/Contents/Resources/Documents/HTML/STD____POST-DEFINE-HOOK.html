<html>
<head>
<meta charset="UTF-8">
<title>Post-define-hook</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=STD____POST-DEFINE-HOOK">Click for Post-define-hook in the Full Manual</a></h3>

<p>A way to extend <a href="ACL2____DEFINE.html">define</a> to carry out additional behaviors.</p><p>The <a href="ACL2____DEFINE.html">define</a> macro can be configured with ``hooks'' to 
automatically generate and submit certain additional events.  For instance, the 
<a href="FTY____FIXEQUIV-HOOK.html">fty::fixequiv-hook</a> extends define to automatically prove certain 
congruence rules.</p> 
 
<p>This is an advanced and somewhat experimental feature.  To introduce a new 
post-define hook, first define a function of the signature:</p> 
 
<pre class="code">(my-hook-fn defguts user-args state) -&gt; (<a href="ACL2____MV.html">mv</a> er val state)</pre> 
 
<p>Here:</p> 
 
<ul> 
 
<li>the <span class="v">defguts</span> argument is a structure which will have information from 
the <span class="v">define</span> itself, see the comments in <span class="v">std/util/define.lisp</span> for 
details</li> 
 
<li>the <span class="v">user-args</span> are any arguments that can be passed to your hook 
function at <span class="v">define</span> time via the <span class="v">:hooks</span> argument, or via the default 
post-define hook mechanism.</li> 
 
<li>the return value is an ordinary ACL2 error triple, where the <span class="v">val</span> 
should be some additional events to submit.</li> 
 
</ul> 
 
<p>Once your function is defined, you can register it as a post-define hook as 
follows:</p> 
 
<pre class="code">(add-post-define-hook :myhook my-hook-fn)</pre> 
 
<p>And subsequently it will be legal to use <span class="v">:hooks ((:myhook ...))</span> or 
similar.  Define can also be configured with default post-define hooks, see 
<span class="v">add-default-post-define-hook</span> in the <span class="v">std/util/define.lisp</span> source code; 
also see the <span class="v">std/util/tests/define.lisp</span> file for some working 
examples.</p>
</body>
</html>
