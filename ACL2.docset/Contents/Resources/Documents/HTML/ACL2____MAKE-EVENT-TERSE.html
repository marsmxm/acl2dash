<html>
<head>
<meta charset="UTF-8">
<title>Make-event-terse</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____MAKE-EVENT-TERSE">Click for Make-event-terse in the Full Manual</a></h3>

<p>A variant of <span class="tt"><a href="ACL2____MAKE-EVENT.html">make-event</a></span> with terser screen output.</p><p>We wrap a normal <span class="tt"><a href="ACL2____MAKE-EVENT.html">make-event</a></span> 
     in a <span class="tt"><a href="ACL2____WITH-OUTPUT.html">with-output</a></span> that removes all the screen output 
     except possibly errors and except comments. 
     We also suppress the concluding error message of <span class="tt"><a href="ACL2____MAKE-EVENT.html">make-event</a></span> 
     (when an error occurs), 
     via <span class="v">:on-behalf-of :quiet!</span>.</p><p>The <span class="v">:suppress-errors</span> argument 
     determines whether errors should be also suppressed or not. 
     If this argument is <span class="v">nil</span> (the default), 
     errors are not suppressed, 
     but they are not enabled either; 
     that is, they retain the ``status'' they had before. 
     If this argument is non-<span class="v">nil</span> instead, errors are suppressed; 
     <span class="v">make-event-terse</span> will fail silently in case of an error, 
     so errors should not be suppressed in normal circumstances.</p><p>The reason why comments 
     (i.e. the kinds of outputs represented by <span class="v">comment</span> in <a href="ACL2____SET-INHIBIT-OUTPUT-LST.html">this list</a>) are not suppressed is that 
     the event macros that use <span class="v">make-event-terse</span> 
     normally support the <a href="ACL2____EVMAC-INPUT-PRINT-P.html">the <span class="v">:print</span> input</a>, which uses comment output for <span class="v">:result</span> and <span class="v">:info</span>. 
     Thus, these event macro outputs are controlled by <span class="v">:print</span>, 
     and should not be suppressed by <span class="v">make-event-terse</span>.</p><p>We save, via <span class="v">:stack :push</span>, the current status of the outputs, 
     so that, inside the form passed to <span class="v">make-event-terse</span>, 
     the saved output status can be selectively restored for some sub-forms. 
     The saved output status can be restored 
     via <span class="v">(<a href="ACL2____WITH-OUTPUT.html">with-output</a> :stack :pop ...)</span>, 
     or by using the <span class="tt"><a href="ACL2____RESTORE-OUTPUT.html">restore-output</a></span> 
     or <span class="tt"><a href="ACL2____RESTORE-OUTPUT_F3.html">restore-output?</a></span> utilities.</p><p>Currently <span class="v">make-event-terse</span> does not support 
     <span class="tt"><a href="ACL2____MAKE-EVENT.html">make-event</a></span>'s <span class="v">:check-expansion</span> and <span class="v">:expansion?</span>, 
     but it could be extended to support them 
     and pass them to <span class="tt"><a href="ACL2____MAKE-EVENT.html">make-event</a></span>.</p><p><b>Macro: </b>make-event-terse</p><pre class="code">(<a href="COMMON-LISP____DEFMACRO.html">defmacro</a>
 make-event-terse
 (form &amp;key (suppress-errors 'nil))
 (<a href="COMMON-LISP____CONS.html">cons</a>
  'with-output
  (<a href="COMMON-LISP____CONS.html">cons</a>
   ':gag-mode
   (<a href="COMMON-LISP____CONS.html">cons</a>
    'nil
    (<a href="COMMON-LISP____CONS.html">cons</a>
     ':off
     (<a href="COMMON-LISP____CONS.html">cons</a>
      (<a href="COMMON-LISP____IF.html">if</a> suppress-errors
          (<a href="ACL2____REMOVE-EQ.html">remove-eq</a> 'comment
                     *valid-output-names*)
          (<a href="ACL2____SET-DIFFERENCE-EQ.html">set-difference-eq</a> *valid-output-names* '(<a href="COMMON-LISP____ERROR.html">error</a> comment)))
      (<a href="COMMON-LISP____CONS.html">cons</a> ':stack
            (<a href="COMMON-LISP____CONS.html">cons</a> ':push
                  (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> 'make-event
                              (<a href="COMMON-LISP____CONS.html">cons</a> form '(:on-behalf-of :quiet!)))
                        'nil)))))))))</pre> 
 

</body>
</html>
