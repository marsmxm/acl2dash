<html>
<head>
<meta charset="UTF-8">
<title>Tailrec-process-old</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=APT____TAILREC-PROCESS-OLD">Click for Tailrec-process-old in the Full Manual</a></h3>

<p>Process the <span class="v">old</span> input.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(tailrec-process-old old variant verify-guards verbose ctx state) 
  → 
(mv erp result state)</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">verbose</span> — <font color="#606060">Guard <span class="v">(<a href="ACL2____BOOLEANP.html">booleanp</a> verbose)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">result</span> — A tuple <span class="v">(old$
                                    test&lt;x1,...,xn&gt;
                                    base&lt;x1,...,xn&gt;
                                    nonrec&lt;x1,...,xn&gt;
                                    (... update-xi&lt;x1...,xn&gt; ...)
                                    combine&lt;q,r&gt;
                                    q
                                    r)</span>, 
                        satisfying 
                        <span class="v">(typed-tuplep symbolp
                                         pseudo-termp
                                         pseudo-termp
                                         pseudo-termp
                                         pseudo-term-listp
                                         pseudo-termp
                                         symbolp
                                         symbolp
                                         result)</span>, 
                        where <span class="v">old$</span> is the name 
                        of the target function of the transformation 
                        (denoted by the <span class="v">old</span> input) 
                        and the other components 
                        are described in the documentation.</dd> 
 
</dl></div> 
<p> 
   Show the components of the function denoted by <span class="v">old</span> 
   if <span class="v">verbose</span> is <span class="v">t</span>. 
   </p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>tailrec-process-old</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 tailrec-process-old
 (old variant verify-guards verbose ctx state)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :stobjs (<a href="ACL2____STATE.html">state</a>)))
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="ACL2____BOOLEANP.html">booleanp</a> verbose)))
 (<a href="COMMON-LISP____LET.html">let</a>
  ((__function__ 'tailrec-process-old))
  (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
  (<a href="ACL2____B_A2.html">b*</a>
   ((wrld (<a href="ACL2____W.html">w</a> state))
    ((<a href="ACL2____ER.html">er</a> old$)
     (<a href="ACL2____ENSURE-FUNCTION-NAME-OR-NUMBERED-WILDCARD_42.html">ensure-function-name-or-numbered-wildcard$</a>
          old "The first input" t nil))
    (description (<a href="ACL2____MSG.html">msg</a> "The target function ~x0" old$))
    ((<a href="ACL2____ER.html">er</a> &amp;)
     (<a href="ACL2____ENSURE-FUNCTION-IS-LOGIC-MODE_42.html">ensure-function-is-logic-mode$</a> old$ description t nil))
    ((<a href="ACL2____ER.html">er</a> &amp;)
     (<a href="ACL2____ENSURE-FUNCTION-IS-DEFINED_42.html">ensure-function-is-defined$</a> old$ description t nil))
    ((<a href="ACL2____ER.html">er</a> &amp;)
     (<a href="ACL2____ENSURE-FUNCTION-NUMBER-OF-RESULTS_42.html">ensure-function-number-of-results$</a> old$ 1 description t nil))
    ((<a href="ACL2____ER.html">er</a> &amp;)
     (<a href="ACL2____ENSURE-FUNCTION-NO-STOBJS_42.html">ensure-function-no-stobjs$</a> old$ description t nil))
    ((<a href="ACL2____ER.html">er</a> &amp;)
     (<a href="ACL2____ENSURE-FUNCTION-SINGLY-RECURSIVE_42.html">ensure-function-singly-recursive$</a> old$ description t nil))
    ((<a href="ACL2____ER.html">er</a> &amp;)
     (<a href="ACL2____ENSURE-FUNCTION-KNOWN-MEASURE_42.html">ensure-function-known-measure$</a> old$ description t nil))
    (<a href="ACL2____BODY.html">body</a> (<a href="COMMON-LISP____IF.html">if</a> (<a href="ACL2____NON-EXECUTABLEP.html">non-executablep</a> old$ wrld)
              (<a href="ACL2____UNWRAPPED-NONEXEC-BODY.html">unwrapped-nonexec-body</a> old$ wrld)
              (<a href="ACL2____UBODY.html">ubody</a> old$ wrld)))
    (<a href="ACL2____BODY.html">body</a> (remove-lambdas body))
    ((<a href="ACL2____ER.html">er</a> (<a href="COMMON-LISP____LIST.html">list</a> test then else))
     (<a href="ACL2____ENSURE-TERM-IF-CALL_42.html">ensure-term-if-call$</a>
      body
      (<a href="ACL2____MSG.html">msg</a>
       "After translation and LET expansion, ~
                                    the body ~x0 of the target function ~x1"
       body old$)
      t nil))
    (then-calls-old-p (<a href="ACL2____FFNNAMEP.html">ffnnamep</a> old$ then))
    (else-calls-old-p (<a href="ACL2____FFNNAMEP.html">ffnnamep</a> old$ else))
    ((when (<a href="COMMON-LISP____AND.html">and</a> then-calls-old-p else-calls-old-p))
     (<a href="ACL2____ER-SOFT_B2.html">er-soft+</a>
      ctx t nil
      "After translation and LET expansion, ~
                   the body ~x0 of the target fuction ~x1 ~
                   must have one non-recursive top-level IF branch;
                   however, both branches call ~x1."
      body old$))
    ((<a href="ACL2____MV.html">mv</a> test base combine-nonrec-reccall)
     (<a href="COMMON-LISP____IF.html">if</a> then-calls-old-p
         (<a href="ACL2____MV.html">mv</a> (<a href="ACL2____DUMB-NEGATE-LIT.html">dumb-negate-lit</a> test) else then)
         (<a href="ACL2____MV.html">mv</a> test then else)))
    ((<a href="ACL2____ER.html">er</a> &amp;)
     (<a href="ACL2____ENSURE-TERM-DOES-NOT-CALL_42.html">ensure-term-does-not-call$</a>
      test old$
      (<a href="ACL2____MSG.html">msg</a>
       "After translation and LET expansion, ~
                      the exit test ~x0 ~
                      of the target function ~x1"
       test old$)
      t nil))
    ((<a href="ACL2____ER.html">er</a> &amp;)
     (<a href="COMMON-LISP____IF.html">if</a>
      (<a href="ACL2____MEMBER-EQ.html">member-eq</a> variant '(:monoid :monoid-alt))
      (<a href="ACL2____ENSURE-TERM-GROUND_42.html">ensure-term-ground$</a>
       base
       (<a href="ACL2____MSG.html">msg</a>
        "Since the :VARIANT input is ~s0~x1, ~
                          after translation and LET expansion, ~
                          the non-recursive branch ~x2 ~
                          of the target function ~x3"
        (<a href="COMMON-LISP____IF.html">if</a> (<a href="COMMON-LISP____EQ.html">eq</a> variant :monoid)
            "(perhaps by default) " "")
        variant base old$)
       t nil)
      (<a href="ACL2____VALUE.html">value</a> nil)))
    ((<a href="ACL2____ER.html">er</a> (<a href="COMMON-LISP____LIST.html">list</a> nonrec updates combine q r))
     (<a href="APT____TAILREC-DECOMPOSE-RECURSIVE-BRANCH.html">tailrec-decompose-recursive-branch</a>
          old$ combine-nonrec-reccall ctx state))
    ((<a href="ACL2____ER.html">er</a> &amp;)
     (<a href="COMMON-LISP____IF.html">if</a>
      (<a href="COMMON-LISP____EQ.html">eq</a> verify-guards t)
      (<a href="ACL2____ENSURE-FUNCTION-IS-GUARD-VERIFIED_42.html">ensure-function-is-guard-verified$</a>
       old$
       (<a href="ACL2____MSG.html">msg</a>
        "Since the :VERIFY-GUARDS input is T, ~
                          the target function ~x0"
        old$)
       t nil)
      (<a href="ACL2____VALUE.html">value</a> nil)))
    ((run-when verbose)
     (<a href="ACL2____CW.html">cw</a> "~%")
     (<a href="ACL2____CW.html">cw</a> "Components of the target function ~x0:~%"
         old$)
     (<a href="ACL2____CW.html">cw</a> "- Exit test: ~x0.~%"
         (<a href="ACL2____UNTRANSLATE.html">untranslate</a> test nil wrld))
     (<a href="ACL2____CW.html">cw</a> "- Base value: ~x0.~%"
         (<a href="ACL2____UNTRANSLATE.html">untranslate</a> base nil wrld))
     (<a href="ACL2____CW.html">cw</a> "- Non-recursive computation: ~x0.~%"
         (<a href="ACL2____UNTRANSLATE.html">untranslate</a> nonrec nil wrld))
     (<a href="ACL2____CW.html">cw</a> "- Argument updates: ~x0.~%"
         (untranslate-lst updates nil wrld))
     (<a href="ACL2____CW.html">cw</a> "- Combination operator: ~x0.~%"
         (<a href="ACL2____UNTRANSLATE.html">untranslate</a> combine nil wrld))
     (<a href="ACL2____CW.html">cw</a> "- Fresh variable for non-recursive computation: ~x0.~%"
         q)
     (<a href="ACL2____CW.html">cw</a> "- Fresh variable for recursive call: ~x0.~%"
         r)))
   (<a href="ACL2____VALUE.html">value</a> (<a href="COMMON-LISP____LIST.html">list</a> old$ test
                base nonrec updates combine q r)))))</pre> 

</body>
</html>
