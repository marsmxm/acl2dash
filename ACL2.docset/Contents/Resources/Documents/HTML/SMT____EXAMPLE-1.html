<html>
<head>
<meta charset="UTF-8">
<title>Example-1</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=SMT____EXAMPLE-1">Click for Example-1 in the Full Manual</a></h3>

<p>Example 1: the basics</p><h3>Example 1</h3> 
<p>Prerequisite read for this tutorial example is <span class="tt"><a href="SMT____TUTORIAL.html">tutorial</a></span>.</p> 
<p>The first example is a basic polynomial inequality.  Let's say we want to 
prove below theorem:</p> 
 
<div class="box"> 
<p> 
<b><font color="#323cbe">Theorem 1.</font></b> 
\forall x\in R and \forall y \in R, if  \frac{9x^2}{8}+y^2 \le 1 and 
 x^2-y^2 \le 1, then  y &lt; 3(x-\frac{17}{8})^2 - 3. 
</p> 
</div> 
 
<p>Suppose we've defined a function called <span class="v">x^2-y^2</span> like below:</p> 
 
<pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a> x^2-y^2 (x y)
       (<a href="COMMON-LISP____-.html">-</a> (<a href="COMMON-LISP_____A2.html">*</a> x x) (<a href="COMMON-LISP_____A2.html">*</a> y y)))</pre> 
 
<p>We define our theorem as:</p> 
 
<pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> poly-ineq-example
        (<a href="ACL2____IMPLIES.html">implies</a> (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____REAL_F2RATIONALP.html">real/rationalp</a> x)
                      (<a href="ACL2____REAL_F2RATIONALP.html">real/rationalp</a> y)
                      (<a href="COMMON-LISP_____C3_D3.html">&lt;=</a> (<a href="COMMON-LISP_____B2.html">+</a> (<a href="COMMON-LISP_____A2.html">*</a> (<a href="COMMON-LISP_____F2.html">/</a> 9 8) x x) (<a href="COMMON-LISP_____A2.html">*</a> y y)) 1)
                      (<a href="COMMON-LISP_____C3_D3.html">&lt;=</a> (x^2-y^2 x y) 1))
                 (<a href="COMMON-LISP_____C3.html">&lt;</a> y
                    (<a href="COMMON-LISP____-.html">-</a> (<a href="COMMON-LISP_____A2.html">*</a> 3 (<a href="COMMON-LISP____-.html">-</a> x (<a href="COMMON-LISP_____F2.html">/</a> 17 8)) (<a href="COMMON-LISP____-.html">-</a> x (<a href="COMMON-LISP_____F2.html">/</a> 17 8)))
                       3)))
        :hints (("Goal" :smtlink nil)))</pre> 
 
<p>Smtlink should just prove this inequality without any problem.</p> 
<p>Like is shown in the example, <span class="v">:smtlink</span> can be provided as a hint in the 
standard <a href="ACL2____HINTS.html">ACL2::hints</a> in ACL2.  In the most basic cases where Smtlink 
handles everything, no <a href="SMT____SMT-HINT.html">smt-hint</a> are required to be provided, Hence 
<span class="v">:smtlink nil</span>.</p> 
 
<p>The output of this defthm should look similar to:</p> 
 
<pre class="code">Using clause-processor Smtlink
Goal'
Goal''
SMT-goal-generator=&gt;Expanding ... X^2-Y^2
Subgoal 2
Subgoal 2.2
Subgoal 2.2'
Using default SMT-trusted-cp...
; SMT solver: `python /tmp/py_file/smtlink.w59zR`: 0.52 sec, 7,904 bytes
Proved!
Subgoal 2.2''
Subgoal 2.1
Subgoal 2.1'
Subgoal 1
Subgoal 1'

Summary
Form:  ( DEFTHM POLY-INEQ-EXAMPLE ...)
Rules: ((:DEFINITION HIDE)
        (:DEFINITION HINT-PLEASE)
        (:DEFINITION NOT)
        (:DEFINITION TYPE-HYP)
        (:DEFINITION X^2-Y^2)
        (:EXECUTABLE-COUNTERPART BINARY-*)
        (:EXECUTABLE-COUNTERPART ACL2::BOOLEAN-LIST-FIX$INLINE)
        (:EXECUTABLE-COUNTERPART CAR)
        (:EXECUTABLE-COUNTERPART CDR)
        (:EXECUTABLE-COUNTERPART CONS)
        (:EXECUTABLE-COUNTERPART CONSP)
        (:EXECUTABLE-COUNTERPART UNARY--)
        (:EXECUTABLE-COUNTERPART UNARY-/)
        (:FAKE-RUNE-FOR-TYPE-SET NIL)
        (:REWRITE ASSOCIATIVITY-OF-+)
        (:REWRITE ACL2::COMMUTATIVITY-2-OF-+)
        (:REWRITE COMMUTATIVITY-OF-*)
        (:REWRITE COMMUTATIVITY-OF-+)
        (:REWRITE DISTRIBUTIVITY)
        (:TYPE-PRESCRIPTION NONNEGATIVE-PRODUCT))
Hint-events: ((:CLAUSE-PROCESSOR ADD-HYPO-CP)
              (:CLAUSE-PROCESSOR EXPAND-CP-FN)
              (:CLAUSE-PROCESSOR PROCESS-HINT)
              (:CLAUSE-PROCESSOR SMT-TRUSTED-CP)
              (:CLAUSE-PROCESSOR TYPE-EXTRACT-FN)
              (:CLAUSE-PROCESSOR UNINTERPRETED-FN-CP))
Time:  0.60 seconds (prove: 0.60, print: 0.00, other: 0.00)
Prover steps counted:  1440
POLY-INEQ-EXAMPLE</pre> 
 
<p>Smtlink is a sequence of clause processors controlled by a computed hint. 
Calling smtlink from the <span class="v">:hints</span> put the theorem clause though a clause 
processor looking for syntax errors in the <a href="SMT____SMT-HINT.html">smt-hint</a>.  If nothing wrong, 
it will generate a term to be recognized by the computed-hint 
<span class="v">SMT::SMT-computed-hint</span>.  The computed-hint then installs the next-to-be 
clause processor to work on the clause.  The next is the verified clause 
processor for adding hypotheses. After that is the verified clause processor 
for function expansion.</p> 
 
<p><span class="v">SMT-goal-generator=&gt;Expanding ... X^2-Y^2</span> shows function expansion is 
being conducted. </p> 
 
<p>In this example, several subgoals are generated as a result of this clause 
processor.  The first subgoal is the goal to be sent to the trusted clause 
processor that transliterates the term into the corresponding SMT form and 
writes it out to a file.  An SMT solver is called upon the file and results are 
read back into ACL2.  Below are the outputs from this clause processor called 
<span class="v">SMT-trusted-cp</span>. 
</p> 
 
<pre class="code">Using default SMT-trusted-cp...
; SMT solver: `python /tmp/py_file/smtlink.w59zR`: 0.52 sec, 7,904 bytes
Proved!</pre> 
 
<p>The second line tells the user what command is run to execute the SMT 
solving.  "Proved!" indicates the SMT solver has successfully proved the 
theorem.  When a theorem failed, a possible counter-example might be 
provided in the form:</p> 
<pre class="code">Possible counter-example found: ((X ...) (Y ...))
One can access it through global variable SMT-cex by doing (<a href="ACL2_____04.html">@</a> SMT-
cex).</pre> 
 
<p>Other subgoals are auxiliary clauses generated by the verified 
clause-processors. They help ensure the soundness of Smtlink.</p> 

</body>
</html>
