<html>
<head>
<meta charset="UTF-8">
<title>Preferred-definitions</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=GL____PREFERRED-DEFINITIONS">Click for Preferred-definitions in the Full Manual</a></h3>

<p></p><p>To instruct GL to symbolically execute <span class="v">filter2</span> in place of 
<span class="v">filter1</span>, we can do the following:</p> 
 
<pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> filter1-for-gl
  (<a href="COMMON-LISP____EQUAL.html">equal</a> (filter1 x) (filter2 x))
  :rule-classes nil)

(gl::set-preferred-def filter1 filter1-for-gl)</pre> 
 
<p>The <span class="v">set-preferred-def</span> form extends a table that GL consults when 
expanding a function's definition.  Each entry in the table pairs a function 
name with the name of a theorem.  The theorem must state that a call of the 
function is unconditionally equal to some other term.</p> 
 
<p>When GL encounters a call of a function in this table, it replaces the call 
with the right-hand side of the theorem, which is justified by the theorem.  So 
after the above event, GL will replace calls of <span class="v">filter1</span> with 
<span class="v">filter2</span>.</p> 
 
<p>As another example of a preferred definition, GL automatically optimizes the 
definition of <a href="COMMON-LISP____EVENP.html">evenp</a>, which ACL2 defines as follows:</p> 
 
<pre class="code">(<a href="COMMON-LISP____EVENP.html">evenp</a> x) = (<a href="COMMON-LISP____INTEGERP.html">integerp</a> (<a href="COMMON-LISP_____A2.html">*</a> x (<a href="COMMON-LISP_____F2.html">/</a> 2)))</pre> 
 
<p>This definition is basically unworkable since GL provides little support for 
rational numbers.  However, GL has an efficient, built-in implementation of 
<a href="COMMON-LISP____LOGBITP.html">logbitp</a>.  So to permit the efficient execution of <span class="v">evenp</span>, GL proves 
the following identity and uses it as <span class="v">evenp</span>'s preferred definition.</p> 
 
<pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> evenp-is-logbitp
  (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="COMMON-LISP____EVENP.html">evenp</a> x)
         (<a href="COMMON-LISP____OR.html">or</a> (<a href="COMMON-LISP____NOT.html">not</a> (<a href="ACL2____ACL2-NUMBERP.html">acl2-numberp</a> x))
             (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP____INTEGERP.html">integerp</a> x)
                  (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="COMMON-LISP____LOGBITP.html">logbitp</a> 0 x) nil)))))</pre>
</body>
</html>
