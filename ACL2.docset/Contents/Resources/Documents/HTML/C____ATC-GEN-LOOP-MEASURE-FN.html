<html>
<head>
<meta charset="UTF-8">
<title>Atc-gen-loop-measure-fn</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=C____ATC-GEN-LOOP-MEASURE-FN">Click for Atc-gen-loop-measure-fn in the Full Manual</a></h3>

<p>Generate a measure function for a recursive target function.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(atc-gen-loop-measure-fn fn names-to-avoid wrld) 
   
(mv event name formals updated-names-to-avoid)</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">fn</span>  <font color="#606060">Guard <span class="v">(<a href="COMMON-LISP____SYMBOLP.html">symbolp</a> fn)</span>.</font>
</dd> 
  <dd>
<span class="tt">names-to-avoid</span>  <font color="#606060">Guard <span class="v">(<a href="ACL2____SYMBOL-LISTP.html">symbol-listp</a> names-to-avoid)</span>.</font>
</dd> 
  <dd>
<span class="tt">wrld</span>  <font color="#606060">Guard <span class="v">(<a href="ACL2____PLIST-WORLDP.html">plist-worldp</a> wrld)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">event</span>  A <span class="tt"><a href="ACL2____PSEUDO-EVENT-FORMP.html">pseudo-event-formp</a></span>.</dd> 
<dd>
<span class="tt">name</span>  A <span class="tt"><a href="COMMON-LISP____SYMBOLP.html">symbolp</a></span>.</dd> 
<dd>
<span class="tt">formals</span>  A <span class="tt"><a href="ACL2____SYMBOL-LISTP.html">symbol-listp</a></span>.</dd> 
<dd>
<span class="tt">updated-names-to-avoid</span>  A <span class="tt"><a href="ACL2____SYMBOL-LISTP.html">symbol-listp</a></span>.</dd> 
 
</dl></div> 
<p>The correctness theorem for a loop involves 
     the measure of the loop function. 
     The measure may be a complex term. 
     An early version of ATC was using the measure terms 
     directly in the generated theorems, 
     but that caused proof failures sometimes, 
     due to ACL2 sometimes modifying those measure terms during a proof 
     (e.g. due to equalities involving measure subterms 
     arising from case analyses): 
     after the terms were modified, 
     some of the generated theorems about the measure terms 
     no longer apply, making the proof fail. 
     Thus, we ``protect'' the measure terms from modifications 
     by generating functions for them, 
     and using those functions in the generated theorems.</p><p>The code of this ACL2 function generates a measure function 
     for the recursive target function <span class="v">fn</span>. 
     The funcion is not guard-verified, 
     because its is only logical. 
     It is important that we take, 
     as formal parameters of the generated measure function, 
     only the variables that occur in the measure term. 
     This facilitates the generation of 
     the loop function's termination theorem 
     expressed over the  generated measure function.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>atc-gen-loop-measure-fn</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 atc-gen-loop-measure-fn
 (fn names-to-avoid wrld)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP____SYMBOLP.html">symbolp</a> fn)
                             (<a href="ACL2____SYMBOL-LISTP.html">symbol-listp</a> names-to-avoid)
                             (<a href="ACL2____PLIST-WORLDP.html">plist-worldp</a> wrld))))
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="ACL2____IRECURSIVEP_B2.html">irecursivep+</a> fn wrld)))
 (<a href="COMMON-LISP____LET.html">let</a>
  ((__function__ 'atc-gen-loop-measure-fn))
  (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
  (<a href="ACL2____B_A2.html">b*</a>
   ((name (<a href="ACL2____PACKN-POS.html">packn-pos</a> (<a href="COMMON-LISP____LIST.html">list</a> 'measure-of- fn) fn))
    ((<a href="ACL2____MV.html">mv</a> name names-to-avoid)
     (<a href="ACL2____FRESH-LOGICAL-NAME-WITH-_42S-SUFFIX.html">fresh-logical-name-with-$s-suffix</a> name 'function
                                        names-to-avoid wrld))
    (measure-term (<a href="ACL2____MEASURE_B2.html">measure+</a> fn wrld))
    (measure-vars (<a href="ACL2____ALL-VARS.html">all-vars</a> measure-term))
    ((<a href="ACL2____MV.html">mv</a> &amp; event)
     (<a href="ACL2____EVMAC-GENERATE-DEFUN.html">evmac-generate-defun</a> name
                           :formals measure-vars
                           :body (<a href="ACL2____UNTRANSLATE.html">untranslate</a> measure-term nil wrld)
                           :verify-guards nil
                           :enable nil)))
   (<a href="ACL2____MV.html">mv</a> event
       name measure-vars names-to-avoid))))</pre> 

</body>
</html>
