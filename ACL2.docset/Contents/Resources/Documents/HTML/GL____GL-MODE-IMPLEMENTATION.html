<html>
<head>
<meta charset="UTF-8">
<title>Gl-mode-implementation</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=GL____GL-MODE-IMPLEMENTATION">Click for Gl-mode-implementation in the Full Manual</a></h3>

<p>Implementation details about switching between GL reasoning modes</p> 
 
<p>GL's various reasoning modes are implemented using <a href="ACL2____DEFATTACH.html">defattach</a>.  There 
are several functions that need to have proper attachments in order for GL to 
function; when the GL library is loaded, they are set up to a default 
configuration in which GL will use BDD-based reasoning.</p> 
 
<p>The functions that need attachments follow.  Here, BFR stands for Boolean 
function representation.</p> 
 
<ul> 
<li>
<p>BFR-MODE: 0-ary with no constraints.  This detemines whether the Boolean 
function components in the symbolic object representation are BDDs or AIGs, and 
thus the functions used to combine them.  E.g., the definition of BFR-NOT 
is (basically):</p> 
 
<pre class="code">(<a href="COMMON-LISP____IF.html">if</a> (<a href="GL____BFR-MODE.html">bfr-mode</a>) (aig-not x) (q-not x)).</pre> 
 
<p>Similarly, BFR-EVAL either applies EVAL-BDD or AIG-EVAL, depending on 
BFR-MODE.</p> 
 
<p>By default the function BFR-BDD (which returns NIL) is attached to BFR-MODE, 
and thus BFR-NOT uses the BDD operation Q-NOT.  To use AIGs instead, attach 
BFR-AIG, which returns T.</p>
</li> 
 
<li>
<p>BFR-SAT: Unary, returning three values: SAT, SUCCEEDED, CTREX.  The main 
constraint of BFR-SAT is that if it returns SAT=NIL and SUCCEEDED=T, then 
BFR-EVAL of the input on any environment must be NIL, i.e., the input must be 
an unsatisfiable BDD or AIG (depending on the BFR-MODE.)  The CTREX value 
should be a counterexample in the case of a SAT result, represented either as a 
BDD or an alist mapping variables to Boolean values; see below under 
BFR-COUNTEREX-MODE.</p> 
 
<p>To satisfy the constraint in the BDD case, it suffices to simply check whether 
the input BDD is NIL; if so, it is satisfiable, and otherwise, it isn't.  This 
method is implemented as BFR-SAT-BDD, which is the default attachment of 
BFR-SAT.  For AIG mode, we provide an attachment BFR-SAT-BDDIFY which solves an 
AIG satisfiability query by transforming the input AIG into a BDD.  However, 
one might instead hook up a SAT solver into ACL2 so that it can take an AIG as 
input.  Given a way of calling such an external tool, it would not be difficult 
to produce a function that conforms to the constraint described above. :-)</p>
</li> 
 
<li><p>BFR-COUNTEREX-MODE: 0-ary, no constraints.  This says whether the 
counterexample value sometimes returned by BFR-SAT is in the form of a BDD or 
an association list.  If it is set up wrong, then output in case of a 
counterexample will be garbled.  In both the default BDD mode and in the AIG 
BDDIFY mode provided, the counterexample is in the form of a BDD, and so we 
attach BFR-COUNTEREX-BDD by default.  However, if an external SAT solver is 
used, then there will likely be a single assignment returned, which might more 
conveniently be provided as an alist.  Then one would instead attach 
BFR-COUNTEREX-ALIST.</p></li>
</ul>
</body>
</html>
