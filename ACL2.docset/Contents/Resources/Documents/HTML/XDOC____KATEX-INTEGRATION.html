<html>
<head>
<meta charset="UTF-8">
<title>Katex-integration</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=XDOC____KATEX-INTEGRATION">Click for Katex-integration in the Full Manual</a></h3>

<p>Support for LaTeX-like typesetting of mathematics in XDOC 
topics. (experimental)</p><div class="box"><p><b>Experimental.</b> This whole thing is experimental.  Jared 
reserves the right to decide it is a bad idea and remove support for 
it.</p></div> 
 
<p>The <a href="https://www.khanacademy.org/" target="_blank"><nobr>Khan Academy<img src="../Icon_External_Link.png" title="External link to https://www.khanacademy.org/"></nobr></a> has developed a 
very nice Javascript library, <a href="https://github.com/Khan/KaTeX" target="_blank"><nobr>KaTeX<img src="../Icon_External_Link.png" title="External link to https://github.com/Khan/KaTeX"></nobr></a>, for rendering mathematical 
formulas in the web browser.  We have now integrated KaTeX into XDOC's fancy 
web-based viewer, allowing you to typeset basic formulas.</p> 
 
 
<h3>Basic Usage</h3> 
 
<div class="box"><p><b><font color="#ff0000">ESCAPING WARNING</font></b>. LaTeX-style 
formulas may be especially hard to type in ordinary ACL2 string literals 
because you have to escape all the backslashes.  For instance, you have to 
remember to write <span class="v">\\sqrt{x}</span> instead of <span class="v">\sqrt{x}</span>.  You can avoid 
this headache by using the <a href="ACL2____FANCY-STRING-READER.html">ACL2::fancy-string-reader</a>. In the rest of 
this document, we will use the concrete xdoc syntax without the escapes for 
simplicity.</p></div> 
 
<p>To typeset block-style formulas, you can use the <span class="v">@([...])</span> <a href="XDOC____PREPROCESSOR.html">preprocessor</a> directive, e.g.,:</p> 
 
<pre class="code">@([
   c = \pm\sqrt{a^2 + b^2}
])</pre> 
 
<p>Produces an indented block of mathematics:</p> 
 
<div class="mathfrag">
    c = \pm\sqrt{a^2 + b^2}
</div> 
 
<p>You can also write inline math using <span class="v">@($...$)</span> directive, for 
instance:</p> 
 
<pre class="code">The product @($a \times b$) is even.</pre> 
 
<p>Produces text such as: the product a \times b.</p> 
 
 
<h3>Tips and Tricks</h3> 
 
<h5>Fast Preview.</h5> 
 
<p>The <a href="formula.html" target="_blank"><nobr>KaTeX Preview<img src="../Icon_External_Link.png" title="External link to formula.html"></nobr></a> page lets you interactively 
type in your formula and see how it will be typeset.  It may be especially 
helpful since KaTeX only supports a particular subset of LaTeX.</p> 
 
<h5>Invalid Formulas.</h5> 
 
<p>Invalid formulas will display as an ugly error message.  For instance, here 
is an invalid <span class="v">@([ ... ])</span> style formula:</p> 
 
<div class="mathfrag">
      { there is no closing brace
</div> 
 
<p>And here is an invalid <span class="v">@($...$)</span> style formula, 

      { there is no closing brace
, embedded in a paragraph.</p> 
 
<h3>Miscellaneous Notes</h3> 
 
<p>The preprocessor directives expand into <span class="v">&lt;math&gt;</span> and <span class="v">&lt;mathfrag&gt;</span> 
tags.  But you will probably want to stick to the preprocessor syntax, rather 
than directly using <span class="v">&lt;math&gt;</span> tags, because if you try to use raw <span class="v">&lt;math&gt;</span> 
tags then you have to remember to escape XML characters like <span class="v">&lt;</span> with 
<span class="v">&amp;lt;</span>, which just isn't very readable.</p> 
 
<p>All of this is fundamentally limited to the web-based viewer.  It seems very 
unlikely that <span class="v">&lt;math&gt;</span> formulas will ever look nice when shown at the 
terminal with <span class="v">:doc</span> or in the ACL2-Doc Emacs viewer.</p>
</body>
</html>
