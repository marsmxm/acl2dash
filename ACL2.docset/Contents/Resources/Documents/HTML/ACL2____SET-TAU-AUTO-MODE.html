<html>
<head>
<meta charset="UTF-8">
<title>Set-tau-auto-mode</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____SET-TAU-AUTO-MODE">Click for Set-tau-auto-mode in the Full Manual</a></h3>

<p>Turn on or off automatic (``greedy'') generation of <span class="v">:tau-system</span> 
  rules</p><pre class="code">Examples:
(<a href="ACL2____SET-TAU-AUTO-MODE.html">set-tau-auto-mode</a> t)      ; select automatic (``greedy'') mode
(<a href="ACL2____SET-TAU-AUTO-MODE.html">set-tau-auto-mode</a> nil)    ; select manual mode</pre> 
 
 <p>This event is equivalent to <span class="v">(<a href="ACL2____TABLE.html">table</a> acl2-defaults-table :tau-auto-modep
 &lt;t-or-nil&gt;)</span>, and hence is <span class="tt"><a href="ACL2____LOCAL.html">local</a></span> to any <a href="ACL2____BOOKS.html">books</a> and <span class="tt"><a href="ACL2____ENCAPSULATE.html">encapsulate</a></span> <a href="ACL2____EVENTS.html">events</a> in which it occurs; see <a href="ACL2____ACL2-DEFAULTS-TABLE.html">ACL2-defaults-table</a>. 
 See <a href="ACL2____INTRODUCTION-TO-THE-TAU-SYSTEM.html">introduction-to-the-tau-system</a> for background details.</p> 
 
 <p>The tau system gathers rules for its database in one of two ways: greedily 
 or only at the explicit command of the user.  ``Greedy'' mode is officially 
 called ``automatic mode'' and is the default.  The other mode is called 
 ``manual mode.''</p> 
 
 <p>In automatic mode, all rules processed by ACL2 are also considered for 
 inclusion in the tau database: if the <span class="v">:corollary</span> of some proved theorem 
 happens to fit into one of the forms described in <span class="v">:</span><span class="tt"><a href="ACL2____TAU-SYSTEM.html">tau-system</a></span>, 
 that rule is quietly added to the tau database <i>regardless of what</i> 
 <span class="v">:</span><span class="tt"><a href="ACL2____RULE-CLASSES.html">rule-classes</a></span> the user named for the <span class="v">:corollary</span>.  Of course, 
 such rules are also stored in the ways named by the user.  See the <i>Design 
 Philosophy</i> section of <a href="ACL2____INTRODUCTION-TO-THE-TAU-SYSTEM.html">introduction-to-the-tau-system</a> for a 
 discussion of why the tau system is greedy by default.  More details are given 
 on automatic mode after we explain manual mode.</p> 
 
 <p>To more tightly control the rules available to the tau system, the user may 
 select manual mode by executing <span class="v">(<a href="ACL2____SET-TAU-AUTO-MODE.html">set-tau-auto-mode</a> nil)</span>.  In manual mode, 
 the only events that create <span class="v">:tau-system</span> rules are <span class="v">defthm</span> events 
 explicitly specifying the <span class="v">:</span><span class="tt"><a href="ACL2____TAU-SYSTEM.html">tau-system</a></span> rule class in the 
 <span class="v">:</span><span class="tt"><a href="ACL2____RULE-CLASSES.html">rule-classes</a></span> argument.  Of course, for a <span class="v">:tau-system</span> rule 
 to be created from a proved formula (or its specified <span class="v">:corollary</span>), the 
 formula must be of the appropriate shape (syntactic form). See <a href="ACL2____TAU-SYSTEM.html">tau-system</a>.  In manual mode, if the <span class="v">:tau-system</span> rule class is specified 
 but the formula is not of an appropriate form an error is signaled.  (Note: 
 even in manual mode, monadic functions that are recognized as Boolean are 
 classified as tau predicates; but no rules are created for them.)</p> 
 
 <p>Returning to our discussion of automatic mode, a <span class="v">:</span><span class="tt"><a href="ACL2____TAU-SYSTEM.html">tau-system</a></span> 
 rule may be created by any of the events below, provided the definition or 
 formula proved is of an appropriate shape:</p> 
 
 <p>(1) <span class="v">defun</span> events introducing ``big switch'' or ``<span class="v">mv-nth</span> 
 synonyms,''</p> 
 
 <p>(2) <span class="v">defun</span> events creating type-prescription rules that may be also 
 represented as ``signature rules'' of form 1, and</p> 
 
 <p>(3) any <span class="v">defthm</span> event with a non-<span class="v">nil</span> <span class="v">:rule-classes</span> argument 
   if no <span class="v">:tau-system</span> rule is among the rule classes and the formula proved 
   is in the shape of any <span class="v">tau-system</span> rule.</p> 
 
 <p>Of course, events such as <span class="tt"><a href="ACL2____DEFSTOBJ.html">defstobj</a></span> and <span class="tt"><a href="ACL2____DEFEVALUATOR.html">defevaluator</a></span> may 
 also add rules to the tau database when they execute the <span class="tt"><a href="COMMON-LISP____DEFUN.html">defun</a></span> and 
 <span class="tt"><a href="ACL2____DEFTHM.html">defthm</a></span> events implicit in their descriptions.  See <a href="ACL2____TAU-SYSTEM.html">tau-system</a> 
 for a description of the various shapes mentioned above.</p> 
 
 <p>Note that any rule (of any rule class) created when the tau system is in 
 manual mode is also created in automatic mode.  For example, if an event would 
 create a <span class="v">:DEFINITION</span>, <span class="v">:TYPE-PRESCRIPTION</span>, <span class="v">FORWARD-CHAINING</span>, or 
 <span class="v">:REWRITE</span> rule when the tau system is in manual mode, then the event will 
 create that same rule when the tau system is in automatic mode.  Automatic 
 mode just means that some additional <span class="v">:tau-system</span> rules may be 
 created.</p> 
 
 <p>Of course, if a <span class="v">defthm</span> event explicitly specifies a <span class="v">:tau-system</span> 
 rule class, then even if the tau system is in automatic mode, that tau rule is 
 created from the proved formula (or the specified <span class="v">:corollary</span>) or else an 
 error is caused.  But if the tau system is in automatic mode and a <span class="v">defthm</span> 
 event doesn't explicitly specify a <span class="v">:tau-system</span> rule class, then the 
 system quietly checks each specified <span class="v">:corollary</span> — or, in the 
 absence of any <span class="v">:corollary</span>, it checks the proved formula — for 
 whether it can be stored as a tau rule.  If so, then the system stores a tau 
 rule, in addition to storing the specified rule.  Of course, no error is 
 signaled if a proved formula of some non-<span class="v">:tau-system</span> rule class fails to 
 be of an appropriate shape for the tau system.</p> 
 
 <p>In automatic mode, if the <span class="v">:rule-classes</span> specified for <span class="v">defthm</span> 
 included several corollaries and any one of them is of class <span class="v">:tau-system</span> 
 then the only tau system rules created are those explicitly classed as 
 <span class="v">:tau-system</span> rules.  For example, suppose a <span class="v">defthm</span> has one 
 <span class="v">:corollary</span> stored as a <span class="v">:rewrite</span> rule and another <span class="v">:corollary</span> 
 stored as a <span class="v">:tau-system</span> rule.  But suppose the <span class="v">:rewrite</span> rule happens 
 to also to fit the form of a <span class="v">:tau-system</span> rule.  Is it added to the tau 
 database or not?  The answer is no.  If you have taken the trouble to specify 
 <span class="v">:tau-system</span> corollaries for an event, then those corollaries are the only 
 ones stored as tau system rules from that event.  Note that had both 
 corollaries been classed as <span class="v">:rewrite</span> rules (and been of acceptable 
 <span class="v">:tau-system</span> form) both would have also been made <span class="v">:tau-system</span> rules. 
 This also allows you be in automatic mode and state a <span class="v">:rewrite</span> or other 
 non-<span class="v">:tau-system</span> rule and prevent it from being also made a tau system 
 rule: just add a frivolous <span class="v">:tau-system</span> <span class="v">:corollary</span> like <span class="v">(<a href="ACL2____BOOLEANP.html">booleanp</a>
 (<a href="COMMON-LISP____INTEGERP.html">integerp</a> x))</span>.</p> 
 
 <p>Recall that the use of tau rules is controlled by the rune 
 <span class="v">(:EXECUTABLE-COUNTERPART TAU-SYSTEM)</span>.  When that rune is disabled, no tau 
 rules are <i>used</i> in proofs.  However, the tau system continues to collect 
 tau rules if the system is in automatic mode.  Thus, if and when the tau 
 system is re-enabled, rules automatically generated while the tau system was 
 disabled will be used as usual by the tau system.</p> 
 
 <p>Finally, note that <span class="v">defthm</span> events with <span class="v">:rule-classes</span> <span class="v">nil</span> do 
 not create <span class="v">:tau-system</span> rules even if the formula proved is of an 
 appropriate shape, regardless of whether the tau system is in automatic or 
 manual mode.</p> 
 
 <p>The macro <span class="tt"><a href="ACL2____TAU-STATUS.html">tau-status</a></span> provides a convenient way to enable/disable 
 the <span class="v">:</span><span class="tt"><a href="ACL2____EXECUTABLE-COUNTERPART.html">executable-counterpart</a></span> of <span class="v">tau-system</span> and/or to switch 
 between manual and automatic modes.  It may also be used to determine the 
 current settings of those two flags.</p>
</body>
</html>
