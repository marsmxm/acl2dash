<html>
<head>
<meta charset="UTF-8">
<title>Bitops</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____BITOPS">Click for Bitops in the Full Manual</a></h3>

<p>Bitops is a library originally developed at Centaur Technology 
for reasoning about bit-vector arithmetic.  It grew out of an extension 
to the venerable <a href="ACL2____IHS.html">ACL2::ihs</a> library, and is now fairly comprehensive.</p><h3>Introduction</h3> 
 
<p>Bitops is a bit-vector arithmetic library.  It provides:</p> 
 
<ul> 
 
<li>Definitions for single-bit operations like <a href="ACL2____B-AND.html">b-and</a>, <a href="ACL2____B-IOR.html">b-ior</a>, 
etc., and for extended bit-vector operations, like <a href="ACL2____LOGHEAD.html">loghead</a>, <a href="ACL2____LOGAPP.html">logapp</a>, <a href="ACL2____LOGREV.html">logrev</a>, etc.  These are largely inherited from <a href="ACL2____IHS.html">ACL2::ihs</a>.</li> 
 
<li>Support for reasoning about these new operations, and also about the 
bit-vector operations that are built into ACL2 like <a href="COMMON-LISP____LOGAND.html">logand</a>, <a href="COMMON-LISP____ASH.html">ash</a>, 
and <a href="COMMON-LISP____LOGBITP.html">logbitp</a>.</li> 
 
<li>Efficient implementations of certain bit-vector operations like <a href="ACL2____FAST-LOGEXT.html">fast-logext</a>, <a href="BITOPS____BITOPS_F2MERGE.html">merge operations</a>, <a href="BITOPS____BITOPS_F2FAST-LOGREV.html">fast-logrev</a>, etc., with lemmas or <a href="ACL2____MBE.html">mbe</a> to relate them to the logically nicer definitions.  These definitions 
generally don't add any logical power, but are useful for developing more 
efficient executable models.</li> 
 
</ul> 
 
 
<h5>Compatibility</h5> 
 
<p>Bitops is <b>not</b> a standalone arithmetic library.  It has almost no 
support for non-integer arithmetic (rationals/complexes) and has few lemmas 
about elementary operations like <span class="v">+</span> and <span class="v">*</span> beyond how they relate to 
the bit-vector operations.</p> 
 
<p>Instead, you will usually include books from both Bitops <b>and</b> from 
some other arithmetic library.  Bitops is often used in concert with books from 
<span class="v">arithmetic</span>, <span class="v">arithmetic-3</span>, and <span class="v">arithmetic-5</span>.  See <a href="BITOPS____BITOPS-COMPATIBILITY.html">bitops-compatibility</a> for notes about using these libraries with Bitops.</p> 
 
<p>Bitops definitions are typically compatible with <a href="ACL2____GL.html">ACL2::gl</a>, a framework 
for bit-blasting ACL2 theorems.  GL is mainly applicable to bounded problems, 
but is highly automatic.  This nicely complements Bitops, which is a more 
traditional library of lemmas that can be applied to unbounded problems.</p> 
 
 
<h5>Philosophy and Expectations</h5> 
 
<p>Bitops is not especially automatic.  Merely loading it may allow you to 
solve some bit-vector problems automatically.  But if you want to use it 
<i>well</i> and understand what to do when it doesn't solve your problems, you 
should expect to invest some effort in learning the library.</p> 
 
<p>One reason Bitops may be less automatic than other libraries is that we use 
it in proofs about microcode routines.  These proofs often involve very large 
terms.  This poses a challenge when writing arithmetic rules: to successfully 
manage proofs with large terms, case-splitting needs to be carefully 
controlled.  To keep the library more controllable, some good rules are kept 
disabled by default.  So, to get the most out of the library, you may need to 
explicitly enable these rules as appropriate.</p> 
 
 
<h3>Loading the Library</h3> 
 
<p>Bitops is a somewhat large library that is compartmentalized into several 
books, many of which can be loaded independently.</p> 
 
<p>To avoid getting locked into any particular arithmetic library, good 
practice is to always only <a href="ACL2____LOCAL.html">local</a>ly include arithmetic books, including 
Bitops.  When your own books only mention built-in functions like <a href="COMMON-LISP____LOGAND.html">logand</a> 
and <a href="COMMON-LISP____ASH.html">ash</a>, this is no problem.  But you may often write theorems or 
functions that use new functions like <a href="ACL2____LOGHEAD.html">loghead</a>, <a href="ACL2____LOGCDR.html">logcdr</a>, etc., and 
in this case you need to non-locally include the definitions of these 
functions.</p> 
 
<p>Because of this, you will usually want to use something like this:</p> 
 
<pre class="code">(<a href="ACL2____INCLUDE-BOOK.html">include-book</a> "ihs/basic-definitions" :dir :system)
(<a href="ACL2____LOCAL.html">local</a> (<a href="ACL2____INCLUDE-BOOK.html">include-book</a> "centaur/bitops/ihsext-basics" :dir :system))
(<a href="ACL2____LOCAL.html">local</a> (<a href="ACL2____INCLUDE-BOOK.html">include-book</a> "centaur/bitops/signed-byte-p" :dir :system))
(<a href="ACL2____LOCAL.html">local</a> (<a href="ACL2____INCLUDE-BOOK.html">include-book</a> ... other bitops books ...))</pre> 
 
<p>Although there is a <span class="v">top</span> book, we generally recommend <b>against</b> 
using it.  Instead, it's generally best to load the individual <a href="BITOPS____BITOPS-BOOKS.html">bitops-books</a> that address your particular needs.</p>
</body>
</html>
