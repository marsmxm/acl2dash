<html>
<head>
<meta charset="UTF-8">
<title>Check-type-definition-in-recursion</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=SYNTHETO____CHECK-TYPE-DEFINITION-IN-RECURSION">Click for Check-type-definition-in-recursion in the Full Manual</a></h3>

<p>Check if a type definition in a type recursion 
          is statically well-formed.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(check-type-definition-in-recursion typedef ctxt) 
  → 
(mv err? obligs)</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">typedef</span> — <font color="#606060">Guard <span class="v">(<a href="SYNTHETO____TYPE-DEFINITIONP.html">type-definitionp</a> typedef)</span>.</font>
</dd> 
  <dd>
<span class="tt">ctxt</span> — <font color="#606060">Guard <span class="v">(<a href="SYNTHETO____CONTEXTP.html">contextp</a> ctxt)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">obligs</span> — <font color="#606060">Type <span class="v">(<a href="SYNTHETO____PROOF-OBLIGATION-LISTP.html">proof-obligation-listp</a> obligs)</span>.</font>
</dd> 
 
</dl></div> 
<p>A type recursion is a top-level construct 
     that immediately contains type definition. 
     Thus, when checking a type definition in a type recursion, 
     in general the context has no 
     functions, variables, obligation variables, or obligation hypotheses. 
     However, it will have the names of the recursive types being defined, 
     and in particular the one whose definition is checked here; 
     see <span class="tt"><a href="SYNTHETO____CHECK-TYPE-RECURSION.html">check-type-recursion</a></span>. 
     This motivates the extra guard conditions of this ACL2 function.</p><p>We ensure that the type is not already defined. 
     Unlike <span class="tt"><a href="SYNTHETO____CHECK-TYPE-DEFINITION.html">check-type-definition</a></span>, we do not augment the context, 
     because <span class="tt"><a href="SYNTHETO____CHECK-TYPE-RECURSION.html">check-type-recursion</a></span> already adds the type names.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>check-type-definition-in-recursion</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 check-type-definition-in-recursion
 (typedef ctxt)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="SYNTHETO____TYPE-DEFINITIONP.html">type-definitionp</a> typedef)
                             (<a href="SYNTHETO____CONTEXTP.html">contextp</a> ctxt))))
 (<a href="COMMON-LISP____DECLARE.html">declare</a>
    (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____MEMBER-EQUAL.html">member-equal</a> (<a href="SYNTHETO____TYPE-DEFINITION-_E3NAME.html">type-definition-&gt;name</a> typedef)
                                     (<a href="SYNTHETO____CONTEXT-_E3TYPES.html">context-&gt;types</a> ctxt))
                       (<a href="COMMON-LISP____NULL.html">null</a> (<a href="SYNTHETO____CONTEXT-_E3FUNCTIONS.html">context-&gt;functions</a> ctxt))
                       (<a href="OMAP____EMPTY.html">omap::empty</a> (<a href="SYNTHETO____CONTEXT-_E3VARIABLES.html">context-&gt;variables</a> ctxt))
                       (<a href="COMMON-LISP____NULL.html">null</a> (<a href="SYNTHETO____CONTEXT-_E3OBLIGATION-VARS.html">context-&gt;obligation-vars</a> ctxt))
                       (<a href="COMMON-LISP____NULL.html">null</a> (<a href="SYNTHETO____CONTEXT-_E3OBLIGATION-HYPS.html">context-&gt;obligation-hyps</a> ctxt)))))
 (<a href="COMMON-LISP____LET.html">let</a>
  ((__function__ 'check-type-definition-in-recursion))
  (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
  (<a href="ACL2____B_A2.html">b*</a>
    (((<a href="SYNTHETO____TYPE-DEFINITION.html">type-definition</a> typedef) typedef)
     ((when (<a href="SYNTHETO____GET-TYPE-DEFINITION.html">get-type-definition</a> typedef.name (<a href="SYNTHETO____CONTEXT-_E3TOPS.html">context-&gt;tops</a> ctxt)))
      (<a href="ACL2____MV.html">mv</a> (<a href="COMMON-LISP____LIST.html">list</a> :type-already-defined typedef.name)
          nil)))
    (<a href="SYNTHETO____CHECK-TYPE-DEFINER.html">check-type-definer</a> typedef.body ctxt))))</pre> 
<p><b>Theorem: </b>proof-obligation-listp-of-check-type-definition-in-recursion.obligs</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 proof-obligation-listp-of-check-type-definition-in-recursion.obligs
 (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> ?err? ?obligs)
       (<a href="SYNTHETO____CHECK-TYPE-DEFINITION-IN-RECURSION.html">check-type-definition-in-recursion</a> typedef ctxt)))
     (<a href="SYNTHETO____PROOF-OBLIGATION-LISTP.html">proof-obligation-listp</a> obligs))
 :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>check-type-definition-in-recursion-of-type-definition-fix-typedef</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 check-type-definition-in-recursion-of-type-definition-fix-typedef
 (<a href="COMMON-LISP____EQUAL.html">equal</a>
   (<a href="SYNTHETO____CHECK-TYPE-DEFINITION-IN-RECURSION.html">check-type-definition-in-recursion</a> (<a href="SYNTHETO____TYPE-DEFINITION-FIX.html">type-definition-fix</a> typedef)
                                       ctxt)
   (<a href="SYNTHETO____CHECK-TYPE-DEFINITION-IN-RECURSION.html">check-type-definition-in-recursion</a> typedef ctxt)))</pre> 
<p><b>Theorem: </b>check-type-definition-in-recursion-type-definition-equiv-congruence-on-typedef</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 check-type-definition-in-recursion-type-definition-equiv-congruence-on-typedef
 (<a href="ACL2____IMPLIES.html">implies</a>
    (<a href="SYNTHETO____TYPE-DEFINITION-EQUIV.html">type-definition-equiv</a> typedef typedef-equiv)
    (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="SYNTHETO____CHECK-TYPE-DEFINITION-IN-RECURSION.html">check-type-definition-in-recursion</a> typedef ctxt)
           (<a href="SYNTHETO____CHECK-TYPE-DEFINITION-IN-RECURSION.html">check-type-definition-in-recursion</a> typedef-equiv ctxt)))
 :rule-classes :congruence)</pre> 
<p><b>Theorem: </b>check-type-definition-in-recursion-of-context-fix-ctxt</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 check-type-definition-in-recursion-of-context-fix-ctxt
 (<a href="COMMON-LISP____EQUAL.html">equal</a>
     (<a href="SYNTHETO____CHECK-TYPE-DEFINITION-IN-RECURSION.html">check-type-definition-in-recursion</a> typedef (<a href="SYNTHETO____CONTEXT-FIX.html">context-fix</a> ctxt))
     (<a href="SYNTHETO____CHECK-TYPE-DEFINITION-IN-RECURSION.html">check-type-definition-in-recursion</a> typedef ctxt)))</pre> 
<p><b>Theorem: </b>check-type-definition-in-recursion-context-equiv-congruence-on-ctxt</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 check-type-definition-in-recursion-context-equiv-congruence-on-ctxt
 (<a href="ACL2____IMPLIES.html">implies</a>
    (<a href="SYNTHETO____CONTEXT-EQUIV.html">context-equiv</a> ctxt ctxt-equiv)
    (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="SYNTHETO____CHECK-TYPE-DEFINITION-IN-RECURSION.html">check-type-definition-in-recursion</a> typedef ctxt)
           (<a href="SYNTHETO____CHECK-TYPE-DEFINITION-IN-RECURSION.html">check-type-definition-in-recursion</a> typedef ctxt-equiv)))
 :rule-classes :congruence)</pre> 

</body>
</html>
