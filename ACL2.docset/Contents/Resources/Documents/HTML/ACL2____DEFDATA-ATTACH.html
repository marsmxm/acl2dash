<html>
<head>
<meta charset="UTF-8">
<title>Defdata-attach</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____DEFDATA-ATTACH">Click for Defdata-attach in the Full Manual</a></h3>

<p>Attach/modify metadata for a defdata type</p> 
<h3>Examples:</h3> 
<pre class="code">(<a href="ACL2____DEFDATA-ATTACH.html">defdata-attach</a> pos :enumerator nth-small-pos-testing)

(<a href="ACL2____DEFDATA-ATTACH.html">defdata-attach</a> imem :enum/acc imem-custom-enum2)</pre> 
 
<h3>General Form:</h3> 
<pre class="code">(<a href="ACL2____DEFDATA-ATTACH.html">defdata-attach</a> typename 
     [:enum/test enum-fn]
     [:equiv eq-rel]
     [:equiv-fixer eq-fix-fn]
     [:constraint ... ]
     [:sampling constant-list]
     [overridable metadata]
     )</pre>  
 
<p> Defdata-attach can be used to attach custom test enumerators for 
certain types. This provides a method to customize Cgen's test data 
generation capability for certain scenarios.</p> 
 
<p> (Advanced) Type refinement : User can attach rules that 
specify (to Cgen) how to refine/expand a variable of this type when 
certain additional constraints match (or subterm-match). For those who 
are familar with dest-elim rules, the :rule field has a similar form. 
For example: </p> 
 
<pre class="code">(<a href="ACL2____DEFDATA-ATTACH.html">defdata-attach</a> imemory
         :constraint (mget a x) ;x is the variable of this type
         :constraint-variable x
         :rule (<a href="ACL2____IMPLIES.html">implies</a> (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____NATP.html">natp</a> a) ;additional hyps
                             (instp x.a)
                             (imemoryp x1))
                        (<a href="COMMON-LISP____EQUAL.html">equal</a> x (mset a x.a x1))) ;refine/expand
         :meta-precondition (<a href="COMMON-LISP____OR.html">or</a> (variablep a)
                                (<a href="ACL2____FQUOTEP.html">fquotep</a> a))
         :match-type :subterm-match)</pre> 
 
<p> Warning: Other optional keyword arguments are currently 
unsupported and the use of :override-ok can be unsound.</p> 

</body>
</html>
