<html>
<head>
<meta charset="UTF-8">
<title>Hons-acons!</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____HONS-ACONS_12">Click for Hons-acons! in the Full Manual</a></h3>

<p><span class="v">(<a href="ACL2____HONS-ACONS_12.html">hons-acons!</a> key val alist)</span> is an alternative to <span class="tt"><a href="ACL2____HONS-ACONS.html">hons-acons</a></span> that produces <a href="ACL2____NORMED.html">normed</a>, fast alists.</p><p>Logically, <span class="v">hons-acons!</span> is like <span class="tt"><a href="COMMON-LISP____ACONS.html">acons</a></span> except that its 
 guard does not require <span class="tt"><a href="ACL2____ALISTP.html">alistp</a></span>; we leave it enabled and would think it 
 odd to ever prove a theorem about it.</p> 
 
 <p>Ordinarily, <a href="ACL2____FAST-ALISTS.html">fast-alists</a> are constructed with <span class="tt"><a href="ACL2____HONS-ACONS.html">hons-acons</a></span> 
 instead of <span class="v">hons-acons!</span>.  In such alists, the keys are honsed, but the 
 conses that make up the "spine" of the alist itself are ordinary conses.  In 
 other words, it is basically correct to say:</p> 
 
 <pre class="code">(<a href="ACL2____HONS-ACONS.html">hons-acons</a> key val alist) == (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="ACL2____HONS-COPY.html">hons-copy</a> key) val) alist)</pre> 
 
 <p>In contrast, when <span class="v">hons-acons!</span> is used, the conses making up the alist 
 itself are also normed.  That is,</p> 
 
 <pre class="code">(<a href="ACL2____HONS-ACONS_12.html">hons-acons!</a> key val alist) == (<a href="ACL2____HONS.html">hons</a> (<a href="ACL2____HONS.html">hons</a> key val) alist)</pre> 
 
 <p>Generally, you <b>should not use</b> <span class="v">hons-acons!</span> unless you really 
 know what you're doing.</p> 
 
 <p>Drawback 1.  <span class="v">hons-acons!</span> requires you to <span class="tt"><a href="ACL2____HONS-COPY.html">hons-copy</a></span> all of the 
 values that are being stored in the fast alist.  If you are storing large 
 values, this may be expensive.</p> 
 
 <p>Drawback 2.  It can be more difficult to maintain the proper discipline 
 when using <span class="v">hons-acons!</span>.  For instance, consider the following:</p> 
 
 <pre class="code">(<a href="COMMON-LISP____LET.html">let</a> ((al1 (<a href="ACL2____HONS-ACONS.html">hons-acons</a> 1 'one (<a href="ACL2____HONS-ACONS.html">hons-acons</a> 2 'two nil)))
      (al2 (<a href="ACL2____HONS-ACONS.html">hons-acons</a> 1 'one (<a href="ACL2____HONS-ACONS.html">hons-acons</a> 2 'two nil))))
   ...)</pre> 
 
 <p>Here, both al1 and al2 are valid fast alists and they can be extended 
 independently without any trouble.  But if these alists had instead been 
 constructed with <span class="v">hons-acons!</span>, then since both al1 and al2 are equal, 
 normed conses, they will literally be <span class="tt"><a href="COMMON-LISP____EQ.html">eq</a></span> and hence will refer to 
 precisely the same hash table.  In other words, <span class="v">hons-acons!</span> makes it 
 relatively easy to <b>inadvertently</b> steal the hash table associated with 
 some other fast alist.  This problem can be alleviated somewhat by uniquely 
 naming alists; see the discussion in <span class="tt"><a href="ACL2____HONS-ACONS.html">hons-acons</a></span> for details.</p> 
 
 <p>Despite these drawbacks, <span class="v">hons-acons!</span> is the typical way to generate a 
 fast alist that is normed (but also, for example, see <a href="ACL2____FAST-ALIST-FORK_12.html">fast-alist-fork!</a>).  It is not adequate to <span class="tt"><a href="ACL2____HONS-COPY.html">hons-copy</a></span> a fast alist that 
 was generated by ordinary <span class="tt"><a href="ACL2____HONS-ACONS.html">hons-acons</a></span> calls, because this would produce 
 an EQUAL-but-not-EQ object, and this new object would not be associated with 
 the fast alist's hash table.</p> 
 
 <p><b>Function: </b>hons-acons!</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a> hons-acons! (key val alist)
       (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard t))
       (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> key val) alist))</pre>
</body>
</html>
