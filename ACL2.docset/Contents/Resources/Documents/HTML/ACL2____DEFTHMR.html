<html>
<head>
<meta charset="UTF-8">
<title>Defthmr</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____DEFTHMR">Click for Defthmr in the Full Manual</a></h3>

<p>Submit a theorem, as a <a href="ACL2____REWRITE.html">rewrite</a> rule only if possible.</p><p><span class="v">Defthmr</span> stands for ``defthm rule''.  It is a macro that is 
 intended to be equivalent to <span class="tt"><a href="ACL2____DEFTHM.html">defthm</a></span> — in particular, it takes 
 the same arguments as <span class="v">defthm</span> — but when necessary it avoids the 
 default of <span class="v">:rule-classes :rewrite</span>.  Here we also document <span class="v">defthmdr</span>, 
 which is similar to <span class="v">defthmr</span> but when a rewrite rule is created, it is 
 immediately disabled; thus <span class="v">defthmdr</span> is to <span class="v">defthmd</span> as <span class="v">defthmr</span> is 
 to <span class="v">defthm</span>.</p> 
 
 <pre class="code">Examples:

(<a href="ACL2____DEFTHMR.html">defthmr</a> symbol-name-abc
  (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="COMMON-LISP____SYMBOL-NAME.html">symbol-name</a> 'abc) "ABC"))

(<a href="ACL2____DEFTHMDR.html">defthmdr</a> symbol-name-intern$-acl2
  (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="COMMON-LISP____SYMBOL-NAME.html">symbol-name</a> (<a href="ACL2____INTERN_42.html">intern$</a> name "ACL2")) name))

General Forms:

(<a href="ACL2____DEFTHMR.html">defthmr</a>  name term ...) ; same keyword arguments accepted as for defthm
(<a href="ACL2____DEFTHMDR.html">defthmdr</a> name term ...) ; same keyword arguments accepted as for defthm</pre> 
 
 <p>In the first example above, the use of <span class="v">defthm</span> would cause an 
 error:</p> 
 
 <pre class="code">ACL2 !&gt;(<a href="ACL2____DEFTHM.html">defthm</a> symbol-name-abc
         (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="COMMON-LISP____SYMBOL-NAME.html">symbol-name</a> 'abc) "ABC"))


ACL2 Error in ( DEFTHM SYMBOL-NAME-ABC ...):  A :REWRITE rule generated
from SYMBOL-NAME-ABC is illegal because it rewrites the term 'T to
itself! ....</pre> 
 
 <p>The problem is that the internal form for the term <span class="v">(<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="COMMON-LISP____SYMBOL-NAME.html">symbol-name</a>
 'abc) "ABC")</span> is, perhaps surprisingly, <span class="v">'T</span>.  The reason is that ACL2 
 evaluates calls of undefined primitives, such as <span class="tt"><a href="COMMON-LISP____SYMBOL-NAME.html">symbol-name</a></span> and 
 <span class="tt"><a href="COMMON-LISP____EQUAL.html">equal</a></span>, when translating to internal form.</p> 
 
 <p><span class="v">Defthmr</span> and <span class="v">defthmdr</span> avoid this problem by adding 
 <span class="v">:rule-classes nil</span> in such cases.  The two examples above thus generate 
 the following events.  In the first example, the addition of <span class="v">:rule-classes nil</span> 
 avoids the error discussed above, by instructing ACL2 to avoid the default 
 behavior of attempting to store the theorem as a <a href="ACL2____REWRITE.html">rewrite</a> rule.  The 
 second example has no such problem (because of the variable, <span class="v">name</span>), so 
 ACL2 treats that <span class="v">defthmdr</span> simply as <span class="v">defthmd</span>.</p> 
 
 <pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> symbol-name-abc
  (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="COMMON-LISP____SYMBOL-NAME.html">symbol-name</a> 'abc) "ABC")
  :rule-classes nil)

(<a href="ACL2____DEFTHMD.html">defthmd</a> symbol-name-intern$-acl2
  (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="COMMON-LISP____SYMBOL-NAME.html">symbol-name</a> (<a href="ACL2____INTERN_42.html">intern$</a> name "ACL2")) name))</pre> 
 
 <p>Note that if a <span class="v">:rule-classes</span> keyword argument is supplied, then the 
 given call of <span class="v">defthmr</span> or <span class="v">defthmdr</span> simply expands directly to the 
 corresponding call of <span class="v">defthm</span> or <span class="v">defthmd</span>, respectively.</p>
</body>
</html>
