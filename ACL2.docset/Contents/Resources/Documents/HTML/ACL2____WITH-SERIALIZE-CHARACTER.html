<html>
<head>
<meta charset="UTF-8">
<title>With-serialize-character</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____WITH-SERIALIZE-CHARACTER">Click for With-serialize-character in the Full Manual</a></h3>

<p>Control output mode for <span class="v">print-object$</span></p><p>See <a href="ACL2____SERIALIZE.html">serialize</a> for a discussion of ``serialization'' 
 routines, contributed by Jared Davis for saving ACL2 objects in files for 
 later loading.</p> 
 
 <p>NOTE: To control the use of the serialize writer by the system, rather than 
 by the user (as discussed below), see <a href="ACL2____SET-SERIALIZE-CHARACTER-SYSTEM.html">set-serialize-character-system</a>.</p> 
 
 <p>The expression <span class="v">(<a href="ACL2____WITH-SERIALIZE-CHARACTER.html">with-serialize-character</a> char form)</span> evaluates to the 
 value of <span class="v">form</span>, but with the serialize-character of the <span class="tt"><a href="ACL2____STATE.html">state</a></span> 
 assigned to <span class="v">char</span>, which should be one of <span class="v">nil</span>, <span class="v">#\Y</span>, or 
 <span class="v">#\Z</span>.  We describe the effect of that assignment below.  But note that if 
 you are doing this because of one or more specific calls of 
 <span class="v">print-object$</span>, such as <span class="v">(<a href="ACL2____PRINT-OBJECT_42.html">print-object$</a> x channel state)</span>, then you may 
 wish instead to evaluate <span class="v">(print-object$-fn x serialize-character channel
 state)</span>, in which case you will not need to use 
 <span class="v">with-serialize-character</span>.</p> 
 
 <pre class="code">General forms:
(<a href="ACL2____WITH-SERIALIZE-CHARACTER.html">with-serialize-character</a> nil form)
(<a href="ACL2____WITH-SERIALIZE-CHARACTER.html">with-serialize-character</a> #Y form)
(<a href="ACL2____WITH-SERIALIZE-CHARACTER.html">with-serialize-character</a> #Z form)</pre> 
 
 <p>where <span class="v">form</span> should evaluate to an <a href="ACL2____ERROR-TRIPLE.html">error-triple</a>.</p> 
 
 <p>You can get the current serialize-character as follows.</p> 
 
 <pre class="code">(<a href="ACL2____GET-SERIALIZE-CHARACTER.html">get-serialize-character</a> state)</pre> 
 
 <p>Note that if you prefer to obtain the same behavior (as described below) 
 globally, rather than only within the scope of <span class="v">with-serialize-character</span>, 
 then use <span class="v">set-serialize-character</span> in a corresponding manner:</p> 
 
 <pre class="code">(<a href="ACL2____SET-SERIALIZE-CHARACTER.html">set-serialize-character</a> nil state)
(<a href="ACL2____SET-SERIALIZE-CHARACTER.html">set-serialize-character</a> #\Y state)
(<a href="ACL2____SET-SERIALIZE-CHARACTER.html">set-serialize-character</a> #\Z state)</pre> 
 
 <p>In each case above, calls of <span class="v">print-object$</span> (see <a href="ACL2____IO.html">io</a>) in 
 <span class="v">form</span> will produce a readable object.  In the first case, that object is 
 printed as one might expect at the terminal, as an ordinary Lisp s-expression. 
 But in the other cases, the object is printed by first laying down either 
 <span class="v">#Y</span> or <span class="v">#Z</span> (respectively) and then calling <span class="tt"><a href="ACL2____SERIALIZE-WRITE.html">serialize-write</a></span> (or 
 more precisely, the underlying function called by <span class="v">serialize-write</span> that 
 prints to a stream).</p> 
 
 <p>Consider what happens when the ACL2 reader encounters an object produced as 
 described above (in the <span class="v">#Y</span> or <span class="v">#Z</span> case).  When the object was 
 written, information was recorded on whether that object was a <a href="ACL2____HONS.html">hons</a>. 
 In the case of <span class="v">#Z</span>, the object will be read as a hons if and only if it 
 was originally written as a hons.  But in the case of <span class="v">#Y</span>, it will never 
 be read as a hons.  Thus, <span class="v">#Y</span> and <span class="v">#Z</span> will behave the same if the 
 original written object was not a hons, creating an object that is not a hons. 
 For an equivalent explanation and a bit more discussion, see <a href="ACL2____SERIALIZE-READ.html">serialize-read</a>, in particular the discussion of the hons-mode.  The value 
 <span class="v">:smart</span> described there corresponds to <span class="v">#Z</span>, while <span class="v">:never</span> 
 corresponds to <span class="v">#Y</span>.</p>
</body>
</html>
