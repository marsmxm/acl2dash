<html>
<head>
<meta charset="UTF-8">
<title>With-stolen-alist</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____WITH-STOLEN-ALIST">Click for With-stolen-alist in the Full Manual</a></h3>

<p><span class="v">(<a href="ACL2____WITH-STOLEN-ALIST.html">with-stolen-alist</a> name form)</span> ensures that <span class="v">name</span> is a fast 
alist at the start of the execution of <span class="v">form</span>.  At the end of execution, it 
ensures that <span class="v">name</span> is a fast alist if and only if it was originally.  That 
is, if <span class="v">name</span> was not a fast alist originally, its hash table link is freed, 
and if it was a fast alist originally but its table was modified during the 
execution of <span class="v">form</span>, that table is restored.  Note that any extended table 
created from the original fast alist during <span class="v">form</span> must be manually freed.</p><p>Logically, <span class="v">with-stolen-alist</span> just returns <span class="v">form</span>.</p> 
 
 <p>Under the hood, we cause <span class="v">alist</span> to become a fast alist before executing 
 <span class="v">form</span>, and we check the various conditions outlined above before returning 
 the final value.</p> 
 
 <p>Note that <span class="v">with-stolen-alist</span> will cause logically tail-recursive 
 functions not to execute tail-recursively if its cleanup phase happens after 
 the tail-recursive call returns.</p>
</body>
</html>
