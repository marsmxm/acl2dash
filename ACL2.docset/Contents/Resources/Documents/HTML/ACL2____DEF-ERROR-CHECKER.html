<html>
<head>
<meta charset="UTF-8">
<title>Def-error-checker</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____DEF-ERROR-CHECKER">Click for Def-error-checker in the Full Manual</a></h3>

<p>Generate an error checking function 
          and an associated macro abbreviation.</p><p>This macro generates an error checking function 
     and an associated macro abbreviation of the following form:</p><pre class="code">(<a href="ACL2____DEFINE.html">define</a> &lt;name&gt; (&lt;x1&gt; ... &lt;xn&gt;
                (description msgp)
                (error-erp (<a href="COMMON-LISP____NOT.html">not</a> (<a href="COMMON-LISP____NULL.html">null</a> error-erp))
                           "Flag to return in case of error.")
                (error-val "Value to return in case of error.")
                (<a href="ACL2____CTX.html">ctx</a> "Context for errors.")
                state)
  :returns (<a href="ACL2____MV.html">mv</a> &lt;erp&gt;
               &lt;val&gt;
               state)
  :mode &lt;mode&gt;
  :verify-guards &lt;verify-guards&gt; ; may be absent
  :parents &lt;parents&gt; ; may be absent
  :short &lt;short&gt; ; may be absent
  :long &lt;long&gt; ; may be absent
  (<a href="ACL2____B_A2.html">b*</a> (((unless &lt;condition1&gt;) (<a href="ACL2____ER-SOFT_B2.html">er-soft+</a>
                               ctx error-erp error-val . &lt;message1&gt;))
       ...
       ((unless &lt;conditionm&gt;) (<a href="ACL2____ER-SOFT_B2.html">er-soft+</a>
                               ctx error-erp error-val . &lt;messagem&gt;)))
    (<a href="ACL2____VALUE.html">value</a> &lt;result&gt;))
  :no-function t)

(<a href="ACL2____DEFSECTION.html">defsection</a> &lt;name&gt;$
  :parents (&lt;name&gt;)
  :short "Calls @(tsee &lt;name&gt;) with
          @('ctx') and @('state') as the last two arguments."
  :long "@(def &lt;name&gt;$)"
  (<a href="COMMON-LISP____DEFMACRO.html">defmacro</a> &lt;name&gt;$ (&lt;x1'&gt; ... &lt;xn'&gt; description error-erp error-val)
    `(&lt;name&gt; ,&lt;x1'&gt; ... ,&lt;xn'&gt; description error-erp error-val ctx state)))</pre><p>where each <span class="v">&lt;...&gt;</span>, 
     except <span class="v">&lt;erp&gt;</span>, <span class="v">&lt;val&gt;</span>, and <span class="v">&lt;x1'&gt;</span>, ..., <span class="v">&lt;xn'&gt;</span>, 
     is supplied as argument to the macro:</p><ul>
<li>
<span class="v">&lt;name&gt;</span> is the name of the function, 
      and, with a <span class="v">$</span> added at the end, the name of the macro.</li>
<li>Each <span class="v">&lt;xi&gt;</span> is a symbol or 
      an <a href="STD____EXTENDED-FORMALS.html">extended formal</a>. 
      Let <span class="v">&lt;xi'&gt;</span> be: 
      <span class="v">&lt;xi&gt;</span> if <span class="v">&lt;xi&gt;</span> is a symbol; 
      the name of the <span class="v">&lt;xi&gt;</span> extended formal otherwise.</li>
<li>
<span class="v">&lt;erp&gt;</span> is a <a href="STD____RETURNS-SPECIFIERS.html">return specifier</a> that describes the error flag returned 
      inside the <a href="ACL2____ERROR-TRIPLE.html">error triple</a>. 
      This return specifier is: 
      <span class="v">(erp (<a href="ACL2____IMPLIES.html">implies</a> erp (<a href="COMMON-LISP____EQUAL.html">equal</a> erp error-erp)))</span> 
      if <span class="v">&lt;mode&gt;</span> is <span class="v">:logic</span>; and 
      <span class="v">(erp "@('nil</span> or <span class="v">error-erp</span>.")') 
      if <span class="v">&lt;mode&gt;</span> is <span class="v">:program</span>.</li>
<li>
<span class="v">&lt;val&gt;</span> is a <a href="STD____RETURNS-SPECIFIERS.html">return specifier</a> that describes the value returned 
      inside the <a href="ACL2____ERROR-TRIPLE.html">error triple</a>. 
      This return specifier depends on the <span class="v">&lt;returns&gt;</span> argument to the macro 
      (see below for the complete list of arguments to the macro) 
      and on <span class="v">&lt;mode&gt;</span>: 
      if no <span class="v">&lt;returns&gt;</span> argument is supplied and <span class="v">&lt;mode&gt;</span> is <span class="v">:logic</span>, 
      then <span class="v">&lt;val&gt;</span> is 
      <span class="v">(val (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____IMPLIES.html">implies</a> erp (<a href="COMMON-LISP____EQUAL.html">equal</a> val error-val))
                   (<a href="ACL2____IMPLIES.html">implies</a> (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP____NOT.html">not</a> erp) error-erp) (<a href="COMMON-LISP____NOT.html">not</a> val))))</span>; 
      if no <span class="v">&lt;returns&gt;</span> argument is supplied and <span class="v">&lt;mode&gt;</span> is <span class="v">:program</span>, 
      then <span class="v">&lt;val&gt;</span> is 
      <span class="v">(val "@('nil</span> if <span class="v">erp</span> is <span class="v">nil</span>, otherwise <span class="v">error-val</span>.")'); 
      if a <span class="v">&lt;returns&gt;</span> argument is supplied, 
      then <span class="v">&lt;val&gt;</span> is <span class="v">&lt;returns&gt;</span>.</li>
<li>
<span class="v">&lt;mode&gt;</span> is either <span class="v">:logic</span> or <span class="v">:program</span>.</li>
<li>
<span class="v">&lt;verify-guards&gt;</span> is either <span class="v">t</span> or <span class="v">nil</span>. 
      If <span class="v">&lt;verify-guards&gt;</span> is not supplied as argument, 
      <span class="v">:verify-guards</span> is absent.</li>
<li>
<span class="v">&lt;parents&gt;</span> is a list of parent XDOC topics. 
      If <span class="v">&lt;parents&gt;</span> is not supplied as argument, <span class="v">:parents</span> is absent.</li>
<li>
<span class="v">&lt;short&gt;</span> and <span class="v">&lt;long&gt;</span> are strings that document the function. 
      If <span class="v">&lt;short&gt;</span> is not supplied as argument, <span class="v">:short</span> is absent. 
      If <span class="v">&lt;long&gt;</span> is not supplied as argument, <span class="v">:long</span> is absent.</li>
<li>Each <span class="v">&lt;conditionj&gt;</span> is a term 
      whose evaluation checks a condition 
      on the <span class="v">&lt;x1&gt;</span>, ..., <span class="v">&lt;xn&gt;</span> arguments. 
      The conditions are checked in order.</li>
<li>Each <span class="v">&lt;messagej&gt;</span> is a list that consists of 
      a <a href="ACL2____FMT.html">format string</a> 
      followed by up to 10 terms, 
      whose values fill in the placeholders of the format string. 
      Generally, one of these terms should be <span class="v">description</span> 
      and it should correspond to a <span class="v">~@</span> placeholder 
      in the format string, 
      which is appropriate for the <span class="tt"><a href="ACL2____MSGP.html">msgp</a></span> type of <span class="v">description</span>. 
      The <span class="v">&lt;messagej&gt;</span> list is inserted into the <span class="tt"><a href="ACL2____ER-SOFT_B2.html">er-soft+</a></span> call, 
      providing an error message when <span class="v">&lt;conditionj&gt;</span> is not satisfied 
      (but the previous conditions are).</li>
<li>
<span class="v">&lt;result&gt;</span> is a term whose value is returned 
      when all the conditions are satisfied.</li>
</ul><p>The generated formal arguments 
     <span class="v">description</span>, <span class="v">error-erp</span>, and <span class="v">error-val</span> 
     and the generated return variables <span class="v">erp</span> and <span class="v">val</span> 
     are symbols with those names in the same package as 
     the <span class="v">&lt;name&gt;</span> symbol used as the name of the generated function.</p><p>The macro is called as follows:</p><pre class="code">(<a href="ACL2____DEF-ERROR-CHECKER.html">def-error-checker</a> &lt;name&gt;
  (&lt;x1&gt; ... &lt;xn&gt;)
  :body ((&lt;condition1&gt; . &lt;message1&gt;) ... (&lt;conditionm&gt; . &lt;messagem&gt;))
  :returns &lt;returns&gt; ; default not used
  :result &lt;result&gt; ; default is nil
  :mode &lt;mode&gt; ; default is :logic
  :verify-guards &lt;verify-guards&gt; ; default not used
  :parents &lt;parents&gt; ; default not used
  :short &lt;short&gt; ; default not used
  :long &lt;long&gt; ; default not used
  )</pre><p>A table keeps track of all the successful calls to this macro, 
     for <a href="ACL2____REDUNDANT-EVENTS.html">redundancy</a> checking.</p>
</body>
</html>
