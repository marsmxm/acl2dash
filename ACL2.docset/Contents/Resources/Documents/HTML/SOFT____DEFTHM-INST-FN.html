<html>
<head>
<meta charset="UTF-8">
<title>Defthm-inst-fn</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=SOFT____DEFTHM-INST-FN">Click for Defthm-inst-fn in the Full Manual</a></h3>

<p>Validate some of the inputs to <span class="tt"><a href="SOFT____DEFTHM-INST.html">defthm-inst</a></span> 
          and generate the event form to submit.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(defthm-inst-fn thm sothm-inst options ctx state) 
  → 
(mv erp event state)</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">ctx</span> — Context for errors.</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">erp</span> — <span class="tt"><a href="ACL2____BOOLEANP.html">booleanp</a></span> flag of the 
                     <a href="ACL2____ERROR-TRIPLE.html">error 
                     triple</a>.</dd> 
<dd>
<span class="tt">event</span> — A <span class="tt"><a href="ACL2____MAYBE-PSEUDO-EVENT-FORMP.html">maybe-pseudo-event-formp</a></span>.</dd> 
 
</dl></div> 
<p>We directly check all the inputs except for the <span class="v">:rule-classes</span> option, 
    relying on <span class="tt"><a href="ACL2____DEFTHM.html">defthm</a></span> to check it.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>defthm-inst-fn</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 defthm-inst-fn
 (<a href="ACL2____THM.html">thm</a> sothm-inst options ctx state)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :stobjs (<a href="ACL2____STATE.html">state</a>)))
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard t))
 (<a href="COMMON-LISP____LET.html">let</a>
  ((__function__ 'defthm-inst-fn))
  (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
  (<a href="ACL2____B_A2.html">b*</a>
   ((wrld (<a href="ACL2____W.html">w</a> state))
    ((unless (<a href="COMMON-LISP____SYMBOLP.html">symbolp</a> thm))
     (<a href="ACL2____ER-SOFT_B2.html">er-soft+</a> ctx t nil
               "The first input must be a symbol, but ~x0 is not."
               thm))
    ((unless (<a href="SOFT____CHECK-SOTHM-INST.html">check-sothm-inst</a> sothm-inst wrld))
     (<a href="ACL2____ER-SOFT_B2.html">er-soft+</a>
      ctx t nil
      "The second input must be ~
                   the name of a second-order theorem ~
                   followed by the pairs of an instantiation, ~
                   but ~x0 is not."
      sothm-inst))
    (sothm (<a href="COMMON-LISP____CAR.html">car</a> sothm-inst))
    (inst (<a href="COMMON-LISP____CDR.html">cdr</a> sothm-inst))
    ((unless (<a href="COMMON-LISP____SUBSETP.html">subsetp</a> (<a href="ACL2____ALIST-KEYS.html">alist-keys</a> inst)
                      (<a href="SOFT____FUNVARS-OF-THM.html">funvars-of-thm</a> sothm wrld)))
     (<a href="ACL2____ER-SOFT_B2.html">er-soft+</a>
      ctx t nil
      "Each function variable key of ~x0 must be ~
                   among function variable that ~x1 depends on."
      inst sothm))
    ((unless (<a href="ACL2____KEYWORD-VALUE-LISTP.html">keyword-value-listp</a> options))
     (<a href="ACL2____ER-SOFT_B2.html">er-soft+</a>
      ctx t nil
      "The inputs after the second input ~
                   must be a keyword-value list, ~
                   but ~x0 is not."
      options))
    (keywords (<a href="ACL2____EVENS.html">evens</a> options))
    ((unless (<a href="ACL2____NO-DUPLICATESP.html">no-duplicatesp</a> keywords))
     (<a href="ACL2____ER-SOFT_B2.html">er-soft+</a> ctx t nil
               "The inputs keywords must be unique."))
    ((unless (<a href="COMMON-LISP____SUBSETP.html">subsetp</a> keywords
                      '(:rule-classes :enable :print)))
     (<a href="ACL2____ER-SOFT_B2.html">er-soft+</a>
      ctx t nil
      "Only the input keywords ~
                   :RULE-CLASSES, :ENABLE, and :PRINT are allowed."))
    (print-pair (<a href="ACL2____ASSOC-KEYWORD.html">assoc-keyword</a> :print options))
    (print (<a href="COMMON-LISP____IF.html">if</a> print-pair (<a href="COMMON-LISP____CADR.html">cadr</a> print-pair)
               :result))
    ((unless (<a href="ACL2____MEMBER-EQ.html">member-eq</a> print '(nil :all :result)))
     (<a href="ACL2____ER-SOFT_B2.html">er-soft+</a>
      ctx t nil
      "The :PRINT input must be NIL, :ALL, or :RESULT, ~
                   but ~x0 is not."
      print))
    (options (remove-keyword :print options))
    (enable-pair (<a href="ACL2____ASSOC-KEYWORD.html">assoc-keyword</a> :enable options))
    (<a href="ACL2____ENABLE.html">enable</a> (<a href="COMMON-LISP____IF.html">if</a> enable-pair (<a href="COMMON-LISP____CADR.html">cadr</a> enable-pair) t))
    ((unless (<a href="ACL2____BOOLEANP.html">booleanp</a> enable))
     (<a href="ACL2____ER-SOFT_B2.html">er-soft+</a>
      ctx t nil
      "The :ENABLE input must be T or NIL, ~
                   but it is ~x0 instead."
      enable))
    (options (remove-keyword :enable options))
    (sothm-formula (<a href="ACL2____FORMULA.html">formula</a> sothm nil wrld))
    (thm-formula (<a href="SOFT____FUN-SUBST-TERM.html">fun-subst-term</a> inst sothm-formula wrld))
    (thm-formula (<a href="ACL2____UNTRANSLATE.html">untranslate</a> thm-formula t wrld))
    (fsbs (<a href="SOFT____EXT-FUN-SUBST-TERM.html">ext-fun-subst-term</a> sothm-formula inst wrld))
    (thm-proof (<a href="SOFT____SOTHM-INST-PROOF.html">sothm-inst-proof</a> sothm fsbs wrld))
    (macro (<a href="COMMON-LISP____IF.html">if</a> enable 'defthm 'defthmd))
    (defthm-event (<a href="COMMON-LISP____CONS.html">cons</a> macro
                        (<a href="COMMON-LISP____CONS.html">cons</a> thm
                              (<a href="COMMON-LISP____CONS.html">cons</a> thm-formula
                                    (<a href="COMMON-LISP____APPEND.html">append</a> thm-proof options)))))
    (defthm-event-without-proof
         (<a href="COMMON-LISP____CONS.html">cons</a> macro
               (<a href="COMMON-LISP____CONS.html">cons</a> thm (<a href="COMMON-LISP____CONS.html">cons</a> thm-formula options))))
    (return-value-event (<a href="COMMON-LISP____CONS.html">cons</a> 'value-triple
                              (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> 'quote (<a href="COMMON-LISP____CONS.html">cons</a> thm 'nil))
                                    'nil)))
    (<a href="ACL2____EVENT.html">event</a>
     (<a href="COMMON-LISP____COND.html">cond</a>
      ((<a href="COMMON-LISP____EQ.html">eq</a> print nil)
       (<a href="COMMON-LISP____CONS.html">cons</a> 'progn
             (<a href="COMMON-LISP____CONS.html">cons</a> defthm-event
                   (<a href="COMMON-LISP____CONS.html">cons</a> return-value-event 'nil))))
      ((<a href="COMMON-LISP____EQ.html">eq</a> print :all)
       (<a href="ACL2____RESTORE-OUTPUT.html">restore-output</a>
            (<a href="COMMON-LISP____CONS.html">cons</a> 'progn
                  (<a href="COMMON-LISP____CONS.html">cons</a> defthm-event
                        (<a href="COMMON-LISP____CONS.html">cons</a> return-value-event 'nil)))))
      ((<a href="COMMON-LISP____EQ.html">eq</a> print :result)
       (<a href="COMMON-LISP____CONS.html">cons</a>
        'progn
        (<a href="COMMON-LISP____CONS.html">cons</a>
         defthm-event
         (<a href="COMMON-LISP____CONS.html">cons</a>
          (<a href="COMMON-LISP____CONS.html">cons</a>
           'cw-event
           (<a href="COMMON-LISP____CONS.html">cons</a> '"~x0~|"
                 (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> 'quote
                             (<a href="COMMON-LISP____CONS.html">cons</a> defthm-event-without-proof 'nil))
                       'nil)))
          (<a href="COMMON-LISP____CONS.html">cons</a> return-value-event 'nil)))))
      (t (<a href="ACL2____IMPOSSIBLE.html">impossible</a>)))))
   (<a href="ACL2____VALUE.html">value</a> event))))</pre> 

</body>
</html>
