<html>
<head>
<meta charset="UTF-8">
<title>Translate-to-ACL2-fn</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=SYNTHETO____TRANSLATE-TO-ACL2-FN">Click for Translate-to-ACL2-fn in the Full Manual</a></h3>

<p>Translate a Syntheto top-level construct, or a list of them, 
          into corresponding ACL2 events.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(translate-to-acl2-fn top/tops ctx state) 
  → 
(mv erp event state)</pre></dt>
<dt>Returns</dt>
<dd>
<span class="tt">event</span> — A <span class="tt"><a href="ACL2____PSEUDO-EVENT-FORMP.html">pseudo-event-formp</a></span>.</dd> 
 
</dl></div> 
<p>This is called by <span class="tt"><a href="SYNTHETO____TRANSLATE-TO-ACL2.html">translate-to-ACL2</a></span>, 
     which is the entry point of the translation from Syntheto to ACL2.</p><p>We ensure that the input is a top-level construct or a list of them.</p><p>We retrieve the existing (i.e. old) top-level constructs 
     from the current translation state. 
     We wrap them into a context and we check that 
     the input satisfies the static semantics 
     (this wrapping is a bit awkward, and we will eliminate it 
     after we make some planned improvements to the static semnantics). 
     If the static semantic checks succeed, 
     we generate an event to extend the translation state with the input.</p><p>This is just a start: there is, of course, much more to do here. 
     In particular, we need to generate ACL2 events 
     corresponding to the input Syntheto top-level constructs. 
     We are also curently ignoring the type obligations 
     generated by the static semantics checks: 
     these should be turned into ACL2 theorems, 
     and used to generate proofs for the other events 
     (e.g. guard proofs for function definitions).</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>translate-to-acl2-fn</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 translate-to-acl2-fn
 (top/tops ctx state)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :stobjs (<a href="ACL2____STATE.html">state</a>)))
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard t))
 (<a href="COMMON-LISP____LET.html">let</a>
  ((__function__ 'translate-to-acl2-fn))
  (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
  (<a href="ACL2____B_A2.html">b*</a>
   (((<a href="ACL2____ER.html">er</a> tops)
     (<a href="COMMON-LISP____COND.html">cond</a>
      ((<a href="SYNTHETO____TOPLEVELP.html">toplevelp</a> top/tops)
       (<a href="ACL2____VALUE.html">value</a> (<a href="COMMON-LISP____LIST.html">list</a> top/tops)))
      ((<a href="SYNTHETO____TOPLEVEL-LISTP.html">toplevel-listp</a> top/tops)
       (<a href="ACL2____VALUE.html">value</a> top/tops))
      (t
       (<a href="ACL2____ER.html">er</a>
        soft ctx
        "The input must be ~
                            a Syntheto top-level construct ~
                            or a list of them, ~
                            but it is ~x0 instead."
        top/tops))))
    (tstate (<a href="SYNTHETO____GET-TRANS-STATE.html">get-trans-state</a> (<a href="ACL2____W.html">w</a> state)))
    (old-tops (<a href="SYNTHETO____TRANS-STATE-_E3TOPS.html">trans-state-&gt;tops</a> tstate))
    (ctxt (<a href="SYNTHETO____MAKE-CONTEXT.html">make-context</a> :tops old-tops))
    ((<a href="ACL2____MV.html">mv</a> err? obligs)
     (<a href="SYNTHETO____CHECK-TOPLEVEL-LIST.html">check-toplevel-list</a> tops ctxt))
    ((when err?)
     (<a href="ACL2____ER.html">er</a> soft ctx
         "Static semantic failure:~%~x0" err?))
    (<a href="COMMON-LISP____-.html">-</a> (<a href="ACL2____CW.html">cw</a> "Proof obligations:~%~x0~%" obligs))
    (tstate (<a href="SYNTHETO____EXTEND-TRANS-STATE-LIST.html">extend-trans-state-list</a> tops tstate))
    (table-event (<a href="COMMON-LISP____CONS.html">cons</a> 'set-trans-state
                       (<a href="COMMON-LISP____CONS.html">cons</a> tstate 'nil)))
    (logical-events (d--&gt;s-toplevel-list tops)))
   (<a href="ACL2____VALUE.html">value</a> (<a href="COMMON-LISP____CONS.html">cons</a> 'progn
                (<a href="COMMON-LISP____CONS.html">cons</a> table-event logical-events))))))</pre> 

</body>
</html>
