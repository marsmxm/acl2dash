<html>
<head>
<meta charset="UTF-8">
<title>Make-implicit-wires</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=VL____MAKE-IMPLICIT-WIRES">Click for Make-implicit-wires in the Full Manual</a></h3>

<p>Create explicit declarations for implicit wires.  This is generally 
the first step after parsing a design.</p><p>Verilog allows wires to be implicitly declared in certain cases. 
For instance, even if <span class="v">w</span> has not yet been declared, you can write things 
like:</p> 
 
<pre class="code">assign w = &amp;in;</pre> 
 
<p>and we are to assume that <span class="v">w</span> is a one-bit wire.  This is mostly 
straightforward but there are some subtleties; see <a href="VL____IMPLICIT-WIRES-MINUTIA.html">implicit-wires-minutia</a> for more discussion.</p> 
 
<p>Our general approach to handling these wires in VL is to add explicit 
declarations for them.  Having explicit declarations seems like a generally 
good idea.  For instance, it allows us to easily check for conflicting 
declarations with the same name, and to generally assume that when we look 
something up we should get a real declaration for it.</p> 
 
<p>Historically, VL added explicit declarations for these wires as part of the 
<a href="VL____LOADER.html">loader</a>, even before a proper <a href="VL____VL-MODULE-P.html">vl-module-p</a> structures were 
generated, which allowed us to easily consider the order of module elements. 
But when we added support for SystemVerilog <span class="v">import</span> statements, we found 
this approach to be tricky.  In particular, to decide whether we need to add a 
declaration for some particular wire <span class="v">foo</span>, we now need to consider whether 
<span class="v">foo</span> is defined by any imported package.  For this to work, we really want 
to be able to inspect the whole <a href="VL____VL-DESIGN.html">vl-design</a> while making implicit wires. 
We therefore decided to split making implicit wires out of the parser and into 
a separate transform.</p> 
 
<h3>Note: Special Transform!</h3> 
 
<p>This transform is unique and we generally expect to run it as a very early 
step after parsing.  Normally it is invoked as part of <a href="VL____ANNOTATE.html">annotate</a>.  It is 
also closely related to <a href="VL____SHADOWCHECK.html">shadowcheck</a>—indeed, it invokes 
shadowcheck— and the two should generally be regarded as a single, 
unified transition from just-parsed modules to a more canonical form.</p> 
 
<p>The special thing about <span class="v">make-implicit-wires</span> and <span class="v">shadowcheck</span> is 
that these transforms we need to process module elements in parse order, i.e., 
the order that things occur in the source files.  In contrast, throughout the 
rest of VL we pay no attention to the parse order and just treat modules as if 
they contain various sets of elements (e.g., assignments, gates, etc.).</p> 
 
<p>The elements are available in parse order in the special <span class="v">parse-temps</span> 
field of the <a href="VL____VL-MODULE.html">vl-module</a>.  Other transforms should never look at 
<span class="v">parse-temps</span>, but should refer to these typed fields, instead.</p>
</body>
</html>
