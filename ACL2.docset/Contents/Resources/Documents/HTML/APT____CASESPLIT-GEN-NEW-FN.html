<html>
<head>
<meta charset="UTF-8">
<title>Casesplit-gen-new-fn</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=APT____CASESPLIT-GEN-NEW-FN">Click for Casesplit-gen-new-fn in the Full Manual</a></h3>

<p>Generate the new function definition.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(casesplit-gen-new-fn old$ 
                      conditions$ news new-name$ new-enable$ 
                      verify-guards$ appcond-thm-names wrld) 
 
   
(mv local-event exported-event)</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">old$</span>  <font color="#606060">Guard <span class="v">(<a href="COMMON-LISP____SYMBOLP.html">symbolp</a> old$)</span>.</font>
</dd> 
  <dd>
<span class="tt">conditions$</span>  <font color="#606060">Guard <span class="v">(<a href="ACL2____PSEUDO-TERM-LISTP.html">pseudo-term-listp</a> conditions$)</span>.</font>
</dd> 
  <dd>
<span class="tt">news</span>  <font color="#606060">Guard <span class="v">(<a href="ACL2____PSEUDO-TERM-LISTP.html">pseudo-term-listp</a> news)</span>.</font>
</dd> 
  <dd>
<span class="tt">new-name$</span>  <font color="#606060">Guard <span class="v">(<a href="COMMON-LISP____SYMBOLP.html">symbolp</a> new-name$)</span>.</font>
</dd> 
  <dd>
<span class="tt">new-enable$</span>  <font color="#606060">Guard <span class="v">(<a href="ACL2____BOOLEANP.html">booleanp</a> new-enable$)</span>.</font>
</dd> 
  <dd>
<span class="tt">verify-guards$</span>  <font color="#606060">Guard <span class="v">(<a href="ACL2____BOOLEANP.html">booleanp</a> verify-guards$)</span>.</font>
</dd> 
  <dd>
<span class="tt">appcond-thm-names</span>  <font color="#606060">Guard <span class="v">(<a href="ACL2____SYMBOL-SYMBOL-ALISTP.html">symbol-symbol-alistp</a> appcond-thm-names)</span>.</font>
</dd> 
  <dd>
<span class="tt">wrld</span>  <font color="#606060">Guard <span class="v">(<a href="ACL2____PLIST-WORLDP.html">plist-worldp</a> wrld)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">local-event</span>  A <span class="tt"><a href="ACL2____PSEUDO-EVENT-FORMP.html">pseudo-event-formp</a></span>.</dd> 
<dd>
<span class="tt">exported-event</span>  A <span class="tt"><a href="ACL2____PSEUDO-EVENT-FORMP.html">pseudo-event-formp</a></span>.</dd> 
 
</dl></div> 
<p>The macro used to introduce the new function is determined by 
     whether the new function must be enabled or not.</p><p>The new function has the same formal arguments as the old function.</p><p>The body of the new function is obtained 
     as shown in the reference documentation. 
     Starting with the term <span class="v">new0</span>, 
     we recursively wrap the term with <span class="v">(<a href="COMMON-LISP____IF.html">if</a> condk newk ...)</span>, 
     thus creating a nest of <span class="tt"><a href="COMMON-LISP____IF.html">if</a></span>s that, when untranslated, 
     have the <span class="tt"><a href="COMMON-LISP____COND.html">cond</a></span> structure described in the reference documentation 
     (except when <span class="v">p</span> is 1, 
     in which case the <span class="tt"><a href="COMMON-LISP____IF.html">if</a></span> remains an <span class="tt"><a href="COMMON-LISP____IF.html">if</a></span>, 
     which seems appropriate anyhow). 
     The new function is never recursive, 
     so it needs no measure, well-founded relation, or termination hints.</p><p>The new function has the same guard as the old function.</p><p>The guards are verified as shown in the template file. 
     The <span class="v">appcond-thm-names</span> alist is in the same order 
     as the applicability conditions are listed in the reference documentation, 
     so we remove the first <span class="v">p</span> elements to obtain 
     the applicability condition theorem names to use in the guard hints. 
     We also use the guard theorem of <span class="v">old</span>, 
     which may be needed to discharge the guard obligations 
     within the guard term of <span class="v">old</span>.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>casesplit-gen-new-fn-body</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
    casesplit-gen-new-fn-body
    (k conditions$ news acc)
    (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____NATP.html">natp</a> k)
                                (<a href="ACL2____PSEUDO-TERM-LISTP.html">pseudo-term-listp</a> conditions$)
                                (<a href="ACL2____PSEUDO-TERM-LISTP.html">pseudo-term-listp</a> news)
                                (<a href="ACL2____PSEUDO-TERMP.html">pseudo-termp</a> acc))))
    (<a href="COMMON-LISP____LET.html">let</a> ((__function__ 'casesplit-gen-new-fn-body))
         (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
         (<a href="ACL2____B_A2.html">b*</a> (((when (<a href="ACL2____ZP.html">zp</a> k)) acc)
              (condk (<a href="COMMON-LISP____NTH.html">nth</a> (<a href="COMMON-LISP____1-.html">1-</a> k) conditions$))
              (newk (<a href="COMMON-LISP____NTH.html">nth</a> (<a href="COMMON-LISP____1-.html">1-</a> k) news))
              (acc (<a href="COMMON-LISP____CONS.html">cons</a> 'if
                         (<a href="COMMON-LISP____CONS.html">cons</a> condk (<a href="COMMON-LISP____CONS.html">cons</a> newk (<a href="COMMON-LISP____CONS.html">cons</a> acc 'nil))))))
             (casesplit-gen-new-fn-body (<a href="COMMON-LISP____1-.html">1-</a> k)
                                        conditions$ news acc))))</pre> 
<p><b>Theorem: </b>pseudo-termp-of-casesplit-gen-new-fn-body</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 pseudo-termp-of-casesplit-gen-new-fn-body
 (<a href="ACL2____IMPLIES.html">implies</a>
     (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____PSEUDO-TERMP.html">pseudo-termp</a> acc)
          (<a href="ACL2____PSEUDO-TERM-LISTP.html">pseudo-term-listp</a> conditions$)
          (<a href="ACL2____PSEUDO-TERM-LISTP.html">pseudo-term-listp</a> news))
     (<a href="ACL2____B_A2.html">b*</a> ((term (casesplit-gen-new-fn-body k conditions$ news acc)))
         (<a href="ACL2____PSEUDO-TERMP.html">pseudo-termp</a> term)))
 :rule-classes :rewrite)</pre> 
<p><b>Function: </b>casesplit-gen-new-fn</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 casesplit-gen-new-fn
 (old$ conditions$ news new-name$ new-enable$
       verify-guards$ appcond-thm-names wrld)
 (<a href="COMMON-LISP____DECLARE.html">declare</a>
      (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP____SYMBOLP.html">symbolp</a> old$)
                         (<a href="ACL2____PSEUDO-TERM-LISTP.html">pseudo-term-listp</a> conditions$)
                         (<a href="ACL2____PSEUDO-TERM-LISTP.html">pseudo-term-listp</a> news)
                         (<a href="COMMON-LISP____SYMBOLP.html">symbolp</a> new-name$)
                         (<a href="ACL2____BOOLEANP.html">booleanp</a> new-enable$)
                         (<a href="ACL2____BOOLEANP.html">booleanp</a> verify-guards$)
                         (<a href="ACL2____SYMBOL-SYMBOL-ALISTP.html">symbol-symbol-alistp</a> appcond-thm-names)
                         (<a href="ACL2____PLIST-WORLDP.html">plist-worldp</a> wrld))))
 (<a href="COMMON-LISP____LET.html">let</a>
  ((__function__ 'casesplit-gen-new-fn))
  (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
  (<a href="ACL2____EVMAC-GENERATE-DEFUN.html">evmac-generate-defun</a>
   new-name$
   :formals (<a href="ACL2____FORMALS.html">formals</a> old$ wrld)
   :guard (<a href="ACL2____UGUARD.html">uguard</a> old$ wrld)
   :body
   (<a href="ACL2____B_A2.html">b*</a> ((new0 (<a href="COMMON-LISP____CAR.html">car</a> (<a href="COMMON-LISP____LAST.html">last</a> news)))
        (<a href="ACL2____BODY.html">body</a> (casesplit-gen-new-fn-body (<a href="ACL2____LEN.html">len</a> conditions$)
                                         conditions$ news new0)))
       (<a href="ACL2____UNTRANSLATE.html">untranslate</a> body nil wrld))
   :guard-hints
   (<a href="ACL2____B_A2.html">b*</a>
    ((guard-appcond-thm-names
          (<a href="COMMON-LISP____NTHCDR.html">nthcdr</a> (<a href="ACL2____LEN.html">len</a> news) appcond-thm-names)))
    (<a href="COMMON-LISP____CONS.html">cons</a>
     (<a href="COMMON-LISP____CONS.html">cons</a>
      '"Goal"
      (<a href="COMMON-LISP____CONS.html">cons</a>
       ':in-theory
       (<a href="COMMON-LISP____CONS.html">cons</a>
        'nil
        (<a href="COMMON-LISP____CONS.html">cons</a>
         ':use
         (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____APPEND.html">append</a> (<a href="ACL2____STRIP-CDRS.html">strip-cdrs</a> guard-appcond-thm-names)
                       (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> ':guard-theorem (<a href="COMMON-LISP____CONS.html">cons</a> old$ 'nil))
                             'nil))
               'nil)))))
     'nil))
   :verify-guards verify-guards$
   :enable new-enable$)))</pre> 

</body>
</html>
