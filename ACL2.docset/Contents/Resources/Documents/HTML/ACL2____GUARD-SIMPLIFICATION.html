<html>
<head>
<meta charset="UTF-8">
<title>Guard-simplification</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____GUARD-SIMPLIFICATION">Click for Guard-simplification in the Full Manual</a></h3>

<p>Levels of simplification for <a href="ACL2____GUARD.html">guard</a> proof obligations</p><p>ACL2 provides several features for obtaining the proof obligations 
 generated for <a href="ACL2____GUARD.html">guard</a> verification.  Each of these features can be 
 invoked with an argument that controls the level of simplification to be 
 applied before returning those proof obligations.  This topic examines those 
 simplification levels.  It starts by splitting the features into two groups; 
 then continues by explaining the three levels of simplification; and finally, 
 makes the key point that one group allows the top two levels of simplification 
 and the other group allows the bottom two levels.</p> 
 
 <p>These features can be partitioned into two groups, which we reference below 
 as the ``<b>AT</b>'' and ``<b>AFTER</b>'' groups, as follows.  These 
 correspond respectively to the two groups discussed in the documentation 
 topic, <a href="ACL2____GUARD-FORMULA-UTILITIES.html">guard-formula-utilities</a>, for capturing formulas produced either 
 during guard verification or when a <span class="v">:guard-theorem</span> is supplied for a 
 <span class="v">:use</span> hint.</p> 
 
 <ul> 
 
 <li>Simplification <b>AT</b> guard-verification time:<br> 
 
 <ul> 
 
 <li>the <span class="tt"><a href="ACL2____XARGS.html">xargs</a></span> keyword <span class="v">:guard-simplify</span>,</li> 
 
 <li>the <span class="tt"><a href="ACL2____GUARD-OBLIGATION.html">guard-obligation</a></span> utility, and</li> 
 
 <li>the <span class="tt"><a href="ACL2____VERIFY-GUARDS-FORMULA.html">verify-guards-formula</a></span> utility.</li> 
 
 </ul>
</li> 
 
 <li>Simplification <b>AFTER</b> guard-verification time:<br> 
 
 <ul> 
 
 <li>the <span class="v">:</span><span class="tt"><a href="ACL2____GTHM.html">gthm</a></span> utility, and</li> 
 
 <li>the <span class="v">:</span><span class="tt"><a href="ACL2____GUARD-THEOREM.html">guard-theorem</a></span> <a href="ACL2____LEMMA-INSTANCE.html">lemma-instance</a> (and related 
 low-level utility, <span class="v">guard-theorem</span>.</li> 
 
 </ul>
</li> 
 
 </ul> 
 
 <p>Each feature above has an argument (possibly optional) that control the 
 level of simplification.  Each such argument can take any of three values, as 
 follows.</p> 
 
 <ul> 
 
 <li>
<span class="v">T</span>:<br> 
 Full simplification, which is the default behavior for <span class="tt"><a href="ACL2____VERIFY-GUARDS.html">verify-guards</a></span>
</li> 
 
 <li>
<span class="v">:LIMITED</span>:<br> 
 Reduced simplification, skipping simplifications that depend on the set of 
 currently <a href="ACL2____ENABLE.html">enable</a>d rules</li> 
 
 <li>
<span class="v">NIL</span>:<br> 
 No simplification</li> 
 
 </ul> 
 
 <p>The key point of this topic is the following specification of the values 
 allowed for the simplification argument, for the features in each group.  For 
 features in the <b>AT</b> group, <span class="v">T</span> and <span class="v">:LIMITED</span> are the legal 
 values.  For features in the <b>AFTER</b> group, <span class="v">:LIMITED</span> and <span class="v">NIL</span> 
 are the legal levels.  Let's see why this is reasonable and discuss whether 
 the missing value for each group might be allowed in the future.</p> 
 
 <p>First consider the <b>AFTER</b> group.  A <span class="v">:</span><span class="tt"><a href="ACL2____GUARD-THEOREM.html">guard-theorem</a></span> 
 <span class="v">:use</span> hint obtains the <a href="ACL2____GUARD.html">guard</a> theorem proved for a previously 
 guard-verified function.  The <span class="tt"><a href="ACL2____CURRENT-THEORY.html">current-theory</a></span> at the time of that 
 <span class="v">:use</span> hint may be very different from what it was at guard-verification 
 time.  Thus, when processing that hint it would be misleading to allow the 
 current <a href="ACL2____THEORY.html">theory</a> to participate in simplification that produces the guard 
 theorem, since the result could be very different from the guard theorem 
 generated during the earlier guard verification.  That is why the value <span class="v">T</span> 
 is not allowed for the simplification argument of a <span class="v">:</span><span class="tt"><a href="ACL2____GUARD-THEOREM.html">guard-theorem</a></span> hint.  Instead, the default is <span class="v">:LIMITED</span>.  The <span class="tt"><a href="ACL2____GTHM.html">gthm</a></span> 
 utility provides a way to show the formula that would be provided by a 
 <span class="v">:guard-theorem</span> lemma instance, so <span class="v">gthm</span> also disallows <span class="v">T</span>, and 
 its default is also <span class="v">:LIMITED</span>.  Note that the utility <span class="tt"><a href="ACL2____VERIFY-GUARDS-FORMULA.html">verify-guards-formula</a></span> is more appropriate than <span class="v">gthm</span> to view the formula 
 to be proved if one is about to verify guards for a function.  (If <span class="v">gthm</span> 
 were to be used for that purpose too, then <span class="v">T</span> might be allowed as a 
 simplification argument; but that could lead to confusion, in particular about 
 the default.)</p> 
 
 <p>Now consider the <b>AT</b> group, which relates to guard verification. 
 <span class="v">T</span> is a reasonable default: it is generally useful to maximize 
 simplification while generating the guard theorem before attempting its proof. 
 But one may prefer more control, by avoiding simplification until the proof is 
 attempted.  <span class="v">:LIMITED</span> has proved to be a good compromise: it limits 
 simplification to basic operations, in particular avoiding goals that are 
 subsumed by other goals or are instances of trivial <a href="ACL2____BUILT-IN-CLAUSE.html">built-in-clause</a> 
 rules.  If the need arises to support <span class="v">NIL</span> as a simplification value, 
 perhaps ACL2 will change to support that.</p>
</body>
</html>
