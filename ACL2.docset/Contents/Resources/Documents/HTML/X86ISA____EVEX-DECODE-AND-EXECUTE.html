<html>
<head>
<meta charset="UTF-8">
<title>Evex-decode-and-execute</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=X86ISA____EVEX-DECODE-AND-EXECUTE">Click for Evex-decode-and-execute in the Full Manual</a></h3>

<p></p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(evex-decode-and-execute proc-mode start-rip temp-rip 
                         prefixes rex-byte evex-prefixes x86) 
 
  → 
x86</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">temp-rip</span> — <span class="v">temp-rip</span> points to the byte following the 
                            first two EVEX prefixes that were already read and 
                            placed in the <span class="v">evex-prefixes</span> structure in <span class="tt"><a href="X86ISA____X86-FETCH-DECODE-EXECUTE.html">x86-fetch-decode-execute</a></span>.</dd> 
  <dd>
<span class="tt">evex-prefixes</span> — Only <span class="v">byte0</span> and <span class="v">byte1</span> fields are populated 
                            when this function is called.</dd> 
 
</dl></div> 
<p><span class="v">evex-decode-and-execute</span> dispatches control to EVEX-encoded 
  instructions.</p> 
 
  <p><i>Reference: Intel Vol. 2A, Section 2.6: Intel(R) AVX-512 
  Encoding</i></p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>evex-decode-and-execute</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 evex-decode-and-execute
 (proc-mode start-rip temp-rip
            prefixes rex-byte evex-prefixes x86)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :stobjs (x86)))
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____TYPE.html">type</a> (integer 0 4) proc-mode)
          (<a href="COMMON-LISP____TYPE.html">type</a> (signed-byte 48) start-rip)
          (<a href="COMMON-LISP____TYPE.html">type</a> (signed-byte 48) temp-rip)
          (<a href="COMMON-LISP____TYPE.html">type</a> (unsigned-byte 52) prefixes)
          (<a href="COMMON-LISP____TYPE.html">type</a> (unsigned-byte 8) rex-byte)
          (<a href="COMMON-LISP____TYPE.html">type</a> (unsigned-byte 32) evex-prefixes))
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="X86ISA____EVEX-PREFIXES-P.html">evex-prefixes-p</a> evex-prefixes)
                             (<a href="X86ISA____PREFIXES-P.html">prefixes-p</a> prefixes))))
 (<a href="COMMON-LISP____LET.html">let</a>
  ((__function__ 'evex-decode-and-execute))
  (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
  (<a href="ACL2____B_A2.html">b*</a>
   ((<a href="ACL2____CTX.html">ctx</a> 'evex-decode-and-execute)
    ((when (<a href="COMMON-LISP____NOT.html">not</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> rex-byte 0)))
     (!!fault-fresh :ud
                    :evex-prefixes evex-prefixes
                    :rex rex-byte))
    ((when (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="COMMON-LISP____THE.html">the</a> (unsigned-byte 8)
                       (<a href="X86ISA____PREFIXES-_E3LCK.html">prefixes-&gt;lck</a> prefixes))
                  240))
     (!!fault-fresh :ud :evex-prefixes
                    evex-prefixes :lock-prefix))
    ((when (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="COMMON-LISP____THE.html">the</a> (unsigned-byte 8)
                       (<a href="X86ISA____PREFIXES-_E3REP.html">prefixes-&gt;rep</a> prefixes))
                  242))
     (!!fault-fresh :ud :evex-prefixes
                    evex-prefixes :f2-prefix))
    ((when (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="COMMON-LISP____THE.html">the</a> (unsigned-byte 8)
                       (<a href="X86ISA____PREFIXES-_E3REP.html">prefixes-&gt;rep</a> prefixes))
                  243))
     (!!fault-fresh :ud :evex-prefixes
                    evex-prefixes :f3-prefix))
    ((when (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="COMMON-LISP____THE.html">the</a> (unsigned-byte 8)
                       (<a href="X86ISA____PREFIXES-_E3OPR.html">prefixes-&gt;opr</a> prefixes))
                  102))
     (!!fault-fresh :ud :evex-prefixes
                    evex-prefixes :66-prefix))
    (<a href="X86ISA____EVEX-BYTE1.html">evex-byte1</a> (<a href="X86ISA____EVEX-PREFIXES-_E3BYTE1.html">evex-prefixes-&gt;byte1</a> evex-prefixes))
    ((when (<a href="COMMON-LISP____NOT.html">not</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="X86ISA____EVEX-BYTE1-_E3RES.html">evex-byte1-&gt;res</a> evex-byte1) 0)))
     (!!fault-fresh :ud :evex-prefixes
                    evex-prefixes :byte1-reserved-bits))
    ((<a href="ACL2____MV.html">mv</a> evex-0f-map?
         evex-0f38-map? evex-0f3a-map?)
     (<a href="ACL2____MV.html">mv</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="X86ISA____EVEX-BYTE1-_E3MM.html">evex-byte1-&gt;mm</a> evex-byte1) 1)
         (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="X86ISA____EVEX-BYTE1-_E3MM.html">evex-byte1-&gt;mm</a> evex-byte1) 2)
         (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="X86ISA____EVEX-BYTE1-_E3MM.html">evex-byte1-&gt;mm</a> evex-byte1) 3)))
    ((when (<a href="COMMON-LISP____NOT.html">not</a> (<a href="COMMON-LISP____OR.html">or</a> evex-0f-map?
                    evex-0f38-map? evex-0f3a-map?)))
     (!!fault-fresh :ud
                    :evex-prefixes evex-prefixes
                    :mm evex-byte1))
    ((<a href="ACL2____MV.html">mv</a> flg0 (<a href="COMMON-LISP____THE.html">the</a> (unsigned-byte 8) evex-byte2)
         x86)
     (<a href="X86ISA____RME08.html">rme08</a> proc-mode temp-rip 1 :x x86))
    ((when flg0)
     (!!ms-fresh :evex-byte2-read-error flg0))
    ((<a href="ACL2____MV.html">mv</a> flg1 temp-rip)
     (<a href="X86ISA____ADD-TO-_A2IP.html">add-to-*ip</a> proc-mode temp-rip 1 x86))
    ((when flg1)
     (!!ms-fresh :increment-error flg1))
    (<a href="X86ISA____EVEX-PREFIXES.html">evex-prefixes</a> (<a href="X86ISA_____12EVEX-PREFIXES-_E3BYTE2.html">!evex-prefixes-&gt;byte2</a> evex-byte2 evex-prefixes))
    ((when (<a href="COMMON-LISP____NOT.html">not</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="X86ISA____EVEX-BYTE2-_E3RES.html">evex-byte2-&gt;res</a> evex-byte2) 1)))
     (!!fault-fresh :ud :evex-prefixes
                    evex-prefixes :byte2-reserved-bit))
    ((<a href="ACL2____MV.html">mv</a> flg2 (<a href="COMMON-LISP____THE.html">the</a> (unsigned-byte 8) evex-byte3)
         x86)
     (<a href="X86ISA____RME08.html">rme08</a> proc-mode temp-rip 1 :x x86))
    ((when flg2)
     (!!ms-fresh :evex-byte3-read-error flg2))
    ((<a href="ACL2____MV.html">mv</a> flg3 temp-rip)
     (<a href="X86ISA____ADD-TO-_A2IP.html">add-to-*ip</a> proc-mode temp-rip 1 x86))
    ((when flg3)
     (!!ms-fresh :increment-error flg3))
    ((<a href="ACL2____MV.html">mv</a> flg4 (<a href="COMMON-LISP____THE.html">the</a> (unsigned-byte 8) opcode)
         x86)
     (<a href="X86ISA____RME08.html">rme08</a> proc-mode temp-rip 1 :x x86))
    ((when flg4)
     (!!ms-fresh :opcode-read-error flg4))
    ((<a href="ACL2____MV.html">mv</a> flg5 temp-rip)
     (<a href="X86ISA____ADD-TO-_A2IP.html">add-to-*ip</a> proc-mode temp-rip 1 x86))
    ((when flg5)
     (!!ms-fresh :increment-error flg5))
    ((<a href="ACL2____MV.html">mv</a> flg6 (<a href="COMMON-LISP____THE.html">the</a> (unsigned-byte 8) modr/m)
         x86)
     (<a href="X86ISA____RME08.html">rme08</a> proc-mode temp-rip 1 :x x86))
    ((when flg6)
     (!!ms-fresh :modr/m-byte-read-error flg6))
    ((<a href="ACL2____MV.html">mv</a> flg7 temp-rip)
     (<a href="X86ISA____ADD-TO-_A2IP.html">add-to-*ip</a> proc-mode temp-rip 1 x86))
    ((when flg7)
     (!!ms-fresh :increment-error flg7))
    (sib? (<a href="ACL2____B_A2.html">b*</a> ((p4? (<a href="COMMON-LISP____EQL.html">eql</a> 103
                         (<a href="COMMON-LISP____THE.html">the</a> (unsigned-byte 8)
                              (<a href="X86ISA____PREFIXES-_E3ADR.html">prefixes-&gt;adr</a> prefixes))))
               (16-bit-addressp
                    (<a href="COMMON-LISP____EQL.html">eql</a> 2
                         (<a href="X86ISA____SELECT-ADDRESS-SIZE.html">select-address-size</a> proc-mode p4? x86))))
              (<a href="X86ISA____X86-DECODE-SIB-P.html">x86-decode-sib-p</a> modr/m 16-bit-addressp)))
    ((<a href="ACL2____MV.html">mv</a> flg8 (<a href="COMMON-LISP____THE.html">the</a> (unsigned-byte 8) sib)
         x86)
     (<a href="COMMON-LISP____IF.html">if</a> sib? (<a href="X86ISA____RME08.html">rme08</a> proc-mode temp-rip 1 :x x86)
         (<a href="ACL2____MV.html">mv</a> nil 0 x86)))
    ((when flg8)
     (!!ms-fresh :sib-byte-read-error flg8))
    ((<a href="ACL2____MV.html">mv</a> flg9 temp-rip)
     (<a href="COMMON-LISP____IF.html">if</a> sib?
         (<a href="X86ISA____ADD-TO-_A2IP.html">add-to-*ip</a> proc-mode temp-rip 1 x86)
         (<a href="ACL2____MV.html">mv</a> nil temp-rip)))
    ((when flg9)
     (!!ms-fresh :increment-error flg9)))
   (<a href="COMMON-LISP____COND.html">cond</a>
       (evex-0f-map?
            (<a href="X86ISA____EVEX-0F-EXECUTE.html">evex-0f-execute</a> proc-mode
                             start-rip temp-rip prefixes rex-byte
                             evex-prefixes opcode modr/m sib x86))
       (evex-0f38-map?
            (<a href="X86ISA____EVEX-0F38-EXECUTE.html">evex-0f38-execute</a> proc-mode
                               start-rip temp-rip prefixes rex-byte
                               evex-prefixes opcode modr/m sib x86))
       (evex-0f3a-map?
            (<a href="X86ISA____EVEX-0F3A-EXECUTE.html">evex-0f3a-execute</a> proc-mode
                               start-rip temp-rip prefixes rex-byte
                               evex-prefixes opcode modr/m sib x86))
       (t (!!ms-fresh :illegal-value-of-evex-mm))))))</pre> 
<p><b>Theorem: </b>x86p-evex-decode-and-execute</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 x86p-evex-decode-and-execute
 (<a href="ACL2____IMPLIES.html">implies</a>
  (x86p x86)
  (x86p
    (<a href="X86ISA____EVEX-DECODE-AND-EXECUTE.html">evex-decode-and-execute</a> proc-mode start-rip temp-rip
                             prefixes rex-byte evex-prefixes x86))))</pre> 

</body>
</html>
