<html>
<head>
<meta charset="UTF-8">
<title>Read-array</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=C____READ-ARRAY">Click for Read-array in the Full Manual</a></h3>

<p>Read an array in the computation state.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(read-array ptr compst) → array</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">ptr</span> — <font color="#606060">Guard <span class="v">(<a href="C____POINTERP.html">pointerp</a> ptr)</span>.</font>
</dd> 
  <dd>
<span class="tt">compst</span> — <font color="#606060">Guard <span class="v">(<a href="C____COMPUSTATEP.html">compustatep</a> compst)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">array</span> — <font color="#606060">Type <span class="v">(<a href="C____ARRAY-RESULTP.html">array-resultp</a> array)</span>.</font>
</dd> 
 
</dl></div> 
<p>If the pointer is null, we return an error. 
     Otherwise, we check whether the heap has an array at the pointer's address. 
     We ensure that the array type matches the pointer type.</p><p>Note that this function reads the array as a whole; 
     it does not read an array element. 
     Functions like <span class="tt"><a href="C____UCHAR-ARRAY-READ-SINT.html">uchar-array-read-sint</a></span> 
     can be used to read individual array elements.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>read-array</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
   read-array (ptr compst)
   (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="C____POINTERP.html">pointerp</a> ptr)
                               (<a href="C____COMPUSTATEP.html">compustatep</a> compst))))
   (<a href="COMMON-LISP____LET.html">let</a> ((__function__ 'read-array))
        (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
        (<a href="ACL2____B_A2.html">b*</a> ((<a href="C____ADDRESS.html">address</a> (<a href="C____POINTER-_E3ADDRESS_F3.html">pointer-&gt;address?</a> ptr))
             (reftype (<a href="C____POINTER-_E3REFTYPE.html">pointer-&gt;reftype</a> ptr))
             (<a href="C____HEAP.html">heap</a> (<a href="C____COMPUSTATE-_E3HEAP.html">compustate-&gt;heap</a> compst))
             ((when (<a href="COMMON-LISP____NOT.html">not</a> address))
              (<a href="C____ERROR.html">error</a> :null-pointer))
             (address+array (<a href="OMAP____IN.html">omap::in</a> address heap))
             ((unless (<a href="COMMON-LISP____CONSP.html">consp</a> address+array))
              (<a href="C____ERROR.html">error</a> (<a href="COMMON-LISP____LIST.html">list</a> :address-not-found address)))
             (<a href="C____ARRAY.html">array</a> (<a href="COMMON-LISP____CDR.html">cdr</a> address+array))
             ((unless (<a href="COMMON-LISP____EQUAL.html">equal</a> reftype (<a href="C____TYPE-OF-ARRAY-ELEMENT.html">type-of-array-element</a> array)))
              (<a href="C____ERROR.html">error</a> (<a href="COMMON-LISP____LIST.html">list</a> :mistype-array-read
                           :pointer reftype
                           :array (<a href="C____TYPE-OF-ARRAY-ELEMENT.html">type-of-array-element</a> array)))))
            array)))</pre> 
<p><b>Theorem: </b>array-resultp-of-read-array</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> array-resultp-of-read-array
        (<a href="ACL2____B_A2.html">b*</a> ((<a href="C____ARRAY.html">array</a> (<a href="C____READ-ARRAY.html">read-array</a> ptr compst)))
            (<a href="C____ARRAY-RESULTP.html">array-resultp</a> array))
        :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>read-array-of-pointer-fix-ptr</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> read-array-of-pointer-fix-ptr
        (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="C____READ-ARRAY.html">read-array</a> (<a href="C____POINTER-FIX.html">pointer-fix</a> ptr) compst)
               (<a href="C____READ-ARRAY.html">read-array</a> ptr compst)))</pre> 
<p><b>Theorem: </b>read-array-pointer-equiv-congruence-on-ptr</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> read-array-pointer-equiv-congruence-on-ptr
        (<a href="ACL2____IMPLIES.html">implies</a> (<a href="C____POINTER-EQUIV.html">pointer-equiv</a> ptr ptr-equiv)
                 (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="C____READ-ARRAY.html">read-array</a> ptr compst)
                        (<a href="C____READ-ARRAY.html">read-array</a> ptr-equiv compst)))
        :rule-classes :congruence)</pre> 
<p><b>Theorem: </b>read-array-of-compustate-fix-compst</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> read-array-of-compustate-fix-compst
        (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="C____READ-ARRAY.html">read-array</a> ptr (<a href="C____COMPUSTATE-FIX.html">compustate-fix</a> compst))
               (<a href="C____READ-ARRAY.html">read-array</a> ptr compst)))</pre> 
<p><b>Theorem: </b>read-array-compustate-equiv-congruence-on-compst</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> read-array-compustate-equiv-congruence-on-compst
        (<a href="ACL2____IMPLIES.html">implies</a> (<a href="C____COMPUSTATE-EQUIV.html">compustate-equiv</a> compst compst-equiv)
                 (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="C____READ-ARRAY.html">read-array</a> ptr compst)
                        (<a href="C____READ-ARRAY.html">read-array</a> ptr compst-equiv)))
        :rule-classes :congruence)</pre> 

</body>
</html>
