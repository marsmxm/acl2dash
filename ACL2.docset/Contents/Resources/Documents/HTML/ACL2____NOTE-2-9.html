<html>
<head>
<meta charset="UTF-8">
<title>Note-2-9</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____NOTE-2-9">Click for Note-2-9 in the Full Manual</a></h3>

<p>ACL2 Version  2.9 (October, 2004) Notes</p><h3>Table of Contents</h3> 
 <ul> 
 <li>BUG FIXES</li> 
 <li>NEW FUNCTIONALITY</li> 
 <li>CHANGES IN PROOF ENGINE</li> 
 <li>GUARD-RELATED CHANGES</li> 
 <li>PROOF-BUILDER CHANGES</li> 
 <li>SYSTEM-LEVEL CHANGES</li> 
 <li>BOOK CHANGES</li> 
 <li>MISCELLANEOUS CHANGES</li> 
 </ul> 
 
 <p><b>BUG FIXES.</b></p> 
 
 <p>We fixed a soundness bug due to a conflict between user-supplied package 
 names and internal package names (obtained by prepending a Lisp constant, 
 <span class="v">*1*-package-prefix*</span>) and user-supplied package names.  For example, the 
 form <span class="v">(<a href="ACL2____DEFPKG.html">defpkg</a> "ACL2_*1*_MYPKG" ())</span> is no longer legal.  Thanks to Robert 
 Krug for asking a question that led directly to the discovery of this bug.</p> 
 
 <p>We fixed a soundness bug that allows <span class="v">:</span><span class="tt"><a href="ACL2____LOGIC.html">logic</a></span> mode functions to 
 call <span class="v">:</span><span class="tt"><a href="ACL2____PROGRAM.html">program</a></span> mode functions.  The fix furthermore prevents 
 functions with <a href="ACL2____GUARD.html">guard</a>s verified from calling functions with guards not 
 verified.  We had thought we already prevented all this, but there was a 
 problem with the interaction of <span class="tt"><a href="ACL2____LOCAL.html">local</a></span> definitions and redundancy 
 checking (see <a href="ACL2____REDUNDANT-EVENTS.html">redundant-events</a>).</p> 
 
 <p>We fixed a soundness bug that could occur when built-in functions were 
 called during macroexpansion (a hole in so-called ``safe-mode'').</p> 
 
 <p>Fixed a minor bug in system functions <span class="v">genvar1</span> and <span class="v">genvar</span>, where 
 <span class="tt"><a href="COMMON-LISP____EQ.html">eq</a></span> had been used in place of <span class="tt"><a href="COMMON-LISP____EQL.html">eql</a></span>.  This bug was discovered 
 during the plugging of a hole in safe-mode, mentioned just above.</p> 
 
 <p>We fixed handling of the <span class="v">:inline</span> keyword for <span class="tt"><a href="ACL2____DEFSTOBJ.html">defstobj</a></span>, which 
 previously could cause raw Lisp errors in OpenMCL and CMU Common Lisp.  Thanks 
 to John Matthews for bringing this issue to our attention.</p> 
 
 <p>Calls of <span class="tt"><a href="ACL2____INCLUDE-BOOK.html">include-book</a></span> could result in a state for which some 
 function definitions were not compiled that should have been.  The result 
 could be performance degradation or even stack overflows.  This situation 
 could arise in the following two ways.</p> 
 
 <blockquote> 
 
 <p>o Inclusion of a book with an absolute pathname that differs from the 
 absolute pathname at certification time, presumably because of the use of soft 
 links.  Thanks to Bob Boyer and Warren Hunt for bringing a stack overflow to 
 our attention that led us to this fix.</p> 
 
 <p>o Large <span class="tt"><a href="ACL2____MUTUAL-RECURSION.html">mutual-recursion</a></span> nests (more than 20 functions) are 
 executed in a superior book.</p> 
 
 </blockquote> 
 
 <p>We fixed some performance bugs that can increase the speed of <span class="tt"><a href="ACL2____INCLUDE-BOOK.html">include-book</a></span> calls by a factor of close to 2.  Thanks to Eric Smith for 
 asking if we could speed up <span class="tt"><a href="ACL2____INCLUDE-BOOK.html">include-book</a></span> processing; we have done so 
 in the past, but primarily focusing on large <span class="tt"><a href="ACL2____MUTUAL-RECURSION.html">mutual-recursion</a></span> nests 
 (which have nothing in particular to do with the current improvements).  Also, 
 thanks to Rob Sumners for a very useful remark early in the process that kept 
 us from drawing an incorrect conclusion at that point.</p> 
 
 <p>We fixed <span class="v">:</span><span class="tt"><a href="ACL2____PL.html">pl</a></span> so that it can be run on a form that returns 
 multiple values, which it could not do previously.  Thanks to Eric Smith for 
 pointing out this problem.</p> 
 
 <p>Fixed a bug in the Allegro ACL2 trace utility (see <a href="ACL2____TRACE_42.html">trace$</a>) that was 
 causing ``<span class="v">10&gt;</span>'' to be printed as ``<span class="v">9&gt;</span>'', ``<span class="v">11&gt;</span>'' to be printed 
 as ``<span class="v">10 &gt;</span>'', ``<span class="v">12&gt;</span>'' to be printed as ``<span class="v">11 &gt;</span>'', and so on.</p> 
 
 <p>Fixed a <a href="ACL2____PROOF-BUILDER.html">proof-builder</a> bug that was preventing the use of the <span class="v">DV</span> 
 command (or a numerical command) on <span class="tt"><a href="COMMON-LISP____LET.html">let</a></span> expressions.  Thanks to Bill 
 Young for pointing out this problem.</p> 
 
 <p>Fixed a bug in a comment on how to set <span class="v">ACL2_BOOKS_DIR</span> in the makefile. 
 Thanks to Dave Greve for pointing out this problem.</p> 
 
 <p>Fixed a potential soundness bug in the linear arithmetic routines.  Thanks 
 to Jared Davis for noticing this problem and to Robert Krug for implementing 
 the fix.  (Technical details: We had been assuming that polynomials were being 
 normalized — see the definition of good-polyp in linear-a.lisp — 
 but this assumption was false.)</p> 
 
 <p>When the macro <span class="tt"><a href="ACL2____OPEN-TRACE-FILE.html">open-trace-file</a></span> is opened twice in succession, it 
 now automatically closes the first trace output channel before opening 
 another.</p> 
 
 <p>It is now possible to use `make' to build ACL2 on Windows systems that 
 support `make'.  Thanks to Pete Manolios and Mike Thomas for pointing out the 
 problem, to Jared Davis and Mike for helping us to analyze the problem, and to 
 Jared for testing the fix.</p> 
 
 <p>Fixed a bug in the <a href="ACL2____GUARD.html">guard</a> of <span class="tt"><a href="ACL2____WITH-OUTPUT.html">with-output</a></span> that was causing a 
 needless guard violation.</p> 
 
 <p><b>NEW FUNCTIONALITY.</b></p> 
 
 <p>The new events <span class="tt"><a href="ACL2____ADD-DEFAULT-HINTS.html">add-default-hints</a></span> and <span class="tt"><a href="ACL2____REMOVE-DEFAULT-HINTS.html">remove-default-hints</a></span> 
 allow one to append to or subtract from the current list of default hints. 
 The event <span class="tt"><a href="ACL2____SET-DEFAULT-HINTS.html">set-default-hints</a></span> continues to set the list of default 
 hints, discarding the previous value of the <span class="tt"><a href="ACL2____DEFAULT-HINTS.html">default-hints</a></span>.  Note that 
 <span class="tt"><a href="ACL2____SET-DEFAULT-HINTS.html">set-default-hints</a></span> is still <span class="tt"><a href="ACL2____LOCAL.html">local</a></span> to the <span class="tt"><a href="ACL2____ENCAPSULATE.html">encapsulate</a></span> or 
 book in which it occurs, and <span class="tt"><a href="ACL2____ADD-DEFAULT-HINTS.html">add-default-hints</a></span> has the same property, 
 although neither is implemented any longer using the <span class="tt"><a href="ACL2____ACL2-DEFAULTS-TABLE.html">ACL2-defaults-table</a></span>.  New events <span class="tt"><a href="ACL2____ADD-DEFAULT-HINTS_12.html">add-default-hints!</a></span>, <span class="tt"><a href="ACL2____REMOVE-DEFAULT-HINTS_12.html">remove-default-hints!</a></span>, and <span class="tt"><a href="ACL2____SET-DEFAULT-HINTS_12.html">set-default-hints!</a></span> are the same as <span class="tt"><a href="ACL2____ADD-DEFAULT-HINTS.html">add-default-hints</a></span>, <span class="tt"><a href="ACL2____REMOVE-DEFAULT-HINTS.html">remove-default-hints</a></span>, and <span class="tt"><a href="ACL2____SET-DEFAULT-HINTS.html">set-default-hints</a></span>, respectively, except that the former three events are not 
 <span class="tt"><a href="ACL2____LOCAL.html">local</a></span> to their enclosing <span class="tt"><a href="ACL2____ENCAPSULATE.html">encapsulate</a></span> or book.  Thanks to Jared 
 Davis for suggesting these enhancements.</p> 
 
 <p>OpenMCL's tracing routines have been modified in a similar manner as those 
 of Allegro CL.  Thanks to Robert Krug for providing this enhancement.</p> 
 
 <p>Guard-checking can now be caused to happen on recursive calls.  See 
 ``GUARD-RELATED CHANGES'' below for details.</p> 
 
 <p>Advanced users can now inhibit compilation of so-called ``*1* functions'' 
 with the <span class="v">:comp</span> command; see <a href="ACL2____COMP.html">comp</a>.  Thanks to Rob Sumners for 
 suggesting this enhancement.</p> 
 
 <p>Added new legal argument <span class="v">hard?</span> for the <span class="tt"><a href="ACL2____ER.html">er</a></span> macro, which is now 
 documented.  See <a href="ACL2____ER.html">er</a>.  Thanks to Rob Sumners for a discussion leading to 
 this change.  Also, the three legal first arguments to <span class="tt"><a href="ACL2____ER.html">er</a></span> — 
 <span class="v">hard</span>, <span class="v">hard?</span>, and <span class="v">soft</span> — may now be in any package (thanks 
 to Jared Davis for bringing this issue to our attention).</p> 
 
 <p>We have removed the requirement that for a rule's hypothesis <span class="v">(<a href="ACL2____BIND-FREE.html">bind-free</a>
 term var-list)</span>, at least one variable must occur free in <span class="v">term</span>.  For 
 example, the expression <span class="v">(<a href="ACL2____BIND-FREE.html">bind-free</a> (bind-divisor a b) (x))</span> was legal 
 because <span class="v">a</span> and <span class="v">b</span> occur free in <span class="v">(bind-divisor a b)</span>; but 
 <span class="v">(<a href="ACL2____BIND-FREE.html">bind-free</a> (foo (bar)) (x))</span> was not legal.  The latter is no longer 
 disallowed. (Technical note: this allows <span class="tt"><a href="ACL2____BIND-FREE.html">bind-free</a></span> to be used to 
 create explicit substitutions in metafunction hypotheses.)</p> 
 
 <p>The following two enhancements have been implemented for rules of class 
 <span class="v">:</span><span class="tt"><a href="ACL2____META.html">meta</a></span>.  Thanks to Eric Smith for requesting more control of 
 reasoning with <span class="v">:</span><span class="tt"><a href="ACL2____META.html">meta</a></span> rules, which led to these enhancements, and 
 to him and Robert Krug for helpful discussions.</p> 
 
 <blockquote> 
 
 <p>o It is now possible to control backchaining in rules of class <span class="v">:</span><span class="tt"><a href="ACL2____META.html">meta</a></span> by providing a <span class="v">:backchain-limit-lst</span> argument, as was already 
 allowed for rules of class <span class="v">:</span><span class="tt"><a href="ACL2____REWRITE.html">rewrite</a></span> and <span class="v">:</span><span class="tt"><a href="ACL2____LINEAR.html">linear</a></span>. 
 See <a href="ACL2____RULE-CLASSES.html">rule-classes</a>.  However, unlike those other two rule classes, the 
 value for <span class="v">:backchain-limit-lst</span> is prohibited from being a non-empty list; 
 it must be either <span class="v">nil</span> or a non-negative integer.</p> 
 
 <p>o (For advanced users.) It is now legal for hypothesis metafunctions to 
 generate, in essence, calls of <span class="tt"><a href="ACL2____SYNTAXP.html">syntaxp</a></span> and <span class="tt"><a href="ACL2____BIND-FREE.html">bind-free</a></span>, handled 
 essentially as they are handled in hypotheses of <span class="v">:</span><span class="tt"><a href="ACL2____REWRITE.html">rewrite</a></span> and 
 <span class="v">:</span><span class="tt"><a href="ACL2____LINEAR.html">linear</a></span> rules.  We say ``essentially'' primarily because both 
 <span class="tt"><a href="ACL2____SYNTAXP.html">syntaxp</a></span> and <span class="tt"><a href="ACL2____BIND-FREE.html">bind-free</a></span> are actually macros, but hypothesis 
 metafunctions must generate translated terms (see <a href="ACL2____TERM.html">term</a>).  The 
 enterprising advanced user can call <span class="v">:</span><span class="tt"><a href="ACL2____TRANS.html">trans</a></span> to see examples of 
 translated terms corresponding to calls of <span class="tt"><a href="ACL2____SYNTAXP.html">syntaxp</a></span> and <span class="tt"><a href="ACL2____BIND-FREE.html">bind-free</a></span>.</p> 
 
 </blockquote> 
 
 <p>A new command <span class="v">:</span><span class="tt"><a href="ACL2____TRANS_12.html">trans!</a></span> has been added, which is like 
 <span class="v">:</span><span class="tt"><a href="ACL2____TRANS.html">trans</a></span> except that <span class="v">:</span><span class="tt"><a href="ACL2____TRANS_12.html">trans!</a></span> ignored issues of 
 single-threadedness.  See <a href="ACL2____TRANS_12.html">trans!</a>.  Thanks to Eric Smith for suggesting 
 this addition.</p> 
 
 <p>The <span class="v">:</span><span class="tt"><a href="ACL2____PF.html">pf</a></span> command now works when the argument is the name of a 
 macro associated with a function by <a href="ACL2____MACRO-ALIASES-TABLE.html">macro-aliases-table</a>.</p> 
 
 <p><b>CHANGES IN PROOF ENGINE.</b></p> 
 
 <p>The simplifier has been changed slightly in order to avoid using <a href="ACL2____FORWARD-CHAINING.html">forward-chaining</a> facts derived from a literal (essentially, a top-level 
 hypothesis or conclusion) that has been rewritten.  As a practical matter, 
 this may mean that the user should not expect forward-chaining to take place 
 on a term that can be rewritten for any reason (generally function expansion 
 or application of rewrite rules).  Formerly, the restriction was less severe: 
 forward-chaining facts from a hypothesis could be used as long as the 
 hypothesis was not rewritten to <span class="v">t</span>.  Thanks to Art Flatau for providing an 
 example that led us to make this change; see the comments in source function 
 <span class="v">rewrite-clause</span> for details.</p> 
 
 <p>The rewriter has been modified to work slightly harder in relieving 
 hypotheses.  Thanks to Eric Smith for providing an example that inspired the 
 following, which illustrates the issue.  Suppose we introduce functions 
 <span class="v">foo</span> and <span class="v">bar</span> with the (non-<span class="tt"><a href="ACL2____LOCAL.html">local</a></span>) properties shown below.</p> 
 
 <pre class="code">(<a href="ACL2____ENCAPSULATE.html">encapsulate</a>
 (((foo *) =&gt; *)
  ((bar *) =&gt; *))

 (<a href="ACL2____LOCAL.html">local</a> (<a href="COMMON-LISP____DEFUN.html">defun</a> foo (x) (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORE.html">ignore</a> x)) t))
 (<a href="ACL2____LOCAL.html">local</a> (<a href="COMMON-LISP____DEFUN.html">defun</a> bar (x) (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORE.html">ignore</a> x)) t))

 (<a href="ACL2____DEFTHM.html">defthm</a> foo-holds
   (<a href="ACL2____IMPLIES.html">implies</a> x
            (<a href="COMMON-LISP____EQUAL.html">equal</a> (foo x) t)))
 (<a href="ACL2____DEFTHM.html">defthm</a> bar-holds-propositionally
   (<a href="ACL2____IFF.html">iff</a> (bar x) t)))</pre> 
 
 <p>Consider what happens when ACL2's rewriter is used to prove the following 
 theorem.</p> 
 
 <pre class="code">(<a href="ACL2____THM.html">thm</a> (foo (bar y)))</pre> 
 
 <p>With ACL2's inside-out rewriting, <span class="v">(bar y)</span> is first considered, but 
 rewrite rule <span class="v">bar-holds-propositionally</span> does not apply because the context 
 requires preserving equality, not mere Boolean (<span class="v">iff</span>) equivalence.  Then 
 the rewriter moves its attention outward and sees the term <span class="v">(foo (bar y))</span>. 
 It attempts to apply the rule <span class="v">foo-holds</span>, in a context created by binding 
 its variable <span class="v">x</span> to the term <span class="v">(bar y)</span>.  It then attempts to relieve the 
 hypothesis <span class="v">x</span> of rule <span class="v">foo-holds</span> in that context.  Before this change, 
 ACL2 basically assumed that since rewriting was inside out, then <span class="v">(bar y)</span> 
 had already been rewritten as much as possible, so the rewrite of <span class="v">x</span> in 
 the aforementioned context (binding <span class="v">x</span> to <span class="v">(bar y)</span>) simply returned 
 <span class="v">(bar y)</span>, and the attempt to relieve the hypothesis of <span class="v">foo-holds</span> 
 failed.  The change is essentially for ACL2's rewriter to make a second pass 
 through the rewriter when the attempt fails to rewrite a variable to <span class="v">t</span>, 
 this time using the fact that we are in a Boolean context.  (We mention that 
 source function <span class="v">rewrite-solidify-plus</span> implements this idea, for those who 
 want to dig deeply into this issue.)  In our example, that means that the 
 rewriter considers <span class="v">(bar y)</span> in a Boolean context, where it may apply the 
 rule <span class="v">bar-holds-propositionally</span> to relieve the hypothesis 
 successfully.</p> 
 
 <p>When <span class="v">(</span><span class="tt"><a href="ACL2____SET-NON-LINEARP.html">set-non-linearp</a></span><span class="v"> t)</span> has been executed, <a href="ACL2____NON-LINEAR-ARITHMETIC.html">non-linear-arithmetic</a> can now be applied in some cases for which it 
 previously was not.  Thanks to Robert Krug for supplying this modification and 
 to Julien Schmaltz for providing a motivating example.</p> 
 
 <p>We modified the rewriter to avoid certain infinite loops caused by an 
 interaction of the opening of recursive functions with equality reasoning. 
 (This change is documented in detail in the source code, in particular 
 functions <span class="v">rewrite-fncall</span> and <span class="v">fnstack-term-member</span>.)  Thanks to Fares 
 Fraij for sending us an example that led us to make this change.</p> 
 
 <p>The <span class="v">:</span><span class="tt"><a href="ACL2____EXECUTABLE-COUNTERPART.html">executable-counterpart</a></span> of function <span class="tt"><a href="ACL2____HIDE.html">hide</a></span> is now 
 disabled when ACL2 starts up.  This removes an anomaly, for example that</p> 
 
 <pre class="code">(<a href="ACL2____THM.html">thm</a> (<a href="COMMON-LISP____NOT.html">not</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> 1 (<a href="COMMON-LISP_____A2.html">*</a> (<a href="ACL2____HIDE.html">hide</a> 0) a))))</pre> 
 
 <p>succeeded while</p> 
 
 <pre class="code">(<a href="ACL2____THM.html">thm</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> (foo (<a href="COMMON-LISP____EQUAL.html">equal</a> 1 (<a href="COMMON-LISP_____A2.html">*</a> (<a href="ACL2____HIDE.html">hide</a> 0) a))) (foo nil)))</pre> 
 
 <p>failed.  Now both fail.</p> 
 
 <p>The theory <span class="v">*s-prop-theory*</span> is no longer used by the 
 <i>proof-builder</i>; it has been replaced by <span class="v">(<a href="ACL2____THEORY.html">theory</a> '</span><span class="tt"><a href="ACL2____MINIMAL-THEORY.html">minimal-theory</a></span>.  We have left the constant <span class="v">*s-prop-theory*</span> defined in 
 the source code in support of existing books, however.  This change eliminates 
 annoying theory warnings printed upon invocation of <a href="ACL2____PROOF-BUILDER.html">proof-builder</a> 
 commands <span class="v">s-prop</span>, <span class="v">sl</span>, and <span class="v">split</span>.</p> 
 
 <p>Terms are now kept in an internal form that avoids calls of primitive 
 functions (built-ins without explicit definitions; see code for <span class="v">cons-term</span> 
 for details), in favor of the constants that result from evaluating those 
 calls.  So for example, the internal form for <span class="v">(<a href="COMMON-LISP____CONS.html">cons</a> 1 2)</span> is <span class="v">(<a href="COMMON-LISP____QUOTE.html">quote</a> (1
 . 2))</span>.  This change was made at around the same time as changes in support 
 of <span class="tt"><a href="ACL2____BIND-FREE.html">bind-free</a></span>; see above.  One consequence is that the splitting of 
 goals into cases (technically, source function <span class="v">clausify</span> and even more 
 technically, source function <span class="v">call-stack</span>) has been modified, which can 
 cause subgoal numbers to change.</p> 
 
 <p><b>GUARD-RELATED CHANGES.</b></p> 
 
 <p>Guard-checking can now be caused to happen on recursive calls, where this 
 was formerly not the case for <span class="v">:</span><span class="tt"><a href="ACL2____PROGRAM.html">program</a></span> mode functions and, 
 perhaps more important, for <span class="v">:</span><span class="tt"><a href="ACL2____LOGIC.html">logic</a></span> mode functions whose <a href="ACL2____GUARD.html">guard</a>s have not been verified.  Moreover, a warning is printed when ACL2 does 
 not rule out the exclusion of guard-checking on recursive calls.  See <a href="ACL2____SET-GUARD-CHECKING.html">set-guard-checking</a>.  Thanks to David Rager for bringing this issue to our 
 attention, and to Rob Sumners and the Univ. of Texas ACL2 seminar in general 
 for their feedback.</p> 
 
 <p>Guard violations are reported with less of the offending term hidden. 
 Thanks to Jared Davis for suggesting that we look at this issue.</p> 
 
 <p><b>PROOF-BUILDER CHANGES.</b></p> 
 
 <p>We fixed the <a href="ACL2____PROOF-BUILDER.html">proof-builder</a> so that diving works as you might expect 
 for a macro call <span class="v">(op a b c)</span> representing <span class="v">(binary-op a (binary-op b
 c))</span>.  In the past, if the current term was of the form <span class="v">(<a href="COMMON-LISP____APPEND.html">append</a> t1 t2
 t3)</span>, then <span class="v">(DV 3)</span> (and <span class="v">3</span>) would dive to <span class="v">t3</span> even though the 
 corresponding function call is <span class="v">(<a href="ACL2____BINARY-APPEND.html">binary-append</a> t1 (<a href="ACL2____BINARY-APPEND.html">binary-append</a> t2 t3))</span>. 
 This is still the case, but now this behavior holds for any macro associated 
 with a function in <span class="v">binop-table</span> (see <a href="ACL2____ADD-BINOP.html">add-binop</a>).  Moreover, users 
 can now write customized diving functions; see <a href="ACL2____DIVE-INTO-MACROS-TABLE.html">dive-into-macros-table</a>, 
 and also see <span class="v">books/misc/rtl-untranslate.lisp</span> for example calls to <span class="tt"><a href="ACL2____ADD-DIVE-INTO-MACRO.html">add-dive-into-macro</a></span>.  Of course, the old behavior can still be obtained using 
 the <a href="ACL2____PROOF-BUILDER.html">proof-builder</a>'s <span class="v">DIVE</span> command; see <a href="ACL2____PROOF-BUILDER-COMMANDS.html">proof-builder-commands</a>.</p> 
 
 <p>The <span class="v">runes</span> command in the <a href="ACL2____PROOF-BUILDER.html">proof-builder</a> now shows only the <a href="ACL2____RUNE.html">rune</a>s used by the most recent primitive or macro command (as shown by 
 <span class="v">:comm</span>), unless it is given a non-<span class="v">nil</span> argument.  Also, <a href="ACL2____PROOF-BUILDER.html">proof-builder</a> command <span class="v">lemmas-used</span> has been added as, in essence, an 
 alias for <span class="v">runes</span>.</p> 
 
 <p>(The following two items are also mentioned above under ``BUG FIXES.'')</p> 
 
 <p>Fixed a <a href="ACL2____PROOF-BUILDER.html">proof-builder</a> bug that was preventing the use of the <span class="v">DV</span> 
 command (or a numerical command) on <span class="tt"><a href="COMMON-LISP____LET.html">let</a></span> expressions.  Thanks to Bill 
 Young for pointing out this problem.</p> 
 
 <p>The theory <span class="v">*s-prop-theory*</span> is no longer used by the 
 <i>proof-builder</i>; it has been replaced by <span class="v">(<a href="ACL2____THEORY.html">theory</a> '</span><span class="tt"><a href="ACL2____MINIMAL-THEORY.html">minimal-theory</a></span>.  We have left the constant <span class="v">*s-prop-theory*</span> defined in 
 the source code in support of existing books, however.  This change eliminates 
 annoying theory warnings printed upon invocation of <a href="ACL2____PROOF-BUILDER.html">proof-builder</a> 
 commands <span class="v">s-prop</span>, <span class="v">sl</span>, and <span class="v">split</span>.</p> 
 
 <p><b>SYSTEM-LEVEL CHANGES.</b></p> 
 
 <p>Fixed a problem with building ACL2 on CMUCL in some systems (source 
 function <span class="v">save-acl2-in-cmulisp</span>).  Thanks to Bill Pase for bringing this to 
 our attention.</p> 
 
 <p>The installation instructions have been extended to include instructions 
 for building on GCL in Mac OS X.  Thanks to Jun Sawada and Camm Maguire.</p> 
 
 <p>Initial pre-allocation of space has been updated for GCL to reflect more 
 current GCL executables (we considered GCL 2.6.1-38).  This can help avoid 
 running out of memory for large ACL2 sessions.</p> 
 
 <p>The main <span class="v">Makefile</span> has been replaced by <span class="v">GNUmakefile</span>, in order to 
 enforce the use of GNU `make'.  If you use another `make' program, you'll get 
 an error message that may help you proceed.</p> 
 
 <p>(GCL only) SGC is no longer turned on for GCL 2.6 sub-versions through 
 2.6.3 if <span class="v">si::*optimize-maximum-pages*</span> is bound to <span class="v">T</span>, due to an 
 apparent issue with their interaction in those sub-versions.  Also, we have 
 eliminated preallocation for all versions after 2.6.1 because GCL doesn't need 
 it (comments are in source function <span class="v">save-acl2-in-akcl</span>).  Thanks to Camm 
 Maguire for excellent GCL help and guidance, and to Camm and Bob Boyer for 
 useful discussions.</p> 
 
 <p>We have removed support for so-called ``small'' images.  Thus, <span class="v">:</span><span class="tt"><a href="ACL2____DOC.html">doc</a></span>, <span class="v">:</span><span class="tt"><a href="ACL2____PE.html">pe</a></span> and <span class="v">:</span><span class="tt"><a href="ACL2____PC.html">pc</a></span>, <span class="tt"><a href="ACL2____VERIFY-TERMINATION.html">verify-termination</a></span>, and 
 other commands are fully supported in ACL2 saved images.  Because of this and 
 other changes in the generation of the so-called ``*1*'' logical functions, 
 related to guards (as described above in -GUARD-RELATED CHANGES'', and related 
 to the discussion of safe-mode in ``BUG FIXES'' above), image sizes have 
 increased substantially.</p> 
 
 <p>We no longer <span class="v">time</span> or run ``<span class="v">nice</span>'' the certification of individual 
 books.  The file <span class="v">books/Makefile-generic</span> had done these by default, and 
 some individual distributed and workshop book directories had <span class="v">Makefile</span>s 
 that did so as well.  Thanks to Mike Thomas, who pointed out the lack of 
 <span class="v">nice</span> on some Windows systems (and we decided on this simple solution). 
 Overall targets in <span class="v">books/Makefile</span> still <span class="v">time</span> their runs by default, 
 and the particular <span class="v">time</span> program is now controlled by a <span class="v">Makefile</span> 
 variable.</p> 
 
 <p>Failures during <span class="v">make certify-books</span> or <span class="v">make regression</span> now show up 
 in the log as ``<span class="v">**CERTIFICATION FAILED**</span>'', regardless of the operating 
 system (as long as it supports `make').  Formerly, one searched for 
 ``<span class="v">**</span>'' but this did not appear in openMCL runs.</p> 
 
 <p>We have eliminated ``Undefined function'' warnings that could occur in 
 OpenMCL.</p> 
 
 <p><b>BOOK CHANGES.</b></p> 
 
 <p>Reconciled the definitions of <span class="v">firstn</span> in <span class="v">book/misc/csort.lisp</span>, 
 <span class="v">books/bdd/bdd-primitives.lisp</span>, 
 <span class="v">books/ordinals/ordinal-definitions.lisp</span>, and 
 <span class="v">books/data-structures/list-defuns.lisp</span>.  Thanks to Ray Richards for 
 bringing this issue to our attention.</p> 
 
 <p>Distributed book <span class="v">books/misc/defpun</span> now can handle <a href="ACL2____STOBJ.html">stobj</a>s where 
 it did not previously.  Thanks to John Matthews for bringing this issue to our 
 attention.</p> 
 
 <p>The "make" variable <span class="v">COMPILE_FLG</span> in file <span class="v">books/Makefile-generic</span> 
 formerly only had an effect if there was a <span class="v">cert.acl2</span> file present.  That 
 oversight has been remedied.</p> 
 
 <p>File <span class="v">"books/arithmetic/certify.lsp"</span> was missing a <span class="tt"><a href="ACL2____CERTIFY-BOOK.html">certify-book</a></span> command for <span class="v">"natp-posp"</span>.  Thanks to John Cowles for 
 noticing this deficiency and supplying a fix.  (This file is of use to those 
 who want to certify the <span class="v">"books/arithmetic/"</span> books without using 
 <span class="v">"make"</span>.)</p> 
 
 <p>A few small changes have been made to <span class="v">"books/rtl/rel4"</span>.</p> 
 
 <p>Small changes were made to books <span class="v">misc/symbol-btree</span> and 
 <span class="v">misc/rtl-untranslate</span>.  In particular, the definition of 
 <span class="v">symbol-btreep</span> was strengthened.</p> 
 
 <p>We made a minor fix to <span class="v">books/ordinals/e0-ordinal.lisp</span>, adding 
 <span class="v">(<a href="ACL2____VERIFY-GUARDS.html">verify-guards</a> ob+)</span> and hence <span class="v">(<a href="ACL2____VERIFY-GUARDS.html">verify-guards</a> ocmp)</span> as well.  This 
 was necessitated by the fix prohibiting functions with guards verified from 
 calling functions with guards not verified (see also the related discussion 
 under ``BUG FIXES'' above).</p> 
 
 <p><b>MISCELLANEOUS CHANGES.</b></p> 
 
 <p>Further sped up processing of large <span class="tt"><a href="ACL2____MUTUAL-RECURSION.html">mutual-recursion</a></span> nests 
 (extending what was done for Version_2.7), perhaps by a factor of two in some 
 cases.</p> 
 
 <p>As promised in Version_2.5 (see <a href="ACL2____NOTE-2-5.html">note-2-5</a>), structured pathnames are 
 no longer supported.  So for example, the argument to <span class="tt"><a href="ACL2____INCLUDE-BOOK.html">include-book</a></span> 
 must now be a string constant.</p> 
 
 <p>Some documentation has been improved, for <a href="ACL2____STOBJ.html">stobj</a>s thanks to 
 suggestions by John Matthews and much of the rest thanks to feedback from Eric 
 Smith.</p> 
 
 <p>The function <span class="tt"><a href="ACL2____CURRENT-PACKAGE.html">current-package</a></span> is now available to users (it has been 
 taken off the list of so-called ``untouchables'').  Thanks to Jared Davis for 
 bringing this issue to our attention.</p> 
 
 <p>The documentation for topic <a href="ACL2____USING-COMPUTED-HINTS-7.html">using-computed-hints-7</a> has been 
 improved.  Thanks to Doug Harper and Eric Smith for inspiring this 
 improvement.</p> 
 
 <p>We added several symbols to <span class="v">*acl2-exports*</span>: <span class="tt"><a href="ACL2____CW.html">cw</a></span>, <span class="tt"><a href="ACL2____ER.html">er</a></span>, 
 <span class="tt"><a href="ACL2____INTERN_42.html">intern$</a></span>, <span class="tt"><a href="ACL2____SET-CASE-SPLIT-LIMITATIONS.html">set-case-split-limitations</a></span>, and <span class="tt"><a href="ACL2____SET-DIFFERENCE-EQ.html">set-difference-eq</a></span>.  Thanks to Jared Davis for suggesting most of these.</p> 
 
 <p>Now, a <span class="tt"><a href="ACL2____TABLE.html">table</a></span> event that sets the value for a key, <span class="v">(<a href="ACL2____TABLE.html">table</a> tbl key
 val :put)</span>, is redundant (see <a href="ACL2____REDUNDANT-EVENTS.html">redundant-events</a>) when it does not 
 change the value associated with an existing key of the table.  In particular, 
 <span class="tt"><a href="ACL2____DEFINE-PC-MACRO.html">define-pc-macro</a></span> is now fully redundant when it does not change an 
 existing <a href="ACL2____PROOF-BUILDER.html">proof-builder</a> macro-command definition.  Thanks to Bill Young 
 for bringing the latter issue to our attention.</p> 
 
 <p>The definitions of unused system functions <span class="v">ev-w</span> and <span class="v">ev-w-lst</span> have 
 been deleted.</p> 
 
 <p>ACL2 now prints a warning if a <span class="tt"><a href="ACL2____DEFPKG.html">defpkg</a></span> event introduces a package 
 name with lower-case letters, since there is opportunity for later confusion 
 in that case.  Thanks to Frederic Peschanski for bringing this problem to our 
 attention and Sandip Ray for encouragement.</p> 
 
 <p>ACL2 now works in Version 19 of CMU Common Lisp.</p> 
 
 <p>The function <span class="tt"><a href="ACL2____SYS-CALL.html">sys-call</a></span> has been modified so that for ACL2 built on 
 Allegro Common Lisp in Unix or Linux, the existing environment is used. 
 Thanks to Erik Reeber for bringing this issue to our attention.</p> 
 
 <p>The function <span class="tt"><a href="ACL2____DISABLEDP.html">disabledp</a></span> can now be given a macro name that has a 
 corresponding function; see <a href="ACL2____MACRO-ALIASES-TABLE.html">macro-aliases-table</a>.  Also, <span class="tt"><a href="ACL2____DISABLEDP.html">disabledp</a></span> now has a <a href="ACL2____GUARD.html">guard</a> of <span class="v">t</span> but causes a hard error on an 
 inappropriate argument.</p>
</body>
</html>
