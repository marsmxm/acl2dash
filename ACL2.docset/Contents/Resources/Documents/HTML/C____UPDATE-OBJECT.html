<html>
<head>
<meta charset="UTF-8">
<title>Update-object</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=C____UPDATE-OBJECT">Click for Update-object in the Full Manual</a></h3>

<p>Update an object in a <a href="C____ATC-SYMBOLIC-COMPUTATION-STATES.html">canonical representation of computation states</a>.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(update-object objdes val compst) → new-compst</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">objdes</span> — <font color="#606060">Guard <span class="v">(<a href="C____OBJDESIGNP.html">objdesignp</a> objdes)</span>.</font>
</dd> 
  <dd>
<span class="tt">val</span> — <font color="#606060">Guard <span class="v">(<a href="C____VALUEP.html">valuep</a> val)</span>.</font>
</dd> 
  <dd>
<span class="tt">compst</span> — <font color="#606060">Guard <span class="v">(<a href="C____COMPUSTATEP.html">compustatep</a> compst)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">new-compst</span> — <font color="#606060">Type <span class="v">(<a href="C____COMPUSTATEP.html">compustatep</a> new-compst)</span>.</font>
</dd> 
 
</dl></div> 
<p>This is like <span class="tt"><a href="C____WRITE-OBJECT.html">write-object</a></span>, 
     but it does not return an error, 
     and it only really handles top-level object designators, 
     by taking the base address of the object designators, 
     which is what we need for now. 
     We update the heap with the new object regardless of 
     whether an old object at that address exists or not, 
     and whether, if it exists, its type matches the new object. 
     This way, <span class="tt"><a href="C____UPDATE-OBJECT.html">update-object</a></span> always guarantees that 
     the object goes into the heap, 
     thus simplifying rules about it. 
     When we replace <span class="tt"><a href="C____WRITE-OBJECT.html">write-object</a></span> 
     with <span class="tt"><a href="C____UPDATE-OBJECT.html">update-object</a></span>, 
     we ensure that all the conditions mentioned above hold, 
     so in a way <span class="tt"><a href="C____UPDATE-OBJECT.html">update-object</a></span> caches the fact that 
     those conditions are satisfied.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>update-object</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a> update-object (objdes val compst)
       (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="C____OBJDESIGNP.html">objdesignp</a> objdes)
                                   (<a href="C____VALUEP.html">valuep</a> val)
                                   (<a href="C____COMPUSTATEP.html">compustatep</a> compst))))
       (<a href="COMMON-LISP____LET.html">let</a> ((__function__ 'update-object))
            (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
            (<a href="ACL2____B_A2.html">b*</a> ((addr (<a href="C____OBJDESIGN-_E3BASE-ADDRESS.html">objdesign-&gt;base-address</a> objdes))
                 (<a href="C____HEAP.html">heap</a> (<a href="C____COMPUSTATE-_E3HEAP.html">compustate-&gt;heap</a> compst))
                 (new-heap (<a href="OMAP____UPDATE.html">omap::update</a> addr (<a href="C____VALUE-FIX.html">value-fix</a> val)
                                         heap))
                 (new-compst (<a href="C____CHANGE-COMPUSTATE.html">change-compustate</a> compst
                                                :heap new-heap)))
                new-compst)))</pre> 
<p><b>Theorem: </b>compustatep-of-update-object</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> compustatep-of-update-object
        (<a href="ACL2____B_A2.html">b*</a> ((new-compst (<a href="C____UPDATE-OBJECT.html">update-object</a> objdes val compst)))
            (<a href="C____COMPUSTATEP.html">compustatep</a> new-compst))
        :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>update-object-of-objdesign-fix-objdes</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> update-object-of-objdesign-fix-objdes
        (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="C____UPDATE-OBJECT.html">update-object</a> (<a href="C____OBJDESIGN-FIX.html">objdesign-fix</a> objdes)
                              val compst)
               (<a href="C____UPDATE-OBJECT.html">update-object</a> objdes val compst)))</pre> 
<p><b>Theorem: </b>update-object-objdesign-equiv-congruence-on-objdes</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> update-object-objdesign-equiv-congruence-on-objdes
        (<a href="ACL2____IMPLIES.html">implies</a> (<a href="C____OBJDESIGN-EQUIV.html">objdesign-equiv</a> objdes objdes-equiv)
                 (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="C____UPDATE-OBJECT.html">update-object</a> objdes val compst)
                        (<a href="C____UPDATE-OBJECT.html">update-object</a> objdes-equiv val compst)))
        :rule-classes :congruence)</pre> 
<p><b>Theorem: </b>update-object-of-value-fix-val</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> update-object-of-value-fix-val
        (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="C____UPDATE-OBJECT.html">update-object</a> objdes (<a href="C____VALUE-FIX.html">value-fix</a> val)
                              compst)
               (<a href="C____UPDATE-OBJECT.html">update-object</a> objdes val compst)))</pre> 
<p><b>Theorem: </b>update-object-value-equiv-congruence-on-val</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> update-object-value-equiv-congruence-on-val
        (<a href="ACL2____IMPLIES.html">implies</a> (<a href="C____VALUE-EQUIV.html">value-equiv</a> val val-equiv)
                 (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="C____UPDATE-OBJECT.html">update-object</a> objdes val compst)
                        (<a href="C____UPDATE-OBJECT.html">update-object</a> objdes val-equiv compst)))
        :rule-classes :congruence)</pre> 
<p><b>Theorem: </b>update-object-of-compustate-fix-compst</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> update-object-of-compustate-fix-compst
        (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="C____UPDATE-OBJECT.html">update-object</a> objdes val (<a href="C____COMPUSTATE-FIX.html">compustate-fix</a> compst))
               (<a href="C____UPDATE-OBJECT.html">update-object</a> objdes val compst)))</pre> 
<p><b>Theorem: </b>update-object-compustate-equiv-congruence-on-compst</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> update-object-compustate-equiv-congruence-on-compst
        (<a href="ACL2____IMPLIES.html">implies</a> (<a href="C____COMPUSTATE-EQUIV.html">compustate-equiv</a> compst compst-equiv)
                 (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="C____UPDATE-OBJECT.html">update-object</a> objdes val compst)
                        (<a href="C____UPDATE-OBJECT.html">update-object</a> objdes val compst-equiv)))
        :rule-classes :congruence)</pre> 

</body>
</html>
