<html>
<head>
<meta charset="UTF-8">
<title>Set-register-invariant-risk</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____SET-REGISTER-INVARIANT-RISK">Click for Set-register-invariant-risk in the Full Manual</a></h3>

<p>Avoid <a href="ACL2____INVARIANT-RISK.html">invariant-risk</a> checking for specified functions</p><p>See <a href="ACL2____INVARIANT-RISK.html">invariant-risk</a> for an introduction to the notion of 
 invariant-risk.  Also see <a href="ACL2____SET-CHECK-INVARIANT-RISK.html">set-check-invariant-risk</a> for a way to avoid 
 invariant-risk checking at runtime.  The present topic discusses a way to 
 avoid marking specified functions as potentially having invariant-risk.</p> 
 
 <pre class="code">General Forms:
(<a href="ACL2____SET-REGISTER-INVARIANT-RISK.html">set-register-invariant-risk</a> t)   ; default
(<a href="ACL2____SET-REGISTER-INVARIANT-RISK.html">set-register-invariant-risk</a> nil) ; requires active trust tag</pre> 
 
 <p>See community book <span class="v">books/demos/register-invariant-risk.lisp</span> for a 
 demonstration of how to use this utility.</p> 
 
 <p>Normally a function is marked by ACL2 as having ``invariant-risk'' if its 
 execution may have the potential to corrupt the ACL2 state.  This causes 
 execution slowdown that is not necessary if there is actually no such 
 potential.  In such cases it may be advisable to instruct ACL2 to avoid 
 marking that function as having invariant-risk.  This can be done by including 
 the form <span class="v">(<a href="ACL2____SET-REGISTER-INVARIANT-RISK.html">set-register-invariant-risk</a> nil)</span> in the book (or its <a href="ACL2____PORTCULLIS.html">portcullis</a> commands) or <span class="tt"><a href="ACL2____ENCAPSULATE.html">encapsulate</a></span> event that contains the 
 definition of that function (or, it can be done in the top-level loop before 
 defining that function).  This action requires an active trust tag (see <a href="ACL2____DEFTTAG.html">defttag</a>) because you are asserting, without proof, that invariant-risk is 
 impossible for that function.  Its effect can be reversed (returning to the 
 default behavior) by evaluating <span class="v">(<a href="ACL2____SET-REGISTER-INVARIANT-RISK.html">set-register-invariant-risk</a> t)</span>, which 
 does not require an active trust tag.</p> 
 
 <p>To see the current setting (i.e., the default of <span class="v">t</span> or else <span class="v">nil</span> 
 after evaluation of <span class="v">(<a href="ACL2____SET-REGISTER-INVARIANT-RISK.html">set-register-invariant-risk</a> nil)</span>), evaluate 
 <span class="v">(<a href="ACL2____GET-REGISTER-INVARIANT-RISK.html">get-register-invariant-risk</a> state)</span>.</p> 
 
 <p>Note this utility does not affect whether a <a href="ACL2____STOBJ.html">stobj</a> primitive is 
 marked with invariant-risk (which seems too dangerous in general); it only 
 applies to functions introduced by <span class="tt"><a href="COMMON-LISP____DEFUN.html">defun</a></span>.  If you want a version of a 
 stobj updater that has no invariant-risk and you have invoked 
 <span class="v">(<a href="ACL2____SET-REGISTER-INVARIANT-RISK.html">set-register-invariant-risk</a> nil)</span>, then define a function that calls the 
 stobj updater.</p> 
 
 <p>Note: This is an event!  It does not print the usual event <a href="ACL2____SUMMARY.html">summary</a> 
 but nevertheless changes the ACL2 logical <a href="ACL2____WORLD.html">world</a> and is so recorded. 
 Moreover, its effect is to set the <span class="tt"><a href="ACL2____ACL2-DEFAULTS-TABLE.html">ACL2-defaults-table</a></span>, and hence its 
 effect is <span class="tt"><a href="ACL2____LOCAL.html">local</a></span> to the book or <span class="tt"><a href="ACL2____ENCAPSULATE.html">encapsulate</a></span> form containing it; 
 see <a href="ACL2____ACL2-DEFAULTS-TABLE.html">ACL2-defaults-table</a>.</p>
</body>
</html>
