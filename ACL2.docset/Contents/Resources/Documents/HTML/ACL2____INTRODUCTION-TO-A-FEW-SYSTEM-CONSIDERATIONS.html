<html>
<head>
<meta charset="UTF-8">
<title>Introduction-to-a-few-system-considerations</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____INTRODUCTION-TO-A-FEW-SYSTEM-CONSIDERATIONS">Click for Introduction-to-a-few-system-considerations in the Full Manual</a></h3>

<p>The mechanics of interaction with the theorem prover</p><p>ACL2 is implemented in Common Lisp.  There are many different 
 Common Lisps and they differ in details relating to interacting with the 
 system.  We sometimes refer to the host Common Lisp as ``raw Lisp.''  The new 
 user is advised not to operate in raw Lisp as it is possible to, say, redefine 
 ACL2 system facilities like <span class="v">defthm</span>.</p> 
 
 <p>Most people use Emacs (see <a href="ACL2____EMACS.html">Emacs</a> <a href="ACL2____A_02Tiny_02Warning_02Sign.html"><img src="../res/tours/twarning.gif"></a>) or 
 the ACL2 Sedan (Eclipse) interface (see <a href="ACL2____ACL2-SEDAN.html">ACL2-Sedan</a> <a href="ACL2____A_02Tiny_02Warning_02Sign.html"><img src="../res/tours/twarning.gif"></a>). 
 They provide protection against certain common mistakes, e.g., trying to edit 
 a block of input text after the operating system has buffered it up and sent 
 it to the Lisp reader which is parsing it as you type.  More on this below. 
 In addition, the Sedan provides helpful syntax checking and a disciplined 
 approach to the stack of lemmas generated by The Method.  But the variety of 
 interfaces to the variety of Lisps mean that there is great variation in what 
 one must type to interact with ACL2.</p> 
 
 <p>The best example is perhaps trying to interrupt a running proof.  For most 
 host Common Lisp implementations, if you are typing directly to the Common 
 Lisp process, then you can interrupt a computation by typing ``ctrl-c'' (hold 
 down the Control key and hit the ``c'' key once).  If you are typing to an 
 Emacs process which is running ACL2 in a shell buffer, you should type ctrl-c 
 ctrl-c.  If you are running the ACL2 Sedan, you can use the <i>Interrupt 
 Session</i> button on the tool bar.  The environment you enter when you 
 interrupt depends on various factors and normally, you will be put back into 
 the top level ACL2 command loop.  If not, then you may be in a Lisp break, and 
 you can probably get back into the ACL2 command loop by using an ``abort'' 
 command that depends on the host Common Lisp (e.g., <span class="v">:q</span> for GCL and CCL). 
 You can usually determine what environment you're in by paying attention to 
 the prompt, which we discuss below.</p> 
 
 <p>The ACL2 ``interactive loop'' is called <span class="tt"><a href="ACL2____LP.html">lp</a></span> (<a href="ACL2____A_02Tiny_02Warning_02Sign.html"><img src="../res/tours/twarning.gif"></a>) 
 and is generally invoked automatically from your Common Lisp when you start up 
 the ACL2 process.  <span class="v">LP</span> is just a special case of an ACL2 function called 
 <span class="tt"><a href="ACL2____LD.html">ld</a></span> <a href="ACL2____A_02Tiny_02Warning_02Sign.html"><img src="../res/tours/twarning.gif"></a>, which the user can call from within the ACL2 
 interactive loop to enter the loop recursively.  New users don't have to know 
 this except that it helps explain why some commands have the string 
 ``<span class="v">-ld-</span>'' in their names!</p> 
 
 <p>ACL2 presents itself as a ``read-eval-print'' loop: you're repeatedly 
 prompted for some type-in, which is read, evaluated, and may cause some 
 printing.  The prompt tells you something about ACL2's state.  In the standard 
 environment, the prompt is</p> 
 
 <pre class="code">ACL2 !&gt;</pre> 
 
 <p>The ``<span class="v">ACL2</span>'' tells you that the symbols you use in your command are 
 those defined in the standard ACL2 namespace (or, in the jargon of Lisp, the 
 ``current package,'' see <a href="ACL2____CURRENT-PACKAGE.html">current-package</a> <a href="ACL2____A_02Tiny_02Warning_02Sign.html"><img src="../res/tours/twarning.gif"></a>). 
 You could create a new namespace (see <a href="ACL2____DEFPKG.html">defpkg</a> <a href="ACL2____A_02Tiny_02Warning_02Sign.html"><img src="../res/tours/twarning.gif"></a>) 
 and set the current package to it (see <a href="COMMON-LISP____IN-PACKAGE.html">in-package</a> <a href="ACL2____A_02Tiny_02Warning_02Sign.html"><img src="../res/tours/twarning.gif"></a>). 
 The next part of the prompt above 
 (``<span class="v">!</span>''), the exclamation mark) tells you that before ACL2 evaluates your 
 type-in it will check to see whether <span class="tt"><a href="ACL2____GUARD.html">guard</a></span>s (<a href="ACL2____A_02Tiny_02Warning_02Sign.html"><img src="../res/tours/twarning.gif"></a>) 
 are respected, i.e., whether the functions used in your command are being 
 supplied arguments in their ``expected domains.''  If evaluation is allowed by 
 the guards, it proceeds exactly according to the ACL2 axioms; if evaluation is 
 not allowed, an error is signaled.  ACL2 event commands check their arguments 
 thoroughly at run-time, regardless of Lisp's notion of ``expected 
 domains.''</p> 
 
 <p>If the exclamation mark is missing from the prompt,</p> 
 
 <pre class="code">ACL2 &gt;</pre> 
 
 <p>then evaluation occurs strictly according to the ACL2 axioms, without 
 regard for any declared guards.</p> 
 
 <p>You can switch between these two prompts by typing</p> 
 
 <pre class="code">ACL2 !&gt;:set-guard-checking nil</pre> 
 
 <p>to turn guard checking off and</p> 
 
 <pre class="code">ACL2 &gt;:set-guard-checking t</pre> 
 
 <p>to turn it on.  Try typing <span class="v">(<a href="COMMON-LISP____CAR.html">car</a> 7)</span> to each prompt.</p> 
 
 <p>If there is a ``<span class="v">p</span>'' in the prompt,</p> 
 
 <pre class="code">ACL2 p!&gt;</pre> 
 
 <p>with or without the exclamation mark:</p> 
 
 <pre class="code">ACL2 p&gt;</pre> 
 
 <p>it means you are in <span class="v">:</span><span class="tt"><a href="ACL2____PROGRAM.html">program</a></span> (<a href="ACL2____A_02Tiny_02Warning_02Sign.html"><img src="../res/tours/twarning.gif"></a>) 
 mode rather than <span class="v">:</span><span class="tt"><a href="ACL2____LOGIC.html">logic</a></span> (<a href="ACL2____A_02Tiny_02Warning_02Sign.html"><img src="../res/tours/twarning.gif"></a>) 
 mode.  In <span class="v">:program</span> mode, <span class="v">defun</span> just defines Common Lisp programs 
 that you can evaluation but it adds no axioms and you cannot use such defined 
 functions in theorems or invoke <span class="v">defthm</span>.  <span class="v">:Program</span> mode is often used 
 to prototype a model.</p> 
 
 <p>Most commands are just typical parenthesized Lisp expressions, like</p> 
 
 <pre class="code">ACL2 !&gt;(<a href="ACL2____DEFTHM.html">defthm</a> rev-rev
         (<a href="ACL2____IMPLIES.html">implies</a> (<a href="ACL2____TRUE-LISTP.html">true-listp</a> x)
                  (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="ACL2____REV.html">rev</a> (<a href="ACL2____REV.html">rev</a> x)) x)))</pre> 
 
 <p>but some are typed as keywords followed by a certain number of 
 arguments.</p> 
 
 <p>For example, to undo the last event you may type</p> 
 
 <pre class="code">ACL2 !&gt;:u</pre> 
 
 <p>or to undo back through the introduction of <span class="v">rev</span> you may type</p> 
 
 <pre class="code">ACL2 !&gt;:ubt rev</pre> 
 
 <p>The first is equivalent to evaluating <span class="v">(<a href="ACL2____U.html">u</a>)</span> and the second is equivalent 
 to evaluating <span class="v">(<a href="ACL2____UBT.html">ubt</a> 'rev)</span>.  See <a href="ACL2____KEYWORD-COMMANDS.html">keyword-commands</a> <a href="ACL2____A_02Tiny_02Warning_02Sign.html"><img src="../res/tours/twarning.gif"></a>. 
 So if you see a sentence like ``to turn on the break rewrite facility, execute 
 <span class="v">:brr t</span>,'' we mean type</p> 
 
 <pre class="code">ACL2 !&gt;:brr t</pre> 
 
 <p>or equivalently</p> 
 
 <pre class="code">ACL2 !&gt;(<a href="ACL2____BRR.html">brr</a> t)</pre> 
 
 <p>If you see a prompt that doesn't look like those above you are probably not 
 typing commands to the standard ACL2 read-eval-print loop!  If you've somehow 
 called <span class="v">LD</span> recursively, the prompt ``gets deeper,'' e.g.,</p> 
 
 <pre class="code">ACL2 !&gt;&gt;</pre> 
 
 <p>and you can pop out one level with <span class="v">:</span><span class="tt"><a href="ACL2____Q.html">q</a></span> <a href="ACL2____A_02Tiny_02Warning_02Sign.html"><img src="../res/tours/twarning.gif"></a> 
 (for ``quit'') or pop to the outermost ACL2 loop with <span class="v">:</span><span class="v">abort!</span> <a href="ACL2____A_02Tiny_02Warning_02Sign.html"><img src="../res/tours/twarning.gif"></a>. 
 If you are in the outermost call of the ACL2 interactive loop and you type 
 <span class="v">:q</span>, you pop out into raw lisp.  The prompt there is generally different 
 from the ACL2 prompt but that is outside our our control and varies from Lisp 
 to Lisp.  We have arranged for many (but not all) Lisps to use a raw lisp 
 prompt involving the string <span class="v">"[RAW LISP]"</span>.  To get back into the ACL2 
 interactive loop from raw lisp, evaluate <span class="v">(<a href="ACL2____LP.html">LP</a>)</span>.</p> 
 
 <p>If you see a prompt that looks like an ACL2 prompt but has a number in 
 front of it, e.g.,</p> 
 
 <pre class="code">1 ACL2 &gt;</pre> 
 
 <p>then you're talking to the break rewrite facility (and you are 1 level deep 
 in the example above).  Presumably at earlier time in this session you enabled 
 that facility, with <span class="v">:brr t</span>, installed a monitor on some rule, invoked the 
 prover, entered the break, and forgot.  Everything you have done (e.g., lemmas 
 you might have proved with <span class="v">defthm</span>) inside that break will be lost when 
 you exit the break.</p> 
 
 <p>Since the break rewrite facility is ``ours'' we can tell you how to exit 
 it!  To exit our breaks and return to the top-level ACL2 loop, execute 
 <span class="v">:</span><span class="tt"><a href="ACL2____ABORT_12.html">abort!</a></span>.</p> 
 
 <p>If you discover you've been working in a <span class="v">brr</span> break, exit, turn off the 
 break facility with <span class="v">:brr nil</span>, and redo whatever <span class="v">defun</span>s and 
 <span class="v">defthm</span>s you did while in that break.</p> 
 
 <p>Users of the Emacs interface may occasionally type commands directly in the 
 <span class="v">*shell*</span> buffer running ACL2.  This can be ``dangerous'' for two reasons. 
 One is that if you type an event, like a <span class="v">defun</span> or <span class="v">defthm</span>, directly 
 to the shell, it will not be recorded in your ``script'' buffer and you may 
 forget it in your final script.  The other is that if you attempt to edit a 
 multi-line command on any but the most recent line, e.g., to correct the 
 spelling of <span class="v">defthm</span> below after you've typed the ``<span class="v">(<a href="ACL2____IMPLIES.html">implies</a> (<a href="ACL2____TRUE-LISTP.html">true-listp</a>
 x)</span>'' you will confuse the Lisp parser because it has already read 
 ``<span class="v">(<a href="ACL2____DEFTHM.html">defthm</a> rev-rev</span>''.</p> 
 
 <pre class="code">ACL2 !&gt;(<a href="ACL2____DEFTHM.html">defthm</a> rev-rev
         (<a href="ACL2____IMPLIES.html">implies</a> (<a href="ACL2____TRUE-LISTP.html">true-listp</a> x)</pre> 
 
 <p>This usually provokes the raw Lisp to enter a low level error break from 
 which you must abort, possibly reenter the ACL2 loop, and re-type the 
 corrected command from scratch.</p> 
 
 <p>Another common mistake when using interfaces other than the ACL2 Sedan is 
 to type an ill-formed ACL2 expression containing dots or commas, which also 
 often provokes a break into the raw Lisp's error handler.</p> 
 
 <p>The fundamental lesson is that you should pay attention to the prompt and 
 learn what the different prompts mean — or use the ACL2 Sedan.</p> 
 
 <p>If you have been working your way through the tutorial introduction to the 
 theorem prover, use your browser's <b>Back Button</b> now to return to <a href="ACL2____INTRODUCTION-TO-THE-THEOREM-PROVER.html">introduction-to-the-theorem-prover</a>.</p>
</body>
</html>
