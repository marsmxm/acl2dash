<html>
<head>
<meta charset="UTF-8">
<title>Note-7-1</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____NOTE-7-1">Click for Note-7-1 in the Full Manual</a></h3>

<p>ACL2 Version  7.1 (May, 2015) Notes</p><p>NOTE!  New users can ignore these release notes, because the <a href="COMMON-LISP____DOCUMENTATION.html">documentation</a> has been updated to reflect all changes that are recorded 
 here.</p> 
 
 <p>Below we roughly organize the changes to ACL2 since Version 7.0 into the 
 following categories of changes: existing features, new features, heuristic 
 and efficiency improvements, bug fixes, changes at the system level, Emacs 
 support, and experimental versions.  Each change is described in just one 
 category, though of course many changes could be placed in more than one 
 category.</p> 
 
 <p>The default build is <a href="ACL2____HONS-ENABLED.html">hons-enabled</a>, as for the previous release; but 
 the generated executable is now <span class="v">saved_acl2</span>, as discussed below.  Please 
 note that ACL2(c) (``classic ACL2'', i.e., ACL2 that is not <a href="ACL2____HONS-ENABLED.html">hons-enabled</a>) now builds as <span class="v">saved_acl2c</span>, is deprecated, and will likely 
 be unsupported or even eliminated in future releases.</p> 
 
 <p>See also <a href="ACL2____NOTE-7-1-BOOKS.html">note-7-1-books</a> for a summary of changes made to the ACL2 
 Community Books since ACL2  7.0, including the build system.</p> 
 
 <h3>Changes to Existing Features</h3> 
 
 <p>For both <span class="tt"><a href="ACL2____ADD-INCLUDE-BOOK-DIR.html">add-include-book-dir</a></span> and <span class="tt"><a href="ACL2____ADD-INCLUDE-BOOK-DIR_12.html">add-include-book-dir!</a></span>, 
 the second argument is no longer evaluated (which we think could perhaps have 
 been exploited to get unsound behavior, by arranging for the value of the 
 second argument to depend on <span class="tt"><a href="ACL2____STATE.html">state</a></span>).  Moreover, that argument can not 
 only be a string, but also can be a <i>sysfile</i>: an object <span class="v">(:system
 . filename)</span>, where <span class="v">filename</span> is a file name.  When filename is a 
 relative pathname, the meaning of such an object is the file with that 
 pathname under the system books directory.</p> 
 
 <p>The event summary had not been printed when a proof is interrupted 
 (that is, with Control-C).  Now, summary information is printed for two 
 summary types (see for example <a href="ACL2____SET-INHIBITED-SUMMARY-TYPES.html">set-inhibited-summary-types</a>): rules and 
 hint-events.</p> 
 
 <p>By default, <span class="v">(<a href="ACL2____MEMSUM.html">memsum</a>)</span> is now truncated to 100 entries rather than to 20 
 entries.  (Implementation note: raw Lisp variable <span class="v">*memoize-summary-limit*</span> 
 is 100 instead of 20.)</p> 
 
 <p>Calls of <span class="v">THE</span> no longer cause a <a href="ACL2____GUARD.html">guard</a> violation when 
 guard-checking is <span class="v">nil</span>.  Also see <a href="COMMON-LISP____THE.html">the</a> and see <a href="ACL2____SET-GUARD-CHECKING.html">set-guard-checking</a>.</p> 
 
 <p>Type declarations for <span class="tt"><a href="COMMON-LISP____LET.html">let</a></span> and <span class="tt"><a href="ACL2____MV-LET.html">mv-let</a></span> forms are now <a href="ACL2____GUARD.html">guard</a>-checked.  Consider for example the definition: <span class="v">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 foo () (<a href="COMMON-LISP____LET.html">let</a> ((x t)) (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____TYPE.html">type</a> integer x)) x))</span>.  Previously, evaluation 
 of the call <span class="v">(foo)</span> had failed to result in a guard violation error; now, 
 it does, provided guard-checking is on (i.e., not <span class="v">nil</span> or <span class="v">:none</span>; see 
 <a href="ACL2____SET-GUARD-CHECKING.html">set-guard-checking</a>).</p> 
 
 <p>The symbols <span class="v">ctx</span>, <span class="v">hist</span>, <span class="v">pspv</span>, <span class="v">unquote</span>, and <span class="v">value</span> 
 have been added to <span class="tt"><a href="ACL2_____A2ACL2-EXPORTS_A2.html">*ACL2-exports*</a></span>.  Thanks to Jared Davis for 
 suggesting these additions.</p> 
 
 <p>Consider <span class="v">:use</span> or <span class="v">:by</span> <a href="ACL2____HINTS.html">hints</a> in which a variable bound using 
 the <span class="v">:instance</span> keyword is in the wrong package.  For example, for the hint 
 <span class="v">:use ((:instance foo (x 3)))</span>, suppose that the lemma <span class="v">foo</span> mentions 
 the variable <span class="v">bar::x</span>, but not <span class="v">x</span>.  This situation formerly caused an 
 error, but now, <span class="v">x</span> indicates the variable <span class="v">bar::x</span> from the lemma 
 <span class="v">foo</span>.  See <a href="ACL2____LEMMA-INSTANCE.html">lemma-instance</a>, in particular Condition (4), which has 
 been updated accordingly.  Thanks to David Rager for a remark that led us to 
 implement this enhancement.</p> 
 
 <p>The <span class="tt"><a href="ACL2____LD.html">ld</a></span> special <span class="v">ld-error-action</span> may now have a value <span class="v">(:exit
 N)</span>, where <span class="v">N</span> is a natural number.  If an error occurs for a call of 
 <span class="v">ld</span>, then this value causes the ACL2 process to quit with exit status 
 <span class="v">N</span>.  See <a href="ACL2____LD-ERROR-ACTION.html">ld-error-action</a>.  Note that <span class="v">ld-error-action</span> is set to 
 this new value when using the <span class="v">cert.pl</span> utility provided with the community 
 books; see <a href="BUILD____PRE-CERTIFY-BOOK-COMMANDS.html">build::pre-certify-book-commands</a>.  Thanks to David Rager for 
 presenting an example showing how this change can make it easier to locate 
 certain certification failures, and thanks to Sol Swords for helping in the 
 design of this enhancement.</p> 
 
 <p>A "<a href="ACL2____THEORY.html">Theory</a>" warning is still printed when <a href="ACL2____DEFINITION.html">definition</a>s of 
 certain built-in functions, such as <span class="tt"><a href="ACL2____MV-NTH.html">mv-nth</a></span>, are <a href="ACL2____DISABLE.html">disable</a>d; 
 similarly for some built-in <a href="ACL2____EXECUTABLE-COUNTERPART.html">executable-counterpart</a> rules.  However, we 
 now print such warnings only when the disabling occurs, rather than every time 
 an <span class="tt"><a href="ACL2____IN-THEORY.html">in-theory</a></span> event or hint is evaluated.  For example, if you evaluate 
 <span class="v">(<a href="ACL2____IN-THEORY.html">in-theory</a> (<a href="ACL2____DISABLE.html">disable</a> mv-nth))</span> followed by <span class="v">(<a href="ACL2____IN-THEORY.html">in-theory</a> (<a href="ACL2____DISABLE.html">disable</a>
 append))</span>, then the second event will no longer produce a warning about 
 <span class="v">mv-nth</span>.  Thanks to Eric Smith for (most recently) suggesting such a 
 change.</p> 
 
 <p>(SBCL only) ACL2 built on SBCL now reports bytes usage, both in <span class="tt"><a href="ACL2____TIME_42.html">time$</a></span> and in <span class="tt"><a href="ACL2____MEMSUM.html">memsum</a></span>, essentially exactly as has already been done for 
 ACL2 built on CCL.  Thanks to Jared Davis for suggesting this enhancement.</p> 
 
 <p>(SBCL only) <a href="ACL2____FAST-ALISTS.html">Fast-alists</a> can now be garbage collected (we believe) 
 in SBCL, as they had already been done in CCL.  (Implementation note: The 
 change was to use weak hash tables in the implementation of SBCL fast-alists.) 
 Thanks to Jared Davis for suggesting this enhancement.</p> 
 
 <p>The utility <span class="tt"><a href="ACL2____EC-CALL.html">ec-call</a></span> can now be applied to calls of symbols 
 introduced with <span class="tt"><a href="ACL2____DEFUN-INLINE.html">defun-inline</a></span>, or with <span class="tt"><a href="ACL2____DEFINE.html">define</a></span> using keyword 
 argument <span class="v">:inline t</span>, thanks to a request from Jared Davis.  For example, 
 the following is now legal.</p> 
 
 <pre class="code">(<a href="ACL2____DEFUN-INLINE.html">defun-inline</a> foo (x)
  (<a href="COMMON-LISP____CONS.html">cons</a> x x))

(<a href="COMMON-LISP____DEFUN.html">defun</a> bar (x)
  (<a href="ACL2____EC-CALL.html">ec-call</a> (foo x)))</pre> 
 
 <p>The <a href="ACL2____PROOF-BUILDER.html">proof-builder</a> is now sensitive to the current <a href="ACL2____CASE-SPLIT-LIMITATIONS.html">case-split-limitations</a>.</p> 
 
 <h3>New Features</h3> 
 
 <p>The Common Lisp function <span class="tt"><a href="COMMON-LISP____SLEEP.html">sleep</a></span> is now defined in ACL2.  Thanks to 
 Jared Davis for requesting this addition.</p> 
 
 <p>Custom error messages may now be created for guard violations.  See <a href="ACL2____SET-GUARD-MSG.html">set-guard-msg</a>.</p> 
 
 <p>The new macro <span class="tt"><a href="ACL2____ASSERT_A2.html">assert*</a></span> is like <span class="tt"><a href="ACL2____ASSERT_42.html">assert$</a></span>, except that 
 <span class="v">assert*</span> only generates a <a href="ACL2____GUARD.html">guard</a> proof obligation, not a runtime 
 check.  <span class="v">Assert*</span> is defined using a new macro <a href="ACL2____MBT_A2.html">mbt*</a>, which is a 
 variant of <span class="tt"><a href="ACL2____MBT.html">mbt</a></span>: a call of <span class="v">mbt*</span> logically returns <span class="v">t</span>, but 
 generates the same <a href="ACL2____GUARD.html">guard</a> proof obligation as <span class="v">mbt</span>.  Thanks to 
 Shilpi Goel for a query that led us to add these macros.</p> 
 
 <h3>Heuristic and Efficiency Improvements</h3> 
 
 <p>We fixed an inefficiency that could occur in calls of <a href="ACL2____PROGRAM.html">program</a>-mode 
 functions that update <a href="ACL2____STOBJ.html">stobj</a>s.  See the discussion of invariant-risk in 
 the <a href="COMMON-LISP____DOCUMENTATION.html">documentation</a> topic, <a href="ACL2____PROGRAM-WRAPPER.html">program-wrapper</a>.  Thanks to Jared Davis 
 for bringing this issue to our attention.</p> 
 
 <p>We improved the ``worse-than'' heuristic, providing modest speed-up and 
 eliminating the use of memoization for it.  Thanks to Jared Davis for useful 
 discussions on the topic, and to Camm Maguire for an observation that led us 
 to do some investigations that led to this improvement.  For more information 
 see comments in source function <span class="v">worse-than-builtin-clocked</span> (source file 
 <span class="v">type-set-b.lisp</span>).</p> 
 
 <p>We avoid the cost of translating ACL2 terms (see <a href="ACL2____TERM.html">term</a>) to user-level 
 syntax after applying the ``preprocess'' simplifier (see <a href="ACL2____HINTS-AND-THE-WATERFALL.html">hints-and-the-waterfall</a>), and also after applying either <span class="v">:use</span> or 
 <span class="v">:by</span> <a href="ACL2____HINTS.html">hints</a>.  Thanks to David Rager for helpful discussions towards 
 this change.  Note: On rare occasions, this might change the prover flow as 
 follows.</p> 
 
 <ul> 
 
 <li>Consider the case that the input goal, "Goal", simplifies with the 
 ``preprocess'' simplifier to a new goal that prints the same as "Goal". 
 Formerly, this case avoided labeling the new goal as "Goal'"; it was as 
 though the new goal was actually the user input.  The new criterion for 
 avoiding "Goal'" is somewhat weaker: the internal syntax must suitably match 
 for "Goal" and its simplification, rather than their displayed forms.</li> 
 
 <li>Consider the application of a <span class="v">:use</span> or <span class="v">:by</span> hint.  In such cases, 
 the resulting constraint (if any) is simplified with the ``preprocess'' 
 simplifier.  Formerly, the rules used by that simplifier were not recorded if 
 the printed version of the simplified constraint was equal to the original 
 constraint, which was really a bug since the comparison was between the 
 user-level syntax of the simplified constraint and the internal syntax of the 
 original constraint.  Now, ACL2 compares the internal syntax of each.</li> 
 
 </ul> 
 
 <p>We fixed an inefficiency that could occur in processing of <span class="tt"><a href="ACL2____MAKE-EVENT.html">make-event</a></span> forms.  Thanks to Sol Swords for reporting and diagnosing the 
 problem.  (Technical note: The fix involves avoiding, in most cases, looking 
 up world global <span class="v">'boot-strap-flg</span> by using a new state global instead of 
 the same name.)</p> 
 
 <p>We changed the heuristics for equality substitution so that so-called 
 <i>cross-fertilization</i>, where an equality substitution is made on only one 
 side of the goal's conclusion, is not made when generalization is turned off, 
 as with the hint <span class="v">:do-not '(<a href="ACL2____GENERALIZE.html">generalize</a>)</span>.  Instead, the equality is used 
 throughout the goal in that case.  Thanks to David Hardin for bringing an 
 example to our attention that led us to make this change.</p> 
 
 <p>Some clause-building (essentially, goal-building) operations already 
 avoided duplication, but now consider clauses to be ``duplicates'' when the 
 only difference is commuted arguments of <span class="tt"><a href="COMMON-LISP____EQUAL.html">equal</a></span> or <span class="tt"><a href="ACL2____IFF.html">iff</a></span>.  (Note: 
 This change was made in support of <span class="tt"><a href="ACL2____ASSERT_A2.html">assert*</a></span> and <span class="tt"><a href="ACL2____MBT_A2.html">mbt*</a></span>, mentioned 
 above.)</p> 
 
 <p>(SBCL only) It had been the case for host Lisp SBCL that the use of <span class="tt"><a href="ACL2____DEFUN-INLINE.html">defun-inline</a></span> to define functions in <a href="ACL2____BOOKS.html">books</a> had failed to result in 
 inlined code, when those functions were called after including those books. 
 This has been fixed (and appears not to have been a problem for host Lisp 
 CCL).  Thanks to Jared Davis for bringing this issue to our attention.</p> 
 
 <h3>Bug Fixes</h3> 
 
 <p>A potential soundness issue could result from the application of <a href="ACL2____META.html">meta</a>functions and <a href="ACL2____CLAUSE-PROCESSOR.html">clause-processor</a>s: although ACL2 checked that their 
 outputs contain only legal <a href="ACL2____TERM.html">term</a>s, it did not check for the absence of 
 calls of certain ``forbidden'' function symbols.  For example, <a href="ACL2____SYS-CALL.html">sys-call</a> 
 should be prohibited unless there is an active trust tag (see <a href="ACL2____DEFTTAG.html">defttag</a>), 
 but a metafunction was able to introduce a call of <span class="v">sys-call</span>.  We have 
 added the necessary checks, in a way that we hope has negligible impact on 
 performance.  To avoid that impact or to learn more about this issue, see 
 <a href="ACL2____SET-SKIP-META-TERMP-CHECKS.html">set-skip-meta-termp-checks</a>; this new utility, which requires a trust 
 tag, avoids not only the new checks but even the above-mentioned checks for 
 legal terms.</p> 
 
 <p>The edited log below illustrates a bug that we have fixed, involving the 
 processing of <span class="tt"><a href="ACL2____INCLUDE-BOOK.html">include-book</a></span> <a href="ACL2____EVENTS.html">events</a> in the certification <a href="ACL2____WORLD.html">world</a> whose filename starts with the tilde (<span class="v">~</span>) character.</p> 
 
 <pre class="code">~/temp/incl$ cat sub/bad.acl2
(<a href="ACL2____INCLUDE-BOOK.html">include-book</a> "~/acl2/acl2/books/arithmetic/top")
~/temp/incl$ acl2h
[[.. output elided ..]]
ACL2 !&gt;(<a href="ACL2____LD.html">ld</a> "sub/bad.acl2")
[[.. output elided ..]]
ACL2 !&gt;(<a href="ACL2____CERTIFY-BOOK.html">certify-book</a> "foo" 1)


HARD ACL2 ERROR in ABSOLUTE-PATHNAME-STRING-P:  Implementation error:
Forgot to apply expand-tilde-to-user-home-dir before calling absolute-
pathname-string-p. Please contact the ACL2 implementors.



ACL2 Error in TOP-LEVEL:  Evaluation aborted.  To debug see :DOC print-
gv, see :DOC trace, and see :DOC wet.

ACL2 !&gt;</pre> 
 
 <p>Fixed several issues with the <span class="v">:puff</span> command, and updated its 
 documentation accordingly.  See <a href="ACL2____PUFF.html">puff</a>.</p> 
 
 <p>Fixed a bug in the <a href="ACL2____PROOF-BUILDER.html">proof-builder</a>'s <span class="v">wrap</span> command.  Thanks to 
 Keshav Kini for sending a simple example that illustrated this bug.</p> 
 
 <p>(Allegro CL only) Fixed a bug in <span class="tt"><a href="ACL2____TRACE_12.html">trace!</a></span>, which for example was 
 evidenced when evaluating <span class="v">(<a href="ACL2____TRACE_12.html">trace!</a> (<a href="COMMON-LISP____NTH.html">nth</a> :native t))</span>.</p> 
 
 <p>Fixed a bug in the printing of user-level terms that failed to account for 
 <span class="tt"><a href="ACL2____UNTRANS-TABLE.html">untrans-table</a></span> entries for <span class="tt"><a href="COMMON-LISP____NTH.html">nth</a></span>, <span class="tt"><a href="ACL2____UPDATE-NTH.html">update-nth</a></span>, and <span class="tt"><a href="ACL2____UPDATE-NTH-ARRAY.html">update-nth-array</a></span>, when printing the first argument as a symbolic constant 
 corresponding to a <a href="ACL2____STOBJ.html">stobj</a> argument.  Thanks to Warren Hunt for reporting 
 this issue with an example much like the following.  When submitting the forms 
 below, ACL2 output for the final form displayed the user-level term 
 <span class="v">(<a href="ACL2____UPDATE-NTH.html">update-nth</a> *fld* v st)</span> instead of the expected form, <span class="v">(!nth *fld* v
 st)</span>.</p> 
 
 <pre class="code">(<a href="ACL2____DEFSTOBJ.html">defstobj</a> st fld)

(<a href="COMMON-LISP____DEFMACRO.html">defmacro</a> !nth (x y z)
  `(<a href="ACL2____UPDATE-NTH.html">update-nth</a> ,x ,y ,z))

(<a href="ACL2____ADD-MACRO-FN.html">add-macro-fn</a> !nth update-nth)

(<a href="ACL2____THM.html">thm</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> (update-fld v st)
            xxx)
     :hints (("Goal" :in-theory (<a href="ACL2____DISABLE.html">disable</a> update-nth))))</pre> 
 
 <p>Fixed a failure to <a href="ACL2____GUARD.html">guard</a>-check <a href="COMMON-LISP____TYPE.html">type</a> declarations for <span class="tt"><a href="COMMON-LISP____LET.html">let</a></span> and <span class="tt"><a href="ACL2____MV-LET.html">mv-let</a></span> forms.  Consider for example:</p> 
 
 <pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a> foo (x)
  (<a href="COMMON-LISP____LET.html">let</a> ((a (<a href="COMMON-LISP____CAR.html">car</a> x)))
    (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____TYPE.html">type</a> string a))
    a))</pre> 
 
 <p>Previously, the call <span class="v">(foo '(3 4))</span> did not cause a guard violation, 
 even though it should have done so.  (Indeed, the event <span class="v">(<a href="ACL2____VERIFY-GUARDS.html">verify-guards</a>
 foo)</span> failed, and continues to fail.)</p> 
 
 <p>Fixed a bug in redundancy checking for <span class="tt"><a href="ACL2____MUTUAL-RECURSION.html">mutual-recursion</a></span> events that 
 specify <span class="v">:</span><span class="tt"><a href="ACL2____RULER-EXTENDERS.html">ruler-extenders</a></span> in an <span class="tt"><a href="ACL2____XARGS.html">xargs</a></span> <span class="tt"><a href="COMMON-LISP____DECLARE.html">declare</a></span> 
 form.  Thanks to Sol Swords for sending an example that illustrates the bug: a 
 <span class="tt"><a href="ACL2____MUTUAL-RECURSION.html">mutual-recursion</a></span> event that, when executed twice, caused an error the 
 second time rather than being redundant (see <a href="ACL2____REDUNDANT-EVENTS.html">redundant-events</a>).  The 
 bug was actually in how ACL2 stores information about the <a href="ACL2____RULER-EXTENDERS.html">ruler-extenders</a> used in definitions: the <span class="v">:ruler-extenders</span> specified for 
 the first <span class="tt"><a href="COMMON-LISP____DEFUN.html">defun</a></span> was being mistakenly stored for the second <span class="v">defun</span>. 
 This mishandling of redundancy for <span class="tt"><a href="ACL2____MUTUAL-RECURSION.html">mutual-recursion</a></span> events appears to 
 be the only consequence of that bug.</p> 
 
 <p>The following bug was probably not observable, but violated our claim that 
 the system behaves as logically specified.  When a <a href="ACL2____GUARD.html">guard</a> check failed 
 during execution, the error message that was printed could differ slightly 
 from what is logically specified.  (Technical detail: the error actually 
 printed by source function <span class="v">ev-fncall-rec</span> was appropriately showing the 
 original guard, but the specification function <span class="v">ev-fncall-rec-logical</span> was 
 showing the untranslation of the translated guard.)  This has been fixed.</p> 
 
 <p>The <span class="v">save</span> and <span class="v">retrieve</span> commands for the <a href="ACL2____PROOF-BUILDER.html">proof-builder</a> (see 
 <a href="ACL2-PC____SAVE.html">ACL2-pc::save</a> and <a href="ACL2-PC____RETRIEVE.html">ACL2-pc::retrieve</a>) now cause an error when the 
 supplied name is not a symbol; similarly for the <span class="v">:event-name</span> argument of 
 <span class="tt"><a href="ACL2____VERIFY.html">verify</a></span>.  The behavior wasn't as expected for non-symbol names; for 
 example, after issuing the instruction <span class="v">(save 'abc)</span> in the <a href="ACL2____PROOF-BUILDER.html">proof-builder</a>, the command <span class="v">(<a href="ACL2____RETRIEVE.html">retrieve</a> 'abc)</span> failed to resume the 
 proof-builder session.  (Notice the erroneous use of the quoted symbol 
 <span class="v">'abc</span>, i.e., <span class="v">(<a href="COMMON-LISP____QUOTE.html">quote</a> abc)</span>, rather than of the symbol <span class="v">abc</span>.) 
 Thanks to Keshav Kini for bringing this problem to our attention.</p> 
 
 <p>We fixed the following two bugs in the processing of backchain limits 
 stored for rules.  Thanks to Dave Greve for bringing these to our 
 attention.</p> 
 
 <ul> 
 
 <li>For rules of class <span class="v">:</span><span class="tt"><a href="ACL2____TYPE-PRESCRIPTION.html">type-prescription</a></span>, the specification of 
 <span class="v">:backchain-limit-lst</span> within the <span class="v">:</span><span class="tt"><a href="ACL2____RULE-CLASSES.html">rule-classes</a></span> could be 
 ignored or cause a hard Lisp error.</li> 
 
 <li>For rules of class <span class="v">:</span><span class="tt"><a href="ACL2____META.html">meta</a></span>, preceding calls of <span class="tt"><a href="ACL2____SET-DEFAULT-BACKCHAIN-LIMIT.html">set-default-backchain-limit</a></span> were ignored.</li> 
 
 </ul> 
 
 <p>Fixed a bug in the processing of certain operations on pathnames containing 
 <span class="v">".."</span>.</p> 
 
 <h3>Changes at the System Level</h3> 
 
 <p>By default, the ACL2 executable once again is named <span class="v">saved_acl2</span>, though 
 unlike previous versions, this executable is <a href="ACL2____HONS-ENABLED.html">hons-enabled</a>. 
 Correspondingly, the ACL2(c) executable (that is, the executable that is not 
 <a href="ACL2____HONS-ENABLED.html">hons-enabled</a>) is by default <span class="v">saved_acl2c</span>.  Thanks to David Hardin 
 for suggesting these changes.</p> 
 
 <p>Links from the home page to user's manual topics now point to the 
 ACL2+Books combined manual, not the ACL2 (only) User's Manual, except for the 
 one link that explicitly points to the latter.  Thanks to David Hardin for 
 feedback leading to this change, which was incorporated into the ACL2 Version 
 7.0 home page several days after the release of that version.</p> 
 
 <p>Garbage collection notification has been turned off by default, not only 
 for ACL2(c) as before, but also for (the default build) ACL2(h).  Thanks to 
 Eric Smith for suggesting this change.  See <a href="ACL2____ACL2-CUSTOMIZATION.html">ACL2-customization</a> and see 
 <a href="ACL2____GC-VERBOSE.html">gc-verbose</a> for how to turn such notification back on in your own 
 environment.</p> 
 
 <p>It is now possible to move the system books directory after certifying its 
 books, without invalidating their status as certified.  Users should generally 
 not notice this change.  We thank Harsh Raju Chamarthi and Camm Maguire for 
 reporting problems with hacks we have produced over the years to support 
 distribution of books with their <a href="ACL2____CERTIFICATE.html">certificate</a> files.  Those hacks are no 
 longer necessary: as a byproduct of this change, we have deleted both the 
 <a href="ACL2____COMMUNITY-BOOKS.html">community-books</a> directory <span class="v">books/fix-cert/</span> and the source function 
 <span class="v">make-certificate-file-relocated</span>.  For a bit more detail see the final 
 remark in the topic <a href="ACL2____FULL-BOOK-NAME.html">full-book-name</a>.  We also thank Eric Smith, Jared 
 Davis, and Sol Swords for reporting bugs in our initial implementations of 
 this enhancement.</p> 
 
 <p>The <span class="v">certify-books</span> target for <span class="v">make</span> now excludes other expensive 
 directories in addition to <span class="v">workshops</span>.</p> 
 
 <p>(SBCL only) Modified the handling of environment variable <span class="v">SBCL_HOME</span>. 
 Thanks to Jared Davis for pointing out a problem leading to this change, 
 namely, failure on his platform when evaluating <span class="v">(require :sb-sprof)</span> in 
 raw Lisp.</p> 
 
 <p>Intended compiler optimizations are now guaranteed to be in place.  We 
 observed, thanks to communication from Jared Davis, that when ACL2 is built 
 using SBCL 1.2.10, ACL2 starts up without the compiler optimizations that had 
 been installed during the build.  Perhaps that has been true for other SBCL 
 versions or even other Lisps.  Now, ACL2 explicitly restores those 
 optimizations when it starts up.  We observed a 5% time reduction for 
 SBCL-based regression after this change.</p> 
 
 <p>Environment variable <span class="v">ACL2_WRITE_PORT</span> is now ignored when doing <a href="ACL2____PROVISIONAL-CERTIFICATION.html">provisional-certification</a>.  Thanks to Sol Swords for discussing this issue, 
 which arose from a failure in <a href="ACL2____COMMUNITY-BOOKS.html">community-books</a> directory 
 <span class="v">books/workshops/2011/verbeek-schmaltz/sources/</span>, which uses <a href="ACL2____PROVISIONAL-CERTIFICATION.html">provisional-certification</a>.</p> 
 
 <p>(GCL only) A few tweaks were made in support of GCL changes starting with 
 pre-releases of GCL 2.6.13 in late April 2015 (but these tweaks are backward 
 compatible with older GCL releases).  Resulting ACL2 builds for a new GCL show 
 dramatic speed-ups for a single user, perhaps cutting between a third and half 
 the time, with less dramatic improvements when running regressions with <span class="v">-j
 8</span>.  Thanks to Camm Maguire for pointing us to the changes and for improving 
 GCL.</p> 
 
 <h3>EMACS Support</h3> 
 
 <p>The commands <span class="v">Control-t e</span> and <span class="v">Control-t Control-e</span>, defined in file 
 <span class="v">emacs/emacs-acl2.el</span>, now check that the <span class="v">*acl2-shell*</span> buffer exists, 
 has a live process, and has a last line matching the specification in 
 <span class="v">*acl2-insert-pats*</span>, which has Emacs documentation (using <span class="v">Control-h
 v</span>) but is set to a default based on shell prompts.  Thanks to David Rager, 
 Jared Davis, and Shilpi Goel for helpful discussions leading to this 
 change.</p> 
 
 <p>We installed the following two patches to file <span class="v">emacs/emacs-acl2.el</span>, 
 both contributed by Keshav Kini.</p> 
 
 <ul> 
 
 <li>Emacs highlighting for forms starting with "<span class="v">(def</span>" now works when 
 the "<span class="v">def</span>" symbol has a package prefix, for example, 
 "<span class="v">(<a href="FTY____DEFLIST.html">fty::deflist</a></span>".</li> 
 
 <li>The Control-d character is no longer explicitly bound to the default, 
 <span class="v">delete-char</span>, but instead is unbound in <span class="v">comint-mode-map</span>, so that the 
 global binding of Control-d will take effect.  Thus, users who bind Control-d 
 themselves will no longer have that binding overridden in shell-mode (or 
 comint-mode).</li> 
 
 </ul> 
 
 <p>We made several improvements to the <a href="ACL2____ACL2-DOC.html">ACL2-doc</a> Emacs browser for ACL2 
 <a href="COMMON-LISP____DOCUMENTATION.html">documentation</a>.</p> 
 
 <ul> 
 
 <li>Fixed a bug that could occur when Emacs variable 
 <span class="v">large-file-warning-threshold</span> is <span class="v">nil</span>.  Thanks to Bob Boyer for 
 bringing this bug to our attention.</li> 
 
 <li>Links are now in color (blue, by default).  See <a href="ACL2____ACL2-DOC.html">ACL2-doc</a> for 
 instructions on how to change or remove this color.  Thanks to Jared Davis for 
 suggesting the use of color.  We are open to suggestions for improvements; 
 this might be just a first step.</li> 
 
 <li>Allow limiting search and index commands to ancestors (sub-topics, 
 sub-sub-topics, etc.) of a command (including the command itself), by 
 supplying a prefix argument.</li> 
 
 <li>New <span class="v">"p"</span>, <span class="v">"&lt;"</span>, and <span class="v">Control-TAB</span> commands are analogues of 
 <span class="v">"n"</span>, <span class="v">","</span>, and <span class="v">TAB</span> — for search, index, and next-link 
 commands, respectively — to go backward instead of forward.</li> 
 
 </ul> 
 
 <h3>Experimental Versions</h3> 
 
 <p>(For ACL2(p) users only; see <a href="ACL2____PARALLELISM.html">parallelism</a>) If parallel execution is 
 enabled (see <a href="ACL2____SET-PARALLEL-EXECUTION.html">set-parallel-execution</a>), as it is by default in ACL2(p), 
 then <span class="v">hons-wash</span> and <span class="v">hons-clear</span> may be no-ops (other than to print a 
 warning), in order to avoid thread-unsafe behavior.  (However, In CCL you are 
 unlikely to see this restriction unless you are running more than one thread.) 
 To get around this restriction, you can instead use <span class="tt"><a href="ACL2____HONS-WASH_12.html">hons-wash!</a></span> or 
 <span class="tt"><a href="ACL2____HONS-CLEAR_12.html">hons-clear!</a></span>, which however require a <a href="ACL2____TRUST-TAG.html">trust-tag</a>.  Thanks to Bob 
 Boyer for bringing this issue to our attention.</p> 
 
 
</body>
</html>
