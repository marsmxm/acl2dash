<html>
<head>
<meta charset="UTF-8">
<title>Reasoning</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=BITSETS____REASONING">Click for Reasoning in the Full Manual</a></h3>

<p>How to reason about bitsets.</p><div class="box"><p>Note: for now this discussion is only about plain <a href="ACL2____BITSETS.html">bitsets</a>.  In the future, we intend this discussion to apply equally well to 
<a href="ACL2____SBITSETS.html">sbitsets</a>.</p></div> 
 
<p>A general goal of the bitsets library is to let you take advantage of 
efficient operations like <span class="v">logand</span> and <span class="v">logior</span> without having to do any 
arithmetic reasoning.  Instead, ideally, you should be able to carry out all of 
your reasoning on the level of sets.</p> 
 
<h4>Basic Approach</h4> 
 
<p>To achieve this, we try to cast everything in terms of <a href="ACL2____BITSET-MEMBERS.html">bitset-members</a>.  If you want to reason about some bitset-producing function 
<span class="v">foo</span>, then you should typically try to write your theorems about:</p> 
 
<pre class="code">(<a href="ACL2____BITSET-MEMBERS.html">bitset-members</a> (foo ...))</pre> 
 
<p>instead of directly proving something about:</p> 
 
<pre class="code">(foo ...)</pre> 
 
<p>For example, to reason about <a href="ACL2____BITSET-UNION.html">bitset-union</a> we prove:</p> 
 
<p><b>Theorem: </b>bitset-members-of-bitset-union</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> bitset-members-of-bitset-union
        (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="ACL2____BITSET-MEMBERS.html">bitset-members</a> (<a href="ACL2____BITSET-UNION.html">bitset-union</a> x y))
               (<a href="SET____UNION.html">union</a> (<a href="ACL2____BITSET-MEMBERS.html">bitset-members</a> x)
                      (<a href="ACL2____BITSET-MEMBERS.html">bitset-members</a> y))))</pre> 
 
<p>In most cases, this theorem is sufficient for reasoning about the behavior 
of <span class="v">bitset-union</span>.</p> 
 
<h4>Equivalence Proofs</h4> 
 
<p>The <span class="v">bitset-members</span> approach is good most of the time, but in some cases 
you may wish to show that two bitset-producing functions literally create the 
same bitset.  That is, instead of showing:</p> 
 
<pre class="code">(<a href="ACL2____BITSET-MEMBERS.html">bitset-members</a> (foo ...)) = (<a href="ACL2____BITSET-MEMBERS.html">bitset-members</a> (bar ...))</pre> 
 
<p>it is perhaps better to prove:</p> 
 
<pre class="code">(foo ...) = (bar ...)</pre> 
 
<p>It should be automatic to prove this stronger form (after first proving the 
weaker form) by using the theorem:</p> 
 
<p><b>Theorem: </b>equal-bitsets-by-membership</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> equal-bitsets-by-membership
        (<a href="ACL2____IMPLIES.html">implies</a> (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____NATP.html">natp</a> x) (<a href="ACL2____NATP.html">natp</a> y))
                 (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> x y)
                        (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="ACL2____BITSET-MEMBERS.html">bitset-members</a> x)
                               (<a href="ACL2____BITSET-MEMBERS.html">bitset-members</a> y)))))</pre> 
 

</body>
</html>
