<html>
<head>
<meta charset="UTF-8">
<title>Elab-mod</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=SV____ELAB-MOD">Click for Elab-mod in the Full Manual</a></h3>

<p>Part of a moddb representing a single module.</p><p>Note: This is partly implementation-level documentation for moddb. 
Specifically, none of the updater functions listed here should be used in the 
context of operating on a moddb -- rather, a moddb should be built from a <a href="SV____MODALIST.html">modalist</a> using one or more calls of <a href="SV____MODULE-_E3DB.html">module-&gt;db</a>, and treated as 
read-only thereafter.  It is fine to use the (read-only) accessor 
functions.</p> 
 
<p>An elab-mod is an abstract stobj whose logical story is that it is a 
record (accessed using <a href="ACL2____G.html">g</a>/<a href="ACL2____S.html">s</a> -- see <a href="ACL2____MISC_F2RECORDS.html">ACL2::misc/records</a>) 
containing the following fields:</p> 
 
<ul> 
<li>
<i>name</i> -- the name of the module, a <a href="SV____MODNAME-P.html">modname-p</a> object</li> 
<li>
<i>totalwires</i> -- the total number of wires in the module and all its 
instances, a natural</li> 
<li>
<i>totalinsts</i> -- the total number of instances in the module and all 
its instances, a natural</li> 
<li>
<i>orig-mod</i> -- the <a href="SV____MODULE.html">module</a> that this was generated from</li> 
<li>
<i>wires</i> -- the list of <a href="SV____WIRE.html">wire</a>s local to the module</li> 
<li>
<i>insts</i> -- the list of <a href="SV____MODINST.html">modinst</a>s local to the module.</li> 
</ul> 
 
<p>The executable accessors/updaters of these (except for wires and insts; see 
below) are named, e.g., <span class="v">elab-mod-&gt;name</span>/<span class="v">update-elab-mod-&gt;name</span>.</p> 
 
<p>The wires and insts fields are special in that they cannot be accessed 
directly in execution; in fact, they are not actually lists, but arrays.  They 
are also backed by hash tables so that wire or instance indices may be looked 
up by wire/instance name.  (Well-formedness enforced by the abstract stobj 
representation makes this mapping invertible.)  The following accessors are 
used to access information about the wires/instances:</p> 
 
<ul> 
 
<li>
<span class="v">(elab-mod-nwires elab-mod)</span> -- the number of local wires</li> 
 
<li>
<span class="v">(elab-mod-wiretablei wire-idx elab-mod)</span> -- the nth wire</li> 
 
<li>
<span class="v">(elab-mod-wirename-&gt;idx name elab-mod)</span> -- the index for the named 
wire</li> 
 
<li>
<span class="v">(elab-mod-add-wire wire elab-mod)</span> -- add a wire to the table</li> 
 
<li>
<span class="v">(elab-mod-ninsts elab-mod)</span> -- the number of local module 
instances</li> 
 
<li>
<span class="v">(elab-mod-&gt;instname inst-idx elab-mod)</span> -- the instname of the nth 
module instance</li> 
 
<li>
<span class="v">(elab-mod-&gt;inst-modidx inst-idx elab-mod)</span> -- the index of the module 
instantiated by the nth instance</li> 
 
<li>
<span class="v">(elab-mod-&gt;inst-wireoffset inst-idx elab-mod)</span> -- the total number of 
wires in the module up until this instance -- i.e. the number of local wires 
plus the sum of the totalwires of the modules of lower-numbered instances</li> 
 
<li>
<span class="v">(elab-mod-&gt;inst-instoffset inst-idx elab-mod)</span> -- the total number of 
instances in the module up until this instance -- i.e., inst-idx plus the sum 
of the totalinsts of the modules of lower-numbered instances</li> 
 
<li>
<span class="v">(elab-mod-instname-&gt;idx name elab-mod)</span> -- the index for the named 
instance</li> 
 
<li>
<span class="v">(elab-mod-add-inst elab-modinst$c elab-mod)</span> -- copy an elab-modinst$c 
stobj into the elab-mod as a new instance.</li> 
 
</ul> 
 
<p>All of the above functions execute in constant time, even though several of 
their logical definitions are linear in the number of wires/insts.</p> 
 
<p>A wire or instance cannot be removed once added.  There isn't even any way 
to clear out the wires or instances; just start over with a new elab-mod.</p>
</body>
</html>
