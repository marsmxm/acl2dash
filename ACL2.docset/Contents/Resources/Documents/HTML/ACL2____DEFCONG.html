<html>
<head>
<meta charset="UTF-8">
<title>Defcong</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____DEFCONG">Click for Defcong in the Full Manual</a></h3>

<p>Prove <a href="ACL2____CONGRUENCE.html">congruence</a> rule</p><p><span class="v">Defcong</span> is used to prove that one <a href="ACL2____EQUIVALENCE.html">equivalence</a> relation 
 preserves another in a given argument position of a given function.</p> 
 <pre class="code">Example:
(<a href="ACL2____DEFCONG.html">defcong</a> set-equal iff (memb x y) 2)

is an abbreviation for

(<a href="ACL2____DEFTHM.html">defthm</a> set-equal-implies-iff-memb-2
  (<a href="ACL2____IMPLIES.html">implies</a> (set-equal y y-equiv)
           (<a href="ACL2____IFF.html">iff</a> (memb x y) (memb x y-equiv)))
  :rule-classes (:congruence))</pre> 
 
 <p>See <a href="ACL2____CONGRUENCE.html">congruence</a> and also see <a href="ACL2____EQUIVALENCE.html">equivalence</a>.</p> 
 
 <pre class="code">General Form:
(<a href="ACL2____DEFCONG.html">defcong</a> equiv1 equiv2 term k
  :package package
  :event-name event-name
  :rule-classes rule-classes
  :instructions instructions
  :hints hints
  :otf-flg otf-flg)</pre> 
 
 <p>where <span class="v">equiv1</span> and <span class="v">equiv2</span> are known <a href="ACL2____EQUIVALENCE.html">equivalence</a> relations; 
 <span class="v">term</span> is a call of a function <span class="v">fn</span>, other than <span class="v">if</span>, on the correct 
 number of distinct variable arguments, <span class="v">(fn x1 ... xn)</span>; <span class="v">k</span> is a 
 positive integer less than or equal to the arity of <span class="v">fn</span>; <span class="v">package</span>, if 
 supplied, is one of <span class="v">:current</span>, <span class="v">:equiv1</span>, <span class="v">:equiv2</span>, <span class="v">:function</span> 
 or <span class="v">:legacy</span>; <span class="v">event-name</span>, if supplied, is a symbol; and other 
 arguments are as specified in the documentation for <span class="tt"><a href="ACL2____DEFTHM.html">defthm</a></span>.  The 
 <span class="v">defcong</span> macro expands into a call of <span class="tt"><a href="ACL2____DEFTHM.html">defthm</a></span>.  The name of the 
 <span class="tt"><a href="ACL2____DEFTHM.html">defthm</a></span> event is <span class="v">equiv1-implies-equiv2-fn-k</span>, unless an 
 <span class="v">:event-name</span> keyword argument is supplied, in which case <span class="v">event-name</span> 
 is used.  The package of symbols generated, such as variables and <span class="tt"><a href="ACL2____DEFTHM.html">defthm</a></span> names, is determined by the <span class="v">package</span> argument: if it is not 
 supplied or its value is <span class="v">:current</span>, then the <span class="tt"><a href="ACL2____CURRENT-PACKAGE.html">current-package</a></span> is 
 used; if its value is <span class="v">:equiv1</span> or <span class="v">:legacy</span>, then the package of 
 <span class="v">:equiv1</span> is used; if its value is <span class="v">:equiv2</span>, then the package of 
 <span class="v">:equiv2</span> is used; and if its value is <span class="v">:function</span>, then the package of 
 <span class="v">fn</span> is used.  The term of the theorem is</p> 
 
 <pre class="code">(<a href="ACL2____IMPLIES.html">implies</a> (equiv1 xk yk)
         (equiv2 (fn x1... xk ...xn)
                 (fn x1... yk ...xn))).</pre> 
 
 <p>The rule-class <span class="v">:</span><span class="tt"><a href="ACL2____CONGRUENCE.html">congruence</a></span> is added to the <span class="tt"><a href="ACL2____RULE-CLASSES.html">rule-classes</a></span> specified, if it is not already there.  All other arguments to 
 the generated <span class="tt"><a href="ACL2____DEFTHM.html">defthm</a></span> form are as specified by the keyword arguments 
 above.</p> 
 
 <p>NOTE: In normal usage, <span class="v">defcong</span> can only create classic <a href="ACL2____CONGRUENCE.html">congruence</a> rules, not <a href="ACL2____PATTERNED-CONGRUENCE.html">patterned-congruence</a> rules.  However, if <span class="v">fn</span> 
 is a macro, it's possible for a patterned congruence rule to be generated, 
 depending on what <span class="v">term</span> expands to.</p> 
 
 <p>For example, the following produces a shallow patterned congruence 
 rule:</p> 
 
 <pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a> f (x y) (<a href="COMMON-LISP____AND.html">and</a> x y))
(<a href="COMMON-LISP____DEFMACRO.html">defmacro</a> g (x) `(f ,x t))
(<a href="ACL2____DEFCONG.html">defcong</a> iff equal (<a href="ACL2____G.html">g</a> x) 1)</pre>
</body>
</html>
