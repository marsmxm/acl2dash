<html>
<head>
<meta charset="UTF-8">
<title>Close-lambdas</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____CLOSE-LAMBDAS">Click for Close-lambdas in the Full Manual</a></h3>

<p>Make all the lambda expressions in a term closed.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(close-lambdas term) → new-term</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">term</span> — <font color="#606060">Guard <span class="v">(<a href="ACL2____PSEUDO-TERMP.html">pseudo-termp</a> term)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">new-term</span> — <font color="#606060">Type <span class="v">(<a href="ACL2____PSEUDO-TERMP.html">pseudo-termp</a> new-term)</span>, given <span class="v">(<a href="ACL2____PSEUDO-TERMP.html">pseudo-termp</a> term)</span>.</font>
</dd> 
 
</dl></div> 
<p>ACL2 lambda expressions in translated terms are always closed, 
     which means that they often include formal parameters 
     that are replaced by themselves (i.e. by the same symbols) 
     when the lambda expression is applied. 
     For instance, the untranslated term <span class="v">(<a href="COMMON-LISP____LET.html">let</a> ((x 0)) (<a href="COMMON-LISP_____B2.html">+</a> x y))</span> 
     is <span class="v">((<a href="COMMON-LISP____LAMBDA.html">lambda</a> (x y) (<a href="ACL2____BINARY-_B2.html">binary-+</a> x y)) '3 y)</span> in translated form: 
     the lambda expression includes the extra formal parameter <span class="v">y</span> 
     which is not bound by the <span class="tt"><a href="COMMON-LISP____LET.html">let</a></span>, 
     applied to <span class="v">y</span> itself, 
     making the lambda expression closed.</p><p>Terms with non-closed lambda expressions, 
     e.g. produced by <span class="tt"><a href="ACL2____REMOVE-TRIVIAL-VARS.html">remove-trivial-vars</a></span>, 
     still satisfy <span class="tt"><a href="ACL2____PSEUDO-TERMP.html">pseudo-termp</a></span>, but not <span class="tt"><a href="ACL2____TERMP.html">termp</a></span>. 
     The <span class="v">close-lambdas</span> utility 
     closes any non-closed lambda expression in a term, 
     so that it also satisfies <span class="tt"><a href="ACL2____LAMBDAP.html">lambdap</a></span>. 
     It is essentially the inverse of <span class="tt"><a href="ACL2____REMOVE-TRIVIAL-VARS.html">remove-trivial-vars</a></span>.</p><p><b>Function: </b>close-lambdas</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
     close-lambdas (<a href="ACL2____TERM.html">term</a>)
     (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="ACL2____PSEUDO-TERMP.html">pseudo-termp</a> term)))
     (<a href="COMMON-LISP____LET.html">let</a> ((__function__ 'close-lambdas))
          (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
          (<a href="ACL2____B_A2.html">b*</a> (((when (<a href="ACL2____VARIABLEP.html">variablep</a> term)) term)
               ((when (<a href="ACL2____FQUOTEP.html">fquotep</a> term)) term)
               (fn (<a href="ACL2____FFN-SYMB.html">ffn-symb</a> term))
               ((when (<a href="COMMON-LISP____SYMBOLP.html">symbolp</a> fn))
                (<a href="ACL2____FCONS-TERM.html">fcons-term</a> fn (<a href="ACL2____CLOSE-LAMBDAS-LST.html">close-lambdas-lst</a> (<a href="ACL2____FARGS.html">fargs</a> term))))
               (<a href="ACL2____FORMALS.html">formals</a> (<a href="ACL2____LAMBDA-FORMALS.html">lambda-formals</a> fn))
               (<a href="ACL2____BODY.html">body</a> (<a href="ACL2____LAMBDA-BODY.html">lambda-body</a> fn))
               (actuals (<a href="ACL2____FARGS.html">fargs</a> term))
               (new-body (<a href="ACL2____CLOSE-LAMBDAS.html">close-lambdas</a> body))
               (extra-params (<a href="ACL2____SET-DIFFERENCE-EQ.html">set-difference-eq</a> (<a href="ACL2____ALL-VARS.html">all-vars</a> new-body)
                                                formals))
               (new-formals (<a href="COMMON-LISP____APPEND.html">append</a> formals extra-params))
               (new-actuals (<a href="COMMON-LISP____APPEND.html">append</a> (<a href="ACL2____CLOSE-LAMBDAS-LST.html">close-lambdas-lst</a> actuals)
                                    extra-params)))
              (<a href="ACL2____FCONS-TERM.html">fcons-term</a> (<a href="ACL2____MAKE-LAMBDA.html">make-lambda</a> new-formals new-body)
                          new-actuals))))</pre><p><b>Function: </b>close-lambdas-lst</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a> close-lambdas-lst (terms)
       (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="ACL2____PSEUDO-TERM-LISTP.html">pseudo-term-listp</a> terms)))
       (<a href="COMMON-LISP____LET.html">let</a> ((__function__ 'close-lambdas-lst))
            (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
            (<a href="COMMON-LISP____COND.html">cond</a> ((<a href="COMMON-LISP____ENDP.html">endp</a> terms) nil)
                  (t (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="ACL2____CLOSE-LAMBDAS.html">close-lambdas</a> (<a href="COMMON-LISP____CAR.html">car</a> terms))
                           (<a href="ACL2____CLOSE-LAMBDAS-LST.html">close-lambdas-lst</a> (<a href="COMMON-LISP____CDR.html">cdr</a> terms)))))))</pre> 
 
 
 
<p><b>Theorem: </b>return-type-of-close-lambdas.new-term</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> return-type-of-close-lambdas.new-term
        (<a href="ACL2____IMPLIES.html">implies</a> (<a href="ACL2____PSEUDO-TERMP.html">pseudo-termp</a> term)
                 (<a href="ACL2____B_A2.html">b*</a> ((?new-term (<a href="ACL2____CLOSE-LAMBDAS.html">close-lambdas</a> term)))
                     (<a href="ACL2____PSEUDO-TERMP.html">pseudo-termp</a> new-term)))
        :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>return-type-of-close-lambdas-lst.new-terms</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> return-type-of-close-lambdas-lst.new-terms
        (<a href="ACL2____IMPLIES.html">implies</a> (<a href="ACL2____PSEUDO-TERM-LISTP.html">pseudo-term-listp</a> terms)
                 (<a href="ACL2____B_A2.html">b*</a> ((?new-terms (<a href="ACL2____CLOSE-LAMBDAS-LST.html">close-lambdas-lst</a> terms)))
                     (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____PSEUDO-TERM-LISTP.html">pseudo-term-listp</a> new-terms)
                          (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="ACL2____LEN.html">len</a> new-terms) (<a href="ACL2____LEN.html">len</a> terms)))))
        :rule-classes :rewrite)</pre> 

</body>
</html>
