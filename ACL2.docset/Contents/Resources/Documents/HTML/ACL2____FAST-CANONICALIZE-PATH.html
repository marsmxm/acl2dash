<html>
<head>
<meta charset="UTF-8">
<title>Fast-canonicalize-path</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____FAST-CANONICALIZE-PATH">Click for Fast-canonicalize-path in the Full Manual</a></h3>

<p><span class="tt">(fast-canonicalize-path path mod)</span> produces the canonical version of a 
path to an internal wire in a module.</p><p><b>Signature:</b> <span class="tt">(fast-canonicalize-path path mod)</span> returns <span class="v">(<a href="ACL2____MV.html">mv</a>
successp new-path)</span>.  On success, <span class="v">new-path</span> is a member of one of the 
following:</p> 
 
<ul> 
 
<li><span class="v">(<a href="ACL2____MOD-INTERNAL-PATHS.html">mod-internal-paths</a> mod)</span></li> 
 
<li>
<span class="v">(gpl :i mod)</span>, or </li> 
 
<li>
<span class="v">(gpl :o mod)</span>.</li> 
 
</ul> 
 
<p>To understand this function, note that the set of <a href="ACL2____MOD-INTERNAL-PATHS.html">mod-internal-paths</a> 
does not include any non-canonical paths (inputs or outputs of the target 
module).  For instance, if we have in Verilog something like:</p> 
 
<pre class="code">my_mux2 result_mux (.o(main_result), ...)</pre> 
 
<p>Then a path such as:</p> 
 
<pre class="code">(|foo| |bar| |baz| |result_mux| . |o|)</pre> 
 
<p>is not regarded as canonical and will not be included among the internal 
signals alist produced esim's new-probe mode.  However, if we assume that 
<span class="v">main_result</span> is not one of the inputs or outputs of <span class="v">foo.bar.baz</span>, then 
the following path <i>is</i> canonical and it is equivalent in that it 
describes the same wire:</p> 
 
<pre class="code">(|foo| |bar| |baz| . |main_result|)</pre> 
 
<p><span class="v">Fast-canonicalize-path</span> should be given a valid path in the sense of 
<span class="v">mod-all-paths</span>, and tries to return the canonical equivalent.  Failure 
indicates that the given path is invalid, but we do only minimal error 
checking.  In other words, you should not rely on this function to see whether 
a path is valid.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>fast-canonicalize-path</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 fast-canonicalize-path (path mod)
 "Returns (<a href="ACL2____MV.html">MV</a> SUCCESSP NEW-PATH)"
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (good-esim-modulep mod)))
 (<a href="ACL2____B_A2.html">b*</a>
  (((when (<a href="COMMON-LISP____ATOM.html">atom</a> path)) (<a href="ACL2____MV.html">mv</a> t path))
   (head (<a href="COMMON-LISP____CAR.html">car</a> path))
   (occ (<a href="COMMON-LISP____CDR.html">cdr</a> (<a href="ACL2____HONS-GET.html">hons-get</a> head (<a href="ACL2____MAKE-FAST-ALIST.html">make-fast-alist</a> (occmap mod)))))
   ((unless occ) (<a href="ACL2____MV.html">mv</a> nil nil))
   (op (gpl :op occ))
   ((<a href="ACL2____MV.html">mv</a> tail-successp new-tail)
    (<a href="ACL2____FAST-CANONICALIZE-PATH.html">fast-canonicalize-path</a> (<a href="COMMON-LISP____CDR.html">cdr</a> path) op))
   ((unless tail-successp) (<a href="ACL2____MV.html">mv</a> nil nil))
   (tail-inputp (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP____ATOM.html">atom</a> new-tail)
                     (<a href="ACL2____MEMBER-OF-PAT-FLATTEN.html">member-of-pat-flatten</a> new-tail (gpl :i op))))
   (tail-outputp (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP____ATOM.html">atom</a> new-tail)
                      (<a href="COMMON-LISP____NOT.html">not</a> tail-inputp)
                      (<a href="ACL2____MEMBER-OF-PAT-FLATTEN.html">member-of-pat-flatten</a> new-tail (gpl :o op))))
   ((when tail-inputp)
    (<a href="ACL2____MV.html">mv</a> t
        (<a href="COMMON-LISP____CDR.html">cdr</a> (<a href="ACL2____ASSOC-PAT-_E3AL.html">assoc-pat-&gt;al</a> new-tail (gpl :i op)
                            (gpl :i occ)))))
   ((when tail-outputp)
    (<a href="ACL2____MV.html">mv</a> t
        (<a href="COMMON-LISP____CDR.html">cdr</a> (<a href="ACL2____ASSOC-PAT-_E3AL.html">assoc-pat-&gt;al</a> new-tail (gpl :o op)
                            (gpl :o occ))))))
  (<a href="ACL2____MV.html">mv</a> t (<a href="ACL2____HONS.html">hons</a> head new-tail))))</pre> 

</body>
</html>
