<html>
<head>
<meta charset="UTF-8">
<title>Rlp-encode-transaction</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ETHEREUM____RLP-ENCODE-TRANSACTION">Click for Rlp-encode-transaction in the Full Manual</a></h3>

<p>RLP encoding of a transaction.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(rlp-encode-transaction trans) → (mv error? encoding)</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">trans</span> — <font color="#606060">Guard <span class="v">(<a href="ETHEREUM____TRANSACTIONP.html">transactionp</a> trans)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">error?</span> — <font color="#606060">Type <span class="v">(<a href="ACL2____BOOLEANP.html">booleanp</a> error?)</span>.</font>
</dd> 
<dd>
<span class="tt">encoding</span> — <font color="#606060">Type <span class="v">(<a href="ACL2____BYTE-LISTP.html">byte-listp</a> encoding)</span>.</font>
</dd> 
 
</dl></div> 
<p>The first step towards RLP-encoding a transaction 
     is to turn it into an RLP tree. 
     This is implied by [YP:4.2], 
     which in fact uses a tuple notation for transactions.</p><p>Each scalar component 
     is turned into its big-endian byte array representation, 
     consistently with <span class="tt"><a href="ETHEREUM____RLP-ENCODE-SCALAR.html">rlp-encode-scalar</a></span>. 
     Note that here we are just constructing the RLP tree, 
     not encoding it yet; 
     RLP trees cannot contain scalars. 
     The other components are byte arrays that are left unchanged.</p><p>We put all nine components under a branching tree, 
     which we RLP-encode. 
     Encoding may fail, 
     if the \mathbf{v} signature component is unreasonably large, 
     or if the initialization or data array is unreasonably long.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>rlp-encode-transaction</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
 rlp-encode-transaction (<a href="ACL2____TRANS.html">trans</a>)
 (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="ETHEREUM____TRANSACTIONP.html">transactionp</a> trans)))
 (<a href="ACL2____B_A2.html">b*</a>
  (((<a href="ETHEREUM____TRANSACTION.html">transaction</a> trans) trans)
   (tree (<a href="ETHEREUM____RLP-TREE-BRANCH.html">rlp-tree-branch</a>
              (<a href="COMMON-LISP____LIST.html">list</a> (<a href="ETHEREUM____RLP-TREE-LEAF.html">rlp-tree-leaf</a> (<a href="ACL2____NAT_D3_E3BEBYTES_A2.html">nat=&gt;bebytes*</a> trans.nonce))
                    (<a href="ETHEREUM____RLP-TREE-LEAF.html">rlp-tree-leaf</a> (<a href="ACL2____NAT_D3_E3BEBYTES_A2.html">nat=&gt;bebytes*</a> trans.gas-price))
                    (<a href="ETHEREUM____RLP-TREE-LEAF.html">rlp-tree-leaf</a> (<a href="ACL2____NAT_D3_E3BEBYTES_A2.html">nat=&gt;bebytes*</a> trans.gas-limit))
                    (<a href="ETHEREUM____RLP-TREE-LEAF.html">rlp-tree-leaf</a> trans.to)
                    (<a href="ETHEREUM____RLP-TREE-LEAF.html">rlp-tree-leaf</a> (<a href="ACL2____NAT_D3_E3BEBYTES_A2.html">nat=&gt;bebytes*</a> trans.value))
                    (<a href="ETHEREUM____RLP-TREE-LEAF.html">rlp-tree-leaf</a> trans.init/data)
                    (<a href="ETHEREUM____RLP-TREE-LEAF.html">rlp-tree-leaf</a> (<a href="ACL2____NAT_D3_E3BEBYTES_A2.html">nat=&gt;bebytes*</a> trans.sign-v))
                    (<a href="ETHEREUM____RLP-TREE-LEAF.html">rlp-tree-leaf</a> (<a href="ACL2____NAT_D3_E3BEBYTES_A2.html">nat=&gt;bebytes*</a> trans.sign-r))
                    (<a href="ETHEREUM____RLP-TREE-LEAF.html">rlp-tree-leaf</a> (<a href="ACL2____NAT_D3_E3BEBYTES_A2.html">nat=&gt;bebytes*</a> trans.sign-s))))))
  (<a href="ETHEREUM____RLP-ENCODE-TREE.html">rlp-encode-tree</a> tree)))</pre> 
<p><b>Theorem: </b>booleanp-of-rlp-encode-transaction.error?</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> booleanp-of-rlp-encode-transaction.error?
        (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> ?error? ?encoding)
              (<a href="ETHEREUM____RLP-ENCODE-TRANSACTION.html">rlp-encode-transaction</a> trans)))
            (<a href="ACL2____BOOLEANP.html">booleanp</a> error?))
        :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>byte-listp-of-rlp-encode-transaction.encoding</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> byte-listp-of-rlp-encode-transaction.encoding
        (<a href="ACL2____B_A2.html">b*</a> (((<a href="ACL2____MV.html">mv</a> ?error? ?encoding)
              (<a href="ETHEREUM____RLP-ENCODE-TRANSACTION.html">rlp-encode-transaction</a> trans)))
            (<a href="ACL2____BYTE-LISTP.html">byte-listp</a> encoding))
        :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>rlp-encode-transaction-of-transaction-fix-trans</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> rlp-encode-transaction-of-transaction-fix-trans
        (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="ETHEREUM____RLP-ENCODE-TRANSACTION.html">rlp-encode-transaction</a> (<a href="ETHEREUM____TRANSACTION-FIX.html">transaction-fix</a> trans))
               (<a href="ETHEREUM____RLP-ENCODE-TRANSACTION.html">rlp-encode-transaction</a> trans)))</pre> 
<p><b>Theorem: </b>rlp-encode-transaction-transaction-equiv-congruence-on-trans</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> rlp-encode-transaction-transaction-equiv-congruence-on-trans
        (<a href="ACL2____IMPLIES.html">implies</a> (<a href="ETHEREUM____TRANSACTION-EQUIV.html">transaction-equiv</a> trans trans-equiv)
                 (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="ETHEREUM____RLP-ENCODE-TRANSACTION.html">rlp-encode-transaction</a> trans)
                        (<a href="ETHEREUM____RLP-ENCODE-TRANSACTION.html">rlp-encode-transaction</a> trans-equiv)))
        :rule-classes :congruence)</pre> 

</body>
</html>
