<html>
<head>
<meta charset="UTF-8">
<title>Atc-write-array-rules</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=C____ATC-WRITE-ARRAY-RULES">Click for Atc-write-array-rules in the Full Manual</a></h3>

<p>Rules about <span class="tt"><a href="C____WRITE-ARRAY.html">write-array</a></span>.</p><p>The theorem about <span class="tt"><a href="C____WRITE-ARRAY.html">write-array</a></span> turns it into <span class="tt"><a href="C____UPDATE-VAR.html">update-var</a></span>, 
     similarly to how <span class="tt"><a href="C____WRITE-VAR.html">write-var</a></span> is turned into <span class="tt"><a href="C____UPDATE-VAR.html">update-var</a></span>. 
     The condition for the replacement is captured by <span class="v">write-array-okp</span>, 
     for which we supply rules to go through all the computation state layers. 
     When the computation state (meta) variable is reached, 
     it must be the case that there are hypotheses available 
     saying that reading the array 
     yields an array of appropriate type and length. 
     The rule is used as last resort, 
     only if the computation state is an ACL2 variable 
     (as enforced by the <span class="tt"><a href="ACL2____SYNTAXP.html">syntaxp</a></span> hypothesis).</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>write-array-okp</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a> write-array-okp (ptr array compst)
       (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="COMMON-LISP____AND.html">and</a> (<a href="C____POINTERP.html">pointerp</a> ptr)
                                   (<a href="C____ARRAYP.html">arrayp</a> array)
                                   (<a href="C____COMPUSTATEP.html">compustatep</a> compst))))
       (<a href="COMMON-LISP____LET.html">let</a> ((__function__ 'write-array-okp))
            (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
            (<a href="ACL2____B_A2.html">b*</a> ((<a href="C____ADDRESS.html">address</a> (<a href="C____POINTER-_E3ADDRESS_F3.html">pointer-&gt;address?</a> ptr))
                 (reftype (<a href="C____POINTER-_E3REFTYPE.html">pointer-&gt;reftype</a> ptr))
                 (<a href="C____HEAP.html">heap</a> (<a href="C____COMPUSTATE-_E3HEAP.html">compustate-&gt;heap</a> compst))
                 ((when (<a href="COMMON-LISP____NOT.html">not</a> address)) nil)
                 (address+array (<a href="OMAP____IN.html">omap::in</a> address heap))
                 ((unless (<a href="COMMON-LISP____CONSP.html">consp</a> address+array)) nil)
                 (old-array (<a href="COMMON-LISP____CDR.html">cdr</a> address+array))
                 ((unless (<a href="COMMON-LISP____EQUAL.html">equal</a> reftype
                                 (<a href="C____TYPE-OF-ARRAY-ELEMENT.html">type-of-array-element</a> old-array)))
                  nil)
                 ((unless (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="C____TYPE-OF-ARRAY-ELEMENT.html">type-of-array-element</a> array)
                                 (<a href="C____TYPE-OF-ARRAY-ELEMENT.html">type-of-array-element</a> old-array)))
                  nil)
                 ((unless (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="C____ARRAY-LENGTH.html">array-length</a> array)
                                 (<a href="C____ARRAY-LENGTH.html">array-length</a> old-array)))
                  nil))
                t)))</pre> 
<p><b>Theorem: </b>booleanp-of-write-array-okp</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> booleanp-of-write-array-okp
        (<a href="ACL2____B_A2.html">b*</a> ((yes/no (write-array-okp ptr array compst)))
            (<a href="ACL2____BOOLEANP.html">booleanp</a> yes/no))
        :rule-classes :rewrite)</pre> 
<p><b>Theorem: </b>write-array-okp-of-pointer-fix-ptr</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> write-array-okp-of-pointer-fix-ptr
        (<a href="COMMON-LISP____EQUAL.html">equal</a> (write-array-okp (<a href="C____POINTER-FIX.html">pointer-fix</a> ptr)
                                array compst)
               (write-array-okp ptr array compst)))</pre> 
<p><b>Theorem: </b>write-array-okp-pointer-equiv-congruence-on-ptr</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> write-array-okp-pointer-equiv-congruence-on-ptr
        (<a href="ACL2____IMPLIES.html">implies</a> (<a href="C____POINTER-EQUIV.html">pointer-equiv</a> ptr ptr-equiv)
                 (<a href="COMMON-LISP____EQUAL.html">equal</a> (write-array-okp ptr array compst)
                        (write-array-okp ptr-equiv array compst)))
        :rule-classes :congruence)</pre> 
<p><b>Theorem: </b>write-array-okp-of-array-fix-array</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> write-array-okp-of-array-fix-array
        (<a href="COMMON-LISP____EQUAL.html">equal</a> (write-array-okp ptr (<a href="C____ARRAY-FIX.html">array-fix</a> array)
                                compst)
               (write-array-okp ptr array compst)))</pre> 
<p><b>Theorem: </b>write-array-okp-array-equiv-congruence-on-array</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> write-array-okp-array-equiv-congruence-on-array
        (<a href="ACL2____IMPLIES.html">implies</a> (<a href="C____ARRAY-EQUIV.html">array-equiv</a> array array-equiv)
                 (<a href="COMMON-LISP____EQUAL.html">equal</a> (write-array-okp ptr array compst)
                        (write-array-okp ptr array-equiv compst)))
        :rule-classes :congruence)</pre> 
<p><b>Theorem: </b>write-array-okp-of-compustate-fix-compst</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> write-array-okp-of-compustate-fix-compst
        (<a href="COMMON-LISP____EQUAL.html">equal</a> (write-array-okp ptr array (<a href="C____COMPUSTATE-FIX.html">compustate-fix</a> compst))
               (write-array-okp ptr array compst)))</pre> 
<p><b>Theorem: </b>write-array-okp-compustate-equiv-congruence-on-compst</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> write-array-okp-compustate-equiv-congruence-on-compst
        (<a href="ACL2____IMPLIES.html">implies</a> (<a href="C____COMPUSTATE-EQUIV.html">compustate-equiv</a> compst compst-equiv)
                 (<a href="COMMON-LISP____EQUAL.html">equal</a> (write-array-okp ptr array compst)
                        (write-array-okp ptr array compst-equiv)))
        :rule-classes :congruence)</pre> 
<p><b>Theorem: </b>write-array-okp-of-add-frame</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> write-array-okp-of-add-frame
        (<a href="COMMON-LISP____EQUAL.html">equal</a> (write-array-okp ptr array (<a href="C____ADD-FRAME.html">add-frame</a> fun compst))
               (write-array-okp ptr array compst)))</pre> 
<p><b>Theorem: </b>write-array-okp-of-enter-scope</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> write-array-okp-of-enter-scope
        (<a href="COMMON-LISP____EQUAL.html">equal</a> (write-array-okp ptr array (<a href="C____ENTER-SCOPE.html">enter-scope</a> compst))
               (write-array-okp ptr array compst)))</pre> 
<p><b>Theorem: </b>write-array-okp-of-add-var</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> write-array-okp-of-add-var
        (<a href="COMMON-LISP____EQUAL.html">equal</a> (write-array-okp ptr array (<a href="C____ADD-VAR.html">add-var</a> var val compst))
               (write-array-okp ptr array compst)))</pre> 
<p><b>Theorem: </b>write-array-okp-of-update-var</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
     write-array-okp-of-update-var
     (<a href="COMMON-LISP____EQUAL.html">equal</a> (write-array-okp ptr array (<a href="C____UPDATE-VAR.html">update-var</a> var val compst))
            (write-array-okp ptr array compst)))</pre> 
<p><b>Theorem: </b>write-array-okp-of-update-array</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
 write-array-okp-of-update-array
 (<a href="ACL2____IMPLIES.html">implies</a>
    (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP____NOT.html">not</a> (<a href="C____POINTER-NULLP.html">pointer-nullp</a> ptr))
         (<a href="COMMON-LISP____NOT.html">not</a> (<a href="C____POINTER-NULLP.html">pointer-nullp</a> ptr2))
         (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="C____POINTER-_E3REFTYPE.html">pointer-&gt;reftype</a> ptr)
                (<a href="C____TYPE-OF-ARRAY-ELEMENT.html">type-of-array-element</a> array))
         (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="C____POINTER-_E3REFTYPE.html">pointer-&gt;reftype</a> ptr2)
                (<a href="C____TYPE-OF-ARRAY-ELEMENT.html">type-of-array-element</a> array2)))
    (<a href="COMMON-LISP____EQUAL.html">equal</a> (write-array-okp ptr
                            array (<a href="C____UPDATE-ARRAY.html">update-array</a> ptr2 array2 compst))
           (<a href="COMMON-LISP____IF.html">if</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="C____POINTER-_E3ADDRESS_F3.html">pointer-&gt;address?</a> ptr)
                      (<a href="C____POINTER-_E3ADDRESS_F3.html">pointer-&gt;address?</a> ptr2))
               (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="C____TYPE-OF-ARRAY-ELEMENT.html">type-of-array-element</a> array)
                           (<a href="C____TYPE-OF-ARRAY-ELEMENT.html">type-of-array-element</a> array2))
                    (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="C____ARRAY-LENGTH.html">array-length</a> array)
                           (<a href="C____ARRAY-LENGTH.html">array-length</a> array2)))
               (write-array-okp ptr array compst)))))</pre> 
<p><b>Theorem: </b>write-array-okp-when-arrayp-of-read-array</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a>
     write-array-okp-when-arrayp-of-read-array
     (<a href="ACL2____IMPLIES.html">implies</a> (<a href="COMMON-LISP____AND.html">and</a> (<a href="ACL2____SYNTAXP.html">syntaxp</a> (<a href="COMMON-LISP____SYMBOLP.html">symbolp</a> compst))
                   (<a href="COMMON-LISP____EQUAL.html">equal</a> old-array (<a href="C____READ-ARRAY.html">read-array</a> ptr compst))
                   (<a href="C____ARRAYP.html">arrayp</a> old-array))
              (<a href="COMMON-LISP____EQUAL.html">equal</a> (write-array-okp ptr array compst)
                     (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="C____TYPE-OF-ARRAY-ELEMENT.html">type-of-array-element</a> array)
                                 (<a href="C____TYPE-OF-ARRAY-ELEMENT.html">type-of-array-element</a> old-array))
                          (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="C____ARRAY-LENGTH.html">array-length</a> array)
                                 (<a href="C____ARRAY-LENGTH.html">array-length</a> old-array))))))</pre> 
<p><b>Theorem: </b>write-array-to-update-array</p><pre class="code">(<a href="ACL2____DEFTHM.html">defthm</a> write-array-to-update-array
        (<a href="ACL2____IMPLIES.html">implies</a> (write-array-okp ptr array compst)
                 (<a href="COMMON-LISP____EQUAL.html">equal</a> (<a href="C____WRITE-ARRAY.html">write-array</a> ptr array compst)
                        (<a href="C____UPDATE-ARRAY.html">update-array</a> ptr array compst))))</pre> 

</body>
</html>
