<html>
<head>
<meta charset="UTF-8">
<title>Set-state-ok</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____SET-STATE-OK">Click for Set-state-ok in the Full Manual</a></h3>

<p>Allow the use of STATE as a formal parameter</p><p>Note: This is an event!  It does not print the usual event <a href="ACL2____SUMMARY.html">summary</a> but nevertheless changes the ACL2 logical <a href="ACL2____WORLD.html">world</a> and is so 
 recorded.</p> 
 
 <p>In brief: The variable symbol <span class="tt"><a href="ACL2____STATE.html">state</a></span> has an unusual status in ACL2. 
 In order to use it, you either need to issue <span class="v">:set-state-ok t</span>, as we 
 explain below, or you need to declare it to be a <a href="ACL2____STOBJ.html">stobj</a>, as explained 
 elsewhere (see <a href="ACL2____DECLARE-STOBJS.html">declare-stobjs</a>).  Now we explain in more detail.</p> 
 
 <p>Because the variable symbol <span class="tt"><a href="ACL2____STATE.html">state</a></span> denotes the ``current ACL2 
 state,'' ACL2 treats the symbol very restrictively when it occurs as a formal 
 parameter of a defined function.  The novice user, who is unlikely to be aware 
 of the special status of that symbol, is likely to be confused when error 
 messages about <span class="v">STATE</span> are printed in response to the innocent choice of 
 that symbol as a formal variable.  Therefore the top-level ACL2 loop can 
 operate in a mode in which <span class="tt"><a href="ACL2____STATE.html">state</a></span> is simply disallowed as a formal 
 parameter.</p> 
 
 <p>For a discussion of <span class="v">STATE</span>, See <a href="ACL2____STATE.html">state</a> and see <a href="ACL2____STOBJ.html">stobj</a>. 
 Roughly speaking, at the top-level, the ``current ACL2 state'' is denoted by 
 the variable symbol <span class="v">STATE</span>.  Only the current state may be passed into a 
 function expecting a state as an argument.  Furthermore, the name of the 
 formal parameter into which the current state is passed must be <span class="v">STATE</span> and 
 nothing but the current state may be passed into a formal of that name. 
 Therefore, only certain access and change functions can use that formal 
 — namely those with a <span class="v">STATE</span> formal — and if any such function 
 produces a new state it becomes the ``current state'' and must be passed along 
 in the <span class="v">STATE</span> position thereafter.  Thus, ACL2 requires that the state be 
 single-threaded.  This, in turn, allows us to represent only one state at a 
 time and to produce new states from it destructively in a von Neumannesque 
 fashion.  The syntactic restrictions on the variable <span class="v">STATE</span> are enforced 
 by the translate mechanism (see <a href="ACL2____TRANS.html">trans</a> and see <a href="ACL2____TERM.html">term</a>) when terms 
 are read.</p> 
 
 <p>To prevent the novice user from seeing messages prohibiting certain uses of 
 the variable symbol <span class="v">STATE</span> ACL2 has a mode in which it simply disallows 
 the use of that symbol as a formal parameter.  Use of the symbol causes a 
 simple error message.  The system is initially in that mode.</p> 
 
 <p>To get out of that mode, execute:</p> 
 
 <pre class="code">:set-state-ok t ;;; or, (<a href="ACL2____SET-STATE-OK.html">set-state-ok</a> t)</pre> 
 
 <p>It is not recommended that you do this until you have read the 
 documentation of <span class="tt"><a href="ACL2____STATE.html">state</a></span>.</p> 
 
 <p>To enter the mode in which use of <span class="v">state</span> is prohibited as a formal 
 parameter, do:</p> 
 
 <pre class="code">:set-state-ok nil</pre> 
 
 <p>The mode is stored in the defaults table, See <a href="ACL2____ACL2-DEFAULTS-TABLE.html">ACL2-defaults-table</a>. 
 Thus, the mode may be set <span class="tt"><a href="ACL2____LOCAL.html">local</a></span>ly in books.</p>
</body>
</html>
