<html>
<head>
<meta charset="UTF-8">
<title>Defsubtype</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=FTY____DEFSUBTYPE">Click for Defsubtype in the Full Manual</a></h3>

<p>Introduce a <a href="ACL2____FTY.html">fixtype</a> that 
          is a subtype of the given fixtype.</p><h3>Introduction</h3><p><span class="tt"><a href="FTY____DEFSUBTYPE.html">defsubtype</a></span> introduces fixtypes for an arbitrary subtype. 
     A subtype <span class="v">SUB</span> of a type <span class="v">SUPER</span> is one that is either 
     the same as or more restrictive than <span class="v">SUPER</span>.  This is expressed 
     by a restriction predicate.  The recognizer predicate for the subtype 
     is the conjunction of the supertype's recognizer predicate and 
     the restriction predicate:</p><pre class="code">(<a href="ACL2____IFF.html">iff</a> (sub-p x)
     (<a href="COMMON-LISP____AND.html">and</a> (super-p x)
          (sub-restriction-p x)))</pre><p>The restriction predicate should be a total function of one argument. 
     It can be a symbol or a lambda expression. 
     The required <span class="v">:fix-value</span> argument specifies a value that will be returned by the 
     new fixing function.  It must satisfy the new recognizer predicate.</p><h3>Basic Example</h3><pre class="code">(<a href="FTY____DEFSUBTYPE.html">defsubtype</a> positive-even
  :supertype pos
  :restriction (<a href="COMMON-LISP____LAMBDA.html">lambda</a> (x) (<a href="COMMON-LISP____AND.html">and</a> (<a href="COMMON-LISP____INTEGERP.html">integerp</a> x) (<a href="COMMON-LISP____EVENP.html">evenp</a> x)))
  :fix-value 2)</pre><p>This example would produce:</p><ul>
<li>A recognizer <span class="v">positive-even-p</span>.</li>
<li>A fixing function <span class="v">positive-even-fix</span>.</li>
<li>An equivalence relation <span class="v">positive-even-equiv</span>.</li>
</ul><p>The reason the restriction predicate is not just <span class="v">evenp</span> 
     is because <span class="v">evenp</span> has a guard of <span class="v">integerp</span> and therefore 
     is not a total function.  Note that the restriction predicate 
     does not need to define a subset of the supertype. 
     It can be true on some values that are not in the supertype, 
     in this case on negative even numbers.  This is not a problem 
     because the subtype's recognizer predicate checks both the 
     supertype's predicate and the restriction predicate.</p><h3>General Form</h3><pre class="code">(<a href="FTY____DEFSUBTYPE.html">defsubtype</a> subtype
  :supertype ...     ;; required; must be defined using fty
  :restriction ...   ;; required; can be named or a lambda expression
  :fix-value ...     ;; required
  :pred ...          ;; optional name of new predicate; default: subtype-p
  :fix ...           ;; optional; default: subtype-fix
  :equiv ...         ;; optional; default: subtype-equiv
  :parents ...       ;; optional; XDOC parents
  :short ...         ;; optional; XDOC short description.
  :long ...          ;; optional; XDOC long description.
  )</pre><h3>Inputs</h3><p><span class="v">subtype</span></p><blockquote><p>A symbol that specifies the name of the new fixtype.</p></blockquote><p><span class="v">:supertype</span></p><blockquote>
<p>A symbol that names a fixtype that is a supertype of the type being defined.</p>
<p>The recognizer, fixer, and equivalence function of the supertype 
      must all be guard-verified.</p>
</blockquote><p><span class="v">:restriction</span></p><blockquote><p>A predicate that is used, in conjunction with the supertype's predicate, 
      to define <span class="v">pred</span>, which recognizes values of the subtype.</p></blockquote><p><span class="v">:fix-value</span></p><blockquote><p>The value returned by the fixing function when passed a value for which 
      <span class="v">pred</span> is false.  Also establishes that the subtype has at least one value.</p></blockquote><p><span class="v">:pred</span></p><blockquote><p>A symbol that specifies the name of the generated recognizer for <span class="v">subtype</span>. 
      If this is <span class="v">nil</span> (the default), 
      the name of the recognizer is <span class="v">subtype</span> followed by <span class="v">-p</span>.</p></blockquote><p><span class="v">:fix</span></p><blockquote><p>A symbol that specifies the name of the generated fixer for <span class="v">subtype</span>. 
      If this is <span class="v">nil</span> (the default), 
      the name of the fixer is <span class="v">subtype</span> followed by <span class="v">-fix</span>.</p></blockquote><p><span class="v">:equiv</span></p><blockquote><p>A symbol that specifies the name of the generated equivalence checker for <span class="v">subtype</span>. 
      If this is <span class="v">nil</span> (the default), 
      the name of the equivalence checker is <span class="v">subtype</span> followed by <span class="v">-equiv</span>.</p></blockquote><p><span class="v">:parents</span><br><span class="v">:short</span><br><span class="v">:long</span></p><blockquote><p>These, if present, are added to 
      the XDOC topic generated for the new fixtype.</p></blockquote><h3>Generated Events</h3><p><span class="v">pred</span></p><blockquote><p>The recognizer for the fixtype, guard-verified.</p></blockquote><p><span class="v">booleanp-of-pred</span></p><blockquote><p>A rewrite rule saying that <span class="v">pred</span> is boolean-valued.</p></blockquote><p><span class="v">supertype-pred-when-pred-rewrite</span><br><span class="v">supertype-pred-when-pred-forward</span></p><blockquote><p>A rewrite rule and a forward chaining rule 
      saying that a value satisfies <span class="v">supertype-pred</span> 
      when it satisfies <span class="v">pred</span>.</p></blockquote><p><span class="v">fix</span></p><blockquote>
<p>The fixer for the fixtype, guard-verified.</p>
<p>It fixes values outside of <span class="v">pred</span> by returning 
      <span class="v">fix-value</span>.</p>
<p><span class="v">pred-of-fix</span></p>
<blockquote><p>A rewrite rule saying that <span class="v">fix</span> always returns 
      a value that satisfies <span class="v">pred</span>.</p></blockquote>
<p><span class="v">fix-when-pred</span></p>
<blockquote><p>A rewrite rule saying that <span class="v">fix</span> disappears 
      when its argument satisfies <span class="v">pred</span>.</p></blockquote>
<p><span class="v">type</span><br><span class="v">equiv</span></p>
<blockquote><p>The fixtype, via a call of <span class="tt"><a href="FTY____DEFFIXTYPE.html">deffixtype</a></span> 
      that also introduces the equivalence checker <span class="v">equiv</span>.</p></blockquote>
<p>The above items are generated with XDOC documentation.</p>
</blockquote>
</body>
</html>
