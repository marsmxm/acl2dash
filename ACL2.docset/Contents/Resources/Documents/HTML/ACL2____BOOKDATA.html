<html>
<head>
<meta charset="UTF-8">
<title>Bookdata</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____BOOKDATA">Click for Bookdata in the Full Manual</a></h3>

<p>An optional tool for writing out small files with meta-data about 
 the books that are being certified.</p><p>ACL2 provides a primitive capability for writing out a file of data 
 associated with a book.  This information might be useful, for example, in 
 building a database that allows you to search for name conflicts.  See <a href="ACL2____COMMUNITY-BOOKS.html">community-books</a> directory <span class="v">books/tools/book-conflicts/</span> for an application 
 of this capability by Dave Greve.  If you use this capability and have ideas 
 for enhancing it, please feel free to send them to the ACL2 developers.</p> 
 
 <p>If the book has the name <span class="v">BK</span>, then the output file is named 
 <span class="v">BK__bookdata.out</span>.  That file is generated in the same directory as 
 <span class="v">BK</span>, by certifying <span class="v">BK</span> when <a href="ACL2____STATE.html">state</a> global <span class="v">'write-bookdata</span> 
 has a non-<span class="v">nil</span> value, for example as follows.</p> 
 
 <pre class="code">(<a href="ACL2____ASSIGN.html">assign</a> write-bookdata t)
(<a href="ACL2____CERTIFY-BOOK.html">certify-book</a> "BK" ...)</pre> 
 
 <p>The resulting file will contain a single form of the following shape, 
 although not necessarily in the following order, according to the description 
 that follows below.</p> 
 
 <pre class="code">("...BK.lisp"
 :PKGS          pkgs-val
 :BOOKS         book-val
 :PORT-BOOKS    port-book-val
 :CONSTS        consts-val
 :PORT-CONSTS   port-consts-val
 :FNS           fns-val
 :PORT-FNS      port-fns-val
 :LABELS        labels-val
 :PORT-LABELS   port-labels-val
 :MACROS        macros-val
 :PORT-MACROS   port-macros-val
 :STOBJS        stobjs-val
 :PORT-STOBJS   port-stobjs-val
 :THEORIES      theories-val
 :PORT-THEORIES port-theories-val
 :THMS          thms-val
 :PORT-THMS     port-thms-val</pre>) 
 
 <p>The first entry in the form will always be the full book name (see <a href="ACL2____FULL-BOOK-NAME.html">full-book-name</a>) of the certified book, <span class="v">BK</span>.</p> 
 
 <p>Subsequent values in the form are based on <a href="ACL2____EVENTS.html">events</a> introduced by 
 including <span class="v">BK</span>.  For various values of <span class="v">xxx</span> as described below, 
 <span class="v">port-</span><i>xxx</i><span class="v">-val</span> is a list of values corresponding to <a href="ACL2____EVENTS.html">events</a> introduced in the certification <a href="ACL2____WORLD.html">world</a> for <span class="v">BK</span> (see <a href="ACL2____PORTCULLIS.html">portcullis</a>), and <i>xxx</i><span class="v">-val</span> is a list of values corresponding to 
 <a href="ACL2____EVENTS.html">events</a> introduced non-<span class="tt"><a href="ACL2____LOCAL.html">local</a></span>ly by <span class="v">BK</span>.  These lists include 
 only ``top-level'' events, not those that are introduced by a book included 
 either in <span class="v">BK</span> or its certification world.</p> 
 
 <p><span class="v">pkgs-val</span> is a list of names of packages introduced in the 
 certification world (at the top level, not in an included book).  Note that no 
 packages are introduced in a book itself, so no distinction is made between 
 <span class="v">pkgs-val</span> and <span class="v">port-pkgs-val</span>.  Both <span class="v">port-book-val</span> and 
 <span class="v">book-val</span> are lists of full book names (see <a href="ACL2____FULL-BOOK-NAME.html">full-book-name</a>) of 
 included books.  The values associated with the other keywords are, 
 themselves, association lists (see <a href="ACL2____ALISTP.html">alistp</a>) such that each key is a 
 package name, which is associated with a list of <a href="COMMON-LISP____SYMBOL-NAME.html">symbol-name</a>s for 
 symbols in that package that are introduced for that keyword.  For example, 
 <span class="v">fns-val</span> may be the alist</p> 
 
 <pre class="code">(("ACL2" "F1" "F2")
 ("MY-PKG" "G1" "G2"))</pre> 
 
 <p>if the function symbols introduced in the book are <span class="v">F1</span> and <span class="v">F2</span> in 
 the <span class="v">"ACL2"</span> package, as well as <span class="v">G1</span> and <span class="v">G2</span> in the 
 <span class="v">"MY-PKG"</span> package.</p> 
 
 <p>We next explain what kinds of symbols are introduced for each keyword 
 <span class="v">:xxx</span>.  Each such symbol would be associated with either the keyword 
 <span class="v">:port-xxx</span> or the keyword <span class="v">:xxx</span> depending respectively on whether the 
 symbol is introduced at the top level of the certification world for <span class="v">BK</span> 
 or <span class="v">BK</span> itself.</p> 
 
 <dl> 
 
 <dt><span class="v">:CONSTS</span></dt> 
 
 <dd>constant symbol introduced by <span class="v">defconst</span>
</dd> 
 
 <dt><span class="v">:FNS</span></dt> 
 
 <dd>function symbol: introduced by <span class="v">defun</span>, <span class="v">defuns</span>, or <span class="v">defchoose</span>; or 
 constrained (by an <span class="tt"><a href="ACL2____ENCAPSULATE.html">encapsulate</a></span> event)</dd> 
 
 <dt><span class="v">:LABELS</span></dt> 
 
 <dd>symbol introduced by <span class="v">deflabel</span>
</dd> 
 
 <dt><span class="v">:MACROS</span></dt> 
 
 <dd>macro name introduced by <span class="v">defmacro</span>
</dd> 
 
 <dt><span class="v">:STOBJS</span></dt> 
 
 <dd>
<span class="v">stobj</span> name introduced by <span class="v">defstobj</span> or <span class="v">defabsstobj</span>
</dd> 
 
 <dt><span class="v">:THEORIES</span></dt> 
 
 <dd>theory name introduced by <span class="v">deftheory</span>
</dd> 
 
 <dt><span class="v">:THMS</span></dt> 
 
 <dd>theorem name, which may be introduced by <span class="v">defthm</span> or a macro call 
 expanding to a call of <span class="v">defthm</span>, such as see <a href="ACL2____DEFEQUIV.html">defequiv</a> or 
 <span class="v">defaxiom</span>; but may be introduced by <span class="tt"><a href="ACL2____DEFPKG.html">defpkg</a></span>, for example, with 
 name <span class="v">"MYPKG-PACKAGE"</span> if the package name is <span class="v">"MYPKG"</span>
</dd> 
 
 </dl> 
 
 <p>Our hope is that people in the ACL2 community will generate and use this 
 data to improve the ACL2 <a href="ACL2____COMMUNITY-BOOKS.html">community-books</a>.  Here is an example 
 illustrating how to generate bookdata files for those books as a byproduct of 
 a regression run.  Below, we write <span class="v">{DIR}</span> as an abbreviation for the ACL2 
 sources directory, and assume that this command is run from that directory. 
 Of course, you may wish to use <span class="v">make</span> options like <span class="v">-j 8</span> and <span class="v">make</span> 
 variable settings like <span class="v">ACL2={DIR}/my-saved_acl2</span>; see <a href="ACL2____BOOKS-CERTIFICATION.html">books-certification</a> for details.</p> 
 
 <pre class="code">make regression-fresh \
ACL2_CUSTOMIZATION={DIR}/acl2-customization-files/bookdata.lisp</pre>
</body>
</html>
