<html>
<head>
<meta charset="UTF-8">
<title>Check-user-term</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____CHECK-USER-TERM">Click for Check-user-term in the Full Manual</a></h3>

<p>Recognize <a href="ACL2____TERM.html">untranslated</a> terms that are valid for evaluation.</p><div class="box"><dl> 
  <dt>Signature</dt>
<dt><pre class="code">(check-user-term x wrld) → (mv term/message stobjs-out)</pre></dt>  <dt>Arguments</dt>  <dd>
<span class="tt">wrld</span> — <font color="#606060">Guard <span class="v">(<a href="ACL2____PLIST-WORLDP.html">plist-worldp</a> wrld)</span>.</font>
</dd> 
<dt>Returns</dt>
<dd>
<span class="tt">term/message</span> — A <span class="tt"><a href="ACL2____PSEUDO-TERMP.html">pseudo-termp</a></span> or <span class="tt"><a href="ACL2____MSGP.html">msgp</a></span>.</dd> 
<dd>
<span class="tt">stobjs-out</span> — A <span class="tt"><a href="ACL2____SYMBOL-LISTP.html">symbol-listp</a></span>.</dd> 
 
</dl></div> 
<p>An untranslated <a href="ACL2____TERM.html">term</a> is a term as entered by the user. 
     This function checks <span class="v">x</span> by attempting to translate it. 
     If the translation succeeds, the translated term is returned, 
     along with the <span class="tt"><a href="ACL2____STOBJS-OUT.html">stobjs-out</a></span> list of the term (see below for details). 
     Otherwise, a structured error message is returned (printable with <span class="v">~@</span>), 
     along with <span class="v">nil</span> as <span class="tt"><a href="ACL2____STOBJS-OUT.html">stobjs-out</a></span> list. 
     These two possible outcomes can be distinguished by the fact that 
     the former yields a <a href="ACL2____PSEUDO-TERMP.html">pseudo-term</a> while the latter does not.</p><p>The <span class="tt"><a href="ACL2____STOBJS-OUT.html">stobjs-out</a></span> list of a term is the term analogous 
     of the <span class="tt"><a href="ACL2____STOBJS-OUT.html">stobjs-out</a></span> property of a function, 
     namely a list of symbols that is like a ``mask'' for the result. 
     A <span class="v">nil</span> in the list means that 
     the corresponding result is a non-<a href="ACL2____STOBJ.html">stobj</a> value, 
     while the name of a <a href="ACL2____STOBJ.html">stobj</a> in the list means that 
     the corresponding result is the named <a href="ACL2____STOBJ.html">stobj</a>. 
     The list is a singleton, unless the term returns <a href="ACL2____MV.html">multiple values</a>.</p><p>We create a fresh function symbol <span class="v">fn</span> 
     and pass it to <span class="v">translate1-cmp</span> as stobjs-out and binding. 
     This means that we are checking that the term 
     can be used in a function body. 
     This is stricter than checking the term to be valid 
     for use in a <span class="tt"><a href="ACL2____DEFTHM.html">defthm</a></span> and <span class="tt"><a href="ACL2____DEFUN-NX.html">defun-nx</a></span>.</p><p>If <span class="v">translate1-cmp</span> is successful, 
     it returns updated bindings that associate <span class="v">fn</span> 
     to the output stobjs of the term.</p><p>The <span class="tt"><a href="ACL2____CHECK-USER-TERM.html">check-user-term</a></span> function does not terminate 
     if the translation expands an ill-behaved macro that does not terminate.</p> 
 
<h3>Definitions and Theorems</h3><p><b>Function: </b>check-user-term</p><pre class="code">(<a href="COMMON-LISP____DEFUN.html">defun</a>
   check-user-term (x wrld)
   (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="ACL2____XARGS.html">xargs</a> :guard (<a href="ACL2____PLIST-WORLDP.html">plist-worldp</a> wrld)))
   (<a href="COMMON-LISP____LET.html">let</a> ((__function__ 'check-user-term))
        (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORABLE.html">ignorable</a> __function__))
        (<a href="COMMON-LISP____LET.html">let</a> ((fn (gen-new-name '__fn__ wrld)))
             (<a href="ACL2____MV-LET.html">mv-let</a> (<a href="ACL2____CTX.html">ctx</a> term/message bindings)
                     (<a href="ACL2____TRANSLATE1-CMP.html">translate1-cmp</a> x fn (<a href="COMMON-LISP____CONS.html">cons</a> (<a href="COMMON-LISP____CONS.html">cons</a> fn fn) 'nil)
                                     t __function__
                                     wrld (<a href="ACL2____DEFAULT-STATE-VARS.html">default-state-vars</a> nil))
                     (<a href="COMMON-LISP____DECLARE.html">declare</a> (<a href="COMMON-LISP____IGNORE.html">ignore</a> ctx))
                     (<a href="COMMON-LISP____IF.html">if</a> (<a href="ACL2____PSEUDO-TERMP.html">pseudo-termp</a> term/message)
                         (<a href="ACL2____MV.html">mv</a> term/message (<a href="COMMON-LISP____CDR.html">cdr</a> (<a href="COMMON-LISP____ASSOC.html">assoc</a> fn bindings)))
                         (<a href="ACL2____MV.html">mv</a> term/message nil))))))</pre> 

</body>
</html>
