<html>
<head>
<meta charset="UTF-8">
<title>Output-to-file</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=ACL2____OUTPUT-TO-FILE">Click for Output-to-file in the Full Manual</a></h3>

<p>Redirecting output to a file</p><p>For a general discussion of ACL2 input/output and of the ACL2 
 read-eval-print loop, see <a href="ACL2____IO.html">io</a> and see <a href="ACL2____LD.html">ld</a> (respectively).  Here we 
 use an example to illustrate how to use some of the options provided by 
 <span class="v">ld</span> to redirect ACL2 output to a file, other than the printing of the 
 prompt (which continues to go to the terminal).</p> 
 
 <p>There are two <span class="v">ld</span> specials that control output from the <span class="v">ld</span> 
 command: <span class="tt"><a href="ACL2____PROOFS-CO.html">proofs-co</a></span> for proof output and <span class="tt"><a href="ACL2____STANDARD-CO.html">standard-co</a></span> for other 
 output.  The following example shows how to use these to redirect output to a 
 file <span class="v">"tmp.out"</span>.  The following command opens a character output channel 
 to the file <span class="v">"tmp.out"</span> and redirects proof output to that channel, i.e., 
 to file <span class="v">"tmp.out"</span>.</p> 
 
 <pre class="code">(<a href="ACL2____MV-LET.html">mv-let</a> (chan state)
        (<a href="ACL2____OPEN-OUTPUT-CHANNEL.html">open-output-channel</a> "tmp.out" :character state)
        (set-proofs-co chan state))</pre> 
 
 <p>Next, we redirect standard output to that same channel.</p> 
 
 <pre class="code">(set-standard-co (<a href="ACL2____PROOFS-CO.html">proofs-co</a> state) state)</pre> 
 
 <p>Now we can load an input file, in this case file <span class="v">"tmp.lisp"</span>, and 
 output will be redirected to file <span class="v">"tmp.out"</span>.  (The use of 
 <span class="v">:ld-pre-eval-print t</span> is optional; see <a href="ACL2____LD.html">ld</a>.)</p> 
 
 <pre class="code">(<a href="ACL2____LD.html">ld</a> "tmp.lisp" :ld-pre-eval-print t)</pre> 
 
 <p>Having completed our load operation, we restore both proof output and 
 standard output to the terminal, as follows.</p> 
 
 <pre class="code">(set-standard-co *standard-co* state)
(<a href="ACL2____CLOSE-OUTPUT-CHANNEL.html">close-output-channel</a> (<a href="ACL2____PROOFS-CO.html">proofs-co</a> state) state)
(set-proofs-co *standard-co* state)</pre> 
 
 <p>The following variant of the above example shows how to redirect output as 
 above except without changing the global settings of the two <span class="tt"><a href="ACL2____LD.html">ld</a></span> 
 specials, <span class="tt"><a href="ACL2____PROOFS-CO.html">proofs-co</a></span> and <span class="tt"><a href="ACL2____STANDARD-CO.html">standard-co</a></span>.  This approach uses a 
 notion of ``global variables'' stored in the ACL2 <a href="ACL2____STATE.html">state</a>; see <a href="ACL2____ASSIGN.html">assign</a> and see <a href="ACL2_____04.html">@</a>.</p> 
 
 <pre class="code">(<a href="ACL2____MV-LET.html">mv-let</a> (chan state)
        (<a href="ACL2____OPEN-OUTPUT-CHANNEL.html">open-output-channel</a> "tmp.out" :character state)
        (<a href="ACL2____ASSIGN.html">assign</a> tmp-channel chan))
(<a href="ACL2____LD.html">ld</a> "tmp.lisp" :ld-pre-eval-print t
               :proofs-co (<a href="ACL2_____04.html">@</a> tmp-channel)
               :standard-co (<a href="ACL2_____04.html">@</a> tmp-channel))
(<a href="ACL2____CLOSE-OUTPUT-CHANNEL.html">close-output-channel</a> (<a href="ACL2_____04.html">@</a> tmp-channel) state)</pre>
</body>
</html>
