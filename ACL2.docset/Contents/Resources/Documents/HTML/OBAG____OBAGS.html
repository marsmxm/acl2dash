<html>
<head>
<meta charset="UTF-8">
<title>Obags</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=OBAG____OBAGS">Click for Obags in the Full Manual</a></h3>

<p>A library of obags (ordered bags), 
          i.e. finite bags (a.k.a. multisets) 
          represented as non-strictly ordered lists.</p><p>This is related to the library of <a href="ACL2____STD_F2OSETS.html">osets (ordered sets)</a>, i.e. finite sets represented as strictly ordered lists. 
     The lists that represent obags are non-strictly ordered, 
     i.e. they may have (contiguous) duplicate elements. 
     Like osets capture (up to isomorphism) 
     the mathematical notion of finite sets (over ACL2 objects), 
     obags capture (up to isomorphism) 
     the mathematical notion of finite bags (over ACL2 objects). 
     In particular, obag equality is <span class="tt"><a href="COMMON-LISP____EQUAL.html">equal</a></span>.</p><p>Since obags are lists, 
     in principle some list operations could be used on obags. 
     However, this library provides versions of those list operations 
     that have stronger guards (i.e. requiring obags instead of just lists) 
     and that treat non-obags as the empty obag. 
     That is, the obag operations respect a `non-bag convention' 
     analogous to the <a href="SET____PRIMITIVES.html">non-set convention</a> respected by the oset operations; 
     some of the latter are, analogously, 
     versions of list operations (e.g. <span class="tt"><a href="OBAG____HEAD.html">head</a></span> for <span class="tt"><a href="COMMON-LISP____CAR.html">car</a></span>), 
     motivated by the fact that the list operations 
     do not respect the non-set convention.</p><p>The obag operations 
     <span class="tt"><a href="OBAG____BAGP.html">bagp</a></span>, 
     <span class="tt"><a href="OBAG____BFIX.html">bfix</a></span>, 
     <span class="tt"><a href="OBAG____EMPTY.html">empty</a></span>, 
     <span class="tt"><a href="OBAG____HEAD.html">head</a></span>, 
     <span class="tt"><a href="OBAG____TAIL.html">tail</a></span>, and 
     <span class="tt"><a href="OBAG____INSERT.html">insert</a></span> 
     are ``primitive'' in the same sense as the <a href="SET____PRIMITIVES.html">oset primitives</a>: their logical definitions depend on 
     the underlying representation as lists, 
     and provide replacements of list operations 
     that respect the `non-bag convention'. 
     The logical definitions of the other obag operations 
     are in terms of the primitive operations, 
     without reference to the underlying list representation.</p><p>There are different logically equivalent ways to define obag operations. 
     The current definitions (as well as their names) are preliminary 
     and could be improved if needed; 
     these definitions favor ease of reasoning over efficiency of execution, 
     but, as done in osets, <span class="tt"><a href="ACL2____MBE.html">mbe</a></span> could be used to provide 
     equivalent efficient definitions for execution. 
     As it is often possible to reason about osets abstractly 
     (i.e. without regard to their underlying list representation), 
     it should be often possible to reason about obags abstractly 
     (i.e. without regard to their underlying list representation), 
     using the theorems provided by this library. 
     The current theorems are preliminary 
     and could be improved and extended if needed. 
     The empty obag is <span class="v">nil</span>, like the empty list; 
     there is no separate operation for the empty obag, 
     as there is none for the empty oset.</p><p>Since osets are in the <span class="v">"SET"</span> package, 
     it would be natural to use a <span class="v">"BAG</span> package for obags. 
     However, a package with this name is already defined 
     in <span class="v">[books]/coi/bags/package.lsp</span> (see below). 
     So, we use <span class="v">"OBAG"</span> for obags 
     to allow interoperability with this <span class="v">coi</span> bag library, 
     in the sense that an application can use both <span class="v">coi</span> bags and obags. 
     Perhaps the <span class="v">"SET"</span> package for osets 
     could be renamed to <span class="v">"OSET"</span> at some point, 
     for consistency. 
     (A similar issue applies to <a href="OMAP____OMAPS.html">the library of omaps</a> and the <span class="v">[books]/coi/maps</span> library, 
     which defines a <span class="v">"MAP"</span> package.)</p><p>This obag library is in the same <span class="v">SET</span> package as osets 
     because obags are related to osets. 
     Furthermore, a <span class="v">BAG</span> package already exists in <span class="v">[books]/coi/bags/</span>.</p><p>This obag library could become a new <span class="v">std/obags</span> library, 
     part of <a href="ACL2____STD.html">Std</a>, parallel to <span class="tt"><a href="ACL2____STD_F2OSETS.html">ACL2::std/osets</a></span>.</p><p>Compared to using the built-in <a href="ACL2____LISTS.html">ACL2::lists</a> to represent bags, 
     obags are closer to the mathematical notion of bags, 
     at the cost of maintaining their non-strict order. 
     These tradeoffs are analogous to the ones between using osets 
     and using the built-in <a href="ACL2____LISTS.html">ACL2::lists</a> to represent sets. 
     The bag library in <span class="v">[books]/coi/bags/</span> 
     operates on possibly unordered lists.</p>
</body>
</html>
