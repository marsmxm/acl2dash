<html>
<head>
<meta charset="UTF-8">
<title>Omaps</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=OMAP____OMAPS">Click for Omaps in the Full Manual</a></h3>

<p>A library of omaps (ordered maps), 
          i.e. finite maps represented as strictly ordered alists.</p><p>This is related to the library of <a href="ACL2____STD_F2OSETS.html">osets (ordered sets)</a>, i.e. finite sets represented as strictly ordered lists. 
     Like osets capture (up to isomorphism) 
     the mathematical notion of finite sets (over ACL2 objects), 
     omaps capture (up to isomorphism) 
     the mathematical notion of finite maps (over ACL2 objects). 
     In particular, omap equality is <span class="tt"><a href="COMMON-LISP____EQUAL.html">equal</a></span>.</p><p>Since the <a href="ACL2_____C3_C3.html">total order on ACL2 values</a> is lexicographic on <span class="tt"><a href="COMMON-LISP____CONS.html">cons</a></span> pairs, 
     an omap is an oset of <span class="tt"><a href="COMMON-LISP____CONS.html">cons</a></span> pairs; 
     furthermore, an omap is an alist. 
     While then, in principle, 
     some oset and alist operations could be used on omaps, 
     this library provides versions of those oset and alist operations 
     that have stronger guards 
     (i.e. requiring omaps instead of just osets or alists) 
     and that treat non-omaps as the empty omap. 
     That is, the omap operations respect a `non-map convention' 
     analogous to the <a href="SET____PRIMITIVES.html">non-set convention</a> respected by the oset operations; 
     some of the latter are, analogously, 
     versions of list operations (e.g. <span class="tt"><a href="SET____HEAD.html">set::head</a></span> for <span class="tt"><a href="COMMON-LISP____CAR.html">car</a></span>), 
     motivated by the fact that the list operations 
     do not respect the non-set convention.</p><p>The omap operations 
     <span class="tt"><a href="OMAP____MAPP.html">mapp</a></span>, 
     <span class="tt"><a href="OMAP____MFIX.html">mfix</a></span>, 
     <span class="tt"><a href="OMAP____EMPTY.html">empty</a></span>, 
     <span class="tt"><a href="OMAP____HEAD.html">head</a></span>, 
     <span class="tt"><a href="OMAP____TAIL.html">tail</a></span>, and 
     <span class="tt"><a href="OMAP____UPDATE.html">update</a></span> 
     are ``primitive'' in the same sense as the <a href="SET____PRIMITIVES.html">oset primitives</a>: their logical definitions depend on 
     the underlying representation as alists, 
     and provide replacements of alist operations 
     that respect the `non-map convention'. 
     The logical definitions of the other omap operations 
     are in terms of the primitive operations, 
     without reference to the underlying alist representation.</p><p>There are different logically equivalent ways to define omap operations. 
     The current definitions (as well as their names) are preliminary 
     and could be improved if needed; 
     these definitions favor ease of reasoning over efficiency of execution, 
     but, as done in osets, <span class="tt"><a href="ACL2____MBE.html">mbe</a></span> could be used to provide 
     provably equivalent efficient definitions for execution. 
     As it is often possible to reason about osets abstractly 
     (i.e. without regard to their underlying list representation), 
     it should be often possible to reason about omaps abstractly 
     (i.e. without regard to their underlying alist representation), 
     using the theorems provided by this library. 
     The current theorems are preliminary 
     and could be improved and extended if needed. 
     The empty omap is <span class="v">nil</span>, like the empty oset; 
     there is no separate operation for the empty omap, 
     as there is none for the empty oset.</p><p>Since osets are in the <span class="v">"SET"</span> package, 
     it would be natural to use a <span class="v">"MAP</span> package for omaps. 
     However, a package with this name is already defined 
     in <span class="v">[books]/coi/maps/package.lsp</span> (see below). 
     So, we use <span class="v">"OMAP"</span> for omaps 
     to allow interoperability with this <span class="v">coi</span> map library, 
     in the sense that an application can use both <span class="v">coi</span> maps and omaps. 
     Perhaps the <span class="v">"SET"</span> package for osets 
     could be renamed to <span class="v">"OSET"</span> at some point, 
     for consistency. 
     (A similar issue applies to the library of obags, i.e. ordered bags, 
     and the <span class="v">[books]/coi/bags</span> library, 
     which defines a <span class="v">"BAG"</span> package.)</p><p>This omap library could become a new <span class="v">std/omaps</span> library, 
     part of <a href="ACL2____STD.html">Std</a>, parallel to <span class="tt"><a href="ACL2____STD_F2OSETS.html">ACL2::std/osets</a></span>.</p><p>Compared to using the built-in <a href="ACL2____ALISTS.html">ACL2::alists</a> to represent maps, 
     omaps are closer to the mathematical notion of maps, 
     at the cost of maintaining their strict order. 
     These tradeoffs are analogous to the ones between using osets 
     and using the built-in <a href="ACL2____LISTS.html">ACL2::lists</a> to represent sets. 
     The map library in <span class="v">[books]/coi/maps/</span> 
     operates on possibly unordered alists.</p><p>Compared to the records in <a href="ACL2____MISC_F2RECORDS.html"><span class="v">[books]/misc/records.lisp</span></a> and <span class="v">[books]/coi/records/</span>, 
     omaps allow any value to be associated to keys, 
     without having to exclude <span class="v">nil</span> or some other fixed value. 
     Furthermore, as noted in the comments in <span class="v">[books]/coi/maps/maps.lisp</span>, 
     the `get' operation on those records 
     does not always yield a value smaller than the map. 
     On the other hand, theorems about omaps have generally more hypotheses 
     than the theorems about records.</p>
</body>
</html>
