<html>
<head>
<meta charset="UTF-8">
<title>Printer</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=VL____PRINTER">Click for Printer in the Full Manual</a></h3>

<p>The VL printer is a tool for building strings.  It is generally used 
to pretty-print our internal Verilog <a href="VL____SYNTAX.html">syntax</a> back out into text or HTML. 
This is very useful in <a href="VL____WARNINGS.html">warnings</a>, the <a href="VL____VL-SERVER.html">vl-server</a>, and other 
contexts.</p><p>We implement an applicative ``printer'' for building strings. 
Building strings incrementally is difficult in an applicative setting.  Our 
printer is implemented using a <a href="ACL2____STOBJ.html">ACL2::stobj</a> named <a href="VL____PS.html">ps</a>.  The act of 
``printing'' to this stobj essentially just accumulates characters (or strings) 
onto a <a href="VL____VL-PRINTEDLIST.html">vl-printedlist</a>.  The printed elements are kept in reverse order, 
which makes it reasonably efficient to successively print small chunks of 
text.</p> 
 
<p>Our printer has a variety of configurable features that are useful for 
pretty-printing source code, including:</p> 
 
<ul> 
<li>Support for both text and HTML output</li> 
<li>Automatic column tracking (for, e.g., tab support and line wrapping)</li> 
<li>Automatic word-wrapping of long lines</li> 
<li>A print base for controlling numeric output (e.g., print numbers in hex)</li> 
<li>Other miscellaneous settings</li> 
</ul> 
 
<p>Supporting HTML is subtle because, depending on the context, you may wish to 
write:</p> 
 
<ul> 
 
<li>
<b>HTML markup</b> (e.g., <span class="v">&lt;b&gt;</span>, <span class="v">&lt;code&gt;</span>, ...), where special 
characters like <span class="v">&lt;</span> are not to be changed, and where all of the characters 
in these tags will be ``invisible'' to the user and should not affect the 
current column number.</li> 
 
<li>
<b>Parts of URLs</b> (e.g., filenames), which must be "percent encoded" 
per <a href="https://www.ietf.org/rfc/rfc3986.txt" target="_blank"><nobr>RFC 3986<img src="../Icon_External_Link.png" title="External link to https://www.ietf.org/rfc/rfc3986.txt"></nobr></a>, e.g., space 
characters become <span class="v">%20</span>.  These, too, do not affect the column number 
because they take part only in tags such as <span class="v">&lt;a href="..."&gt;</span>.</li> 
 
<li>
<b>Ordinary text</b>, where special characters like <span class="v">&amp;</span> and <span class="v">&lt;</span> 
become <span class="v">&amp;amp;</span> and <span class="v">&amp;lt;</span>.  Here we also print tabs as a sequence of 
<span class="v">&amp;nbsp;</span> characters, and we advance the column number as characters are 
printed.</li> 
 
</ul>
</body>
</html>
