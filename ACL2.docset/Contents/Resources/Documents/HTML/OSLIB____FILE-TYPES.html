<html>
<head>
<meta charset="UTF-8">
<title>File-types</title>
<link rel="stylesheet" type="text/css" href="../style.css"/>
</head>
<body>

<h3><a href="../index.html?topic=OSLIB____FILE-TYPES">Click for File-types in the Full Manual</a></h3>

<p>Functions for working with file types, e.g., regular files versus 
directories, devices, etc.</p><p>Many of these functions are just ACL2 wrappers for the Common Lisp 
<a href="http://common-lisp.net/project/osicat/" target="_blank"><nobr>Osicat<img src="../Icon_External_Link.png" title="External link to http://common-lisp.net/project/osicat/"></nobr></a> library.  Unlike 
the more basic file reading/writing operations (see <a href="ACL2____STD_F2IO.html">ACL2::std/io</a>), there 
is no complex logical story for reasoning about these operations.  Instead, in 
the logic, practically everything here is just reading the oracle.</p> 
 
<p>As a general rule, these functions are <b>not entirely portable</b>, 
especially regarding special characters like <span class="v">~</span>, <span class="v">..</span>, <span class="v">\</span>, <span class="v">*</span> 
in path names.  Paths containing these things will certainly not behave in the 
same way across different operating systems, and for that matter they may not 
even behave the same way on the same operating system, but in different Lisps. 
There's not much to be done for this, as the root causes are the lack of 
standards among file systems and Common Lisp implementations.</p> 
 
<p>Some possibly helpful reading about file systems in general and in Lisp:</p> 
 
<ul> 
 
<li>David A. Wheeler. <a href="http://www.dwheeler.com/essays/fixing-unix-linux-filenames.html" target="_blank"><nobr>Fixing 
Unix/Linux/POSIX Filenames: Control Characters (such as Newline), Leading 
Dashes, and Other Problems<img src="../Icon_External_Link.png" title="External link to http://www.dwheeler.com/essays/fixing-unix-linux-filenames.html"></nobr></a>.</li> 
 
<li>Peter Seibel's <a href="http://www.gigamonkeys.com/book/" target="_blank"><nobr>Practical Common 
Lisp<img src="../Icon_External_Link.png" title="External link to http://www.gigamonkeys.com/book/"></nobr></a>, especially the chapters on <a href="http://www.gigamonkeys.com/book/files-and-file-io.html" target="_blank"><nobr>Files and File 
I/O<img src="../Icon_External_Link.png" title="External link to http://www.gigamonkeys.com/book/files-and-file-io.html"></nobr></a> and <a href="http://www.gigamonkeys.com/book/practical-a-portable-pathname-library.html" target="_blank"><nobr>Practical: 
A Portable Pathname Library<img src="../Icon_External_Link.png" title="External link to http://www.gigamonkeys.com/book/practical-a-portable-pathname-library.html"></nobr></a>.</li> 
 
<li>The Common Lisp <a href="http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/FrontMatter/Chapter-Index.html" target="_blank"><nobr>Hyperspec<img src="../Icon_External_Link.png" title="External link to http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/FrontMatter/Chapter-Index.html"></nobr></a>, 
especially the chapters on <a href="http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/Body/chap-19.html" target="_blank"><nobr>file 
names<img src="../Icon_External_Link.png" title="External link to http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/Body/chap-19.html"></nobr></a> and <a href="http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/Body/chap-20.html" target="_blank"><nobr>files<img src="../Icon_External_Link.png" title="External link to http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/Body/chap-20.html"></nobr></a>.</li> 
 
<li>The <a href="http://weitz.de/cl-fad/" target="_blank"><nobr>CL-FAD<img src="../Icon_External_Link.png" title="External link to http://weitz.de/cl-fad/"></nobr></a> (Common Lisp Files and 
Directories) library is perhaps similar to <span class="v">osicat</span>, but doesn't seem to 
have any support for querying what type of file you're looking at, etc., so we 
don't currently use it.</li> 
 
</ul> 
 
<h3>Future work</h3> 
 
<p>BOZO I would really like to have tests like -r, -w, and -x in Perl/Bash.  It 
looks like osicat gives me a way to access the permissions of a file, but 
these seem like just the rwx bits from the "stat" structure, and I don't 
think that's actually tells us anything useful, unless the file happens to 
be owned by us---at least, not without some way to figure out what groups 
our user is in, etc.</p> 
 
<p>The source code for Gnu's "test" utility (from coreutils) invokes the 
EUIDACCESS system call to figure out whether the argument is readable, 
writable, or executable.  So that'd probably be the nicest thing to use.  So 
maybe we could rig something up with CFFI to invoke that, but I am in way over 
my head here, and even if we did that, it'd probably just be a solution for 
Linux.  Who knows how Windows or FreeBSD or Darwin or anything else do 
it.</p>
</body>
</html>
